cscope 15 $HOME/p4eric/repos/trunk               0000583536
	@build/src_hardware_indep/actions.c

1 
	~"odp_lib.h
"

2 
	~"aùiÚs.h
"

3 
	~<uni¡d.h
>

4 
	~<¬·/š‘.h
>

5 
back’d
 
bg
;

7 
	$aùiÚ_code__nİ
(
·ck‘_desütÜ_t
* 
pkt
, 
lookup_bË_t
** 
bËs
 ) {

8 
ušt32_t
 
v®ue32
, 
»s32
;

9 ()
v®ue32
;

10 ()
»s32
;

11 
	}
}

13 
	$aùiÚ_code_mac_Ë¬n
(
·ck‘_desütÜ_t
* 
pkt
, 
lookup_bË_t
** 
bËs
 ) {

14 
ušt32_t
 
v®ue32
, 
»s32
;

15 ()
v®ue32
;

16 ()
»s32
;

17 
ty³_f›ld_li¡
 
f›lds
;

18 
f›lds
.
f›lds_quªt™y
 = 2;

19 
f›lds
.
f›ld_off£ts
 = 
	`m®loc
((
ušt8_t
*)*f›lds.
f›lds_quªt™y
);

20 
f›lds
.
f›ld_widths
 = 
	`m®loc
((
ušt8_t
*)*f›lds.
f›lds_quªt™y
);

21 
f›lds
.
f›ld_off£ts
[0] = (
ušt8_t
*è(
pkt
->
h—d”s
[
h—d”_š¡ªû_‘h”Ãt
].
poš‹r
 + 
f›ld_š¡ªû_by‹_off£t_hdr
[
f›ld_š¡ªû_‘h”Ãt_¤cAddr
]);

22 
f›lds
.
f›ld_widths
[0] = 
f›ld_š¡ªû_b™_width
[
f›ld_š¡ªû_‘h”Ãt_¤cAddr
]*8;

23 
f›lds
.
f›ld_off£ts
[1] = (
ušt8_t
*è(
pkt
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
].
poš‹r
 + 
f›ld_š¡ªû_by‹_off£t_hdr
[
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
]);

24 
f›lds
.
f›ld_widths
[1] = 
f›ld_š¡ªû_b™_width
[
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
]*8;

26 
	`g’”©e_dige¡
(
bg
,"mac_Ë¬n_dige¡",0,&
f›lds
); 
	`¦“p
(1);

27 
	}
}

29 
	$aùiÚ_code_fÜw¬d
(
·ck‘_desütÜ_t
* 
pkt
, 
lookup_bË_t
** 
bËs
 , 
aùiÚ_fÜw¬d_·¿ms
 
·¿m‘”s
) {

30 
ušt32_t
 
v®ue32
, 
»s32
;

31 ()
v®ue32
;

32 ()
»s32
;

33 
	`MODIFY_INT32_BYTEBUF
(
pkt
, 
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
, 
·¿m‘”s
.
pÜt
, 2)

35 
	}
}

37 
	$aùiÚ_code_bÿ¡
(
·ck‘_desütÜ_t
* 
pkt
, 
lookup_bË_t
** 
bËs
 ) {

38 
ušt32_t
 
v®ue32
, 
»s32
;

39 ()
v®ue32
;

40 ()
»s32
;

41 
v®ue32
 = 100;

42 
	`MODIFY_INT32_INT32
(
pkt
, 
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
, 
v®ue32
)

44 
	}
}

	@build/src_hardware_indep/actions.h

1 #iâdeà
__ACTION_INFO_GENERATED_H__


2 
	#__ACTION_INFO_GENERATED_H__


3 

	)

5 
	#FIELD
(
Çme
, 
Ëngth
è
ušt8_t
‚ame[(length + 7) / 8];

6 

	)

7 
	eaùiÚs
 {

8 
	maùiÚ_mac_Ë¬n
,

9 
	maùiÚ__nİ
,

10 
	maùiÚ_fÜw¬d
,

11 
	maùiÚ_bÿ¡
,

13 
	saùiÚ_fÜw¬d_·¿ms
 {

14 
FIELD
(
pÜt
, 9);

16 
	ssmac_aùiÚ
 {

17 
	maùiÚ_id
;

21 
	sdmac_aùiÚ
 {

22 
	maùiÚ_id
;

24 
aùiÚ_fÜw¬d_·¿ms
 
	mfÜw¬d_·¿ms
;

27 
aùiÚ_code_mac_Ë¬n
(
·ck‘_desütÜ_t
 *
pd
, 
lookup_bË_t
 **
bËs
);

28 
aùiÚ_code__nİ
(
·ck‘_desütÜ_t
 *
pd
, 
lookup_bË_t
 **
bËs
);

29 
aùiÚ_code_fÜw¬d
(
·ck‘_desütÜ_t
 *
pd
, 
lookup_bË_t
 **
bËs
, 
aùiÚ_fÜw¬d_·¿ms
);

30 
aùiÚ_code_bÿ¡
(
·ck‘_desütÜ_t
 *
pd
, 
lookup_bË_t
 **
bËs
);

	@build/src_hardware_indep/controlplane.c

1 
	~"odp_lib.h
"

2 
	~"aùiÚs.h
"

4 
bË_£tdeçuÉ_´omÙe
 (
bËid
, 
ušt8_t
* 
v®ue
);

5 
exaù_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
);

6 
Ím_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
);

7 
‹º¬y_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

9 
bË_smac_key
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
key
);

10 
bË_dmac_key
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
key
);

13 
	$smac_add
(

14 
ušt8_t
 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
[6],

15 
smac_aùiÚ
 
aùiÚ
)

17 
ušt8_t
 
key
[6];

18 
	`memıy
(
key
+0, 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
, 6);

19 
	`exaù_add_´omÙe
(
TABLE_smac
, (
ušt8_t
*)
key
, (ušt8_t*)&
aùiÚ
);

20 
	}
}

23 
	$smac_£tdeçuÉ
(
smac_aùiÚ
 
aùiÚ
)

25 
	`bË_£tdeçuÉ_´omÙe
(
TABLE_smac
, (
ušt8_t
*)&
aùiÚ
);

26 
	}
}

28 
	$dmac_add
(

29 
ušt8_t
 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
[6],

30 
dmac_aùiÚ
 
aùiÚ
)

32 
ušt8_t
 
key
[6];

33 
	`memıy
(
key
+0, 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
, 6);

34 
	`exaù_add_´omÙe
(
TABLE_dmac
, (
ušt8_t
*)
key
, (ušt8_t*)&
aùiÚ
);

35 
	}
}

38 
	$dmac_£tdeçuÉ
(
dmac_aùiÚ
 
aùiÚ
)

40 
	`bË_£tdeçuÉ_´omÙe
(
TABLE_dmac
, (
ušt8_t
*)&
aùiÚ
);

41 
	}
}

43 
	$smac_add_bË_’Œy
(
p4_ù¾_msg
* 
ù¾_m
) {

44 
ušt8_t
* 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
 = (ušt8_t*)(((
p4_f›ld_m©ch_exaù
*)
ù¾_m
->
f›ld_m©ches
[0])->
b™m­
);

45 if(
	`¡rcmp
("mac_Ë¬n", 
ù¾_m
->
aùiÚ_Çme
)==0) {

46 
smac_aùiÚ
 
aùiÚ
;

47 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ_mac_Ë¬n
;

48 
	`´štf
("Reply fromhe control…lane‡rrived.\n");

49 
	`´štf
("Addig‚ewƒntryo smac with‡ction mac_learn\n");

50 
	`smac_add
(

51 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
,

52 
aùiÚ
);

54 if(
	`¡rcmp
("_nİ", 
ù¾_m
->
aùiÚ_Çme
)==0) {

55 
smac_aùiÚ
 
aùiÚ
;

56 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ__nİ
;

57 
	`´štf
("Reply fromhe control…lane‡rrived.\n");

58 
	`´štf
("Addig‚ewƒntryo smac with‡ction _nop\n");

59 
	`smac_add
(

60 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
,

61 
aùiÚ
);

63 
	}
}

65 
	$dmac_add_bË_’Œy
(
p4_ù¾_msg
* 
ù¾_m
) {

66 
ušt8_t
* 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
 = (ušt8_t*)(((
p4_f›ld_m©ch_exaù
*)
ù¾_m
->
f›ld_m©ches
[0])->
b™m­
);

67 if(
	`¡rcmp
("fÜw¬d", 
ù¾_m
->
aùiÚ_Çme
)==0) {

68 
dmac_aùiÚ
 
aùiÚ
;

69 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ_fÜw¬d
;

70 
aùiÚ
.
fÜw¬d_·¿ms
;

71 
ušt8_t
* 
pÜt
 = (ušt8_t*)((
p4_aùiÚ_·¿m‘”
*)
ù¾_m
->
aùiÚ_·¿ms
[0])->
b™m­
;

72 
	`memıy
(
aùiÚ
.
fÜw¬d_·¿ms
.
pÜt
,…ort, 2);

73 
	`´štf
("Reply fromhe control…lane‡rrived.\n");

74 
	`´štf
("Addig‚ewƒntryo dmac with‡ction forward\n");

75 
	`dmac_add
(

76 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
,

77 
aùiÚ
);

79 if(
	`¡rcmp
("bÿ¡", 
ù¾_m
->
aùiÚ_Çme
)==0) {

80 
dmac_aùiÚ
 
aùiÚ
;

81 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ_bÿ¡
;

82 
	`´štf
("Reply fromhe control…lane‡rrived.\n");

83 
	`´štf
("Addig‚ewƒntryo dmac with‡ction bcast\n");

84 
	`dmac_add
(

85 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
,

86 
aùiÚ
);

88 
	}
}

89 
	$»cv_äom_cÚŒŞËr
(
p4_ù¾_msg
* 
ù¾_m
) {

90 ià(
ù¾_m
->
ty³
 =ğ
P4T_ADD_TABLE_ENTRY
) {

91 ià(
	`¡rcmp
("smac", 
ù¾_m
->
bË_Çme
) == 0)

92 
	`smac_add_bË_’Œy
(
ù¾_m
);

93 ià(
	`¡rcmp
("dmac", 
ù¾_m
->
bË_Çme
) == 0)

94 
	`dmac_add_bË_’Œy
(
ù¾_m
);

96 
	}
}

97 
back’d
 
	gbg
;

98 
	$š™_cÚŒŞ_¶ªe
()

100 
	`´štf
("Creating control…lane connection...\n");

101 
bg
 = 
	`ü—‹_back’d
(3, 1000, "loÿlho¡", 11111, 
»cv_äom_cÚŒŞËr
);

102 
	`Ïunch_back’d
(
bg
);

103 
smac_aùiÚ
 
aùiÚ
;

104 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ_mac_Ë¬n
;

105 
	`smac_£tdeçuÉ
(
aùiÚ
);

106 
	`´štf
("smac setdefault\n");

107 
dmac_aùiÚ
 
aùiÚ2
;

108 
aùiÚ2
.
aùiÚ_id
 = 
aùiÚ_bÿ¡
;

109 
	`dmac_£tdeçuÉ
(
aùiÚ2
);

110 
	`´štf
("dmac setdefault\n");

111 
	}
}

	@build/src_hardware_indep/data_plane_data.h

1 #iâdeà
__DATA_PLANE_DATA_H__


2 
	#__DATA_PLANE_DATA_H__


3 

	)

4 
	~"·r£r.h
"

6 
	#NB_TABLES
 2

7 

	)

8 
	#TABLE_smac
 0

9 
	#TABLE_dmac
 1

10 

	)

	@build/src_hardware_indep/dataplane.c

1 
	~<¡dlib.h
>

2 
	~<¡ršg.h
>

3 
	~"odp_lib.h
"

4 
	~"aùiÚs.h
"

7 
·r£_·ck‘
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
);

9 
­¶y_bË_smac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
);

10 
­¶y_bË_dmac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
);

12 
	$bË_smac_key
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
key
) {

13 
f›ld_»ã»nû_t
 
f
;

14 ()
f
;

15 
	`EXTRACT_BYTEBUF
(
pd
, 
f›ld_š¡ªû_‘h”Ãt_¤cAddr
, 
key
)

16 
key
 += 6;

17 
	}
}

19 
	$bË_dmac_key
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
key
) {

20 
f›ld_»ã»nû_t
 
f
;

21 ()
f
;

22 
	`EXTRACT_BYTEBUF
(
pd
, 
f›ld_š¡ªû_‘h”Ãt_d¡Addr
, 
key
)

23 
key
 += 6;

24 
	}
}

26 
	$­¶y_bË_smac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
)

28 #ià
debug
 == 1

29 
	`´štf
(" :::: EXECUTING TABLE smac\n");

31 
ušt8_t
* 
key
[6];

32 
	`bË_smac_key
(
pd
, (
ušt8_t
*)
key
);

33 
smac_aùiÚ
* 
»s
 = (smac_aùiÚ*)
	`exaù_lookup
(
bËs
[
TABLE_smac
], (
ušt8_t
*)
key
);

34 if(
»s
 =ğ
NULL
) {

35 #ià
debug
 == 1

36 
	`´štf
(" :: NO RESULT, NO DEFAULT ACTION, IGNORING PACKET... key:0x%08x\n", ()*
key
);

40 
»s
->
aùiÚ_id
) {

41 
aùiÚ_mac_Ë¬n
:

42 #ià
debug
 == 1

43 
	`´štf
(" :: EXECUTING ACTION mac_learn...\n");

45 
	`aùiÚ_code_mac_Ë¬n
(
pd
, 
bËs
);

47 
aùiÚ__nİ
:

48 #ià
debug
 == 1

49 
	`´štf
(" :: EXECUTING ACTION _nop...\n");

51 
	`aùiÚ_code__nİ
(
pd
, 
bËs
);

54 
»s
->
aùiÚ_id
) {

55 
aùiÚ_mac_Ë¬n
:

56 
	`­¶y_bË_dmac
(
pd
, 
bËs
);

58 
aùiÚ__nİ
:

59 
	`­¶y_bË_dmac
(
pd
, 
bËs
);

62 
	}
}

64 
	$­¶y_bË_dmac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
)

66 #ià
debug
 == 1

67 
	`´štf
(" :::: EXECUTING TABLE dmac\n");

69 
ušt8_t
* 
key
[6];

70 
	`bË_dmac_key
(
pd
, (
ušt8_t
*)
key
);

71 
dmac_aùiÚ
* 
»s
 = (dmac_aùiÚ*)
	`exaù_lookup
(
bËs
[
TABLE_dmac
], (
ušt8_t
*)
key
);

72 if(
»s
 =ğ
NULL
) {

73 #ià
debug
 == 1

74 
	`´štf
(" :: NO RESULT, NO DEFAULT ACTION, IGNORING PACKET... key:0x%08x\n", ()*
key
);

78 
»s
->
aùiÚ_id
) {

79 
aùiÚ_fÜw¬d
:

80 #ià
debug
 == 1

81 
	`´štf
(" :: EXECUTING ACTION forward...\n");

83 
	`aùiÚ_code_fÜw¬d
(
pd
, 
bËs
, 
»s
->
fÜw¬d_·¿ms
);

85 
aùiÚ_bÿ¡
:

86 #ià
debug
 == 1

87 
	`´štf
(" :: EXECUTING ACTION bcast...\n");

89 
	`aùiÚ_code_bÿ¡
(
pd
, 
bËs
);

92 
»s
->
aùiÚ_id
) {

94 
	}
}

105 
	$hªdË_·ck‘
(
·ck‘_desütÜ_t
* 
pd
)

107 
	`´štf
("handle…acket called");

108 
	}
}

	@build/src_hardware_indep/generated_metadata.h

1 #iâdeà
__GENERATED_METADATA_H_


2 
	#__GENERATED_METADATA_H_


3 

	)

4 
	sf›ldli¡_mac_Ë¬n_dige¡_t


6 * 
	m‘h”Ãt_¤cAddr
;

11 
	uªy_f›ldli¡_t


13 
f›ldli¡_mac_Ë¬n_dige¡_t
 
	mf›ldli¡_mac_Ë¬n_dige¡
;

	@build/src_hardware_indep/parser.c

2 
	~"odp_lib.h
"

3 
	$´št_mac
(
ušt8_t
* 
v
è{ 
	`´štf
("%02hhX:%02hhX:%02hhX:%02hhX:%02hhX:%02hhX\n", v[0], v[1], v[2], v[3], v[4], v[5]); 
	}
}

4 
	$´št_
(
ušt8_t
* 
v
è{ 
	`´štf
("%d.%d.%d.%d\n",v[0],v[1],v[2],v[3]); 
	}
}

6 
šlše
 
	$p4_³_h—d”_too_shÜt
(
·ck‘_desütÜ_t
 *
pd
) {

7 
	`drİ
(
pd
->
·ck‘
);

8 
	}
}

9 
šlše
 
	$p4_³_deçuÉ
(
·ck‘_desütÜ_t
 *
pd
) {

10 
	`drİ
(
pd
->
·ck‘
);

11 
	}
}

12 
šlše
 
	$p4_³_checksum
(
·ck‘_desütÜ_t
 *
pd
) {

13 
	`drİ
(
pd
->
·ck‘
);

14 
	}
}

15 
šlše
 
	$p4_³_unhªdËd_£Ëù
(
·ck‘_desütÜ_t
 *
pd
) {

16 
	`drİ
(
pd
->
·ck‘
);

17 
	}
}

18 
šlše
 
	$p4_³_šdex_out_of_bounds
(
·ck‘_desütÜ_t
 *
pd
) {

19 
	`drİ
(
pd
->
·ck‘
);

20 
	}
}

21 
šlše
 
	$p4_³_h—d”_too_lÚg
(
·ck‘_desütÜ_t
 *
pd
) {

22 
	`drİ
(
pd
->
·ck‘
);

23 
	}
}

24 
šlše
 
	$p4_³_out_of_·ck‘
(
·ck‘_desütÜ_t
 *
pd
) {

25 
	`drİ
(
pd
->
·ck‘
);

26 
	}
}

28 
­¶y_bË_smac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
);

29 
­¶y_bË_dmac
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
);

32 
	$exŒaù_h—d”
(
ušt8_t
* 
buf
, 
·ck‘_desütÜ_t
* 
pd
, 
h—d”_š¡ªû_t
 
h
) {

33 
pd
->
h—d”s
[
h
] =

34 (
h—d”_desütÜ_t
) {

35 .
ty³
 = 
h
,

36 .
poš‹r
 = 
buf
,

37 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h
]

39 
	}
}

41 
·r£_¡©e_¡¬t
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
buf
, 
lookup_bË_t
** 
bËs
);

42 
·r£_¡©e_·r£_‘h”Ãt
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
buf
, 
lookup_bË_t
** 
bËs
);

44 
	$·r£_¡©e_¡¬t
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
buf
, 
lookup_bË_t
** 
bËs
)

46  
	`·r£_¡©e_·r£_‘h”Ãt
(
pd
, 
buf
, 
bËs
);

47 
	}
}

49 
	$·r£_¡©e_·r£_‘h”Ãt
(
·ck‘_desütÜ_t
* 
pd
, 
ušt8_t
* 
buf
, 
lookup_bË_t
** 
bËs
)

51 
	`exŒaù_h—d”
(
buf
, 
pd
, 
h—d”_š¡ªû_‘h”Ãt
);

52 
buf
 +ğ
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_‘h”Ãt
];

53 #ià
debug
 == 1

54 
	`´štf
(" :::: PACKET PARSED\n");

55 
	`´štf
(" ::ƒthernet srcaddr: ");

56 
	`´št_mac
(
	`exŒaù_by‹buf
(
pd
, 
	`f›ld_desc
(
f›ld_š¡ªû_‘h”Ãt_¤cAddr
)));

57 
	`´štf
(" ::ƒthernet dstaddr: ");

58 
	`´št_mac
(
	`exŒaù_by‹buf
(
pd
, 
	`f›ld_desc
(
f›ld_š¡ªû_‘h”Ãt_d¡Addr
)));

63 
i
 = 0; i < 
HEADER_INSTANCE_COUNT
; ++i) {

64 
	`´štf
(" :: h—d” %d (ty³=%d,†’=%dèğ", 
i
, 
pd
->
h—d”s
[i].
ty³
,…d->h—d”s[i].
Ëngth
);

65 
j
 = 0; j < 
pd
->
h—d”s
[
i
].
Ëngth
; ++j) {

66 
	`´štf
("%02x ", ((
ušt8_t
*)(
pd
->
h—d”s
[
i
].
poš‹r
))[
j
]);

68 
	`´štf
("\n");

71 
	`´štf
(" :::: TURNING TO TABLE smac\n");

73  
	`­¶y_bË_smac
(
pd
, 
bËs
);

74 
	}
}

76 
	$š™_m‘ad©a_h—d”s
(
·ck‘_desütÜ_t
* 
·ck‘_desc
) {

77 
	}
}

79 
	$·r£_·ck‘
(
·ck‘_desütÜ_t
* 
pd
, 
lookup_bË_t
** 
bËs
) {

80 
	`š™_m‘ad©a_h—d”s
(
pd
);

81 
	`·r£_¡©e_¡¬t
(
pd
,…d->
poš‹r
, 
bËs
);

82 
	}
}

	@build/src_hardware_indep/parser.h

1 #iâdeà
__HEADER_INFO_H__


2 
	#__HEADER_INFO_H__


3 

	)

4 
	#HEADER_INSTANCE_COUNT
 2

5 
	#FIELD_INSTANCE_COUNT
 11

6 

	)

7 
	~<¡dšt.h
>

9 
	eh—d”_š¡ªû_e
 {

10 
	mh—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

11 
	mh—d”_š¡ªû_‘h”Ãt


15 
	ef›ld_š¡ªû_e
 {

16 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
,

17 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_·ck‘_Ëngth
,

18 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_¥ec
,

19 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
,

20 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_š¡ªû
,

21 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_š¡ªû_ty³
,

22 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_şÚe_¥ec
,

23 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a__·ddšg
,

24 
	mf›ld_š¡ªû_‘h”Ãt_d¡Addr
,

25 
	mf›ld_š¡ªû_‘h”Ãt_¤cAddr
,

26 
	mf›ld_š¡ªû_‘h”Ãt_‘h”Ty³


30 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

31 
f›ld_š¡ªû_e
 
	tf›ld_š¡ªû_t
;

32 cÚ¡ 
	gh—d”_š¡ªû_by‹_width
[
HEADER_INSTANCE_COUNT
] = {

38 cÚ¡ 
	gh—d”_š¡ªû_is_m‘ad©a
[
HEADER_INSTANCE_COUNT
] = {

44 cÚ¡ 
	gf›ld_š¡ªû_b™_width
[
FIELD_INSTANCE_COUNT
] = {

59 cÚ¡ 
	gf›ld_š¡ªû_b™_off£t
[
FIELD_INSTANCE_COUNT
] = {

74 cÚ¡ 
	gf›ld_š¡ªû_by‹_off£t_hdr
[
FIELD_INSTANCE_COUNT
] = {

89 cÚ¡ 
ušt32_t
 
	gf›ld_š¡ªû_mask
[
FIELD_INSTANCE_COUNT
] = {

104 cÚ¡ 
h—d”_š¡ªû_t
 
	gf›ld_š¡ªû_h—d”
[
FIELD_INSTANCE_COUNT
] = {

105 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

106 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

107 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

108 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

109 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

110 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

111 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

112 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
 ,

113 
h—d”_š¡ªû_‘h”Ãt
 ,

114 
h—d”_š¡ªû_‘h”Ãt
 ,

115 
h—d”_š¡ªû_‘h”Ãt


	@build/src_hardware_indep/tables.c

1 
	~"d©­ÏÃ.h
"

2 
	~"aùiÚs.h
"

3 
	~"d©a_¶ªe_d©a.h
"

5 
lookup_bË_t
 
	gbË_cÚfig
[
NB_TABLES
] = {

7 .
Çme
= "smac",

8 .
	gty³
 = 
LOOKUP_EXACT
,

9 .
	gkey_size
 = 6,

10 .
	gv®_size
 = (
smac_aùiÚ
),

11 .
	gmš_size
 = 0,

12 .
	gmax_size
 = 255

15 .
	gÇme
= "dmac",

16 .
	gty³
 = 
LOOKUP_EXACT
,

17 .
	gkey_size
 = 6,

18 .
	gv®_size
 = (
dmac_aùiÚ
),

19 .
	gmš_size
 = 0,

20 .
	gmax_size
 = 255

	@examples/p4_src/includes/p4_l2_features.h

1 #iâdeà
_P4_L2L3_FEATURES_H_


2 
	#_P4_L2L3_FEATURES_H_


	)

4 
	#CPU_PORT
 0xAA

5 

	)

	@src/hardware_dep/dpdk/ctrl_plane/controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<±h»ad.h
>

5 
	~<¡ršg.h
>

6 
	~<¡dlib.h
>

7 
	~<Ãtš‘/š.h
>

8 
	~<sys/ty³s.h
>

9 
	~<sys/sock‘.h
>

10 
	~"sock_h–³rs.h
"

11 
	~"fifo.h
"

12 
	~<sys/£Ëù.h
>

13 
	~"th»adpoŞ.h
"

15 
	smsg_buf_¡


17 
	md©a
[2048];

18 
	mËngth
;

19 } 
	tmsg_buf_t
;

21 
	scÚŒŞËr_¡


23 
th»adpoŞ
 
	moŞ
;

24 
fifo_t
 
	mšput_queue
;

25 
fifo_t
 
	mouut_queue
;

26 
	mcÚŒŞËr_fd
;

27 
dige¡_hªdËr
 
	mdh
;

28 
	mpÜt
;

29 } 
	tcÚŒŞËr_t
;

31 
	sth»adšfo_¡
 {

32 
cÚŒŞËr_t
* 
	mù
;

33 
	msock_fd
;

34 } 
	tth»adšfo_t
;

37 
	$šput_´oûssÜ
(*
t
)

39 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

40 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

41 
msg_buf_t
* 
mem_ûÎ
;

45 
	`fifo_wa™
Ğ&(
ù
->
šput_queue
) );

46 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
šput_queue
));

48 ià(
mem_ûÎ
==0) ;

50 
ù
->
	`dh
Ğ
mem_ûÎ
->
d©a
 );

53 
	`ä“
Ğ
mem_ûÎ
 );

55 
	}
}

57 
	$ouut_´oûssÜ
(*
t
)

59 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

60 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

61 
msg_buf_t
* 
mem_ûÎ
;

65 
	`fifo_wa™
Ğ&(
ù
->
ouut_queue
) );

66 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
ouut_queue
));

68 ià(
mem_ûÎ
==0) ;

69 
	`wr™e_p4_msg
(
ti
->
sock_fd
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

70 
	`ä“
 ( 
mem_ûÎ
 );

72 
	}
}

74 
cÚŒŞËr
 
	$ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
)

76 
cÚŒŞËr_t
* 
ù
;

77 
sockaddr_š
 
£rv”
;

80 ià((
pÜt
<=0è|| (
numb”_of_th»ads
<=0))

83 
ù
 = (
cÚŒŞËr_t
*è
	`m®loc
((controller_t));

85 ià(
ù
==0)

88 
ù
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(3);

90 
	`fifo_š™
(&(
ù
->
šput_queue
));

91 
	`fifo_š™
(&(
ù
->
ouut_queue
));

92 
ù
->
dh
 = dh;

94 
ù
->
cÚŒŞËr_fd
 = 
	`sock‘
Ğ
PF_INET
, 
SOCK_STREAM
, 0 );

97 
£rv”
.
sš_çmy
 = 
AF_INET
;

98 
£rv”
.
sš_addr
.
s_addr
 = 
INADDR_ANY
;

99 
£rv”
.
sš_pÜt
 = 
	`htÚs
(
pÜt
);

100 
ù
->
pÜt
 =…ort;

103 
	`bšd
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
£rv”
,  server );

105 
	`li¡’
Ğ
ù
->
cÚŒŞËr_fd
, 5 );

107  (
cÚŒŞËr
)
ù
;

108 
	}
}

110 
	$de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
)

112 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

113 
	`de¡roy_th»adpoŞ
(
ù
->
oŞ
);

114 
	`fifo_de¡roy
Ğ&(
ù
->
šput_queue
) );

115 
	`fifo_de¡roy
Ğ&(
ù
->
ouut_queue
) );

116 
	`şo£
(
ù
->
cÚŒŞËr_fd
);

117 
	`ä“
(
ù
);

118 
	}
}

120 
	$execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
)

122 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

123 
sockaddr_š
 
ş›Á
;

124 
sockËn_t
 
Ëngth
;

125 
th»adšfo_t
* 
ti
;

126 
cÚn
;

127 
i
;

128 
rv
;

129 
fd_£t
 
ma¡”
;

130 
fd_£t
 
»adfds
;

131 
maxfds
 = 
ù
->
cÚŒŞËr_fd
;

132 
msg_buf_t
* 
mem_ûÎ
;

134 
	`FD_ZERO
(&
ma¡”
);

135 
	`FD_SET
(
ù
->
cÚŒŞËr_fd
, &
ma¡”
);

139 
»adfds
 = 
ma¡”
;

141 
	`£Ëù
(
maxfds
+1, &
»adfds
, 0,0,0);

143 
i
=0;i<
maxfds
+1;++i)

145 ià(
	`FD_ISSET
(
i
, &
»adfds
)) {

146 ià(
i
==
ù
->
cÚŒŞËr_fd
) {

147 ià((
cÚn
 = 
	`acû±
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
ş›Á
, &
Ëngth
 )) < 0 )

150 
	`´štf
("New device connected...\n");

151 
ti
 = (
th»adšfo_t
*è
	`m®loc
((threadinfo_t));

152 
ti
->
ù
 = ct;

153 
ti
->
sock_fd
 = 
cÚn
;

154 
	`di¥©ch
(
ù
->
oŞ
, 
ouut_´oûssÜ
, (*)
ti
);

155 
	`¦“p
(1);

156 
	`di¥©ch
(
ù
->
oŞ
, 
šput_´oûssÜ
, (*)
ti
);

157 
	`FD_SET
(
cÚn
, &
ma¡”
);

158 
maxfds
 = 
cÚn
>maxfds?conn:maxfds;

160 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

161 
mem_ûÎ
->
Ëngth
 = 2048;

162 ià((
rv
=
	`»ad_p4_msg
(
i
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

164 
	`fifo_add_msg
Ğ&(
ù
->
šput_queue
), (*)
mem_ûÎ
 );

165 } ià(
rv
==0) {

166 
	`FD_CLR
(
i
, &
ma¡”
);

167 
	`şo£
(
i
);

168 
	`ä“
(
mem_ûÎ
);

177 
	}
}

179 
	$£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
)

181 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

182 
msg_buf_t
* 
mem_ûÎ
;

183 ià(
Ëngth
>2048)

186 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

188 
	`memıy
(
mem_ûÎ
->
d©a
, 
bufãr
, 
Ëngth
);

189 
mem_ûÎ
->
Ëngth
 =†ength;

190 ifĞ
	`fifo_add_msg
Ğ&(
ù
->
ouut_queue
), (*)
mem_ûÎ
 )==0)

191 
	`´štf
("ERR!!\n");

194 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/controller.h

1 #iâdeà
__CONTROLLER_H__


2 
	#__CONTROLLER_H__
 1

	)

4 
	~<uni¡d.h
>

5 
	~<¡dio.h
>

6 
	~<¡dšt.h
>

8 * 
	tcÚŒŞËr
;

9 (*
	tdige¡_hªdËr
)(*);

12 
cÚŒŞËr
 
	`ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
);

13 
	`de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
);

15 
	`execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
);

16 
	`£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/dpdk/ctrl_plane/ctrl_plane_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<¡ršg.h
>

5 
	~<¡dlib.h
>

6 
	~<uni¡d.h
>

7 
	~<±h»ad.h
>

8 
	~"th»adpoŞ.h
"

9 
	~<sys/ty³s.h
>

10 
	~<sys/sock‘.h
>

11 
	~<Ãtš‘/š.h
>

12 
	~<Ãtdb.h
>

13 
	~"sock_h–³rs.h
"

14 
	~"fifo.h
"

15 
	~<sys/£Ëù.h
>

17 
	#P4_BG_MEM_CELL_SIZE
 2048

	)

18 
	#P4_BG_QUEUE_SIZE
 1024

	)

20 
	#MIN
(
x
,
y
è(((xè< (y)è? (xè: (y))

	)

22 
	smem_ûÎ_¡
 {

23 * 
	md©a
;

24 
ušt16_t
 
	mËngth
;

25 
mem_ûÎ_¡
* 
	mÃxt
;

26 
mem_ûÎ_¡
* 
	m´ev
;

27 } 
	tmem_ûÎ_t
;

29 
	sback’d_¡
 {

30 * 
	mmsg_bufãr
;

31 
mem_ûÎ_t
* 
	munu£d_h—d
;

32 
mem_ûÎ_t
* 
	mu£d_h—d
;

33 
±h»ad_mu‹x_t
 
	mmemlock
;

34 
±h»ad_cÚd_t
 
	mmem_nÙ_em±y
;

35 
±h»ad_cÚd_t
 
	mmem_em±y
;

36 
	mshutdown
;

37 
	mdÚt_acû±
;

38 
th»adpoŞ
 
	moŞ
;

39 
	mcÚŒŞËr_fd
;

40 
sockaddr_š
 
	mcÚŒŞËr_addr
;

41 
	mcÚŒŞËr_sock
;

42 
fifo_t
 
	mšput_queue
;

43 
fifo_t
 
	mouut_queue
;

44 
p4_msg_ÿÎback
 
	mcb
;

45 } 
	tback’d_t
;

47 
	sdige¡_¡
 {

48 
mem_ûÎ_t
* 
	mmem_ûÎ
;

49 
p4_dige¡
* 
	mdige¡
;

50 } 
	tdige¡_t
;

52 
mem_ûÎ_t
* 
touch_mem_ûÎ
(
back’d_t
* 
bgt
);

53 
d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
);

55 
	$back’d_´oûssÜ
(* 
bg
)

57 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

58 
mem_ûÎ_t
* 
mem_ûÎ
;

59 
timev®
 
tv
;

60 
rv
;

61 
fd_£t
 
rfs
;

62 
fd_£t
 
ma¡”
;

64 
	`FD_ZERO
(&
ma¡”
);

65 
	`FD_SET
(
bgt
->
cÚŒŞËr_sock
, &
ma¡”
);

69 
tv
.
tv_£c
 = 5;

70 
tv
.
tv_u£c
 = 0;

71 
rfs
 = 
ma¡”
;

72 
rv
 = 
	`£Ëù
(
bgt
->
cÚŒŞËr_sock
+1, &
rfs
, 0, 0, &
tv
);

74 ià(
bgt
->
shutdown
==1) ;

75 ià(
rv
==0) ;

77 ià(
	`FD_ISSET
(
bgt
->
cÚŒŞËr_sock
, &
rfs
))

79 
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

80 ià((
rv
=
	`»ad_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

82 
	`fifo_add_msg
Ğ&(
bgt
->
šput_queue
), (*)
mem_ûÎ
 );

83 } ià(
rv
==0) ;

86 
	`şo£
(
bgt
->
cÚŒŞËr_sock
);

87 
	}
}

89 
	$šput_´oûssÜ
(*
bg
)

91 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

92 
mem_ûÎ_t
* 
mem_ûÎ
;

93 
rv®
;

97 
	`fifo_wa™
Ğ&(
bgt
->
šput_queue
) );

98 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
šput_queue
));

100 ià(
bgt
->
shutdown
==1) ;

101 ià(
mem_ûÎ
==0) ;

103 
rv®
 = 
	`hªdË_p4_msg
Ğ
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
, 
bgt
->
cb
 );

104 
	`´štf
(" :::: HªdË msg: %d\n", 
rv®
);

106 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

108 
	}
}

110 
	$ouut_´oûssÜ
(*
bg
)

112 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

113 
mem_ûÎ_t
* 
mem_ûÎ
;

117 
	`fifo_wa™
Ğ&(
bgt
->
ouut_queue
) );

118 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
ouut_queue
));

120 ià(
bgt
->
shutdown
==1) ;

121 ià(
mem_ûÎ
==0) ;

123 
	`wr™e_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

125 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

127 
	}
}

129 
back’d
 
	$ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
)

131 
back’d_t
 *
bg
;

132 
mem_ûÎ_t
 *
tmp
;

133 
i
;

134 
ho¡’t
 *
£rv”
;

136 ià((
num_of_th»ads
<=0è|| (
queue_size
<=0))

139 
bg
 = (
back’d_t
*è
	`m®loc
((backend_t));

140 ià(
bg
 == 0) {

141 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew backend!\n");

145 
bg
->
msg_bufãr
 = (*è
	`m®loc
(
P4_BG_MEM_CELL_SIZE
 * 
queue_size
);

146 ià(
bg
->
msg_bufãr
 == 0) {

147 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew msg_buffer!\n");

151 
bg
->
unu£d_h—d
 = 0;

152 
bg
->
u£d_h—d
 = 0;

154 
i
=0;i<
queue_size
;++i)

156 
tmp
 = (
mem_ûÎ_t
*è
	`m®loc
((mem_cell_t));

157 ià(
tmp
 == 0) {

158 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew mem cell†ist!\n");

161 
tmp
->
d©a
 = 
bg
->
msg_bufãr
 + 
P4_BG_MEM_CELL_SIZE
 * 
i
;

162 
tmp
->
Ëngth
 = 
P4_BG_MEM_CELL_SIZE
;

163 
tmp
->
´ev
 = 0;

164 
tmp
->
Ãxt
 = 
bg
->
unu£d_h—d
;

165 
bg
->
unu£d_h—d
 = 
tmp
;

168 
bg
->
shutdown
 = 0;

169 
bg
->
dÚt_acû±
 = 0;

172 if(
	`±h»ad_mu‹x_š™
(&(
bg
->
memlock
),
NULL
)) {

173 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

176 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_em±y
),
NULL
)) {

177 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

180 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_nÙ_em±y
),
NULL
)) {

181 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

185 
bg
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(
num_of_th»ads
);

187 
	`fifo_š™
(&(
bg
->
šput_queue
));

188 
	`fifo_š™
(&(
bg
->
ouut_queue
));

190 
bg
->
cÚŒŞËr_sock
 = 
	`sock‘
Ğ
AF_INET
, 
SOCK_STREAM
, 0 );

191 ifĞ
bg
->
cÚŒŞËr_sock
 == -1 )

193 
	`årštf
(
¡d”r
, "opening stream socket" );

198 
£rv”
 = 
	`g‘ho¡byÇme
(
cÚŒŞËr_Çme
);

199 ià(
£rv”
 == 0) {

200 
	`årštf
(
¡d”r
,"ERROR, CÚŒŞË¸ÿÂÙ bfound,‚Øsuch ho¡: %s\n", 
cÚŒŞËr_Çme
);

204 
	`mem£t
((*è&(
bg
->
cÚŒŞËr_addr
), 0, (
sockaddr_š
));

205 
bg
->
cÚŒŞËr_addr
.
sš_çmy
 = 
AF_INET
;

206 
	`memıy
Ğ(*è&(
bg
->
cÚŒŞËr_addr
.
sš_addr
), (*è(
£rv”
->
h_addr
), s”v”->
h_Ëngth
);

207 
bg
->
cÚŒŞËr_addr
.
sš_pÜt
 = 
	`htÚs
(
cÚŒŞËr_pÜt
);

209 
bg
->
cb
 = cb;

211  (
back’d
è
bg
;

212 
	}
}

214 
	$Ïunch_back’d
(
back’d
 
bg
)

216 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

218 ifĞ
	`cÚÃù
Ğ
bgt
->
cÚŒŞËr_sock
, (
sockaddr
 *è&(bgt->
cÚŒŞËr_addr
), (
sockaddr_š
) ) == -1 )

220 
	`årštf
(
¡dout
, "Connecting stream socket\n" );

226 
	`di¥©ch
(
bgt
->
oŞ
, 
back’d_´oûssÜ
, (*)bgt);

227 
	`¦“p
(1);

228 
	`di¥©ch
(
bgt
->
oŞ
, 
šput_´oûssÜ
, (*)bgt);

229 
	`¦“p
(1);

230 
	`di¥©ch
(
bgt
->
oŞ
, 
ouut_´oûssÜ
, (*)bgt);

231 
	}
}

233 
	$¡İ_back’d
(
back’d
 
bg
)

235 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

236 
bgt
->
shutdown
 = 1;

238 
	`de¡roy_th»adpoŞ
(
bgt
->
oŞ
);

239 
	}
}

242 
	$de¡roy_back’d
(
back’d
 
bg
)

244 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

245 
mem_ûÎ_t
 *
tmp
;

249 
tmp
 = 
bgt
->
u£d_h—d
;

250 
tmp
!=0) {

251 
bgt
->
u£d_h—d
 = 
tmp
->
Ãxt
;

252 
	`ä“
(
tmp
);

253 
tmp
 = 
bgt
->
u£d_h—d
;

256 
tmp
 = 
bgt
->
unu£d_h—d
;

257 
tmp
!=0) {

258 
bgt
->
unu£d_h—d
 = 
tmp
->
Ãxt
;

259 
	`ä“
(
tmp
);

260 
tmp
 = 
bgt
->
unu£d_h—d
;

263 
	`ä“
(
bgt
->
msg_bufãr
);

265 
	`±h»ad_mu‹x_de¡roy
(&(
bgt
->
memlock
));

266 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_em±y
));

267 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_nÙ_em±y
));

268 
	`fifo_de¡roy
Ğ&(
bgt
->
šput_queue
) );

269 
	`fifo_de¡roy
Ğ&(
bgt
->
ouut_queue
) );

271 
	`ä“
(
bgt
);

272 
	}
}

274 
mem_ûÎ_t
* 
	$touch_mem_ûÎ
(
back’d_t
* 
bgt
)

277 
mem_ûÎ_t
* 
»suÉ
 = 0;

278 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

279 ià(
bgt
->
unu£d_h—d
!=0) {

280 
»suÉ
 = 
bgt
->
unu£d_h—d
;

281 
bgt
->
unu£d_h—d
 = 
»suÉ
->
Ãxt
;

282 ià(
bgt
->
unu£d_h—d
!=0)

283 
bgt
->
unu£d_h—d
->
´ev
 = 0;

285 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_em±y
));

286 ià(
bgt
->
u£d_h—d
!=0) {

287 
bgt
->
u£d_h—d
->
´ev
 = 
»suÉ
;

288 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

290 
»suÉ
->
Ãxt
 = 
bgt
->
u£d_h—d
;

291 
bgt
->
u£d_h—d
 = 
»suÉ
;

293 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

294  
»suÉ
;

295 
	}
}

297 
	$d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
)

299 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

300 ià(
bgt
->
u£d_h—d
!=
ûÎ
)

301 
ûÎ
->
´ev
->
Ãxt
 = cell->next;

303 
bgt
->
u£d_h—d
 = 
ûÎ
->
Ãxt
;

304 ià(
ûÎ
->
Ãxt
!=0)

305 
ûÎ
->
Ãxt
->
´ev
 = cell->prev;

306 ià(
bgt
->
unu£d_h—d
!=0)

307 
bgt
->
unu£d_h—d
->
´ev
 = 
ûÎ
;

308 
ûÎ
->
Ãxt
 = 
bgt
->
unu£d_h—d
;

309 
ûÎ
->
´ev
 = 0;

310 
bgt
->
unu£d_h—d
 = 
ûÎ
;

311 ià(
bgt
->
u£d_h—d
==0)

312 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

313 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

314 
	}
}

316 
	$£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
)

318 
dige¡_t
* 
dt
 = (dige¡_t*)
d
;

319 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

321 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)(
dt
->
dige¡
));

322 ià(
	`fifo_add_msg
(&(
bgt
->
ouut_queue
), 
dt
->
mem_ûÎ
)==0)

325 
	`ä“
(
dt
);

327 
	}
}

329 
dige¡
 
	$ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
)

331 
back’d_t
* 
bgt
 = (back’d_t*è
bg
;

332 
dige¡_t
* 
dg
;

334 
dg
 = (
dige¡_t
*è
	`m®loc
( (digest_t) );

335 ià(
dg
==0)

337 
	`årštf
(
¡d”r
, "Out of memoryo‡‚ew digest message!\n");

341 
dg
->
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

342 ià(
dg
->
mem_ûÎ
 == 0)

344 
	`årštf
(
¡d”r
, "Out of memory…ool - memcell cannot be‡ssignedo‡‚ew digest message!\n");

348 
	`ü—‹_p4_h—d”
(
dg
->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

349 
dg
->
dige¡
 = 
	`ü—‹_p4_dige¡
(dg->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

351 ià(
	`¡¾’
Ğ
Çme
 ) > 
P4_MAX_FIELD_LIST_NAME_LEN
-1)

353 
	`årštf
(
¡d”r
, "ToØlÚg f›ldÇme! Thmaximum†’gth‡Îowed i %d\n", (
P4_MAX_FIELD_LIST_NAME_LEN
-1));

357 
	`¡ºıy
Ğ
dg
->
dige¡
->
f›ld_li¡_Çme
, 
Çme
, 
P4_MAX_FIELD_LIST_NAME_LEN
 );

358 
dg
->
dige¡
->
f›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
-1] = '\0';

360  (
dige¡
è
dg
;

361 
	}
}

364 
dige¡
 
	$add_dige¡_f›ld
(
dige¡
 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
)

366 
dige¡_t
* 
dg
 = (dige¡_t*è
d
;

367 
p4_dige¡_f›ld
* 
df›ld
;

368 
ušt32_t
 
by‹Ëngth
 = (
Ëngth
-1)/8+1;

370 
df›ld
 = 
	`add_p4_dige¡_f›ld
Ğ
dg
->
dige¡
, dg->
mem_ûÎ
->
Ëngth
 );

380 ià(
by‹Ëngth
>
P4_MAX_FIELD_VALUE_LENGTH
)

382 
	`årštf
(
¡d”r
, "ToØlÚg v®u¬¿y! Thmaximum by‹†’gth‡Îowed i %d\n", 
P4_MAX_FIELD_VALUE_LENGTH
);

386 
	`memıy
Ğ
df›ld
->
v®ue
, v®ue, 
	`MIN
(
by‹Ëngth
, 
P4_MAX_FIELD_VALUE_LENGTH
));

387 
df›ld
->
Ëngth
 =†ength;

388 
	`ÃtcÚv_p4_dige¡_f›ld
(
df›ld
);

390  
d
;

391 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/ctrl_plane_backend.h

1 #iâdeà
__BACKEND_H__


2 
	#__BACKEND_H__
 1

	)

4 
	~<¡dšt.h
>

5 
	~"hªdËrs.h
"

7 * 
	tback’d
;

8 * 
	tdige¡
;

11 
back’d
 
ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
);

12 
de¡roy_back’d
(
back’d
 
bg
);

13 
£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
);

14 
Ïunch_back’d
(
back’d
 
bg
);

15 
¡İ_back’d
(
back’d
 
bg
);

17 
dige¡
 
ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
);

18 
dige¡
 
add_dige¡_f›ld
(dige¡ 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
);

	@src/hardware_dep/dpdk/ctrl_plane/dpdk_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_smac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

18 
p4_f›ld_m©ch_exaù
* 
exaù
;

20 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

21 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

22 
	`¡rıy
(
‹
->
bË_Çme
, "smac");

24 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

25 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.srcAddr");

26 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

27 
exaù
->
Ëngth
 = 6*8+0;

29 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

30 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "_nop");

32 
	`ÃtcÚv_p4_h—d”
(
h
);

33 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

34 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

35 
	`ÃtcÚv_p4_aùiÚ
(
a
);

37 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

38 
	}
}

40 
	$fl_dmac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

42 
bufãr
[2048];

43 
p4_h—d”
* 
h
;

44 
p4_add_bË_’Œy
* 
‹
;

45 
p4_aùiÚ
* 
a
;

46 
p4_aùiÚ_·¿m‘”
* 
­
;

47 
p4_f›ld_m©ch_exaù
* 
exaù
;

49 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

50 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

51 
	`¡rıy
(
‹
->
bË_Çme
, "dmac");

53 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

54 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.dstAddr");

55 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

56 
exaù
->
Ëngth
 = 6*8+0;

58 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

59 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "forward");

61 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

62 
	`¡rıy
(
­
->
Çme
, "port");

63 
	`memıy
(
­
->
b™m­
, &
pÜt
, 1);

64 
­
->
Ëngth
 = 1*8+0;

66 
	`ÃtcÚv_p4_h—d”
(
h
);

67 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

68 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

69 
	`ÃtcÚv_p4_aùiÚ
(
a
);

70 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

72 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

73 
	}
}

75 
	$mac_Ë¬n_dige¡
(* 
b
) {

76 
i
;

77 
ušt8_t
 
mac
[6];

78 
ušt8_t
 
pÜt
[2];

79 
ušt16_t
 
off£t
=0;

80 
off£t
 = (
p4_dige¡
);

81 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

82 
	`memıy
(
mac
, 
df
->
v®ue
, 6);

83 
off£t
 +ğ(
p4_dige¡_f›ld
);

84 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

85 
	`memıy
(
pÜt
, 
df
->
v®ue
, 2);

87 
ušt8_t
 
p
 = 
pÜt
[0];

88 
	`´štf
("CŒl: mac_Ë¬n_dige¡ PORT: %d MAC: %02x:%02x:%02x:%02x:%02x:%02x\n", 
p
, 
mac
[0],mac[1],mac[2],mac[3],mac[4],mac[5]);

89 
	`fl_dmac_bË
(
p
, 
mac
);

90 
	`fl_smac_bË
(
p
, 
mac
);

92 
i
=0;i<6;++i)

93 
mac
[
i
]=255;

94 
	`fl_dmac_bË
(1,
mac
);

96 
	}
}

98 
	$‹¡_Ë¬n_
(* 
b
) {

99 
ušt8_t
 

[4];

100 
ušt16_t
 
´
;

101 
i1
;

102 
i2
;

103 
i3
;

105 
ušt16_t
 
off£t
=0;

106 
off£t
 = (
p4_dige¡
);

107 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

108 
	`memıy
(

, 
df
->
v®ue
, 4);

109 
off£t
 +ğ(
p4_dige¡_f›ld
);

110 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

111 
	`memıy
(&
´
, 
df
->
v®ue
, 2);

112 
off£t
 +ğ(
p4_dige¡_f›ld
);

113 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

114 
	`memıy
(&
i1
, 
df
->
v®ue
, 4);

115 
off£t
 +ğ(
p4_dige¡_f›ld
);

116 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

117 
	`memıy
(&
i2
, 
df
->
v®ue
, 4);

118 
off£t
 +ğ(
p4_dige¡_f›ld
);

119 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

120 
	`memıy
(&
i3
, 
df
->
v®ue
, 4);

122 
	`´štf
("test_learn_ip\n");

124 
bufãr
[2048];

125 
p4_h—d”
* 
h
;

126 
p4_add_bË_’Œy
* 
‹
;

127 
p4_aùiÚ
* 
a
;

128 
p4_aùiÚ_·¿m‘”
 *
­1
, *
­2
, *
­3
;

129 
p4_f›ld_m©ch_Ím
* 
Ím
;

130 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

131 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

132 
	`¡rıy
(
‹
->
bË_Çme
, "table1");

133 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

134 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "field1");

135 
	`memıy
(
Ím
->
b™m­
, 

, 4);

136 
Ím
->
´efix_Ëngth
 = 
´
;

137 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

138 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "korte");

139 
­1
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

140 
	`memıy
(
­1
->
b™m­
, &
i1
, 4);

141 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

142 
	`memıy
(
­2
->
b™m­
, &
i2
, 4);

143 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

144 
	`memıy
(
­3
->
b™m­
, &
i3
, 4);

145 
	`ÃtcÚv_p4_h—d”
(
h
);

146 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

147 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

148 
	`ÃtcÚv_p4_aùiÚ
(
a
);

149 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­1
);

150 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

151 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

152 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

153 
	}
}

155 
	$dhf
(* 
b
) {

156 
p4_h—d”
* 
h
 = 
	`ÃtcÚv_p4_h—d”
(
	`uÅack_p4_h—d”
(
b
, 0));

157 ià(
h
->
ty³
 !ğ
P4T_DIGEST
) {

158 
	`´štf
("Method is‚ot implemented\n");

162 
p4_dige¡
* 
d
 = 
	`uÅack_p4_dige¡
(
b
,0);

163 ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "mac_learn_digest")==0) {

164 
	`mac_Ë¬n_dige¡
(
b
);

165 } ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "test_learn_ip")==0) {

166 
	`‹¡_Ë¬n_
(
b
);

168 
	`´štf
("UnknowÀdige¡„eûived: X%sX\n", 
d
->
f›ld_li¡_Çme
);

170 
	}
}

172 
	$maš
()

174 
	`´štf
("Create‡nd configure controller...\n");

175 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

177 
	`´štf
("Launching controller's main†oop...\n");

178 
	`execu‹_cÚŒŞËr
(
c
);

180 
	`´štf
("Destroy controller\n");

181 
	`de¡roy_cÚŒŞËr
(
c
);

184 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/fifo.c

1 
	~"fifo.h
"

2 
	~<¡dio.h
>

4 
fifo_t
* 
	$fifo_š™
Ğ
fifo_t
* 
queue
)

6 
queue
->
h—d
 = 0;

7 
queue
->
size
 = 0;

8 
queue
->

 = -1;

11 if(
	`±h»ad_mu‹x_š™
(&(
queue
->
lock
),
NULL
)) {

12 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

15 if(
	`±h»ad_cÚd_š™
(&(
queue
->
em±y
),
NULL
)) {

16 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

19 if(
	`±h»ad_cÚd_š™
(&(
queue
->
nÙ_em±y
),
NULL
)) {

20 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

23  
queue
;

24 
	}
}

26 
	$fifo_de¡roy
Ğ
fifo_t
* 
queue
 )

28 
	`±h»ad_mu‹x_de¡roy
(&(
queue
->
lock
));

29 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
em±y
));

30 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
nÙ_em±y
));

31 
	}
}

33 
fifo_t
* 
	$fifo_add_msg
Ğ
fifo_t
* 
queue
, * 
–em’t
)

35 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

36 ià(
queue
->
size
 < 
P4_BG_QUEUE_SIZE
)

38 
queue
->

 = (queue->+1è% 
P4_BG_QUEUE_SIZE
;

39 ++(
queue
->
size
);

40 
queue
->queue[queue->

] = 
–em’t
;

41 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
nÙ_em±y
));

43 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

45  
queue
;

46 
	}
}

48 * 
	$fifo_»move_msg
Ğ
fifo_t
* 
queue
 )

50 * 
»suÉ
 = 0;

51 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

52 ià(
queue
->
size
 > 0)

54 
»suÉ
 = 
queue
->queue[queue->
h—d
];

55 
queue
->
h—d
 = (queue->h—d+1è% 
P4_BG_QUEUE_SIZE
;

56 --(
queue
->
size
);

57 ià(
queue
->
size
==0)

58 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
em±y
));

60 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

62  
»suÉ
;

63 
	}
}

65 
	$fifo_size
Ğ
fifo_t
* 
queue
 )

67 
size
 = 0;

68 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

69 
size
 = 
queue
->size;

70 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

72  
size
;

73 
	}
}

75 
	$fifo_wa™
Ğ
fifo_t
* 
queue
)

77 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

79 ià(
queue
->
size
==0)

80 
	`±h»ad_cÚd_wa™
(&(
queue
->
nÙ_em±y
), &(queue->
lock
));

82 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

83 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/fifo.h

1 #iâdeà
__FIFO_H__


2 
	#__FIFO_H__


	)

4 
	~<±h»ad.h
>

6 
	#P4_BG_QUEUE_SIZE
 1024

	)

8 
	sfifo_¡
 {

9 * 
	mqueue
[
P4_BG_QUEUE_SIZE
];

10 
	mh—d
;

11 
	msize
;

12 
	m
;

13 
±h»ad_mu‹x_t
 
	mlock
;

14 
±h»ad_cÚd_t
 
	mnÙ_em±y
;

15 
±h»ad_cÚd_t
 
	mem±y
;

16 } 
	tfifo_t
;

18 
fifo_t
* 
fifo_š™
Ğfifo_t* 
queue
 );

19 
fifo_de¡roy
Ğ
fifo_t
* 
queue
 );

20 
fifo_t
* 
fifo_add_msg
Ğfifo_t* 
queue
, * 
–em’t
);

21 * 
fifo_»move_msg
Ğ
fifo_t
* 
queue
 );

22 
fifo_size
Ğ
fifo_t
* 
queue
 );

23 
fifo_wa™
Ğ
fifo_t
* 
queue
 );

	@src/hardware_dep/dpdk/ctrl_plane/handlers.c

1 
	~"hªdËrs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

6 
	$hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
)

8 
p4_h—d”
* 
h—d”
;

9 
p4_ù¾_msg
 
ù¾_m
;

10 
rv®
;

12 ià(
Ëngth
<(
p4_h—d”
))  -1;

14 
h—d”
 = 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)
bufãr
);

16 ià(
h—d”
->
Ëngth
>length)  -1;

18 
h—d”
->
ty³
)

20 
P4T_SET_DEFAULT_ACTION
:

21 
	`´štf
(" :::: SET_DEFAULT_ACTION\n");

22 
rv®
 = 
	`hªdË_p4_£t_deçuÉ_aùiÚ
Ğ
	`ÃtcÚv_p4_£t_deçuÉ_aùiÚ
((
p4_£t_deçuÉ_aùiÚ
*)
bufãr
), &
ù¾_m
);

23 
	`´štf
(" ::„v®=%d\n", 
rv®
);

24 ià(
rv®
<0) „val;

25 
	`cb
(&
ù¾_m
);

27 
P4T_ADD_TABLE_ENTRY
:

28 
	`´štf
(" :::: ADD_TABLE_ENTRY\n");

29 
rv®
 = 
	`hªdË_p4_add_bË_’Œy
(
	`ÃtcÚv_p4_add_bË_’Œy
((
p4_add_bË_’Œy
*)
bufãr
), &
ù¾_m
);

30 
	`´štf
(" ::„v®=%d\n", 
rv®
);

31 ià(
rv®
<0) „val;

32 
	`cb
(&
ù¾_m
);

35 
	`´štf
(" :::: Mes§gty³ i nÙ im¶em’‹d!y³=%d\n", 
h—d”
->
ty³
);

36 
	`cb
(&
ù¾_m
);

41 
	}
}

43 
	$hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

45 
i
;

46 
num_·¿ms
;

47 
ušt16_t
 
off£t
 = 0;

48 * 
bufãr
 = 0;

50 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

51 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

52 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

53 
ù¾_m
->
aùiÚ_ty³
 = 
m
->
aùiÚ
.
desütiÚ
.
ty³
;

54 
ù¾_m
->
aùiÚ_Çme
 = 
m
->
aùiÚ
.
desütiÚ
.
Çme
;

55 
num_·¿ms
 = 
m
->
aùiÚ
.
·¿m_size
;

56 
bufãr
 = (*)(
m
è+ (
p4_£t_deçuÉ_aùiÚ
);

58 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

61 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

63 
i
=0;i<
num_·¿ms
;++i)

65 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

66 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

70 
	}
}

72 
	$hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

74 
i
;

75 
num_·¿ms
;

76 
size
;

77 
ušt16_t
 
off£t
 = 0;

78 * 
bufãr
 = 0;

79 
p4_aùiÚ
* 
aùiÚ
;

81 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

82 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

83 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

84 
num_·¿ms
 = 
m
->
»ad_size
;

86 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_FIELD_MATCHES
)

89 
ù¾_m
->
num_f›ld_m©ches
 = 
num_·¿ms
;

91 
bufãr
 = (*)(
m
è+ (
p4_add_bË_’Œy
);

92 
off£t
 = 0;

94 
i
=0;i<
num_·¿ms
;++i)

96 
ù¾_m
->
f›ld_m©ches
[
i
] = 
	`ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
	`uÅack_p4_f›ld_m©ch_h—d”
(
bufãr
, 
off£t
),&
size
);

97 
off£t
 +ğ
size
;

100 
aùiÚ
 = 
	`uÅack_p4_aùiÚ
(
bufãr
, 
off£t
);

102 
ù¾_m
->
aùiÚ_ty³
 = 
aùiÚ
->
desütiÚ
.
ty³
;

103 
ù¾_m
->
aùiÚ_Çme
 = 
aùiÚ
->
desütiÚ
.
Çme
;

104 
num_·¿ms
 = 
aùiÚ
->
·¿m_size
;

105 
off£t
 +ğ(
p4_aùiÚ
);

107 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

110 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

112 
i
=0;i<
num_·¿ms
;++i)

114 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

115 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

119 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/handlers.h

1 #iâdeà
__HANDLERS_H__


2 
	#__HANDLERS_H__


	)

4 
	~"mes§ges.h
"

6 
	#P4_MAX_NUMBER_OF_ACTION_PARAMETERS
 10

	)

7 
	#P4_MAX_NUMBER_OF_FIELD_MATCHES
 10

	)

9 
	sp4_ù¾_msg
 {

10 
ušt8_t
 
	mty³
;

11 
ušt32_t
 
	mxid
;

12 * 
	mbË_Çme
;

13 
ušt8_t
 
	maùiÚ_ty³
;

14 * 
	maùiÚ_Çme
;

15 
	mnum_aùiÚ_·¿ms
;

16 
p4_aùiÚ_·¿m‘”
* 
	maùiÚ_·¿ms
[
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
];

17 
	mnum_f›ld_m©ches
;

18 
p4_f›ld_m©ch_h—d”
* 
	mf›ld_m©ches
[
P4_MAX_NUMBER_OF_FIELD_MATCHES
];

21 (*
	tp4_msg_ÿÎback
)(
	tp4_ù¾_msg
*);

23 
	`hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
);

24 
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

25 
	`hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

	@src/hardware_dep/dpdk/ctrl_plane/messages.c

1 
	~"mes§ges.h
"

2 
	~<¡dio.h
>

3 
	~<as£¹.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

9 
p4_h—d”
 *
	$ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

10 
p4_h—d”
* 
h—d”
;

11 ià(
off£t
+(
p4_h—d”
è> 
maxËngth
)  0;

12 
h—d”
 = (
p4_h—d”
*)(
bufãr
 + 
off£t
);

13 
h—d”
->
v”siÚ
 = 
P4_VERSION
;

14 
h—d”
->
ty³
 = 0;

15 
h—d”
->
Ëngth
 =  (
p4_h—d”
);

16 
h—d”
->
xid
 = 0;

17  
h—d”
;

18 
	}
}

20 
šlše
 
p4_h—d”
* 
	$ÃtcÚv_p4_h—d”
(
p4_h—d”
* 
m
)

22 
m
->
Ëngth
 = 
	`htÚs
(m->length);

23 
m
->
xid
 = 
	`htÚl
(m->xid);

24  
m
;

25 
	}
}

27 
šlše
 
p4_h—d”
 *
	$uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

28  (
p4_h—d”
*)(
bufãr
 + 
off£t
);

29 
	}
}

31 
	$check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
) {

32 
	`as£¹
(
a
->
v”siÚ
 =ğ
b
->version);

33 
	`as£¹
(
a
->
ty³
 =ğ
b
->type);

34 
	`as£¹
(
a
->
Ëngth
 =ğ
b
->length);

35 
	`as£¹
(
a
->
xid
 =ğ
b
->xid);

36 
	}
}

38 
p4_add_bË_’Œy
* 
	$ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

39 
p4_add_bË_’Œy
* 
add_bË_’Œy
;

40 ià(
off£t
+(
p4_add_bË_’Œy
è>ğ
maxËngth
)  0;

41 
add_bË_’Œy
 = (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

42 
add_bË_’Œy
->
h—d”
.
Ëngth
 =  (
p4_add_bË_’Œy
);

43 
add_bË_’Œy
->
h—d”
.
ty³
 = 
P4T_ADD_TABLE_ENTRY
;

44 
add_bË_’Œy
->
»ad_size
 = 0;

45 
add_bË_’Œy
->
bË_Çme
[0] = '\0';

46  
add_bË_’Œy
;

47 
	}
}

49 
šlše
 
p4_add_bË_’Œy
* 
	$ÃtcÚv_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
) {

50  
m
;

51 
	}
}

53 
p4_f›ld_m©ch_Ím
* 
	$add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

54 
p4_f›ld_m©ch_Ím
* 
f›ld_m©ch_Ím
;

55 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_Ím
è> 
maxËngth
)  0;

56 
f›ld_m©ch_Ím
 = (
p4_f›ld_m©ch_Ím
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

57 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_Ím
);

58 
add_bË_’Œy
->
»ad_size
 += 1;

59 
f›ld_m©ch_Ím
->
h—d”
.
ty³
 = 
P4_FMT_LPM
;

60 
f›ld_m©ch_Ím
->
´efix_Ëngth
 = 0;

61  
f›ld_m©ch_Ím
;

62 
	}
}

64 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$ÃtcÚv_p4_f›ld_m©ch_Ím
(
p4_f›ld_m©ch_Ím
* 
m
) {

65 
m
->
´efix_Ëngth
 = 
	`htÚs
(m->prefix_length);

66  
m
;

67 
	}
}

69 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$ÃtcÚv_p4_f›ld_m©ch_exaù
(
p4_f›ld_m©ch_exaù
* 
m
) {

70 
m
->
Ëngth
 = 
	`htÚs
(m->length);

71  
m
;

72 
	}
}

74 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$ÃtcÚv_p4_f›ld_m©ch_¿nge
(
p4_f›ld_m©ch_¿nge
* 
m
) {

75 
m
->
Ëngth
 = 
	`htÚs
(m->length);

76  
m
;

77 
	}
}

79 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(
p4_f›ld_m©ch_‹º¬y
* 
m
) {

80 
m
->
Ëngth
 = 
	`htÚs
(m->length);

81  
m
;

82 
	}
}

84 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$ÃtcÚv_p4_f›ld_m©ch_v®id
(
p4_f›ld_m©ch_v®id
* 
m
) {

85 
m
->
Ëngth
 = 
	`htÚs
(m->length);

86  
m
;

87 
	}
}

89 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
p4_f›ld_m©ch_h—d”
 *
m
, * 
size
) {

90 
m
->
ty³
)

92 
P4_FMT_EXACT
:

93 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
((
p4_f›ld_m©ch_exaù
*)
m
);

94 *
size
 = (
p4_f›ld_m©ch_exaù
);

96 
P4_FMT_TERNARY
:

97 
	`ÃtcÚv_p4_f›ld_m©ch_‹º¬y
((
p4_f›ld_m©ch_‹º¬y
*)
m
);

98 *
size
 = (
p4_f›ld_m©ch_‹º¬y
);

100 
P4_FMT_LPM
:

101 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
((
p4_f›ld_m©ch_Ím
*)
m
);

102 *
size
 = (
p4_f›ld_m©ch_Ím
);

104 
P4_FMT_RANGE
:

105 
	`ÃtcÚv_p4_f›ld_m©ch_¿nge
((
p4_f›ld_m©ch_¿nge
*)
m
);

106 *
size
 = (
p4_f›ld_m©ch_¿nge
);

108 
P4_FMT_VALID
:

109 
	`ÃtcÚv_p4_f›ld_m©ch_v®id
((
p4_f›ld_m©ch_v®id
*)
m
);

110 *
size
 = (
p4_f›ld_m©ch_v®id
);

113 *
size
 = 0;

116  
m
;

117 
	}
}

119 
šlše
 
p4_dige¡_f›ld
* 
	$ÃtcÚv_p4_dige¡_f›ld
(
p4_dige¡_f›ld
* 
m
) {

120 
m
->
Ëngth
 = 
	`htÚl
(m->length);

121  
m
;

122 
	}
}

124 
šlše
 
p4_aùiÚ
* 
	$ÃtcÚv_p4_aùiÚ
Ğ
p4_aùiÚ
* 
m
) {

125  
m
;

126 
	}
}

128 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$ÃtcÚv_p4_aùiÚ_·¿m‘”
(
p4_aùiÚ_·¿m‘”
* 
m
) {

129 
m
->
Ëngth
 = 
	`htÚl
(m->length);

130  
m
;

131 
	}
}

133 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
) {

135  
m
;

136 
	}
}

138 
šlše
 
p4_add_bË_’Œy
* 
	$uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
) {

139  (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

140 
	}
}

142 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

143  (
p4_f›ld_m©ch_h—d”
*)(
bufãr
 + 
off£t
);

144 
	}
}

146 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
) {

147  (
p4_f›ld_m©ch_Ím
*)(
bufãr
 + 
off£t
);

148 
	}
}

150 
p4_f›ld_m©ch_exaù
* 
	$add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

151 
p4_f›ld_m©ch_exaù
* 
f›ld_m©ch_exaù
;

152 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_exaù
è> 
maxËngth
)  0;

153 
f›ld_m©ch_exaù
 = (
p4_f›ld_m©ch_exaù
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

154 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_exaù
);

155 
add_bË_’Œy
->
»ad_size
 += 1;

156 
f›ld_m©ch_exaù
->
h—d”
.
ty³
 = 
P4_FMT_EXACT
;

157 
f›ld_m©ch_exaù
->
Ëngth
 = 0;

158  
f›ld_m©ch_exaù
;

159 
	}
}

161 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
) {

162  (
p4_f›ld_m©ch_exaù
*)(
bufãr
 + 
off£t
);

163 
	}
}

165 
p4_f›ld_m©ch_¿nge
* 
	$add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

166 
p4_f›ld_m©ch_¿nge
* 
f›ld_m©ch_¿nge
;

167 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_¿nge
è> 
maxËngth
)  0;

168 
f›ld_m©ch_¿nge
 = (
p4_f›ld_m©ch_¿nge
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

169 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_¿nge
);

170 
add_bË_’Œy
->
»ad_size
 += 1;

171 
f›ld_m©ch_¿nge
->
h—d”
.
ty³
 = 
P4_FMT_RANGE
;

172 
f›ld_m©ch_¿nge
->
Ëngth
 = 0;

173 
f›ld_m©ch_¿nge
->
is_sigÃd
 = 
çl£
;

174  
f›ld_m©ch_¿nge
;

175 
	}
}

177 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
) {

178  (
p4_f›ld_m©ch_¿nge
*)(
bufãr
 + 
off£t
);

179 
	}
}

181 
p4_f›ld_m©ch_v®id
* 
	$add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

182 
p4_f›ld_m©ch_v®id
* 
f›ld_m©ch_v®id
;

183 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_v®id
è> 
maxËngth
)  0;

184 
f›ld_m©ch_v®id
 = (
p4_f›ld_m©ch_v®id
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

185 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_v®id
);

186 
add_bË_’Œy
->
»ad_size
 += 1;

187 
f›ld_m©ch_v®id
->
h—d”
.
ty³
 = 
P4_FMT_VALID
;

188 
f›ld_m©ch_v®id
->
Ëngth
 = 0;

189 
f›ld_m©ch_v®id
->
is_v®id
 = 
çl£
;

190  
f›ld_m©ch_v®id
;

191 
	}
}

193 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
) {

194  (
p4_f›ld_m©ch_v®id
*)(
bufãr
 + 
off£t
);

195 
	}
}

197 
p4_f›ld_m©ch_‹º¬y
* 
	$add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

198 
p4_f›ld_m©ch_‹º¬y
* 
f›ld_m©ch_‹º¬y
;

199 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_‹º¬y
è> 
maxËngth
)  0;

200 
f›ld_m©ch_‹º¬y
 = (
p4_f›ld_m©ch_‹º¬y
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

201 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_‹º¬y
);

202 
add_bË_’Œy
->
»ad_size
 += 1;

203 
f›ld_m©ch_‹º¬y
->
h—d”
.
ty³
 = 
P4_FMT_TERNARY
;

204 
f›ld_m©ch_‹º¬y
->
Ëngth
 = 0;

205 
f›ld_m©ch_‹º¬y
->
´iÜ™y
 = 0;

206  
f›ld_m©ch_‹º¬y
;

207 
	}
}

209 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
) {

210  (
p4_f›ld_m©ch_‹º¬y
*)(
bufãr
 + 
off£t
);

211 
	}
}

213 
p4_aùiÚ
* 
	$add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
) {

214 
p4_aùiÚ
* 
aùiÚ
;

215 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ
è> 
maxËngth
)  0;

216 
aùiÚ
 = (
p4_aùiÚ
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

217 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ
);

218 
aùiÚ
->
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

219 
aùiÚ
->
desütiÚ
.
Çme
[0] = '\0';

220 
aùiÚ
->
·¿m_size
 = 0;

221  
aùiÚ
;

222 
	}
}

224 
šlše
 
p4_aùiÚ
* 
	$uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

225  (
p4_aùiÚ
*)(
bufãr
 + 
off£t
);

226 
	}
}

228 
p4_aùiÚ_·¿m‘”
* 
	$add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
) {

229 
p4_aùiÚ_·¿m‘”
* 
aùiÚ_p
;

230 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ_·¿m‘”
è> 
maxËngth
)  0;

231 
aùiÚ_p
 = (
p4_aùiÚ_·¿m‘”
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

232 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ_·¿m‘”
);

233 
aùiÚ
->
·¿m_size
 += 1;

234 
aùiÚ_p
->
Çme
[0] = '\0';

235 
aùiÚ_p
->
Ëngth
 = 0;

236  
aùiÚ_p
;

237 
	}
}

239 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

240  (
p4_aùiÚ_·¿m‘”
*)(
bufãr
 + 
off£t
);

241 
	}
}

243 
p4_£t_deçuÉ_aùiÚ
* 
	$ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

244 
p4_£t_deçuÉ_aùiÚ
* 
deçuÉ_aùiÚ
;

245 ià(
off£t
+(
p4_£t_deçuÉ_aùiÚ
è>ğ
maxËngth
)  0;

246 
deçuÉ_aùiÚ
 = (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

247 
deçuÉ_aùiÚ
->
h—d”
.
Ëngth
 = (
p4_£t_deçuÉ_aùiÚ
);

248 
deçuÉ_aùiÚ
->
h—d”
.
ty³
 = 
P4T_SET_DEFAULT_ACTION
;

249 
deçuÉ_aùiÚ
->
bË_Çme
[0] = '\0';

250 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

251 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
Çme
[0] = '\0';

252 
deçuÉ_aùiÚ
->
aùiÚ
.
·¿m_size
 = 0;

253  
deçuÉ_aùiÚ
;

254 
	}
}

256 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

257  (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

258 
	}
}

260 
p4_dige¡
* 
	$ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

261 
p4_dige¡
* 
dige¡
;

262 ià(
off£t
+(
p4_dige¡
è>ğ
maxËngth
)  0;

263 
dige¡
 = (
p4_dige¡
*)(
bufãr
 + 
off£t
);

264 
dige¡
->
h—d”
.
Ëngth
 = (
p4_dige¡
);

265 
dige¡
->
h—d”
.
ty³
 = 
P4T_DIGEST
;

266 
dige¡
->
f›ld_li¡_Çme
[0] = '\0';

267 
dige¡
->
li¡_size
 = 0;

268  
dige¡
;

269 
	}
}

271 
šlše
 
p4_dige¡
* 
	$uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
) {

272  (
p4_dige¡
*)(
bufãr
 + 
off£t
);

273 
	}
}

275 
p4_dige¡_f›ld
* 
	$add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
) {

276 
p4_dige¡_f›ld
* 
dige¡_f
;

277 ià(
dige¡
->
h—d”
.
Ëngth
 + (
p4_dige¡_f›ld
è> 
maxËngth
)  0;

278 
dige¡_f
 = (
p4_dige¡_f›ld
*)ĞĞ(*)
dige¡
 ) + dige¡->
h—d”
.
Ëngth
);

279 
dige¡
->
h—d”
.
Ëngth
 +ğ(
p4_dige¡_f›ld
);

280 
dige¡
->
li¡_size
 += 1;

281 
dige¡_f
->
Çme
[0] = '\0';

282 
dige¡_f
->
Ëngth
 = 0;

283  
dige¡_f
;

284 
	}
}

286 
šlše
 
p4_dige¡_f›ld
* 
	$uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
) {

287  (
p4_dige¡_f›ld
*)(
bufãr
 + 
off£t
);

288 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/messages.h

1 #iâdeà
_MESSAGES_H_


2 
	#_MESSAGES_H_
 1

	)

4 
	~<¡dšt.h
>

6 
	#P4_VERSION
 1

	)

7 
	#Œue
 1

	)

8 
	#çl£
 0

	)

11 
	sp4_h—d”
 {

12 
ušt8_t
 
	mv”siÚ
;

13 
ušt8_t
 
	mty³
;

14 
ušt16_t
 
	mËngth
;

15 
ušt32_t
 
	mxid
;

19 
	ep4_ty³
 {

21 
	mP4T_HELLO
 = 0,

22 
	mP4T_ERROR
 = 1,

23 
	mP4T_ECHO_REQUEST
 = 2,

24 
	mP4T_ECHO_REPLY
 = 3,

25 
	mP4T_SUCCESS
 = 4,

28 
	mP4T_GET_TABLE_DEFINITIONS
 = 100,

29 
	mP4T_GET_TABLE_COUNTERS
 = 101,

30 
	mP4T_GET_TABLE_ENTRIES
 = 102,

33 
	mP4T_SET_DEFAULT_ACTION
 = 103,

34 
	mP4T_ADD_TABLE_ENTRY
 = 104,

35 
	mP4T_MODIFY_TABLE_ENTRY
 = 105,

36 
	mP4T_REMOVE_TABLE_ENTRY
 = 106,

37 
	mP4T_DROP_TABLE_ENTRIES
 = 107,

38 
	mP4T_ADD_AP_MEMBER
 = 108,

39 
	mP4T_REMOVE_AP_MEMBER
 = 109,

42 
	mP4T_DIGEST
 = 110

45 
	sp4_h–lo
 {

46 
p4_h—d”
 
	mh—d”
;

48 
p4_h–lo_–em_h—d”
 *
	m–em’ts
;

53 
	ep4_h–lo_–em_ty³
 {

54 
	mOFPHET_VERSIONBITMAP
 = 1

58 
	sp4_h–lo_–em_h—d”
 {

59 
ušt16_t
 
	mty³
;

60 
ušt16_t
 
	mËngth
;

65 
	sp4_h–lo_–em_v”siÚb™m­
 {

66 
ušt16_t
 
	mty³
;

67 
ušt16_t
 
	mËngth
;

73 
ušt32_t
* 
	mb™m­s
;

76 
	sp4_”rÜ
 {

77 
p4_h—d”
 
	mh—d”
;

78 
ušt16_t
 
	m”rÜ_code
;

81 
	sp4_sucûss
 {

82 
p4_h—d”
 
	mh—d”
;

83 
ušt32_t
 
	mid
;

86 
	#P4_MAX_TABLE_NAME_LEN
 128

	)

87 
	#P4_MAX_FIELD_NAME_LEN
 128

	)

88 
	#P4_MAX_ACTION_NAME_LEN
 128

	)

90 
	ep4_f›ld_m©ch_ty³
 {

91 
	mP4_FMT_EXACT
 = 0,

92 
	mP4_FMT_TERNARY
 = 1,

93 
	mP4_FMT_LPM
 = 2,

94 
	mP4_FMT_RANGE
 = 3,

95 
	mP4_FMT_VALID
 = 4

98 
	sp4_f›ld_m©ch_desc
 {

99 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

100 
ušt8_t
 
	mty³
;

103 
	ep4_suµÜt_timeout
 {

104 
	mP4_STO_FALSE
 = 0,

105 
	mP4_STO_TRUE
 = 1

108 
	ep4_aùiÚ_ty³
 {

109 
	mP4_AT_ACTION
 = 0,

110 
	mP4_AT_ACTION_PROFILE
 = 1

113 
	sp4_bË_aùiÚ_desc
 {

114 
ušt8_t
 
	mty³
;

115 
	mÇme
[
P4_MAX_ACTION_NAME_LEN
];

118 
	sp4_bË_defš™iÚ
 {

119 
p4_h—d”
 
	mh—d”
;

120 
	mÇme
[
P4_MAX_TABLE_NAME_LEN
];

121 
ušt8_t
 
	m»ads
;

122 
ušt16_t
 
	mmš_size
;

123 
ušt16_t
 
	mmax_size
;

124 
ušt16_t
 
	msize
;

125 
ušt8_t
 
	msuµÜt_timeout
;

126 
ušt8_t
 
	m»ad_size
;

127 
ušt8_t
 
	maùiÚ_size
;

133 
	#MAX_ACTION_PARAMETER_NAME_LENGTH
 128

	)

134 
	#MAX_ACTION_PARAMETER_BITMAP_LENGTH
 128

	)

135 
	sp4_aùiÚ_·¿m‘”
 {

136 
	mÇme
[
MAX_ACTION_PARAMETER_NAME_LENGTH
];

137 
ušt32_t
 
	mËngth
;

138 
	mb™m­
[
MAX_ACTION_PARAMETER_BITMAP_LENGTH
];

143 
	sp4_aùiÚ
 {

144 
p4_bË_aùiÚ_desc
 
	mdesütiÚ
;

145 
ušt8_t
 
	m·¿m_size
;

149 
	sp4_£t_deçuÉ_aùiÚ
 {

150 
p4_h—d”
 
	mh—d”
;

151 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

152 
p4_aùiÚ
 
	maùiÚ
;

155 
	sp4_f›ld_m©ch_h—d”
 {

156 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

157 
ušt8_t
 
	mty³
;

160 
	#MAX_FIELD_LENGTH
 256

	)

162 
	sp4_f›ld_m©ch_Ím
 {

163 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

164 
ušt16_t
 
	m´efix_Ëngth
;

165 
	mb™m­
[
MAX_FIELD_LENGTH
];

168 
	sp4_f›ld_m©ch_exaù
 {

169 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

170 
ušt16_t
 
	mËngth
;

171 
	mb™m­
[
MAX_FIELD_LENGTH
];

174 
	sp4_f›ld_m©ch_¿nge
 {

175 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

176 
ušt16_t
 
	mËngth
;

177 
ušt8_t
 
	mis_sigÃd
;

178 
	mmš_b™m­
[
MAX_FIELD_LENGTH
];

179 
	mmax_b™m­
[
MAX_FIELD_LENGTH
];

182 
	sp4_f›ld_m©ch_‹º¬y
 {

183 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

184 
ušt16_t
 
	mËngth
;

185 
ušt8_t
 
	m´iÜ™y
;

186 
	mb™m­
[
MAX_FIELD_LENGTH
];

187 
	mmask
[
MAX_FIELD_LENGTH
];

190 
	sp4_f›ld_m©ch_v®id
 {

191 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

192 
ušt16_t
 
	mËngth
;

193 
ušt8_t
 
	mis_v®id
;

194 
	mb™m­
[
MAX_FIELD_LENGTH
];

197 
	sp4_add_bË_’Œy
 {

198 
p4_h—d”
 
	mh—d”
;

199 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

200 
ušt8_t
 
	m»ad_size
;

205 
	#P4_MAX_FIELD_LIST_NAME_LEN
 128

	)

206 
	#P4_MAX_FIELD_NAME_LENGTH
 128

	)

207 
	#P4_MAX_FIELD_VALUE_LENGTH
 32

	)

209 
	sp4_dige¡_f›ld
 {

210 
	mÇme
[
P4_MAX_FIELD_NAME_LENGTH
];

211 
ušt32_t
 
	mËngth
;

212 
	mv®ue
[
P4_MAX_FIELD_VALUE_LENGTH
];

215 
	sp4_dige¡
 {

216 
p4_h—d”
 
	mh—d”
;

217 
	mf›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
];

218 
ušt8_t
 
	mli¡_size
;

222 
p4_h—d”
 *
ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

223 
p4_h—d”
 *
uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

224 
check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
);

225 
p4_h—d”
* 
ÃtcÚv_p4_h—d”
(p4_h—d”* 
m
);

227 
p4_add_bË_’Œy
* 
ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

228 
p4_f›ld_m©ch_Ím
* 
add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

229 
p4_add_bË_’Œy
* 
uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
);

230 
p4_f›ld_m©ch_h—d”
* 
uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

231 
p4_f›ld_m©ch_Ím
* 
uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
);

232 
p4_f›ld_m©ch_exaù
* 
add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

233 
p4_f›ld_m©ch_exaù
* 
uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
);

234 
p4_f›ld_m©ch_¿nge
* 
add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

235 
p4_f›ld_m©ch_¿nge
* 
uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
);

236 
p4_f›ld_m©ch_v®id
* 
add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

237 
p4_f›ld_m©ch_v®id
* 
uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
);

238 
p4_f›ld_m©ch_‹º¬y
* 
add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

239 
p4_f›ld_m©ch_‹º¬y
* 
uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
);

240 
p4_aùiÚ
* 
add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
);

241 
p4_aùiÚ
* 
uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

242 
p4_aùiÚ_·¿m‘”
* 
add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
);

243 
p4_aùiÚ_·¿m‘”
* 
uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
);

244 
p4_£t_deçuÉ_aùiÚ
* 
ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

245 
p4_£t_deçuÉ_aùiÚ
* 
uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

246 
p4_dige¡
* 
ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

247 
p4_dige¡
* 
uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
);

248 
p4_dige¡_f›ld
* 
add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
);

249 
p4_dige¡_f›ld
* 
uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
);

251 
p4_f›ld_m©ch_Ím
* 
ÃtcÚv_p4_f›ld_m©ch_Ím
(p4_f›ld_m©ch_Ím* 
m
);

252 
p4_f›ld_m©ch_exaù
* 
ÃtcÚv_p4_f›ld_m©ch_exaù
(p4_f›ld_m©ch_exaù* 
m
);

253 
p4_f›ld_m©ch_¿nge
* 
ÃtcÚv_p4_f›ld_m©ch_¿nge
(p4_f›ld_m©ch_¿nge* 
m
);

254 
p4_f›ld_m©ch_‹º¬y
* 
ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(p4_f›ld_m©ch_‹º¬y* 
m
);

255 
p4_f›ld_m©ch_v®id
* 
ÃtcÚv_p4_f›ld_m©ch_v®id
(p4_f›ld_m©ch_v®id* 
m
);

256 
p4_dige¡_f›ld
* 
ÃtcÚv_p4_dige¡_f›ld
(p4_dige¡_f›ld* 
m
);

257 
p4_aùiÚ
* 
ÃtcÚv_p4_aùiÚ
Ğp4_aùiÚ* 
m
);

258 
p4_aùiÚ_·¿m‘”
* 
ÃtcÚv_p4_aùiÚ_·¿m‘”
(p4_aùiÚ_·¿m‘”* 
m
);

259 
p4_£t_deçuÉ_aùiÚ
* 
ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(p4_£t_deçuÉ_aùiÚ* 
m
);

260 
p4_f›ld_m©ch_h—d”
* 
ÃtcÚv_p4_f›ld_m©ch_com¶ex
(p4_f›ld_m©ch_h—d” *
m
, * 
size
);

261 
p4_add_bË_’Œy
* 
ÃtcÚv_p4_add_bË_’Œy
(p4_add_bË_’Œy* 
m
);

	@src/hardware_dep/dpdk/ctrl_plane/sock_helpers.c

1 
	~"sock_h–³rs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<uni¡d.h
>

5 
	~<Ãtš‘/š.h
>

7 
	$»ad_fix
(
sock
, * 
bufãr
, 
nby‹s
)

9 
rby‹s
 = 0;

10 
rv®
 = 0;

11 
rby‹s
<
nby‹s
)

13 
rv®
 = 
	`»ad
(
sock
, 
bufãr
 + 
rby‹s
, 
nby‹s
-rbytes);

14 ià(
rv®
<=0) „val;

15 
rby‹s
 +ğ
rv®
;

18  
rby‹s
;

19 
	}
}

21 
	$wr™e_fix
(
sock
, * 
bufãr
, 
nby‹s
)

23 
wby‹s
 = 0;

24 
wv®
 = 0;

25 
wby‹s
<
nby‹s
)

27 
wv®
 = 
	`wr™e
(
sock
, 
bufãr
 + 
wby‹s
, 
nby‹s
-wbytes);

28 ià(
wv®
<0)  wval;

29 
wby‹s
 +ğ
wv®
;

32  
wby‹s
;

33 
	}
}

35 
	$»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

37 
rv®
;

38 
msgËn
;

39 ià(
Ëngth
<(
p4_h—d”
))  -1;

41 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
, (
p4_h—d”
)))<=0)

42  
rv®
;

44 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

46 ià(
msgËn
>
Ëngth
)

49 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
 + (
p4_h—d”
), 
msgËn
-(p4_header)))<=0)

50  
rv®
;

51  
msgËn
;

52 
	}
}

54 
	$wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

56 
msgËn
;

57 ià(
Ëngth
<(
p4_h—d”
))  -1;

59 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

61 ià(
msgËn
>
Ëngth
)  -1;

63  
	`wr™e_fix
(
sock
, 
bufãr
, 
msgËn
);

64 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/sock_helpers.h

1 #iâdeà
__SOCK_HELPERS_H__


2 
	#__SOCK_HELPERS_H__
 1

	)

4 
»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

5 
wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/dpdk/ctrl_plane/tests/test_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<¬·/š‘.h
>

5 
	~"hªdËrs.h
"

7 
	$cbf_‹¡
(
p4_ù¾_msg
* 
ù¾_m
)

9 
i
;

10 
p4_f›ld_m©ch_h—d”
* 
fmh
;

11 
p4_f›ld_m©ch_exaù
* 
exaù
 = 0;

12 
	`´štf
("-----------CALLBACK---------------\n");

14 ià(
ù¾_m
->
ty³
 =ğ
P4T_ADD_TABLE_ENTRY
)

16 
	`´štf
(" #### ADD_TABLE_ENTRY\n");

17 
	`´štf
(" ## TabË‚ame: %s\n", 
ù¾_m
->
bË_Çme
);

18 
i
=0;i<
ù¾_m
->
num_f›ld_m©ches
;++i) {

19 
fmh
 = 
ù¾_m
->
f›ld_m©ches
[
i
];

20 ià(
fmh
->
ty³
==
P4_FMT_EXACT
) {

21 
exaù
 = (
p4_f›ld_m©ch_exaù
*)
fmh
;

22 
	`´štf
(" ## F›ld m©ch %d: % %d b™ exaù %02x:%02x:%02x:%02x:%02x:%02x\n", 
i
, 
fmh
->
Çme
,
exaù
->
Ëngth
,ƒxaù->
b™m­
[0],exaù->b™m­[1],exaù->b™m­[2],(
ušt8_t
)exact->bitmap[3],exact->bitmap[4],exact->bitmap[5] );

25 
	`´štf
(" ## F›ld m©ch %d: % nÙƒxaù\n", 
i
, 
fmh
->
Çme
);

27 
	`´štf
(" ## AùiÚ‚ame: %s\n", 
ù¾_m
->
aùiÚ_Çme
);

28 
i
=0;i<
ù¾_m
->
num_aùiÚ_·¿ms
;++i)

30 
	`´štf
(" ## AùiÚ…¬am %d: % %d b™ V:%d\n", 
i
, 
ù¾_m
->
aùiÚ_·¿ms
[i]->
Çme
,ù¾_m->aùiÚ_·¿ms[i]->
Ëngth
, *((
ušt8_t
*)ù¾_m->aùiÚ_·¿ms[i]->
b™m­
));

37 
	}
}

39 
	$maš
()

41 
i
=0;

42 
back’d
 
bg
;

43 
dige¡
 
d
;

44 
ušt8_t
 
mac
[6] = {0x00, 0x0d, 0x3f, 0xcd, 0x02, 0x5f};

45 
ušt8_t
 
pÜt
 = 16;

47 
	`´štf
("Create backend...\n");

48 
bg
 = 
	`ü—‹_back’d
(3,1000,"loÿlho¡", 11111, 
cbf_‹¡
);

50 
	`´štf
("Launch backend...\n");

51 
	`Ïunch_back’d
(
bg
);

53 ;
i
<2;++i) {

54 
	`´štf
("Wait...\n");

55 
	`¦“p
(1);

58 
	`´štf
("Send‡ digest...\n");

60 
	`´štf
(" * Create‡ digest‡nd‡dd fields...\n");

61 
d
 = 
	`ü—‹_dige¡
(
bg
, "mac_learn_digest");

65 
	`add_dige¡_f›ld
(
d
, 
mac
, 48);

66 
	`add_dige¡_f›ld
(
d
, &
pÜt
, 8);

69 
	`´štf
(" * Sendhe…repared digestohe„eceiver...\n");

70 
i
 = 
	`£nd_dige¡
(
bg
, 
d
, 0);

72 
	`´štf
(" *„‘v® = %d\n", 
i
);

74 
i
=0;i<10;++i) {

75 
	`´štf
("Wait...\n");

76 
	`¦“p
(1);

79 
	`´štf
("Stop backend...");

80 
	`¡İ_back’d
(
bg
);

82 
	`´štf
("Destroy backend...");

83 
	`de¡roy_back’d
(
bg
);

86 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/tests/test_messages.c

1 
	~"mes§ges.h
"

2 
	~"hªdËrs.h
"

3 
	~<¡dio.h
>

4 
	~<as£¹.h
>

5 
	~<¡ršg.h
>

7 
	#BUFFLEN
 1024

	)

9 
	$‹¡_p4_h—d”
()

11 
bufãr
[
BUFFLEN
];

12 
p4_h—d”
* 
h—d”
;

13 
p4_h—d”
* 
h—d”2
;

15 
h—d”
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

16 
h—d”
->
xid
 = 112222;

17 
h—d”
->
ty³
 = 
P4T_ECHO_REQUEST
;

19 
h—d”2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

21 
	`check_p4_h—d”
Ğ
h—d”
, 
h—d”2
 );

22 
	}
}

24 
	$‹¡_p4_£t_deçuÉ_aùiÚ
()

26 
bufãr
[
BUFFLEN
];

27 
p4_h—d”
* 
h
;

28 
p4_h—d”
* 
h2
;

29 
p4_£t_deçuÉ_aùiÚ
* 
sda
;

30 
p4_£t_deçuÉ_aùiÚ
* 
sda2
;

31 
p4_aùiÚ
* 
a
;

32 
p4_aùiÚ
* 
a2
;

33 
p4_aùiÚ_·¿m‘”
* 
­
;

34 
p4_aùiÚ_·¿m‘”
* 
­2
;

35 
ušt32_t
 
v®
 = 9987112;

36 
ušt16_t
 
off£t
 = 0;

37 
ušt16_t
 
i
 = 0;

38 
p4_ù¾_msg
 
ù¾_m
;

40 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

41 
h
->
xid
 = 112223;

43 
sda
 = 
	`ü—‹_p4_£t_deçuÉ_aùiÚ
(
bufãr
,0,
BUFFLEN
);

44 
	`¡rıy
(
sda
->
bË_Çme
,"smac");

46 
a
 = &(
sda
->
aùiÚ
);

47 
	`¡rıy
(
a
->
desütiÚ
.
Çme
,"smac_hit");

49 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 
BUFFLEN
);

50 
	`¡rıy
(
­
->
Çme
, "port");

51 
	`memıy
(
­
->
b™m­
, &
v®
, (val));

52 
­
->
Ëngth
 = (
v®
)*8;

54 
	`as£¹
(
h
->
Ëngth
 =ğ((
p4_£t_deçuÉ_aùiÚ
è+ (
p4_aùiÚ_·¿m‘”
)));

55 
	`as£¹
(
a
->
·¿m_size
 == 1);

57 
h2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

59 
	`as£¹
(
h2
->
xid
 == 112223);

61 
sda2
 = 
	`uÅack_p4_£t_deçuÉ_aùiÚ
(
bufãr
, 0);

62 
a2
 = &(
sda2
->
aùiÚ
);

63 
off£t
 = (
p4_£t_deçuÉ_aùiÚ
);

65 
	`as£¹
Ğ
a2
->
·¿m_size
 == 1);

67 
i
 = 0;˜< 
a2
->
·¿m_size
; ++i) {

68 
­2
 = 
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
,
off£t
);

69 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

72 
	`as£¹
(
­2
->
Ëngth
 =ğ(
ušt32_t
)*8);

73 
	`as£¹
(*(
ušt32_t
*)&(
­2
->
b™m­
è=ğ
v®
);

77 
	`as£¹
(
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
sda2
, &
ù¾_m
) == 0);

79 
	`as£¹
(
ù¾_m
.
num_aùiÚ_·¿ms
 == 1);

80 
	`as£¹
(
ù¾_m
.
aùiÚ_·¿ms
[0]->
Ëngth
 =ğ(
ušt32_t
)*8);

81 
	`as£¹
(*(
ušt32_t
*)&(
ù¾_m
.
aùiÚ_·¿ms
[0]->
b™m­
è=ğ
v®
);

83 
	}
}

86 
	$maš
()

88 
	`´štf
("Test cases:\n");

89 
	`´štf
("*est_p4_header");

90 
	`fæush
(
¡dout
);

91 
	`‹¡_p4_h—d”
();

92 
	`´štf
(" OK\n");

95 
	`´štf
("*est_p4_set_default_action");

96 
	`fæush
(
¡dout
);

97 
	`‹¡_p4_£t_deçuÉ_aùiÚ
();

98 
	`´štf
(" OK\n");

101 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/threadpool.c

7 
	~<¡dio.h
>

8 
	~<¡dlib.h
>

9 
	~<uni¡d.h
>

10 
	~<±h»ad.h
>

11 
	~<sigÇl.h
>

12 
	~"th»adpoŞ.h
"

15 
±h»ad_kl
(
±h»ad_t
 
th»ad
, 
sig
);

17 
	swÜk_¡
{

18 (*
	mroutše
) (*);

19 * 
	m¬g
;

20 
wÜk_¡
* 
	mÃxt
;

21 } 
	twÜk_t
;

23 
	s_th»adpoŞ_¡
 {

25 
	mnum_th»ads
;

26 
	mqsize
;

27 
±h»ad_t
 *
	mth»ads
;

28 
wÜk_t
* 
	mqh—d
;

29 
wÜk_t
* 
	mq
;

30 
±h»ad_mu‹x_t
 
	mqlock
;

31 
±h»ad_cÚd_t
 
	mq_nÙ_em±y
;

32 
±h»ad_cÚd_t
 
	mq_em±y
;

33 
	mshutdown
;

34 
	mdÚt_acû±
;

35 } 
	t_th»adpoŞ
;

38 * 
	$do_wÜk
(
th»adpoŞ
 
p
) {

39 
_th»adpoŞ
 * 
poŞ
 = (_th»adpoŞ *è
p
;

40 
wÜk_t
* 
cur
;

43 
poŞ
->
qsize
 =…ool->qsize;

44 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

47  
poŞ
->
qsize
 == 0) {

48 if(
poŞ
->
shutdown
) {

49 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

50 
	`±h»ad_ex™
(
NULL
);

53 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

54 
	`±h»ad_cÚd_wa™
(&(
poŞ
->
q_nÙ_em±y
),&ÕoŞ->
qlock
));

57 if(
poŞ
->
shutdown
) {

58 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

59 
	`±h»ad_ex™
(
NULL
);

63 
cur
 = 
poŞ
->
qh—d
;

65 
poŞ
->
qsize
--;

67 if(
poŞ
->
qsize
 == 0) {

68 
poŞ
->
qh—d
 = 
NULL
;

69 
poŞ
->
q
 = 
NULL
;

72 
poŞ
->
qh—d
 = 
cur
->
Ãxt
;

75 if(
poŞ
->
qsize
 =ğ0 && !…oŞ->
shutdown
) {

77 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_em±y
));

79 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

80 (
cur
->
routše
è(cur->
¬g
);

81 
	`ä“
(
cur
);

83 
	}
}

85 
th»adpoŞ
 
	$ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
) {

86 
_th»adpoŞ
 *
poŞ
;

87 
i
;

90 ià((
num_th»ads_š_poŞ
 <ğ0è|| (num_th»ads_š_poŞ > 
MAXT_IN_POOL
))

91  
NULL
;

93 
poŞ
 = (
_th»adpoŞ
 *è
	`m®loc
((_threadpool));

94 ià(
poŞ
 =ğ
NULL
) {

95 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

96  
NULL
;

99 
poŞ
->
th»ads
 = (
±h»ad_t
*è
	`m®loc
 (Õth»ad_tè* 
num_th»ads_š_poŞ
);

101 if(!
poŞ
->
th»ads
) {

102 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

103  
NULL
;

106 
poŞ
->
num_th»ads
 = 
num_th»ads_š_poŞ
;

107 
poŞ
->
qsize
 = 0;

108 
poŞ
->
qh—d
 = 
NULL
;

109 
poŞ
->
q
 = 
NULL
;

110 
poŞ
->
shutdown
 = 0;

111 
poŞ
->
dÚt_acû±
 = 0;

114 if(
	`±h»ad_mu‹x_š™
(&
poŞ
->
qlock
,
NULL
)) {

115 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

116  
NULL
;

118 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_em±y
),
NULL
)) {

119 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

120  
NULL
;

122 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_nÙ_em±y
),
NULL
)) {

123 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

124  
NULL
;

129 
i
 = 0;˜< 
num_th»ads_š_poŞ
;i++) {

130 if(
	`±h»ad_ü—‹
(&(
poŞ
->
th»ads
[
i
]),
NULL
,
do_wÜk
,pool)) {

131 
	`årštf
(
¡d”r
, "Thread initiationƒrror!\n");

132  
NULL
;

135  (
th»adpoŞ
è
poŞ
;

136 
	}
}

139 
	$di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
,

140 *
¬g
) {

141 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
äom_me
;

142 
wÜk_t
 * 
cur
;

144 
cur
 = (
wÜk_t
*è
	`m®loc
((work_t));

145 if(
cur
 =ğ
NULL
) {

146 
	`årštf
(
¡d”r
, "Out of memory creating‡ work struct!\n");

150 
cur
->
routše
 = 
di¥©ch_to_h”e
;

151 
cur
->
¬g
 =‡rg;

152 
cur
->
Ãxt
 = 
NULL
;

154 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

156 if(
poŞ
->
dÚt_acû±
) {

157 
	`´štf
("Closed\n");

158 
	`ä“
(
cur
);

161 if(
poŞ
->
qsize
 == 0) {

162 
poŞ
->
qh—d
 = 
cur
;

163 
poŞ
->
q
 = 
cur
;

164 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_nÙ_em±y
));

166 
poŞ
->
q
->
Ãxt
 = 
cur
;

167 
poŞ
->
q
 = 
cur
;

169 
poŞ
->
qsize
++;

170 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

171 
	}
}

173 
	$de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
) {

174 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
de¡royme
;

175 
i
=0;

176 * 
nÙhšg
;

178 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

179 ;
i
 < 
poŞ
->
num_th»ads
;i++) {

180 
	`±h»ad_kl
(
poŞ
->
th»ads
[
i
], 
SIGUSR1
);

182 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

185 
i
=0;˜< 
poŞ
->
num_th»ads
;i++) {

187 
	`±h»ad_još
(
poŞ
->
th»ads
[
i
],&
nÙhšg
);

190 
	`ä“
(
poŞ
->
th»ads
);

192 
	`±h»ad_mu‹x_de¡roy
(&(
poŞ
->
qlock
));

193 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_em±y
));

194 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_nÙ_em±y
));

196 
	}
}

	@src/hardware_dep/dpdk/ctrl_plane/threadpool.h

9 
	#MAXT_IN_POOL
 200

	)

17 *
	tth»adpoŞ
;

25 (*
	tdi¥©ch_â
)(*);

32 
th»adpoŞ
 
	`ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
);

46 
	`di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
, *
¬g
);

53 
	`de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
);

	@src/hardware_dep/dpdk/data_plane/dpdk_lib.c

1 
	~"dpdk_lib.h
"

2 
	~"®Ÿ£s.h
"

3 
	~"back’d.h
"

4 
	~"ù¾_¶ªe_back’d.h
"

5 
	~"d©­ÏÃ.h
"

6 
	~<uni¡d.h
>

10 
__m128i
 
v®_‘h
[
RTE_MAX_ETHPORTS
];

11 
¹e_mempoŞ
 * 
pktmbuf_poŞ
[
NB_SOCKETS
];

12 
¹e_mempoŞ
 *
h—d”_poŞ
, *
şÚe_poŞ
;

13 
lcÜe_cÚf
†cÜe_cÚf[
RTE_MAX_LCORE
];

16 
ušt32_t
 
’abËd_pÜt_mask
;

17 
	g´omiscuous_Ú
 = 0;

18 
	gnuma_Ú
 = 1;

20 
	#MAX_LCORE_PARAMS
 1024

	)

21 
	slcÜe_·¿ms
 {

22 
ušt8_t
 
	mpÜt_id
;

23 
ušt8_t
 
	mqueue_id
;

24 
ušt8_t
 
	mlcÜe_id
;

25 } 
	g__¹e_ÿche_®igÃd
;

26 
lcÜe_·¿ms
 
	glcÜe_·¿ms_¬¿y
[
MAX_LCORE_PARAMS
];

27 
lcÜe_·¿ms
 
	glcÜe_·¿ms_¬¿y_deçuÉ
[];

28 
lcÜe_·¿ms
 * 
	glcÜe_·¿ms
;

29 
ušt16_t
 
	gnb_lcÜe_·¿ms
;

30 
lcÜe_·¿ms
 
	glcÜe_·¿ms_¬¿y
[
MAX_LCORE_PARAMS
];

31 
lcÜe_·¿ms
 
	glcÜe_·¿ms_¬¿y_deçuÉ
[] = {

43 
lcÜe_·¿ms
 * 
	glcÜe_·¿ms
 = 
lcÜe_·¿ms_¬¿y_deçuÉ
;

44 
ušt16_t
 
	gnb_lcÜe_·¿ms
 = (
lcÜe_·¿ms_¬¿y_deçuÉ
) /

45 (
lcÜe_·¿ms_¬¿y_deçuÉ
[0]);

47 
l2fwd_pÜt_¡©i¡ics
 
	gpÜt_¡©i¡ics
[
RTE_MAX_ETHPORTS
];

51 
lcÜe_queue_cÚf
 
	glcÜe_queue_cÚf
[
RTE_MAX_LCORE
];

53 
	grx_queue_³r_lcÜe
 = 1;

55 
	#MAX_JUMBO_PKT_LEN
 9600

	)

57 
	#RTE_TEST_RX_DESC_DEFAULT
 128

	)

58 
	#RTE_TEST_TX_DESC_DEFAULT
 512

	)

59 
ušt16_t
 
	gnb_rxd
 = 
RTE_TEST_RX_DESC_DEFAULT
;

60 
ušt16_t
 
	gnb_txd
 = 
RTE_TEST_TX_DESC_DEFAULT
;

62 
¹e_‘h_cÚf
 
	gpÜt_cÚf
 = {

63 .
rxmode
 = {

64 .
mq_mode
 = 
ETH_MQ_RX_RSS
,

65 .
	gmax_rx_pkt_Ën
 = 
ETHER_MAX_LEN
,

66 .
	g¥l™_hdr_size
 = 0,

67 .
	gh—d”_¥l™
 = 0,

68 .
	ghw__checksum
 = 1,

69 .
	ghw_vÏn_f‹r
 = 0,

70 .
	gjumbo_äame
 = 0,

71 .
	ghw_¡r_üc
 = 0,

73 .
	grx_adv_cÚf
 = {

74 .
rss_cÚf
 = {

75 .
rss_key
 = 
NULL
,

76 .
	grss_hf
 = 
ETH_RSS_IP
,

79 .
	gtxmode
 = {

80 .
mq_mode
 = 
ETH_MQ_TX_NONE
,

86 
	#UNUSED
(
x
è()(x)

	)

89 
	$check_lcÜe_·¿ms
()

91 
ušt8_t
 
lcÜe
;

92 
ušt16_t
 
i
;

93 
sock‘id
;

95 
i
 = 0; i < 
nb_lcÜe_·¿ms
; ++i) {

96 
ušt8_t
 
queue
 = 
lcÜe_·¿ms
[
i
].
queue_id
;

98 ià(
queue
 >ğ
MAX_RX_QUEUE_PER_PORT
) {

99 
	`´štf
("queunumb” %hhu ov” maximum„eûivšg queue ³¸pÜˆ(%hhu)\n", 
queue
, 
MAX_RX_QUEUE_PER_PORT
);

103 
lcÜe
 = 
lcÜe_·¿ms
[
i
].
lcÜe_id
;

105 ià(!
	`¹e_lcÜe_is_’abËd
(
lcÜe
)) {

106 
	`´štf
("”rÜ:†cÜ%hhu i nÙƒÇbËd iÀlcÜmask\n", 
lcÜe
);

110 ià((
sock‘id
 = 
	`¹e_lcÜe_to_sock‘_id
(
lcÜe
) != 0) &&

111 (
numa_Ú
 == 0)) {

112 
	`´štf
("warning:†core %hhu is on socket %d with‚uma off \n",

113 
lcÜe
, 
sock‘id
);

117 
	}
}

120 
	$check_pÜt_cÚfig
(cÚ¡ 
nb_pÜts
)

122 
pÜtid
;

123 
ušt16_t
 
i
;

125 
i
 = 0; i < 
nb_lcÜe_·¿ms
; ++i) {

126 
pÜtid
 = 
lcÜe_·¿ms
[
i
].
pÜt_id
;

128 ià((
’abËd_pÜt_mask
 & (1 << 
pÜtid
)) == 0) {

129 
	`´štf
("pÜˆ%u i nÙƒÇbËd iÀpÜˆmask\n", 
pÜtid
);

132 ià(
pÜtid
 >ğ
nb_pÜts
) {

133 
	`´štf
("pÜˆ%u i nÙ…»£Á oÀthbßrd\n", 
pÜtid
);

138 
	}
}

140 
ušt8_t


141 
	$g‘_pÜt_n_rx_queues
(cÚ¡ 
ušt8_t
 
pÜt
)

143 
queue
 = -1;

144 
ušt16_t
 
i
;

146 
i
 = 0; i < 
nb_lcÜe_·¿ms
; ++i) {

147 ià(
lcÜe_·¿ms
[
i
].
pÜt_id
 =ğ
pÜt
 &&†cÜe_·¿ms[i].
queue_id
 > 
queue
)

148 
queue
 = 
lcÜe_·¿ms
[
i
].
queue_id
;

150  (
ušt8_t
)(++
queue
);

151 
	}
}

154 
	$š™_lcÜe_rx_queues
()

156 
ušt16_t
 
i
, 
nb_rx_queue
;

157 
ušt8_t
 
lcÜe
;

159 
i
 = 0; i < 
nb_lcÜe_·¿ms
; ++i) {

160 
lcÜe
 = 
lcÜe_·¿ms
[
i
].
lcÜe_id
;

161 
nb_rx_queue
 = 
lcÜe_cÚf
[
lcÜe
].
n_rx_queue
;

163 ià(
nb_rx_queue
 >ğ
MAX_RX_QUEUE_PER_LCORE
) {

164 
	`´štf
("error:oo many queues (%u) for†core %u (max: %u)\n",

165 ()
nb_rx_queue
 + 1, ()
lcÜe
, 
MAX_RX_QUEUE_PER_LCORE
);

169 
lcÜe_cÚf
[
lcÜe
].
rx_queue_li¡
[
nb_rx_queue
].
pÜt_id
 =

170 
lcÜe_·¿ms
[
i
].
pÜt_id
;

171 
lcÜe_cÚf
[
lcÜe
].
rx_queue_li¡
[
nb_rx_queue
].
queue_id
 =

172 
lcÜe_·¿ms
[
i
].
queue_id
;

173 
lcÜe_cÚf
[
lcÜe
].
n_rx_queue
++;

176 
	}
}

180 
	$´št_u§ge
(cÚ¡ *
´gÇme
)

182 
	`´štf
 ("%s [EAL options] -- -p PORTMASK -P"

192 
´gÇme
);

193 
	}
}

195 
	$·r£_max_pkt_Ën
(cÚ¡ *
pk’
)

197 *
’d
 = 
NULL
;

198 
Ën
;

201 
Ën
 = 
	`¡¹oul
(
pk’
, &
’d
, 10);

202 ià((
pk’
[0] =ğ'\0'è|| (
’d
 =ğ
NULL
) || (*end != '\0'))

205 ià(
Ën
 == 0)

208  
Ën
;

209 
	}
}

212 
	$·r£_pÜtmask
(cÚ¡ *
pÜtmask
)

214 *
’d
 = 
NULL
;

215 
pm
;

218 
pm
 = 
	`¡¹oul
(
pÜtmask
, &
’d
, 16);

219 ià((
pÜtmask
[0] =ğ'\0'è|| (
’d
 =ğ
NULL
) || (*end != '\0'))

222 ià(
pm
 == 0)

225  
pm
;

226 
	}
}

229 
	$·r£_cÚfig
(cÚ¡ *
q_¬g
)

231 
s
[256];

232 cÚ¡ *
p
, *
p0
 = 
q_¬g
;

233 *
’d
;

234 
	ef›ldÇmes
 {

235 
FLD_PORT
 = 0,

236 
FLD_QUEUE
,

237 
FLD_LCORE
,

238 
_NUM_FLD


240 
št_æd
[
_NUM_FLD
];

241 *
¡r_æd
[
_NUM_FLD
];

242 
i
;

243 
size
;

245 
nb_lcÜe_·¿ms
 = 0;

247 (
p
 = 
	`¡rchr
(
p0
,'(')è!ğ
NULL
) {

248 ++
p
;

249 if((
p0
 = 
	`¡rchr
(
p
,')')è=ğ
NULL
)

252 
size
 = 
p0
 - 
p
;

253 if(
size
 >ğ(
s
))

256 
	`¢´štf
(
s
, (s), "%.*s", 
size
, 
p
);

257 ià(
	`¹e_¡r¥l™
(
s
, (s), 
¡r_æd
, 
_NUM_FLD
, ',') != _NUM_FLD)

259 
i
 = 0; i < 
_NUM_FLD
; i++){

260 
”ºo
 = 0;

261 
št_æd
[
i
] = 
	`¡¹oul
(
¡r_æd
[i], &
’d
, 0);

262 ià(
”ºo
 !ğ0 || 
’d
 =ğ
¡r_æd
[
i
] || 
št_æd
[i] > 255)

265 ià(
nb_lcÜe_·¿ms
 >ğ
MAX_LCORE_PARAMS
) {

266 
	`´štf
("exceeded max‚umber of†core…arams: %hu\n",

267 
nb_lcÜe_·¿ms
);

270 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
pÜt_id
 = (
ušt8_t
)
št_æd
[
FLD_PORT
];

271 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
queue_id
 = (
ušt8_t
)
št_æd
[
FLD_QUEUE
];

272 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
lcÜe_id
 = (
ušt8_t
)
št_æd
[
FLD_LCORE
];

273 ++
nb_lcÜe_·¿ms
;

275 
lcÜe_·¿ms
 = 
lcÜe_·¿ms_¬¿y
;

277 
	}
}

279 
	#CMD_LINE_OPT_CONFIG
 "cÚfig"

	)

280 
	#CMD_LINE_OPT_NO_NUMA
 "no-numa"

	)

281 
	#CMD_LINE_OPT_ENABLE_JUMBO
 "’abË-jumbo"

	)

282 
	#CMD_LINE_OPT_HASH_ENTRY_NUM
 "hash-’Œy-num"

	)

286 
	$·r£_¬gs
(
¬gc
, **
¬gv
)

288 
İt
, 
»t
;

289 **
¬gvİt
;

290 
İtiÚ_šdex
;

291 *
´gÇme
 = 
¬gv
[0];

292 
İtiÚ
 
lgİts
[] = {

293 {
CMD_LINE_OPT_CONFIG
, 1, 0, 0},

294 {
CMD_LINE_OPT_NO_NUMA
, 0, 0, 0},

295 {
CMD_LINE_OPT_ENABLE_JUMBO
, 0, 0, 0},

296 {
CMD_LINE_OPT_HASH_ENTRY_NUM
, 1, 0, 0},

297 {
NULL
, 0, 0, 0}

300 
¬gvİt
 = 
¬gv
;

302 (
İt
 = 
	`g‘İt_lÚg
(
¬gc
, 
¬gvİt
, "p:P",

303 
lgİts
, &
İtiÚ_šdex
)è!ğ
EOF
) {

305 
İt
) {

308 
’abËd_pÜt_mask
 = 
	`·r£_pÜtmask
(
İrg
);

309 ià(
’abËd_pÜt_mask
 == 0) {

310 
	`´štf
("invalid…ortmask\n");

311 
	`´št_u§ge
(
´gÇme
);

316 
	`´štf
("Promiscuous mode selected\n");

317 
´omiscuous_Ú
 = 1;

322 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_CONFIG
,

323  (
CMD_LINE_OPT_CONFIG
))) {

324 
»t
 = 
	`·r£_cÚfig
(
İrg
);

325 ià(
»t
) {

326 
	`´štf
("invalid config\n");

327 
	`´št_u§ge
(
´gÇme
);

332 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_NO_NUMA
,

333 (
CMD_LINE_OPT_NO_NUMA
))) {

334 
	`´štf
("numa is disabled \n");

335 
numa_Ú
 = 0;

338 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_ENABLE_JUMBO
,

339  (
CMD_LINE_OPT_ENABLE_JUMBO
))) {

340 
İtiÚ
 
Ënİts
 = {"max-pkt-Ën", 
»quœed_¬gum’t
, 0, 0};

342 
	`´štf
("jumbo frame isƒnabled - disabling simple TX…ath\n");

343 
pÜt_cÚf
.
rxmode
.
jumbo_äame
 = 1;

346 ià(0 =ğ
	`g‘İt_lÚg
(
¬gc
, 
¬gvİt
, "", &
Ënİts
, &
İtiÚ_šdex
)) {

347 
»t
 = 
	`·r£_max_pkt_Ën
(
İrg
);

348 ià((
»t
 < 64è|| (»ˆ> 
MAX_JUMBO_PKT_LEN
)){

349 
	`´štf
("invalid…acket†ength\n");

350 
	`´št_u§ge
(
´gÇme
);

353 
pÜt_cÚf
.
rxmode
.
max_rx_pkt_Ën
 = 
»t
;

355 
	`´štf
("set jumbo frame max…acket†engtho %u\n",

356 ()
pÜt_cÚf
.
rxmode
.
max_rx_pkt_Ën
);

361 
	`´št_u§ge
(
´gÇme
);

366 ià(
İtšd
 >= 0)

367 
¬gv
[
İtšd
-1] = 
´gÇme
;

369 
»t
 = 
İtšd
-1;

370 
İtšd
 = 0;

371  
»t
;

372 
	}
}

375 
	$´št_‘haddr
(cÚ¡ *
Çme
, cÚ¡ 
‘h”_addr
 *
‘h_addr
)

377 
buf
[
ETHER_ADDR_FMT_SIZE
];

378 
	`‘h”_fÜm©_addr
(
buf
, 
ETHER_ADDR_FMT_SIZE
, 
‘h_addr
);

379 
	`´štf
("%s%s", 
Çme
, 
buf
);

380 
	}
}

384 
	$check_®l_pÜts_lšk_¡©us
(
ušt8_t
 
pÜt_num
, 
ušt32_t
 
pÜt_mask
)

386 
	#CHECK_INTERVAL
 100

	)

387 
	#MAX_CHECK_TIME
 90

	)

388 
ušt8_t
 
pÜtid
, 
couÁ
, 
®l_pÜts_up
, 
´št_æag
 = 1;

389 
¹e_‘h_lšk
 
lšk
;

391 
	`´štf
("\nChecking†ink status \n");

392 
	`fæush
(
¡dout
);

393 
couÁ
 = 0; couÁ <ğ
MAX_CHECK_TIME
; count++) {

394 
®l_pÜts_up
 = 1;

395 
pÜtid
 = 0;…Ütid < 
pÜt_num
;…ortid++) {

396 ià((
pÜt_mask
 & (1 << 
pÜtid
)) == 0)

398 
	`mem£t
(&
lšk
, 0, (link));

399 
	`¹e_‘h_lšk_g‘_nowa™
(
pÜtid
, &
lšk
);

401 ià(
´št_æag
 == 1) {

402 ià(
lšk
.
lšk_¡©us
)

403 
	`´štf
("Port %d Link Up - speed %u "

404 "Mbp - %s\n", (
ušt8_t
)
pÜtid
,

405 ()
lšk
.
lšk_¥“d
,

406 (
lšk
.
lšk_du¶ex
 =ğ
ETH_LINK_FULL_DUPLEX
) ?

409 
	`´štf
("Port %d Link Down\n",

410 (
ušt8_t
)
pÜtid
);

414 ià(
lšk
.
lšk_¡©us
 == 0) {

415 
®l_pÜts_up
 = 0;

420 ià(
´št_æag
 == 1)

423 ià(
®l_pÜts_up
 == 0) {

424 
	`´štf
(".");

425 
	`fæush
(
¡dout
);

426 
	`¹e_d–ay_ms
(
CHECK_INTERVAL
);

430 ià(
®l_pÜts_up
 =ğ1 || 
couÁ
 =ğ(
MAX_CHECK_TIME
 - 1)) {

431 
´št_æag
 = 1;

432 
	`´štf
("done\n");

435 
	}
}

438 
	$ü—‹_bËs_Ú_sock‘
(
sock‘id
)

440 if(
bË_cÚfig
 =ğ
NULL
) ;

441 
	`´štf
("In™ŸlizšgabË Ú sock‘ %d\n", 
sock‘id
);

442 
i
;

443 
i
 = 0; i < 
NB_TABLES
; i++) {

444 
	`´štf
("C»©šgabË %d oÀsock‘ %d (%d cİ›s)\n", 
i
, 
sock‘id
, 
NB_REPLICA
);

445 
lookup_bË_t
 
t
 = 
bË_cÚfig
[
i
];

446 
j
;

447 
j
 = 0; j < 
NB_REPLICA
; j++) {

448 
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
] = 
	`m®loc
((
lookup_bË_t
));

449 
	`memıy
(
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
], &
t
, (
lookup_bË_t
));

450 
	`bË_ü—‹
(
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
], socketid);

452 
aùive_»¶iÿ
[
sock‘id
][
i
] = 0;

454 
	}
}

457 
	$g‘_sock‘id
(
lcÜe_id
)

459 ià(
numa_Ú
)

460  
	`¹e_lcÜe_to_sock‘_id
(
lcÜe_id
);

463 
	}
}

466 
	$š™_mem
(
nb_mbuf
)

468 
lcÜe_id
;

469 
s
[64];

471 
lcÜe_id
 = 0;†cÜe_id < 
RTE_MAX_LCORE
;†core_id++) {

472 ià(
	`¹e_lcÜe_is_’abËd
(
lcÜe_id
) == 0)

475 
sock‘id
 = 
	`g‘_sock‘id
(
lcÜe_id
);

477 ià(
sock‘id
 >ğ
NB_SOCKETS
) {

478 
	`¹e_ex™
(
EXIT_FAILURE
, "Socket %d of†core %u is out of„ange %d\n",

479 
sock‘id
, 
lcÜe_id
, 
NB_SOCKETS
);

481 ià(
pktmbuf_poŞ
[
sock‘id
] =ğ
NULL
) {

482 
	`¢´štf
(
s
, (s), "mbuf_poŞ_%d", 
sock‘id
);

483 
pktmbuf_poŞ
[
sock‘id
] =

484 
	`¹e_mempoŞ_ü—‹
(
s
, 
nb_mbuf
, 
MBUF_SIZE
, 
MEMPOOL_CACHE_SIZE
,

485 (
¹e_pktmbuf_poŞ_´iv©e
),

486 
¹e_pktmbuf_poŞ_š™
, 
NULL
,

487 
¹e_pktmbuf_š™
, 
NULL
,

488 
sock‘id
, 0);

489 ià(
pktmbuf_poŞ
[
sock‘id
] =ğ
NULL
)

490 
	`¹e_ex™
(
EXIT_FAILURE
,

491 "CªnÙ in™ mbuàpoŞ oÀsock‘ %d\n", 
sock‘id
);

493 
	`´štf
("AÎoÿ‹d mbuàpoŞ oÀsock‘ %d\n", 
sock‘id
);

497 
	}
}

499 
	$š™_lookup_bËs
()

501 
	`´štf
("Initializingables...\n");

502 
lcÜe_cÚf
 *
qcÚf
;

503 
sock‘id
;

504 
lcÜe_id
;

505 
lcÜe_id
 = 0;†cÜe_id < 
RTE_MAX_LCORE
;†core_id++) {

506 ià(
	`¹e_lcÜe_is_’abËd
(
lcÜe_id
) == 0) ;

507 ià(
numa_Ú
è
sock‘id
 = 
	`¹e_lcÜe_to_sock‘_id
(
lcÜe_id
);

508 
sock‘id
 = 0;

509 ià(
sock‘id
 >ğ
NB_SOCKETS
) {

510 
	`¹e_ex™
(
EXIT_FAILURE
, "Socket %d of†core %u is out of„ange %d\n",

511 
sock‘id
, 
lcÜe_id
, 
NB_SOCKETS
);

513 ià(
bËs_Ú_sock‘s
[
sock‘id
][0][0] =ğ
NULL
)

514 
	`ü—‹_bËs_Ú_sock‘
(
sock‘id
);

515 
qcÚf
 = &
lcÜe_cÚf
[
lcÜe_id
];

516 
i
;

517 
i
 = 0; i < 
NB_TABLES
; i++)

518 
qcÚf
->
bËs
[
i
] = 
bËs_Ú_sock‘s
[
sock‘id
][i][0];

520 
	`´štf
("Initializingables Done.\n");

522 
	}
}

524 
	$chªge_»¶iÿ
(
sock‘id
, 
tid
, 
»¶iÿ
) {

525 
lcÜe_cÚf
 *
qcÚf
;

526 
cÜe_sock‘id
;

527 
lcÜe_id
;

528 
lcÜe_id
 = 0;†cÜe_id < 
RTE_MAX_LCORE
;†core_id++) {

529 ià(
	`¹e_lcÜe_is_’abËd
(
lcÜe_id
) == 0) ;

530 
cÜe_sock‘id
 = 
	`¹e_lcÜe_to_sock‘_id
(
lcÜe_id
);

531 if(
cÜe_sock‘id
 !ğ
sock‘id
) ;

532 
qcÚf
 = &
lcÜe_cÚf
[
lcÜe_id
];

533 
qcÚf
->
bËs
[
tid
] = 
bËs_Ú_sock‘s
[
sock‘id
][tid][
»¶iÿ
];

534 
aùive_»¶iÿ
[
sock‘id
][
tid
] = 
»¶iÿ
;

537 
	}
}

539 
	#CHANGE_TABLE
(
fun
, 
·r
...) \

541 
cu¼’t_»¶iÿ
 = 
aùive_»¶iÿ
[
sock‘id
][
bËid
]; \

542 
Ãxt_»¶iÿ
 = (
cu¼’t_»¶iÿ
+1)%
NB_REPLICA
; \

543 
	`fun
(
bËs_Ú_sock‘s
[
sock‘id
][
bËid
][
Ãxt_»¶iÿ
], 
·r
); \

544 
	`chªge_»¶iÿ
(
sock‘id
, 
bËid
, 
Ãxt_»¶iÿ
); \

545 
	`u¦“p
(
TABCHANGE_DELAY
); \

546 
cu¼’t_»¶iÿ
 = 0; cu¼’t_»¶iÿ < 
NB_REPLICA
; current_replica++) \

547 if(
cu¼’t_»¶iÿ
 !ğ
Ãxt_»¶iÿ
è
	`fun
(
bËs_Ú_sock‘s
[
sock‘id
][
bËid
][cu¼’t_»¶iÿ], 
·r
); \

548 }

	)

550 
	#FORALLNUMANODES
(
b
) \

551 
sock‘id
; \

552 
sock‘id
 = 0; sock‘id < 
NB_SOCKETS
; socketid++) \

553 if(
bËs_Ú_sock‘s
[
sock‘id
][0][0] !ğ
NULL
) \

554 
b


	)

556 
	$exaù_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
) {

557 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
exaù_add
, 
key
, 
v®ue
))

558 
	}
}

560 
	$Ím_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
) {

561 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
Ím_add
, 
key
, 
d•th
, 
v®ue
))

562 
	}
}

564 
	$‹º¬y_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
) {

565 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
‹º¬y_add
, 
key
, 
mask
, 
v®ue
))

566 
	}
}

568 
	$bË_£tdeçuÉ_´omÙe
(
bËid
, 
ušt8_t
* 
v®ue
) {

569 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
bË_£tdeçuÉ
, 
v®ue
))

570 
	}
}

573 
ušt8_t


574 
	$š™Ÿlize
(
¬gc
, **
¬gv
)

576 
lcÜe_queue_cÚf
 *
qcÚf
;

577 
»t
;

578 
ušt8_t
 
nb_pÜts
;

579 
ušt8_t
 
nb_pÜts_avaabË
;

580 
ušt8_t
 
pÜtid
;

581 
rx_lcÜe_id
;

583 
»t
 = 
	`¹e_—l_š™
(
¬gc
, 
¬gv
);

584 ià(
»t
 < 0)

585 
	`¹e_ex™
(
EXIT_FAILURE
, "Invalid EAL‡rguments\n");

586 
¬gc
 -ğ
»t
;

587 
¬gv
 +ğ
»t
;

590 
»t
 = 
	`·r£_¬gs
(
¬gc
, 
¬gv
);

591 ià(
»t
 < 0)

592 
	`¹e_ex™
(
EXIT_FAILURE
, "Invalid L2FWD‡rguments\n");

594 
sock‘id
 = 
	`g‘_sock‘id
(
rx_lcÜe_id
);

597 
pktmbuf_poŞ
[
sock‘id
] =

598 
	`¹e_mempoŞ_ü—‹
("mbuf_poŞ", 
NB_MBUF
,

599 
MBUF_SIZE
, 32,

600 (
¹e_pktmbuf_poŞ_´iv©e
),

601 
¹e_pktmbuf_poŞ_š™
, 
NULL
,

602 
¹e_pktmbuf_š™
, 
NULL
,

603 
	`¹e_sock‘_id
(), 0);

604 ià(
pktmbuf_poŞ
[
sock‘id
] =ğ
NULL
)

605 
	`¹e_ex™
(
EXIT_FAILURE
, "Cannot init mbuf…ool\n");

607 
nb_pÜts
 = 
	`¹e_‘h_dev_couÁ
();

611 ià(
nb_pÜts
 > 
RTE_MAX_ETHPORTS
)

612 
nb_pÜts
 = 
RTE_MAX_ETHPORTS
;

614 
rx_lcÜe_id
 = 0;

615 
qcÚf
 = 
NULL
;

618 
pÜtid
 = 0;…Ütid < 
nb_pÜts
;…ortid++) {

620 ià((
’abËd_pÜt_mask
 & (1 << 
pÜtid
)) == 0)

624 
	`¹e_lcÜe_is_’abËd
(
rx_lcÜe_id
) == 0 ||

625 
lcÜe_queue_cÚf
[
rx_lcÜe_id
].
n_rx_pÜt
 =ğ
rx_queue_³r_lcÜe
) {

626 
rx_lcÜe_id
++;

627 ià(
rx_lcÜe_id
 >ğ
RTE_MAX_LCORE
)

628 
	`¹e_ex™
(
EXIT_FAILURE
, "Notƒnough cores\n");

631 ià(
qcÚf
 !ğ&
lcÜe_queue_cÚf
[
rx_lcÜe_id
])

633 
qcÚf
 = &
lcÜe_queue_cÚf
[
rx_lcÜe_id
];

635 
qcÚf
->
rx_pÜt_li¡
[qcÚf->
n_rx_pÜt
] = 
pÜtid
;

636 
qcÚf
->
n_rx_pÜt
++;

637 
	`´štf
("LcÜ%u: RX…Üˆ%u\n", 
rx_lcÜe_id
, (è
pÜtid
);

640 
nb_pÜts_avaabË
 = 
nb_pÜts
;

643 
pÜtid
 = 0;…Ütid < 
nb_pÜts
;…ortid++) {

645 ià((
’abËd_pÜt_mask
 & (1 << 
pÜtid
)) == 0) {

646 
	`´štf
("Skpšg di§bËd…Üˆ%u\n", (è
pÜtid
);

647 
nb_pÜts_avaabË
--;

651 
	`´štf
("In™Ÿlizšg…Üˆ%u... ", (è
pÜtid
);

652 
	`fæush
(
¡dout
);

653 
»t
 = 
	`¹e_‘h_dev_cÚfigu»
(
pÜtid
, 1, 1, &
pÜt_cÚf
);

654 ià(
»t
 < 0)

655 
	`¹e_ex™
(
EXIT_FAILURE
, "Cannot configure device:ƒrr=%d,…ort=%u\n",

656 
»t
, (è
pÜtid
);

658 
	`¹e_‘h_maÿddr_g‘
(
pÜtid
,&
pÜts_‘h_addr
[portid]);

661 
	`fæush
(
¡dout
);

662 
»t
 = 
	`¹e_‘h_rx_queue_£tup
(
pÜtid
, 0, 
nb_rxd
,

663 
	`¹e_‘h_dev_sock‘_id
(
pÜtid
),

664 
NULL
,

665 
pktmbuf_poŞ
[
sock‘id
]);

666 ià(
»t
 < 0)

667 
	`¹e_ex™
(
EXIT_FAILURE
, "rte_eth_rx_queue_setup:err=%d,…ort=%u\n",

668 
»t
, (è
pÜtid
);

671 
	`fæush
(
¡dout
);

672 
»t
 = 
	`¹e_‘h_tx_queue_£tup
(
pÜtid
, 0, 
nb_txd
,

673 
	`¹e_‘h_dev_sock‘_id
(
pÜtid
),

674 
NULL
);

675 ià(
»t
 < 0)

676 
	`¹e_ex™
(
EXIT_FAILURE
, "rte_eth_tx_queue_setup:err=%d,…ort=%u\n",

677 
»t
, (è
pÜtid
);

680 
»t
 = 
	`¹e_‘h_dev_¡¬t
(
pÜtid
);

681 ià(
»t
 < 0)

682 
	`¹e_ex™
(
EXIT_FAILURE
, "rte_eth_dev_start:err=%d,…ort=%u\n",

683 
»t
, (è
pÜtid
);

685 
	`´štf
("done: \n");

687 
	`¹e_‘h_´omiscuous_’abË
(
pÜtid
);

689 
	`´štf
("Port %u, MAC‡ddress: %02X:%02X:%02X:%02X:%02X:%02X\n\n",

690 (è
pÜtid
,

691 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[0],

692 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[1],

693 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[2],

694 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[3],

695 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[4],

696 
pÜts_‘h_addr
[
pÜtid
].
addr_by‹s
[5]);

699 
	`mem£t
(&
pÜt_¡©i¡ics
, 0, (port_statistics));

707 
	`check_®l_pÜts_lšk_¡©us
(
nb_pÜts
, 
’abËd_pÜt_mask
);

709 
	`š™_lookup_bËs
();

711  
nb_pÜts
;

712 
	}
}

	@src/hardware_dep/dpdk/data_plane/dpdk_primitives.c

1 
	~"back’d.h
"

2 
	~"d©­ÏÃ.h
"

4 
	~<¡ršg.h
>

6 
	~<¹e_mempoŞ.h
>

7 
	~<¹e_mbuf.h
>

9 
	~<¬·/š‘.h
>

12 
	$add_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

14 if(
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 =ğ
NULL
) {

15 
ušt16_t
 
Ën
 = 
h
.
by‹width
;

16 * 
add»ss
 = 
	`¹e_pktmbuf_´•’d
(
p
->
poš‹r
, 
Ën
);

17 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
] =

18 (
h—d”_desütÜ_t
) {

19 .
ty³
 = 
h
.
h—d”_š¡ªû
,

20 .
poš‹r
 = 
add»ss
,

21 .
Ëngth
 = 
h
.
by‹width


24 
	`´štf
("Cannot‡dd‡ header instance‡lready…resent inhe…acket\n");

26 
	}
}

29 
	$»move_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

31 
h—d”_desütÜ_t
 
hd
 = 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
];

32 if(
hd
.
poš‹r
 !ğ
NULL
) {

33 
ušt16_t
 
Ën
 = (ušt16_t)
hd
.
Ëngth
;

34 
	`¹e_pktmbuf_adj
(
p
->
poš‹r
, 
Ën
);

35 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
Ëngth
 = 0;

36 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 = 
NULL
;

38 
	`´štf
("Cannot„emove‡ header instance‚ot…resent inhe…acket\n");

40 
	}
}

42 
ušt32_t


43 
	$exŒaù_štv®ue
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

45 if(
f
.
by‹width
 == 1)

46  (*(cÚ¡ 
ušt8_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
)è& f.
mask
è>> f.
b™off£t
;

48 
ušt32_t
 
v®
;

49 if(
f
.
by‹width
 == 2) {

50 
v®
 = (*(cÚ¡ 
ušt16_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
)è& f.
mask
è>> f.
b™off£t
;

51  
f
.
m‘a
 ? 
v®
 : 
	`Áohs
(val);

53 if(
f
.
by‹width
 <= 4)

54 
v®
 = (*(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
)è& f.
mask
è>> f.
b™off£t
;

56 
v®
 = *(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
è+ f.
by‹width
 - (uint32_t));

57  
f
.
m‘a
 ? 
v®
 : 
	`Áohl
(val);

60 
	}
}

62 
ušt8_t
*

63 
	$exŒaù_by‹buf
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

65 if(
f
.
b™width
 % 8 =ğ0 && f.
b™off£t
 == 0)

66  
	`FIELD_BYTE_ADDR
(
p
, 
f
);

69  
NULL
;

70 
	}
}

81 
	$add_to_št_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
¤c_v®
)

83 
ušt32_t
 
»s
 = 
	`exŒaù_štv®ue
(
p
, 
f
è+ 
¤c_v®
;

84 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
»s
);

85 
	}
}

88 
	$add_cÚ¡_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
) {

89 if(
f
.
by‹width
 <= 4) {

91 
ušt32_t
 
¤c_v®
 = 0;

92 
	`memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

93 
	`add_to_št_f›ld
(
p
, 
f
, 
¤c_v®
);

97 
	}
}

100 
	$modify_f›ld_to_cÚ¡32
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
v®
)

103 
ušt32_t
 
nv®
 = 
f
.
m‘a
 ? 
v®
 : 
	`htÚl
(val);

104 
ušt32_t
 
mask
 = 
f
.mask;

105 
ušt32_t
 
Ãwšt
 = (*(
	`FIELD_BYTE_ADDR
(
p
, 
f
))&~
mask
)|(
nv®
&(mask>>f.
b™off£t
))<<f.bitoffset;

106 
	`memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), &
Ãwšt
, f.
by‹width
);

107 
	}
}

110 
	$modify_f›ld_to_cÚ¡
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
)

112 if(
f
.
by‹width
 <= 4) {

113 
ušt32_t
 
¤c_v®
 = 0;

114 
	`memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

115 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
¤c_v®
);

117 if(
f
.
by‹width
 =ğ
¤ş’
)

118 
	`memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), 
¤c
, 
¤ş’
);

121 
	}
}

124 
	$modify_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

126 if(
d¡f
.
by‹width
 =ğ
¤cf
.bytewidth)

127 
	`modify_f›ld_to_cÚ¡
(
p
, 
d¡f
, 
	`FIELD_BYTE_ADDR
Õ, 
¤cf
), srcf.
by‹width
);

130 
	}
}

133 
	$add_f›lds
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf1
, f›ld_»ã»nû_ˆ
¤cf2
) {

134 if(
d¡f
.
by‹width
 <= 4) {

135 
ušt32_t
 
v®
 = 
	`exŒaù_štv®ue
(
p
, 
¤cf1
è+ƒxŒaù_štv®ueÕ, 
¤cf2
);

136 
	`modify_f›ld_to_cÚ¡32
(
p
, 
d¡f
, 
v®
);

140 
	}
}

143 
	$add_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

145 
	`add_f›lds
(
p
, 
d¡f
, d¡f, 
¤cf
);

146 
	}
}

149 
	$g’”©e_dige¡
(
back’d
 
bg
, * 
Çme
, 
»ûiv”
, 
ty³_f›ld_li¡
* 
dige¡_f›ld_li¡
)

151 
dige¡
 
d
 = 
	`ü—‹_dige¡
(
bg
, 
Çme
);

152 
i
;

153 
i
 = 0; i < 
dige¡_f›ld_li¡
->
f›lds_quªt™y
; i++)

154 
d
 = 
	`add_dige¡_f›ld
(d, 
dige¡_f›ld_li¡
->
f›ld_off£ts
[
i
], dige¡_f›ld_li¡->
f›ld_widths
[i]);

155 
	`£nd_dige¡
(
bg
, 
d
, 
»ûiv”
);

156 
	}
}

158 
	$no_İ
()

160 
	}
}

162 
	$cİy_h—d”
(
·ck‘
* 
p1
,…ack‘* 
p2
, 
h—d”_idx
 
h1
, h—d”_idx 
h2
, 
Ëngth
 
l
)

165 
	}
}

167 
	$drİ
(
·ck‘
* 
p
)

170 
	}
}

	@src/hardware_dep/dpdk/data_plane/dpdk_tables.c

1 
	~"back’d.h
"

2 
	~"d©­ÏÃ.h
"

3 
	~"dpdk_bËs.h
"

8 
	~<¹e_hash.h
>

9 
	~<¹e_Ím.h
>

10 
	~<¹e_Ím6.h
>

11 
	~"‹º¬y_Çive.h
"

13 
	~<¹e_m®loc.h
>

14 
	~<¹e_v”siÚ.h
>

16 
ušt8_t
*

17 
	$cİy_to_sock‘
(
ušt8_t
* 
¤c
, 
Ëngth
, 
sock‘id
) {

18 
ušt8_t
* 
d¡
 = 
	`¹e_m®loc_sock‘
("ušt8_t", (ušt8_t)*
Ëngth
, 0, 
sock‘id
);

19 
	`memıy
(
d¡
, 
¤c
, 
Ëngth
);

20  
d¡
;

21 
	}
}

26 
ušt32_t
 
	$üc32
(cÚ¡ *
d©a
, 
ušt32_t
 
d©a_Ën
, ušt32_ˆ
š™_v®
) {

27 cÚ¡ 
ušt8_t
* 
by‹s
 = 
d©a
;

28 
ušt32_t
 
üc
, 
mask
;

29 
i
, 
j
;

30 
i
 = 0;

31 
üc
 = 0xFFFFFFFF;

32 
i
 < 
d©a_Ën
) {

33 
üc
 = crø^ 
by‹s
[
i
];

34 
j
 = 7; j >= 0; j--) {

35 
mask
 = -(
üc
 & 1);

36 
üc
 = (üø>> 1è^ (0xEDB88320 & 
mask
);

38 
i
 = i + 1;

40  ~
üc
;

41 
	}
}

46 
¹e_hash
 *

47 
	$hash_ü—‹
(
sock‘id
, cÚ¡ * 
Çme
, 
ušt32_t
 
keyËn
, 
¹e_hash_funùiÚ
 
hashfunc
)

49 
¹e_hash_·¿m‘”s
 
hash_·¿ms
 = {

50 .
Çme
 = 
NULL
,

51 .
’Œ›s
 = 
HASH_ENTRIES
,

52 #ià
RTE_VER_MAJOR
 =ğ2 && 
RTE_VER_MINOR
 == 0

53 .
buck‘_’Œ›s
 = 4,

55 .
key_Ën
 = 
keyËn
,

56 .
hash_func
 = 
hashfunc
,

57 .
hash_func_š™_v®
 = 0,

59 
hash_·¿ms
.
Çme
 =‚ame;

60 
hash_·¿ms
.
sock‘_id
 = 
sock‘id
;

61 
¹e_hash
 *
h
 = 
	`¹e_hash_ü—‹
(&
hash_·¿ms
);

62 ià(
h
 =ğ
NULL
)

63 
	`¹e_ex™
(
EXIT_FAILURE
, "DPDK: UÇbËØü—‹hhash oÀsock‘ %d\n", 
sock‘id
);

64  
h
;

65 
	}
}

67 
¹e_Ím
 *

68 
	$Ím4_ü—‹
(
sock‘id
, cÚ¡ * 
Çme
, 
ušt8_t
 
max_size
)

70 
¹e_Ím
 *
l
 = 
	`¹e_Ím_ü—‹
(
Çme
, 
sock‘id
, 
max_size
, 0 );

71 ià(
l
 =ğ
NULL
)

72 
	`¹e_ex™
(
EXIT_FAILURE
, "DPDK: UÇbËØü—‹hLPMabË oÀsock‘ %d\n", 
sock‘id
);

73  
l
;

74 
	}
}

76 
¹e_Ím6
 *

77 
	$Ím6_ü—‹
(
sock‘id
, cÚ¡ * 
Çme
, 
ušt8_t
 
max_size
)

79 
¹e_Ím6_cÚfig
 
cÚfig
;

80 
cÚfig
.
max_ruËs
 = 
max_size
;

82 
cÚfig
.
æags
 = 0;

83 
¹e_Ím6
 *
l
 = 
	`¹e_Ím6_ü—‹
(
Çme
, 
sock‘id
, &
cÚfig
);

84 ià(
l
 =ğ
NULL
)

85 
	`¹e_ex™
(
EXIT_FAILURE
, "DPDK: UÇbËØü—‹hLPM6abË oÀsock‘ %d\n", 
sock‘id
);

86  
l
;

87 
	}
}

89 
št32_t


90 
	$hash_add_key
(
¹e_hash
* 
h
, *
key
)

92 
št32_t
 
»t
;

93 
»t
 = 
	`¹e_hash_add_key
(
h
,(*è
key
);

94 ià(
»t
 < 0)

95 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe hash.\n");

96  
»t
;

97 
	}
}

100 
	$Ím4_add
(
¹e_Ím
* 
l
, 
ušt32_t
 
key
, 
ušt8_t
 
d•th
, ušt8_ˆ
v®ue
)

102 
»t
;

103 
»t
 = 
	`¹e_Ím_add
(
l
, 
key
, 
d•th
, 
v®ue
);

104 ià(
»t
 < 0)

105 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe LPMable\n");

106 
	`´štf
("LPM: Added 0x%08x / %d (%d)\n", ()
key
, 
d•th
, 
v®ue
);

107 
	}
}

110 
	$Ím6_add
(
¹e_Ím6
* 
l
, 
ušt8_t
 
key
[16], ušt8_ˆ
d•th
, ušt8_ˆ
v®ue
)

112 
»t
;

113 
»t
 = 
	`¹e_Ím6_add
(
l
, 
key
, 
d•th
, 
v®ue
);

114 ià(
»t
 < 0)

115 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe LPMable\n");

116 
	`´štf
("LPM: Addšg„ou‹ % / %d (%d)\n", "IPV6", 
d•th
, 
v®ue
);

117 
	}
}

126 
	$ü—‹_ext_bË
(
lookup_bË_t
* 
t
, * 
¹e_bË
, 
sock‘id
)

128 
ex‹nded_bË_t
* 
ext
 = 
	`¹e_m®loc_sock‘
("ex‹nded_bË_t", Óx‹nded_bË_t), 0, 
sock‘id
);

129 
ext
->
¹e_bË
 =„te_table;

130 
ext
->
size
 = 0;

131 
ext
->
cÚ‹Á
 = 
	`¹e_m®loc_sock‘
("ušt8_t*", (
ušt8_t
*)*
TABLE_MAX
, 0, 
sock‘id
);

132 
t
->
bË
 = 
ext
;

133 
	}
}

136 
	$bË_ü—‹
(
lookup_bË_t
* 
t
, 
sock‘id
)

138 
Çme
[64];

139 
t
->
sock‘id
 = socketid;

140 
t
->
ty³
)

142 
LOOKUP_EXACT
:

143 
	`¢´štf
(
Çme
, Òame), "%s_exaù_%d", 
t
->Çme, 
sock‘id
);

144 
¹e_hash
* 
h
 = 
	`hash_ü—‹
(
sock‘id
, 
Çme
, 
t
->
key_size
, 
üc32
);

145 
	`ü—‹_ext_bË
(
t
, 
h
, 
sock‘id
);

147 
LOOKUP_LPM
:

148 
	`¢´štf
(
Çme
, Òame), "%s_Ím_%d", 
t
->Çme, 
sock‘id
);

149 if(
t
->
key_size
 <= 4)

151 
¹e_Ím
* 
l
 = 
	`Ím4_ü—‹
(
sock‘id
, 
Çme
, 
t
->
max_size
);

152 
	`ü—‹_ext_bË
(
t
, 
l
, 
sock‘id
);

155 if(
t
->
key_size
 <= 16)

157 
¹e_Ím6
* 
l
 = 
	`Ím6_ü—‹
(
sock‘id
, 
Çme
, 
t
->
max_size
);

158 
	`ü—‹_ext_bË
(
t
, 
l
, 
sock‘id
);

162 
	`¹e_ex™
(
EXIT_FAILURE
, "LPM: key_size‚ot supported\n");

163 
LOOKUP_TERNARY
:

164 
t
->
bË
 = 
	`Çive_‹º¬y_ü—‹
Ñ->
key_size
,->
max_size
);

167 
	`´štf
("C»©edabË oàty³ %d oÀsock‘ %d\n", 
t
->
ty³
, 
sock‘id
);

168 
	}
}

174 
	$bË_£tdeçuÉ
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
v®ue
)

176 
	`´štf
("£t_deçuÉ - %d, %d, %p\n", 
t
->
v®_size
,->
sock‘id
,);

177 
t
->
deçuÉ_v®
 = 
	`cİy_to_sock‘
(
v®ue
,->
v®_size
,->
sock‘id
);

178 
	}
}

184 
	$exaù_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
)

186 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

187 
ušt32_t
 
šdex
 = 
	`¹e_hash_add_key
(
ext
->
¹e_bË
, (*è
key
);

188 if(
šdex
 < 0)

189 
	`¹e_ex™
(
EXIT_FAILURE
, "HASH:‡dd failed\n");

190 
ext
->
cÚ‹Á
[
šdex
%256] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

191 
	}
}

194 
	$Ím_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
)

196 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

197 if(
t
->
key_size
 <= 4)

199 
ext
->
cÚ‹Á
[ext->
size
] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

201 
ušt32_t
* 
key32
 = 
	`ÿÎoc
(1, (uint32_t));

202 
	`memıy
(
key32
, 
key
, 
t
->
key_size
);

203 
	`Ím4_add
(
ext
->
¹e_bË
, *
key32
, 
d•th
,ƒxt->
size
++);

205 if(
t
->
key_size
 <= 16)

207 
ext
->
cÚ‹Á
[ext->
size
] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

209 
ušt8_t
* 
key128
 = 
	`ÿÎoc
(16, (uint8_t));

210 
	`memıy
(
key128
, 
key
, 
t
->
key_size
);

211 
	`Ím6_add
(
ext
->
¹e_bË
, 
key128
, 
d•th
,ƒxt->
size
++);

213 
	}
}

216 
	$‹º¬y_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
)

218 
	`Çive_‹º¬y_add
(
t
->
bË
, 
key
, 
mask
, 
	`cİy_to_sock‘
(
v®ue
,->
v®_size
,->
sock‘id
));

219 
	}
}

224 
ušt8_t
*

225 
	$exaù_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

227 #ià
debug
 == 1

228 
	`´štf
("looku°%p\n", 
t
);

230 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

231 
»t
 = 0;

232 
»t
 = 
	`¹e_hash_lookup
(
ext
->
¹e_bË
, 
key
);

233  (
»t
 < 0)? 
t
->
deçuÉ_v®
 : 
ext
->
cÚ‹Á
[ret % 256];

234 
	}
}

236 
ušt8_t
*

237 
	$Ím_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

239 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

240 if(
t
->
key_size
 <= 4)

242 
ušt32_t
* 
key32
 = 
	`ÿÎoc
(1, (uint32_t));

243 
	`memıy
(
key32
, 
key
, 
t
->
key_size
);

244 
»t
 = 0;

245 
ušt8_t
 
»suÉ
;

246 
»t
 = 
	`¹e_Ím_lookup
(
ext
->
¹e_bË
, *
key32
, &
»suÉ
);

247  
»t
 =ğ0 ? 
ext
->
cÚ‹Á
[
»suÉ
] : 
t
->
deçuÉ_v®
;

249 if(
t
->
key_size
 <= 16)

251 
ušt8_t
* 
key128
 = 
	`ÿÎoc
(16, (uint8_t));

252 
	`memıy
(
key128
, 
key
, 
t
->
key_size
);

253 
»t
 = 0;

254 
ušt8_t
 
»suÉ
;

255 
»t
 = 
	`¹e_Ím6_lookup
(
ext
->
¹e_bË
, 
key128
, &
»suÉ
);

256  
»t
 =ğ0 ? 
ext
->
cÚ‹Á
[
»suÉ
] : 
t
->
deçuÉ_v®
;

258  
NULL
;

259 
	}
}

261 
ušt8_t
*

262 
	$‹º¬y_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

264 
ušt8_t
* 
»t
 = 
	`Çive_‹º¬y_lookup
(
t
->
bË
, 
key
);

265  
»t
 =ğ
NULL
 ? 
t
->
deçuÉ_v®
 :„et;

266 
	}
}

	@src/hardware_dep/dpdk/includes/aliases.h

1 #iâdeà
__ALIASES_H_


2 
	#__ALIASES_H_


	)

4 
	~<š‰y³s.h
>

6 
¹e_mbuf
 
	t·ck‘
;

7 
lcÜe_cÚf
 
	tcÚfigu¿tiÚ
;

9 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

10 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

11 
f›ld_ty³_e
 
	tf›ld_ty³_t
;

14 
ušt8_t
 
	th—d”_idx
;

15 
ušt8_t
 
	tf›ld
;

16 
ušt16_t
 
	tËngth
;

21 
·ck‘_desütÜ_s
 
	t·ck‘_desütÜ_t
;

22 
h—d”_desütÜ_s
 
	th—d”_desütÜ_t
;

24 
h—d”_»ã»nû_s
 
	th—d”_»ã»nû_t
;

25 
f›ld_»ã»nû_s
 
	tf›ld_»ã»nû_t
;

	@src/hardware_dep/dpdk/includes/dpdk_lib.h

1 #iâdeà
DPDK_LIB_H


2 
	#DPDK_LIB_H


	)

4 
	#debug
 1

	)

7 
	~<¹e_commÚ.h
>

8 
	~<¹e_log.h
>

9 
	~<¹e_memÜy.h
>

10 
	~<¹e_memıy.h
>

11 
	~<¹e_memzÚe.h
>

12 
	~<¹e_—l.h
>

13 
	~<¹e_³r_lcÜe.h
>

14 
	~<¹e_Ïunch.h
>

15 
	~<¹e_©omic.h
>

16 
	~<¹e_cyşes.h
>

17 
	~<¹e_´eãtch.h
>

18 
	~<¹e_lcÜe.h
>

19 
	~<¹e_³r_lcÜe.h
>

20 
	~<¹e_b¿nch_´ediùiÚ.h
>

21 
	~<¹e_š‹¼u±s.h
>

22 
	~<¹e_pci.h
>

23 
	~<¹e_¿ndom.h
>

24 
	~<¹e_debug.h
>

25 
	~<¹e_‘h”.h
>

26 
	~<¹e_‘hdev.h
>

27 
	~<¹e_ršg.h
>

28 
	~<¹e_mempoŞ.h
>

29 
	~<¹e_mbuf.h
>

30 
	~<¹e_veù.h
>

31 
	~<¹e_by‹Üd”.h
>

32 
	~<¹e_¡ršg_âs.h
>

34 
	~<g‘İt.h
>

38 
	~"d©a_¶ªe_d©a.h
"

39 
	~"back’d.h
"

40 
	~"d©­ÏÃ.h
"

41 
	~"dpdk_bËs.h
"

42 
	~"ù¾_¶ªe_back’d.h
"

47 
	~"®Ÿ£s.h
"

49 
	#·r£_as
 
¹e_pktmbuf_mtod


	)

50 
	#MAX_ETHPORTS
 
RTE_MAX_ETHPORTS


	)

55 
ušt32_t
 
’abËd_pÜt_mask
;

56 
´omiscuous_Ú
;

57 
numa_Ú
;

59 
	#RTE_LOGTYPE_L3FWD
 
RTE_LOGTYPE_USER1


60 
	#RTE_LOGTYPE_L2FWD
 
RTE_LOGTYPE_USER1


61 

	)

62 
	#MBUF_SIZE
 (2048 + (
¹e_mbuf
è+ 
RTE_PKTMBUF_HEADROOM
)

	)

72 
	#NB_MBUF
 8192

	)

73 
	#MEMPOOL_CACHE_SIZE
 256

	)

75 
	#MAX_PKT_BURST
 32

	)

76 
	#BURST_TX_DRAIN_US
 100

	)

78 
‘h”_addr
 
	gpÜts_‘h_addr
[
RTE_MAX_ETHPORTS
];

80 
	smbuf_bË
 {

81 
ušt16_t
 
	mËn
;

82 
¹e_mbuf
 *
	mm_bË
[
MAX_PKT_BURST
];

85 
	#MAX_RX_QUEUE_PER_LCORE
 1

86 
	#MAX_TX_QUEUE_PER_PORT
 1

87 
	#MAX_RX_QUEUE_PER_PORT
 1

88 

	)

89 
	#NB_SOCKETS
 8

	)

92 #iâdeà
NB_TABLES


93 
	#NB_TABLES
 0

	)

96 
	slcÜe_rx_queue
 {

97 
ušt8_t
 
	mpÜt_id
;

98 
ušt8_t
 
	mqueue_id
;

99 } 
	g__¹e_ÿche_®igÃd
;

102 
	slcÜe_queue_cÚf
 {

103 
	mn_rx_pÜt
;

104 
	mrx_pÜt_li¡
[
MAX_RX_QUEUE_PER_LCORE
];

105 
mbuf_bË
 
	mtx_mbufs
[
RTE_MAX_ETHPORTS
];

107 } 
	g__¹e_ÿche_®igÃd
;

109 
	slcÜe_cÚf
 {

110 
ušt64_t
 
	mtx_tsc
;

111 
ušt16_t
 
	mn_rx_queue
;

112 
lcÜe_rx_queue
 
	mrx_queue_li¡
[
MAX_RX_QUEUE_PER_LCORE
];

113 
ušt16_t
 
	mtx_queue_id
[
RTE_MAX_ETHPORTS
];

114 
mbuf_bË
 
	mtx_mbufs
[
RTE_MAX_ETHPORTS
];

115 
lookup_bË_t
* 
	mbËs
[
NB_TABLES
];

116 } 
	g__¹e_ÿche_®igÃd
;

118 
	#NB_REPLICA
 2

	)

120 
lookup_bË_t
 *
	gbËs_Ú_sock‘s
[
NB_SOCKETS
][
NB_TABLES
][
NB_REPLICA
];

121 
	gaùive_»¶iÿ
[
NB_SOCKETS
][
NB_TABLES
];

123 
	#TABCHANGE_DELAY
 50

124 

	)

126 
	sl2fwd_pÜt_¡©i¡ics
 {

127 
ušt64_t
 
	mtx
;

128 
ušt64_t
 
	mrx
;

129 
ušt64_t
 
	mdrİ³d
;

130 } 
	g__¹e_ÿche_®igÃd
;

132 
l2fwd_pÜt_¡©i¡ics
 
pÜt_¡©i¡ics
[
RTE_MAX_ETHPORTS
];

134 
	#PRINT_OPAQUE_STRUCT
(
p
è
	`´št_mem
(Õ), (*Õ)))

	)

135 
	$´št_mem_hex
(cÚ¡ *
vp
, 
size_t
 
n
) {

136 cÚ¡ *
p
 = 
vp
;

137 
size_t
 
i
=0; i<
n
; i++è
	`´štf
("%02x ", 
p
[i]);

138 
	`putch¬
('\n');

139 
	}
};

140 
	$´št_mem_bš
(cÚ¡ * cÚ¡ 
±r
, 
size_t
 cÚ¡ 
size
)

142 *
b
 = (*è
±r
;

143 
by‹
;

144 
i
, 
j
;

146 
i
=0;i<
size
;i++è
j
=0;j<8;j++) {

147 
by‹
 = 
b
[
i
] & (1<<
j
);

148 
by‹
 >>ğ
j
;

149 
	`´štf
("%u", 
by‹
);

151 
	`puts
("");

152 
	}
}

	@src/hardware_dep/dpdk/includes/dpdk_tables.h

1 #iâdeà
DPDK_TABLES_H


2 
	#DPDK_TABLES_H


	)

4 
	sex‹nded_bË_s
 {

5 * 
	m¹e_bË
;

6 
ušt8_t
 
	msize
;

7 
ušt8_t
** 
	mcÚ‹Á
;

8 } 
	tex‹nded_bË_t
;

13 #ifdeà
RTE_ARCH_X86_64


15 
	#HASH_ENTRIES
 1024*1024*4

	)

18 
	#HASH_ENTRIES
 1024*1024*1

	)

20 
	#LPM_MAX_RULES
 1024

	)

21 
	#LPM6_NUMBER_TBL8S
 (1 << 16)

	)

23 
	#TABLE_MAX
 256

	)

	@src/hardware_dep/dpdk/main.c

1 
	~"dpdk_lib.h
"

3 
ušt8_t
 
š™Ÿlize
(
¬gc
, **
¬gv
);

4 
š™_cÚŒŞ_¶ªe
();

5 
Ïunch_dpdk
();

7 
	$maš
(
¬gc
, ** 
¬gv
)

9 
	`š™Ÿlize
(
¬gc
, 
¬gv
);

10 
	`š™_cÚŒŞ_¶ªe
();

11 
»tv®
 = 
	`Ïunch_dpdk
();

12 
	`´štf
("Exiting…rogram.\n");

13  
»tv®
;

14 
	}
}

	@src/hardware_dep/dpdk/main_dpdk_main_loop.c

1 
	~"dpdk_lib.h
"

3 
__m128i
 
	gv®_‘h
[
RTE_MAX_ETHPORTS
];

4 
¹e_mempoŞ
 *
	gh—d”_poŞ
, *
	gşÚe_poŞ
;

5 
lcÜe_cÚf
 
	glcÜe_cÚf
[
RTE_MAX_LCORE
];

7 
p4_hªdË_·ck‘
(
·ck‘
* 
p
, 
pÜtid
);

11 
ušt32_t
 
	g’abËd_pÜt_mask
 = 0;

12 
‘h”_addr
 
	gpÜts_‘h_addr
[
RTE_MAX_ETHPORTS
];

16 
lcÜe_queue_cÚf
 
	glcÜe_queue_cÚf
[
RTE_MAX_LCORE
];

18 
rx_queue_³r_lcÜe
;

21 
	#TIMER_MILLISECOND
 2000000ULL

	)

22 
	#MAX_TIMER_PERIOD
 86400

	)

23 
št64_t
 
	gtim”_³riod
 = 10 * 
TIMER_MILLISECOND
 * 1000;

25 
	#MAX_PORTS
 16

	)

27 
	#MCAST_CLONE_PORTS
 2

	)

28 
	#MCAST_CLONE_SEGS
 2

	)

30 
	#RTE_TEST_RX_DESC_DEFAULT
 128

	)

31 
	#RTE_TEST_TX_DESC_DEFAULT
 512

	)

32 
ušt16_t
 
	gnb_rxd
 = 
RTE_TEST_RX_DESC_DEFAULT
;

33 
ušt16_t
 
	gnb_txd
 = 
RTE_TEST_TX_DESC_DEFAULT
;

36 
	#PKT_MBUF_DATA_SIZE
 
RTE_MBUF_DEFAULT_BUF_SIZE


	)

37 
	#NB_PKT_MBUF
 8192

	)

39 
	#HDR_MBUF_DATA_SIZE
 (2 * 
RTE_PKTMBUF_HEADROOM
)

	)

40 
	#NB_HDR_MBUF
 (
NB_PKT_MBUF
 * 
MAX_PORTS
)

	)

42 
	#NB_CLONE_MBUF
 (
NB_PKT_MBUF
 * 
MCAST_CLONE_PORTS
 * 
MCAST_CLONE_SEGS
 * 2)

	)

44 
	#BURST_TX_DRAIN_US
 100

	)

49 
	#DEPARSE_BUFFER_SIZE
 1024

	)

50 
¹e_mbuf
* 
	gd•¬£_mbuf
;

52 cÚ¡ 
¹e_‘h_cÚf
 
	gpÜt_cÚf
 = {

53 .
rxmode
 = {

54 .
¥l™_hdr_size
 = 0,

55 .
	gh—d”_¥l™
 = 0,

56 .
	ghw__checksum
 = 0,

57 .
	ghw_vÏn_f‹r
 = 0,

58 .
	gjumbo_äame
 = 0,

59 .
	ghw_¡r_üc
 = 0,

61 .
	gtxmode
 = {

62 .
mq_mode
 = 
ETH_MQ_TX_NONE
,

66 
¹e_mempoŞ
 * 
	gpktmbuf_poŞ
[
NB_SOCKETS
];

74 
šlše
 

75 
	$£nd_bur¡
(
lcÜe_cÚf
 *
qcÚf
, 
ušt16_t
 
n
, 
ušt8_t
 
pÜt
)

77 
¹e_mbuf
 **
m_bË
;

78 
»t
;

79 
ušt16_t
 
queueid
;

81 
queueid
 = 
qcÚf
->
tx_queue_id
[
pÜt
];

82 
m_bË
 = (
¹e_mbuf
 **)
qcÚf
->
tx_mbufs
[
pÜt
].m_table;

84 
»t
 = 
	`¹e_‘h_tx_bur¡
(
pÜt
, 
queueid
, 
m_bË
, 
n
);

85 ià(
	`uÆik–y
(
»t
 < 
n
)) {

87 
	`¹e_pktmbuf_ä“
(
m_bË
[
»t
]);

88 } ++
»t
 < 
n
);

92 
	}
}

95 
šlše
 

96 
	$£nd_timeout_bur¡
(
lcÜe_cÚf
 *
qcÚf
)

98 
ušt64_t
 
cur_tsc
;

99 
ušt8_t
 
pÜtid
;

100 cÚ¡ 
ušt64_t
 
d¿š_tsc
 = (
	`¹e_g‘_tsc_hz
(è+ 
US_PER_S
 - 1è/ US_PER_S * 
BURST_TX_DRAIN_US
;

102 
cur_tsc
 = 
	`¹e_rdtsc
();

103 ià(
	`lik–y
 (
cur_tsc
 < 
qcÚf
->
tx_tsc
 + 
d¿š_tsc
))

106 
pÜtid
 = 0;…Ütid < 
MAX_PORTS
;…ortid++) {

107 ià(
qcÚf
->
tx_mbufs
[
pÜtid
].
Ën
 != 0) {

108 
	`£nd_bur¡
(
qcÚf
, qcÚf->
tx_mbufs
[
pÜtid
].
Ën
,…ortid);

109 
qcÚf
->
tx_mbufs
[
pÜtid
].
Ën
 = 0;

112 
qcÚf
->
tx_tsc
 = 
cur_tsc
;

113 
	}
}

118 
	$g‘_sock‘id
(
lcÜe_id
)

120 ià(
numa_Ú
)

121  
	`¹e_lcÜe_to_sock‘_id
(
lcÜe_id
);

124 
	}
}

127 
šlše
 

128 
	$dbg_´št_h—d”s
(
·ck‘_desütÜ_t
* 
pd
)

130 
i
 = 0; i < 
HEADER_INSTANCE_COUNT
; ++i) {

131 
	`´štf
(" :: h—d” %d (ty³=%d,†’=%dèğ", 
i
, 
pd
->
h—d”s
[i].
ty³
,…d->h—d”s[i].
Ëngth
);

132 
j
 = 0; j < 
pd
->
h—d”s
[
i
].
Ëngth
; ++j) {

133 
	`´štf
("%02x ", ((
ušt8_t
*)(
pd
->
h—d”s
[
i
].
poš‹r
))[
j
]);

135 
	`´štf
("\n");

137 
	}
}

139 
šlše
 

140 
	$d•¬£_h—d”s
(
·ck‘_desütÜ_t
* 
pd
, 
sock‘id
)

142 
ušt8_t
* 
d•¬£_bufãr
 = (ušt8_t*)
	`¹e_pktmbuf_­³nd
(
d•¬£_mbuf
, 
DEPARSE_BUFFER_SIZE
);

143 
Ën
 = 0;

144 
i
 = 0; i < 
HEADER_INSTANCE_COUNT
; ++i) {

145 
ušt8_t
* 
hdr_±r
 = (ušt8_t*)(
pd
->
h—d”s
[
i
].
poš‹r
);

146 
hdr_Ën
 = 
pd
->
h—d”s
[
i
].
Ëngth
;

147 
j
 = 0; j < 
hdr_Ën
; ++j) {

148 *
d•¬£_bufãr
 = *
hdr_±r
;

149 ++
d•¬£_bufãr
;

150 ++
hdr_±r
;

152 
Ën
 +ğ
hdr_Ën
;

154  
Ën
;

155 
	}
}

158 
šlše
 
ušt32_t


159 
	$b™út
(
ušt32_t
 
v
)

161 
ušt32_t
 
n
;

163 
n
 = 0; 
v
 != 0; v &= v - 1,‚++)

166  (
n
);

167 
	}
}

170 
	$dpdk_£nd_·ck‘
(
¹e_mbuf
 *
m
, 
ušt8_t
 
pÜt
, 
ušt32_t
 
lcÜe_id
)

172 
lcÜe_cÚf
 *
qcÚf
 = &lcÜe_cÚf[
lcÜe_id
];

173 
ušt16_t
 
Ën
 = 
qcÚf
->
tx_mbufs
[
pÜt
].len;

174 
qcÚf
->
tx_mbufs
[
pÜt
].
m_bË
[
Ën
] = 
m
;

175 
qcÚf
->
tx_mbufs
[
pÜt
].
Ën
 = ++len;

180 #ià
debug
 == 1

181 
	`´štf
(" :: BURST SENDING DPDK PACKETS -…Üt:%d\n", 
pÜt
);

183 
	`£nd_bur¡
(
qcÚf
, 
Ën
, 
pÜt
);

184 
qcÚf
->
tx_mbufs
[
pÜt
].
Ën
 = 0;

188 
	}
}

191 
šlše
 
¹e_mbuf
 *

192 
	$mÿ¡_out_pkt
(
¹e_mbuf
 *
pkt
, 
u£_şÚe
)

194 
¹e_mbuf
 *
hdr
;

196 #ià
debug
 == 1

197 
	`´štf
("mcast_out_pkt‚ew mbuf is‚eeded...\n");

200 ià((
hdr
 = 
	`¹e_pktmbuf_®loc
(
h—d”_poŞ
)è=ğ
NULL
)

201  (
NULL
);

203 #ià
debug
 == 1

204 
	`´štf
("hdr is‡llocated\n");

208 ià(
u£_şÚe
 != 0 &&

209 (
pkt
 = 
	`¹e_pktmbuf_şÚe
Õkt, 
şÚe_poŞ
)è=ğ
NULL
) {

210 
	`¹e_pktmbuf_ä“
(
hdr
);

211  (
NULL
);

214 #ià
debug
 == 1

215 
	`´štf
("setup‚e header\n");

219 
hdr
->
Ãxt
 = 
pkt
;

223 
hdr
->
pkt_Ën
 = (
ušt16_t
)(hdr->
d©a_Ën
 + 
pkt
->pkt_len);

224 
hdr
->
nb_£gs
 = (
ušt8_t
)(
pkt
->nb_segs + 1);

227 
hdr
->
pÜt
 = 
pkt
->port;

228 
hdr
->
vÏn_tci
 = 
pkt
->vlan_tci;

229 
hdr
->
vÏn_tci_ou‹r
 = 
pkt
->vlan_tci_outer;

230 
hdr
->
tx_ofæßd
 = 
pkt
->tx_offload;

231 
hdr
->
hash
 = 
pkt
->hash;

233 
hdr
->
Ş_æags
 = 
pkt
->ol_flags;

235 
	`__¹e_mbuf_§n™y_check
(
hdr
, 1);

236  (
hdr
);

237 
	}
}

240 
	$dpdk_mÿ¡_·ck‘
(
¹e_mbuf
 *
m
, 
ušt32_t
 
pÜt_mask
, ušt32_ˆ
lcÜe_id
)

242 
¹e_mbuf
 *
mc
;

243 
ušt32_t
 
pÜt_num
, 
u£_şÚe
;

244 
ušt8_t
 
pÜt
;

246 
pÜt_num
 = 
	`b™út
(
pÜt_mask
);

249 
u£_şÚe
 = (
pÜt_num
 <ğ
MCAST_CLONE_PORTS
 &&

250 
m
->
nb_£gs
 <ğ
MCAST_CLONE_SEGS
);

253 ià(
u£_şÚe
 == 0)

254 
	`¹e_pktmbuf_»fút_upd©e
(
m
, (
ušt16_t
)
pÜt_num
);

256 #ià
debug
 == 1

257 
	`´štf
("USE_CLONE = %d\n", 
u£_şÚe
);

260 
pÜt
 = 0; 
u£_şÚe
 !ğ
pÜt_mask
;…ort_mask >>= 1,…ort++) {

263 ià((
pÜt_mask
 & 1) != 0) {

264 #ià
debug
 == 1

265 
	`´štf
("MCAST - PORT -%d\n", 
pÜt
);

267 ià((
mc
 = 
	`mÿ¡_out_pkt
(
m
, 
u£_şÚe
)è!ğ
NULL
) {

268 #ià
debug
 == 1

269 
	`´štf
("MCAST mc is„eady\n");

271 
	`dpdk_£nd_·ck‘
(
mc
, 
pÜt
, 
lcÜe_id
);

272 } ià(
u£_şÚe
 == 0)

273 
	`¹e_pktmbuf_ä“
(
m
);

281 ià(
u£_şÚe
 != 0)

282 
	`dpdk_£nd_·ck‘
(
m
, 
pÜt
, 
lcÜe_id
);

284 
	`¹e_pktmbuf_ä“
(
m
);

286 
	}
}

289 
	$dpdk_bÿ¡_·ck‘
(
¹e_mbuf
 *
m
, 
ušt8_t
 
šg»ss_pÜt
, 
ušt32_t
 
lcÜe_id
)

291 
¹e_mbuf
 *
mc
;

292 
ušt32_t
 
pÜt_num
;

293 
ušt8_t
 
pÜt
,
pÜtid
;

294 
pÜt_num
 = 2;

296 #ià
debug
 == 1

297 
	`´štf
("Brßdÿ¡ - ing»s pÜt:%d/%d\n", 
šg»ss_pÜt
, 
pÜt_num
);

303 
pÜt
 = 0;…Üt<
pÜt_num
;…ort++) {

306 ià(
pÜt
 !ğ
šg»ss_pÜt
) {

307 ià((
mc
 = 
	`mÿ¡_out_pkt
(
m
, 1)è!ğ
NULL
)

308 
	`dpdk_£nd_·ck‘
(
mc
, 
pÜt
, 
lcÜe_id
);

316 
	`¹e_pktmbuf_ä“
(
m
);

318 
	}
}

320 
	#EXTRACT_EGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 6è& 0x7fcè>> 2

	)

321 
	#EXTRACT_INGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 0è& 0x1ffè>> 0

	)

324 
šlše
 

325 
	$£nd_·ck‘
(
·ck‘_desütÜ_t
* 
pd
)

327 
pÜt
 = 
	`EXTRACT_EGRESSPORT
(
pd
);

328 
špÜt
 = 
	`EXTRACT_INGRESSPORT
(
pd
);

331 
ušt32_t
 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

332 
sock‘id
 = 
	`g‘_sock‘id
(
lcÜe_id
);

334 #ià
debug
 == 1

335 
	`´štf
(" :::: EGRESSING\n");

337 
	`´štf
(" :: deparsing headers\n");

344 #ià
debug
 == 1

345 
	`´štf
(" :: s’dšg…ack‘ oÀpÜˆ%d (lcÜ%d)\n", 
pÜt
, 
lcÜe_id
);

350 ià(
pÜt
==100)

351 
	`dpdk_bÿ¡_·ck‘
((
¹e_mbuf
 *)
pd
->
·ck‘
, 
špÜt
, 
lcÜe_id
);

353 
	`dpdk_£nd_·ck‘
((
¹e_mbuf
 *)
pd
->
·ck‘
, 
pÜt
, 
lcÜe_id
);

359 
	}
}

362 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

364 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

365 (
h—d”_desütÜ_t
) {

366 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

367 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

368 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

370 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

371 
	}
}

374 
	$·ck‘_»ûived
(
·ck‘
 *
p
, 
pÜtid
, 
lcÜe_cÚf
 *
cÚf
)

376 
·ck‘_desütÜ_t
 
·ck‘_desc
;

377 
·ck‘_desc
.
poš‹r
 = 
	`¹e_pktmbuf_mtod
(
p
, 
ušt8_t
 *);

378 
·ck‘_desc
.
·ck‘
 = 
p
;

379 
	`š™_m‘ad©a
(&
·ck‘_desc
, 
pÜtid
);

381 
	`hªdË_·ck‘
(&
·ck‘_desc
, 
cÚf
->
bËs
);

383 
	`£nd_·ck‘
(&
·ck‘_desc
);

384 
	}
}

387 
	$dpdk_maš_loİ
()

389 
·ck‘
 *
pkts_bur¡
[
MAX_PKT_BURST
];

390 
·ck‘
 *
p
;

391 
ušt64_t
 
´ev_tsc
, 
diff_tsc
, 
cur_tsc
;

392 
i
, 
j
, 
pÜtid
, 
nb_rx
;

393 cÚ¡ 
ušt64_t
 
d¿š_tsc
 = (
	`¹e_g‘_tsc_hz
(è+ 
US_PER_S
 - 1è/ US_PER_S * 
BURST_TX_DRAIN_US
;

395 
´ev_tsc
 = 0;

397 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

398 
lcÜe_queue_cÚf
 *
qcÚf
 = &lcÜe_queue_cÚf[
lcÜe_id
];

400 ià(
qcÚf
->
n_rx_pÜt
 == 0) {

401 
	`RTE_LOG
(
INFO
, 
L2FWD
, "lcÜ%u ha nÙhšgØdo\n", 
lcÜe_id
);

405 
	`RTE_LOG
(
INFO
, 
L2FWD
, "’‹ršg maš†oİ oÀlcÜ%u\n", 
lcÜe_id
);

407 
i
 = 0; i < 
qcÚf
->
n_rx_pÜt
; i++) {

409 
pÜtid
 = 
qcÚf
->
rx_pÜt_li¡
[
i
];

410 
	`RTE_LOG
(
INFO
, 
L2FWD
, " --†cÜeid=%u…Ütid=%u\n", 
lcÜe_id
,

411 
pÜtid
);

414 
lcÜe_cÚf
 *
cÚf
 = &lcÜe_cÚf[
lcÜe_id
];

418 
cur_tsc
 = 
	`¹e_rdtsc
();

423 
diff_tsc
 = 
cur_tsc
 - 
´ev_tsc
;

424 ià(
	`uÆik–y
(
diff_tsc
 > 
d¿š_tsc
)) {

426 
pÜtid
 = 0;…Ütid < 
RTE_MAX_ETHPORTS
;…ortid++) {

427 ià(
qcÚf
->
tx_mbufs
[
pÜtid
].
Ën
 == 0)

429 
	`£nd_bur¡
(&
lcÜe_cÚf
[
lcÜe_id
],

430 
qcÚf
->
tx_mbufs
[
pÜtid
].
Ën
,

431 (
ušt8_t
è
pÜtid
);

432 
qcÚf
->
tx_mbufs
[
pÜtid
].
Ën
 = 0;

435 
´ev_tsc
 = 
cur_tsc
;

441 
i
 = 0; i < 
qcÚf
->
n_rx_pÜt
; i++) {

443 
pÜtid
 = 
qcÚf
->
rx_pÜt_li¡
[
i
];

444 
nb_rx
 = 
	`¹e_‘h_rx_bur¡
((
ušt8_t
è
pÜtid
, 0,

445 
pkts_bur¡
, 
MAX_PKT_BURST
);

447 
j
 = 0; j < 
nb_rx
; j++) {

448 
p
 = 
pkts_bur¡
[
j
];

449 
	`¹e_´eãtch0
(
	`¹e_pktmbuf_mtod
(
p
, *));

451 
	`·ck‘_»ûived
(
p
, 
pÜtid
, 
cÚf
);

455 
	}
}

459 
Ïunch_Úe_lcÜe
(
__©Œibu‹__
((
unu£d
)è*
dummy
)

461 
dpdk_maš_loİ
();

465 
	$Ïunch_dpdk
()

468 
h—d”_poŞ
 = 
	`¹e_pktmbuf_poŞ_ü—‹
("h—d”_poŞ", 
NB_HDR_MBUF
, 32,

469 0, 
HDR_MBUF_DATA_SIZE
, 
	`¹e_sock‘_id
());

471 ià(
h—d”_poŞ
 =ğ
NULL
)

472 
	`¹e_ex™
(
EXIT_FAILURE
, "Cannot init header mbuf…ool\n");

474 
şÚe_poŞ
 = 
	`¹e_pktmbuf_poŞ_ü—‹
("şÚe_poŞ", 
NB_CLONE_MBUF
, 32,

475 0, 0, 
	`¹e_sock‘_id
());

477 ià(
şÚe_poŞ
 =ğ
NULL
)

478 
	`¹e_ex™
(
EXIT_FAILURE
, "Cannot init clone mbuf…ool\n");

480 
	`¹e_—l_mp_»mÙe_Ïunch
(
Ïunch_Úe_lcÜe
, 
NULL
, 
CALL_MASTER
);

482 
lcÜe_id
;

483 
	`RTE_LCORE_FOREACH_SLAVE
(
lcÜe_id
) {

484 ià(
	`¹e_—l_wa™_lcÜe
(
lcÜe_id
) < 0)

488 
	}
}

	@src/hardware_dep/dpdk/main_dpdk_main_loop_simulator.c

1 
	~"dpdk_lib.h
"

2 
	~<uni¡d.h
>

4 
__m128i
 
	gv®_‘h
[
RTE_MAX_ETHPORTS
];

5 
¹e_mempoŞ
 * 
	gpktmbuf_poŞ
[
NB_SOCKETS
];

6 
¹e_mempoŞ
 *
	gh—d”_poŞ
, *
	gşÚe_poŞ
;

7 
lcÜe_cÚf
 
	glcÜe_cÚf
[
RTE_MAX_LCORE
];

11 
ušt32_t
 
	g’abËd_pÜt_mask
 = 0;

12 
‘h”_addr
 
	gpÜts_‘h_addr
[
RTE_MAX_ETHPORTS
];

16 
	#EXTRACT_EGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 6è& 0x7fcè>> 2

	)

18 
šlše
 

19 
	$£nd_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘_desc
)

21 
pÜt
 = 
	`EXTRACT_EGRESSPORT
(
·ck‘_desc
);

22 
ušt32_t
 
lcÜe_id
;

23 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

24 
	`´štf
(" :::: PACKET HANDLED SUCCESSFULLY BY LCORE %d, TRANSMITTING ON PORT %d\n", 
lcÜe_id
, 
pÜt
);

26 
	}
}

29 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

31 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

32 (
h—d”_desütÜ_t
) {

33 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

34 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

35 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

37 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

38 
	}
}

40 
¹e_mbuf
* 
	gçke_·ck‘s
[2][4];

43 
	$dpdk_maš_loİ
()

45 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

46 
lcÜe_cÚf
 *
cÚf
 = &lcÜe_cÚf[
lcÜe_id
];

47 
	`RTE_LOG
(
INFO
, 
L2FWD
, "’‹ršg maš†oİ oÀlcÜ%u\n", 
lcÜe_id
);

48 
šdex
 = 0;

49 
¹e_mbuf
* 
p
;

50 
šdex
 < 4) {

51 
p
 = 
çke_·ck‘s
[
lcÜe_id
][
šdex
];

52 
·ck‘_desütÜ_t
 
·ck‘_desc
;

53 
·ck‘_desc
.
poš‹r
 = 
	`¹e_pktmbuf_mtod
(
p
, 
ušt8_t
 *);

54 
	`š™_m‘ad©a
(&
·ck‘_desc
, (
lcÜe_id
*2+
šdex
+1));

55 
	`hªdË_·ck‘
(&
·ck‘_desc
, 
cÚf
->
bËs
);

56 
	`£nd_·ck‘
(&
·ck‘_desc
);

57 if(
šdex
 == 1) {

58 
	`´štf
("### PACKET_GEN IS WAITING FOR THE DATAPLANE TO LEARN\n");

59 
	`¦“p
(1);

61 
šdex
++;

63 
	}
}

67 
Ïunch_Úe_lcÜe
(
__©Œibu‹__
((
unu£d
)è*
dummy
)

69 
dpdk_maš_loİ
();

73 
¹e_mempoŞ
* 
	gçkemempoŞ
;

76 
	$¡r2by‹s
(cÚ¡ * 
¡r
, 
size_t
 
Ën
, * 
»s
)

78 cÚ¡ *
pos
 = 
¡r
;

79 
size_t
 
couÁ
 = 0;

80 
couÁ
 = 0; couÁ < 
Ën
; count++) {

81 
	`ssÿnf
(
pos
, "%2hhx", &
»s
[
couÁ
]);

82 
pos
 += 2;

84 
	}
}

86 
¹e_mbuf
*

87 
	$çke_šcomšg_v4_·ck‘
(cÚ¡ * 
v4_d¡addr
)

89 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

90 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

91 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

92 * 
v4
 = 
	`¹e_pktmbuf_´•’d
(
p
, 20);

93 
	`¡r2by‹s
("450000280f444000800691f091ãa0ed", 16, 
v4
);

94 
	`¡r2by‹s
(
v4_d¡addr
, 4, 
v4
+16);

95 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

96 
	`¡r2by‹s
("080027ç4ff60000010000000800", 14, 
‘h”Ãt
);

97  
p
;

98 
	}
}

100 
¹e_mbuf
*

101 
	$çke_šcomšg_‘h_·ck‘
(cÚ¡ * 
d¡
, cÚ¡ * 
¤c
)

103 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

104 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

105 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

106 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

107 
	`¡r2by‹s
(
d¡
, 6, 
‘h”Ãt
+0);

108 
	`¡r2by‹s
(
¤c
, 6, 
‘h”Ãt
+6);

109 
	`¡r2by‹s
("0800", 2, 
‘h”Ãt
+12);

110  
p
;

111 
	}
}

114 
	$š™_çke_·ck‘s
()

116 
çkemempoŞ
 = 
	`¹e_mempoŞ_ü—‹
("‹¡_mbuf_poŞ", ()1023, 
MBUF_SIZE
, 
MEMPOOL_CACHE_SIZE
, (
¹e_pktmbuf_poŞ_´iv©e
), 
¹e_pktmbuf_poŞ_š™
, 
NULL
, 
¹e_pktmbuf_š™
, NULL, 0, 0);

123 
çke_·ck‘s
[0][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000001000000");

124 
çke_·ck‘s
[0][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000002000000");

125 
çke_·ck‘s
[1][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000003000000");

126 
çke_·ck‘s
[1][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000004000000");

129 
çke_·ck‘s
[0][2] = 
	`çke_šcomšg_‘h_·ck‘
("000001000000", "001234567890");

130 
çke_·ck‘s
[0][3] = 
	`çke_šcomšg_‘h_·ck‘
("000002000000", "001234567890");

131 
çke_·ck‘s
[1][2] = 
	`çke_šcomšg_‘h_·ck‘
("000003000000", "001234567890");

132 
çke_·ck‘s
[1][3] = 
	`çke_šcomšg_‘h_·ck‘
("000004000000", "001234567890");

133 
	}
}

135 
	$Ïunch_dpdk
()

137 
	`´štf
("Creating fake…ackets forest...\n");

138 
	`š™_çke_·ck‘s
();

139 
	`´štf
("Faked…ackets created.\n");

140 
	`´štf
("Executing…acket handlers onƒach core...\n");

141 
	`¹e_—l_mp_»mÙe_Ïunch
(
Ïunch_Úe_lcÜe
, 
NULL
, 
CALL_MASTER
);

142 
lcÜe_id
;

143 
	`RTE_LCORE_FOREACH_SLAVE
(
lcÜe_id
)

144 ià(
	`¹e_—l_wa™_lcÜe
(
lcÜe_id
) < 0)

147 
	}
}

	@src/hardware_dep/odp/ctrl_plane/controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<±h»ad.h
>

5 
	~<¡ršg.h
>

6 
	~<¡dlib.h
>

7 
	~<Ãtš‘/š.h
>

8 
	~<sys/ty³s.h
>

9 
	~<sys/sock‘.h
>

10 
	~"sock_h–³rs.h
"

11 
	~"fifo.h
"

12 
	~<sys/£Ëù.h
>

13 
	~"th»adpoŞ.h
"

15 
	smsg_buf_¡


17 
	md©a
[2048];

18 
	mËngth
;

19 } 
	tmsg_buf_t
;

21 
	scÚŒŞËr_¡


23 
th»adpoŞ
 
	moŞ
;

24 
fifo_t
 
	mšput_queue
;

25 
fifo_t
 
	mouut_queue
;

26 
	mcÚŒŞËr_fd
;

27 
dige¡_hªdËr
 
	mdh
;

28 
	mpÜt
;

29 } 
	tcÚŒŞËr_t
;

31 
	sth»adšfo_¡
 {

32 
cÚŒŞËr_t
* 
	mù
;

33 
	msock_fd
;

34 } 
	tth»adšfo_t
;

37 
	$šput_´oûssÜ
(*
t
)

39 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

40 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

41 
msg_buf_t
* 
mem_ûÎ
;

45 
	`fifo_wa™
Ğ&(
ù
->
šput_queue
) );

46 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
šput_queue
));

48 ià(
mem_ûÎ
==0) ;

50 
ù
->
	`dh
Ğ
mem_ûÎ
->
d©a
 );

53 
	`ä“
Ğ
mem_ûÎ
 );

55 
	}
}

57 
	$ouut_´oûssÜ
(*
t
)

59 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

60 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

61 
msg_buf_t
* 
mem_ûÎ
;

65 
	`fifo_wa™
Ğ&(
ù
->
ouut_queue
) );

66 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
ouut_queue
));

68 ià(
mem_ûÎ
==0) ;

69 
	`wr™e_p4_msg
(
ti
->
sock_fd
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

70 
	`ä“
 ( 
mem_ûÎ
 );

72 
	}
}

74 
cÚŒŞËr
 
	$ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
)

76 
cÚŒŞËr_t
* 
ù
;

77 
sockaddr_š
 
£rv”
;

80 ià((
pÜt
<=0è|| (
numb”_of_th»ads
<=0))

83 
ù
 = (
cÚŒŞËr_t
*è
	`m®loc
((controller_t));

85 ià(
ù
==0)

88 
ù
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(3);

90 
	`fifo_š™
(&(
ù
->
šput_queue
));

91 
	`fifo_š™
(&(
ù
->
ouut_queue
));

92 
ù
->
dh
 = dh;

94 
ù
->
cÚŒŞËr_fd
 = 
	`sock‘
Ğ
PF_INET
, 
SOCK_STREAM
, 0 );

97 
£rv”
.
sš_çmy
 = 
AF_INET
;

98 
£rv”
.
sš_addr
.
s_addr
 = 
INADDR_ANY
;

99 
£rv”
.
sš_pÜt
 = 
	`htÚs
(
pÜt
);

100 
ù
->
pÜt
 =…ort;

103 
	`bšd
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
£rv”
,  server );

105 
	`li¡’
Ğ
ù
->
cÚŒŞËr_fd
, 5 );

107  (
cÚŒŞËr
)
ù
;

108 
	}
}

110 
	$de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
)

112 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

113 
	`de¡roy_th»adpoŞ
(
ù
->
oŞ
);

114 
	`fifo_de¡roy
Ğ&(
ù
->
šput_queue
) );

115 
	`fifo_de¡roy
Ğ&(
ù
->
ouut_queue
) );

116 
	`şo£
(
ù
->
cÚŒŞËr_fd
);

117 
	`ä“
(
ù
);

118 
	}
}

120 
	$execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
)

122 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

123 
sockaddr_š
 
ş›Á
;

124 
sockËn_t
 
Ëngth
;

125 
th»adšfo_t
* 
ti
;

126 
cÚn
;

127 
i
;

128 
rv
;

129 
fd_£t
 
ma¡”
;

130 
fd_£t
 
»adfds
;

131 
maxfds
 = 
ù
->
cÚŒŞËr_fd
;

132 
msg_buf_t
* 
mem_ûÎ
;

134 
	`FD_ZERO
(&
ma¡”
);

135 
	`FD_SET
(
ù
->
cÚŒŞËr_fd
, &
ma¡”
);

139 
»adfds
 = 
ma¡”
;

141 
	`£Ëù
(
maxfds
+1, &
»adfds
, 0,0,0);

143 
i
=0;i<
maxfds
+1;++i)

145 ià(
	`FD_ISSET
(
i
, &
»adfds
)) {

146 ià(
i
==
ù
->
cÚŒŞËr_fd
) {

147 ià((
cÚn
 = 
	`acû±
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
ş›Á
, &
Ëngth
 )) < 0 )

150 
	`´štf
("New device connected...\n");

151 
ti
 = (
th»adšfo_t
*è
	`m®loc
((threadinfo_t));

152 
ti
->
ù
 = ct;

153 
ti
->
sock_fd
 = 
cÚn
;

154 
	`di¥©ch
(
ù
->
oŞ
, 
ouut_´oûssÜ
, (*)
ti
);

155 
	`¦“p
(1);

156 
	`di¥©ch
(
ù
->
oŞ
, 
šput_´oûssÜ
, (*)
ti
);

157 
	`FD_SET
(
cÚn
, &
ma¡”
);

158 
maxfds
 = 
cÚn
>maxfds?conn:maxfds;

160 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

161 
mem_ûÎ
->
Ëngth
 = 2048;

162 ià((
rv
=
	`»ad_p4_msg
(
i
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

164 
	`fifo_add_msg
Ğ&(
ù
->
šput_queue
), (*)
mem_ûÎ
 );

165 } ià(
rv
==0) {

166 
	`FD_CLR
(
i
, &
ma¡”
);

167 
	`şo£
(
i
);

168 
	`ä“
(
mem_ûÎ
);

177 
	}
}

179 
	$£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
)

181 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

182 
msg_buf_t
* 
mem_ûÎ
;

183 ià(
Ëngth
>2048)

186 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

188 
	`memıy
(
mem_ûÎ
->
d©a
, 
bufãr
, 
Ëngth
);

189 
mem_ûÎ
->
Ëngth
 =†ength;

190 ifĞ
	`fifo_add_msg
Ğ&(
ù
->
ouut_queue
), (*)
mem_ûÎ
 )==0)

191 
	`´štf
("ERR!!\n");

194 
	}
}

	@src/hardware_dep/odp/ctrl_plane/controller.h

1 #iâdeà
__CONTROLLER_H__


2 
	#__CONTROLLER_H__
 1

	)

4 
	~<uni¡d.h
>

5 
	~<¡dio.h
>

6 
	~<¡dšt.h
>

8 * 
	tcÚŒŞËr
;

9 (*
	tdige¡_hªdËr
)(*);

12 
cÚŒŞËr
 
	`ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
);

13 
	`de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
);

15 
	`execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
);

16 
	`£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/odp/ctrl_plane/ctrl_plane_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<¡ršg.h
>

5 
	~<¡dlib.h
>

6 
	~<uni¡d.h
>

7 
	~<±h»ad.h
>

8 
	~"th»adpoŞ.h
"

9 
	~<sys/ty³s.h
>

10 
	~<sys/sock‘.h
>

11 
	~<Ãtš‘/š.h
>

12 
	~<Ãtdb.h
>

13 
	~"sock_h–³rs.h
"

14 
	~"fifo.h
"

15 
	~<sys/£Ëù.h
>

17 
	#P4_BG_MEM_CELL_SIZE
 2048

	)

18 
	#P4_BG_QUEUE_SIZE
 1024

	)

20 
	#MIN
(
x
,
y
è(((xè< (y)è? (xè: (y))

	)

22 
	smem_ûÎ_¡
 {

23 * 
	md©a
;

24 
ušt16_t
 
	mËngth
;

25 
mem_ûÎ_¡
* 
	mÃxt
;

26 
mem_ûÎ_¡
* 
	m´ev
;

27 } 
	tmem_ûÎ_t
;

29 
	sback’d_¡
 {

30 * 
	mmsg_bufãr
;

31 
mem_ûÎ_t
* 
	munu£d_h—d
;

32 
mem_ûÎ_t
* 
	mu£d_h—d
;

33 
±h»ad_mu‹x_t
 
	mmemlock
;

34 
±h»ad_cÚd_t
 
	mmem_nÙ_em±y
;

35 
±h»ad_cÚd_t
 
	mmem_em±y
;

36 
	mshutdown
;

37 
	mdÚt_acû±
;

38 
th»adpoŞ
 
	moŞ
;

39 
	mcÚŒŞËr_fd
;

40 
sockaddr_š
 
	mcÚŒŞËr_addr
;

41 
	mcÚŒŞËr_sock
;

42 
fifo_t
 
	mšput_queue
;

43 
fifo_t
 
	mouut_queue
;

44 
p4_msg_ÿÎback
 
	mcb
;

45 } 
	tback’d_t
;

47 
	sdige¡_¡
 {

48 
mem_ûÎ_t
* 
	mmem_ûÎ
;

49 
p4_dige¡
* 
	mdige¡
;

50 } 
	tdige¡_t
;

52 
mem_ûÎ_t
* 
touch_mem_ûÎ
(
back’d_t
* 
bgt
);

53 
d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
);

55 
	$back’d_´oûssÜ
(* 
bg
)

57 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

58 
mem_ûÎ_t
* 
mem_ûÎ
;

59 
timev®
 
tv
;

60 
rv
;

61 
fd_£t
 
rfs
;

62 
fd_£t
 
ma¡”
;

64 
	`FD_ZERO
(&
ma¡”
);

65 
	`FD_SET
(
bgt
->
cÚŒŞËr_sock
, &
ma¡”
);

69 
tv
.
tv_£c
 = 5;

70 
tv
.
tv_u£c
 = 0;

71 
rfs
 = 
ma¡”
;

72 
rv
 = 
	`£Ëù
(
bgt
->
cÚŒŞËr_sock
+1, &
rfs
, 0, 0, &
tv
);

74 ià(
bgt
->
shutdown
==1) ;

75 ià(
rv
==0) ;

77 ià(
	`FD_ISSET
(
bgt
->
cÚŒŞËr_sock
, &
rfs
))

79 
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

80 ià((
rv
=
	`»ad_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

82 
	`fifo_add_msg
Ğ&(
bgt
->
šput_queue
), (*)
mem_ûÎ
 );

83 } ià(
rv
==0) ;

86 
	`şo£
(
bgt
->
cÚŒŞËr_sock
);

87 
	}
}

88 
	$šput_´oûssÜ
(*
bg
)

90 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

91 
mem_ûÎ_t
* 
mem_ûÎ
;

92 
rv®
;

96 
	`fifo_wa™
Ğ&(
bgt
->
šput_queue
) );

97 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
šput_queue
));

99 ià(
bgt
->
shutdown
==1) ;

100 ià(
mem_ûÎ
==0) ;

102 
rv®
 = 
	`hªdË_p4_msg
Ğ
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
, 
bgt
->
cb
 );

103 
	`´štf
(" :::: HªdË msg: %d\n", 
rv®
);

105 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

107 
	}
}

109 
	$ouut_´oûssÜ
(*
bg
)

111 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

112 
mem_ûÎ_t
* 
mem_ûÎ
;

116 
	`fifo_wa™
Ğ&(
bgt
->
ouut_queue
) );

117 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
ouut_queue
));

119 ià(
bgt
->
shutdown
==1) ;

120 ià(
mem_ûÎ
==0) ;

122 
	`wr™e_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

124 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

126 
	}
}

127 
back’d
 
	$ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
)

129 
back’d_t
 *
bg
;

130 
mem_ûÎ_t
 *
tmp
;

131 
i
;

132 
ho¡’t
 *
£rv”
;

134 ià((
num_of_th»ads
<=0è|| (
queue_size
<=0))

137 
bg
 = (
back’d_t
*è
	`m®loc
((backend_t));

138 ià(
bg
 == 0) {

139 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew backend!\n");

143 
bg
->
msg_bufãr
 = (*è
	`m®loc
(
P4_BG_MEM_CELL_SIZE
 * 
queue_size
);

144 ià(
bg
->
msg_bufãr
 == 0) {

145 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew msg_buffer!\n");

149 
bg
->
unu£d_h—d
 = 0;

150 
bg
->
u£d_h—d
 = 0;

152 
i
=0;i<
queue_size
;++i)

154 
tmp
 = (
mem_ûÎ_t
*è
	`m®loc
((mem_cell_t));

155 ià(
tmp
 == 0) {

156 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew mem cell†ist!\n");

159 
tmp
->
d©a
 = 
bg
->
msg_bufãr
 + 
P4_BG_MEM_CELL_SIZE
 * 
i
;

160 
tmp
->
Ëngth
 = 
P4_BG_MEM_CELL_SIZE
;

161 
tmp
->
´ev
 = 0;

162 
tmp
->
Ãxt
 = 
bg
->
unu£d_h—d
;

163 
bg
->
unu£d_h—d
 = 
tmp
;

166 
bg
->
shutdown
 = 0;

167 
bg
->
dÚt_acû±
 = 0;

170 if(
	`±h»ad_mu‹x_š™
(&(
bg
->
memlock
),
NULL
)) {

171 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

174 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_em±y
),
NULL
)) {

175 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

178 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_nÙ_em±y
),
NULL
)) {

179 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

183 
bg
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(
num_of_th»ads
);

185 
	`fifo_š™
(&(
bg
->
šput_queue
));

186 
	`fifo_š™
(&(
bg
->
ouut_queue
));

188 
bg
->
cÚŒŞËr_sock
 = 
	`sock‘
Ğ
AF_INET
, 
SOCK_STREAM
, 0 );

189 ifĞ
bg
->
cÚŒŞËr_sock
 == -1 )

191 
	`årštf
(
¡d”r
, "opening stream socket" );

196 
£rv”
 = 
	`g‘ho¡byÇme
(
cÚŒŞËr_Çme
);

197 ià(
£rv”
 == 0) {

198 
	`årštf
(
¡d”r
,"ERROR, CÚŒŞË¸ÿÂÙ bfound,‚Øsuch ho¡: %s\n", 
cÚŒŞËr_Çme
);

202 
	`mem£t
((*è&(
bg
->
cÚŒŞËr_addr
), 0, (
sockaddr_š
));

203 
bg
->
cÚŒŞËr_addr
.
sš_çmy
 = 
AF_INET
;

204 
	`memıy
Ğ(*è&(
bg
->
cÚŒŞËr_addr
.
sš_addr
), (*è(
£rv”
->
h_addr
), s”v”->
h_Ëngth
);

205 
bg
->
cÚŒŞËr_addr
.
sš_pÜt
 = 
	`htÚs
(
cÚŒŞËr_pÜt
);

207 
bg
->
cb
 = cb;

209  (
back’d
è
bg
;

210 
	}
}

212 
	$Ïunch_back’d
(
back’d
 
bg
)

214 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

216 ifĞ
	`cÚÃù
Ğ
bgt
->
cÚŒŞËr_sock
, (
sockaddr
 *è&(bgt->
cÚŒŞËr_addr
), (
sockaddr_š
) ) == -1 )

218 
	`årštf
(
¡dout
, "Connecting stream socket\n" );

224 
	`di¥©ch
(
bgt
->
oŞ
, 
back’d_´oûssÜ
, (*)bgt);

225 
	`¦“p
(1);

226 
	`di¥©ch
(
bgt
->
oŞ
, 
šput_´oûssÜ
, (*)bgt);

227 
	`¦“p
(1);

228 
	`di¥©ch
(
bgt
->
oŞ
, 
ouut_´oûssÜ
, (*)bgt);

229 
	}
}

231 
	$¡İ_back’d
(
back’d
 
bg
)

233 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

234 
bgt
->
shutdown
 = 1;

236 
	`de¡roy_th»adpoŞ
(
bgt
->
oŞ
);

237 
	}
}

240 
	$de¡roy_back’d
(
back’d
 
bg
)

242 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

243 
mem_ûÎ_t
 *
tmp
;

247 
tmp
 = 
bgt
->
u£d_h—d
;

248 
tmp
!=0) {

249 
bgt
->
u£d_h—d
 = 
tmp
->
Ãxt
;

250 
	`ä“
(
tmp
);

251 
tmp
 = 
bgt
->
u£d_h—d
;

254 
tmp
 = 
bgt
->
unu£d_h—d
;

255 
tmp
!=0) {

256 
bgt
->
unu£d_h—d
 = 
tmp
->
Ãxt
;

257 
	`ä“
(
tmp
);

258 
tmp
 = 
bgt
->
unu£d_h—d
;

261 
	`ä“
(
bgt
->
msg_bufãr
);

263 
	`±h»ad_mu‹x_de¡roy
(&(
bgt
->
memlock
));

264 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_em±y
));

265 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_nÙ_em±y
));

266 
	`fifo_de¡roy
Ğ&(
bgt
->
šput_queue
) );

267 
	`fifo_de¡roy
Ğ&(
bgt
->
ouut_queue
) );

269 
	`ä“
(
bgt
);

270 
	}
}

272 
mem_ûÎ_t
* 
	$touch_mem_ûÎ
(
back’d_t
* 
bgt
)

275 
mem_ûÎ_t
* 
»suÉ
 = 0;

276 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

277 ià(
bgt
->
unu£d_h—d
!=0) {

278 
»suÉ
 = 
bgt
->
unu£d_h—d
;

279 
bgt
->
unu£d_h—d
 = 
»suÉ
->
Ãxt
;

280 ià(
bgt
->
unu£d_h—d
!=0)

281 
bgt
->
unu£d_h—d
->
´ev
 = 0;

283 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_em±y
));

284 ià(
bgt
->
u£d_h—d
!=0) {

285 
bgt
->
u£d_h—d
->
´ev
 = 
»suÉ
;

286 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

288 
»suÉ
->
Ãxt
 = 
bgt
->
u£d_h—d
;

289 
bgt
->
u£d_h—d
 = 
»suÉ
;

291 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

292  
»suÉ
;

293 
	}
}

295 
	$d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
)

297 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

298 ià(
bgt
->
u£d_h—d
!=
ûÎ
)

299 
ûÎ
->
´ev
->
Ãxt
 = cell->next;

301 
bgt
->
u£d_h—d
 = 
ûÎ
->
Ãxt
;

302 ià(
ûÎ
->
Ãxt
!=0)

303 
ûÎ
->
Ãxt
->
´ev
 = cell->prev;

304 ià(
bgt
->
unu£d_h—d
!=0)

305 
bgt
->
unu£d_h—d
->
´ev
 = 
ûÎ
;

306 
ûÎ
->
Ãxt
 = 
bgt
->
unu£d_h—d
;

307 
ûÎ
->
´ev
 = 0;

308 
bgt
->
unu£d_h—d
 = 
ûÎ
;

309 ià(
bgt
->
u£d_h—d
==0)

310 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

311 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

312 
	}
}

314 
	$£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
)

316 
dige¡_t
* 
dt
 = (dige¡_t*)
d
;

317 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

319 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)(
dt
->
dige¡
));

320 ià(
	`fifo_add_msg
(&(
bgt
->
ouut_queue
), 
dt
->
mem_ûÎ
)==0)

323 
	`ä“
(
dt
);

325 
	}
}

327 
dige¡
 
	$ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
)

329 
back’d_t
* 
bgt
 = (back’d_t*è
bg
;

330 
dige¡_t
* 
dg
;

332 
dg
 = (
dige¡_t
*è
	`m®loc
( (digest_t) );

333 ià(
dg
==0)

335 
	`årštf
(
¡d”r
, "Out of memoryo‡‚ew digest message!\n");

339 
dg
->
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

340 ià(
dg
->
mem_ûÎ
 == 0)

342 
	`årštf
(
¡d”r
, "Out of memory…ool - memcell cannot be‡ssignedo‡‚ew digest message!\n");

346 
	`ü—‹_p4_h—d”
(
dg
->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

347 
dg
->
dige¡
 = 
	`ü—‹_p4_dige¡
(dg->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

349 ià(
	`¡¾’
Ğ
Çme
 ) > 
P4_MAX_FIELD_LIST_NAME_LEN
-1)

351 
	`årštf
(
¡d”r
, "ToØlÚg f›ldÇme! Thmaximum†’gth‡Îowed i %d\n", (
P4_MAX_FIELD_LIST_NAME_LEN
-1));

355 
	`¡ºıy
Ğ
dg
->
dige¡
->
f›ld_li¡_Çme
, 
Çme
, 
P4_MAX_FIELD_LIST_NAME_LEN
 );

356 
dg
->
dige¡
->
f›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
-1] = '\0';

358  (
dige¡
è
dg
;

359 
	}
}

362 
dige¡
 
	$add_dige¡_f›ld
(
dige¡
 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
)

364 
dige¡_t
* 
dg
 = (dige¡_t*è
d
;

365 
p4_dige¡_f›ld
* 
df›ld
;

366 
ušt32_t
 
by‹Ëngth
 = (
Ëngth
-1)/8+1;

368 
df›ld
 = 
	`add_p4_dige¡_f›ld
Ğ
dg
->
dige¡
, dg->
mem_ûÎ
->
Ëngth
 );

378 ià(
by‹Ëngth
>
P4_MAX_FIELD_VALUE_LENGTH
)

380 
	`årštf
(
¡d”r
, "ToØlÚg v®u¬¿y! Thmaximum by‹†’gth‡Îowed i %d\n", 
P4_MAX_FIELD_VALUE_LENGTH
);

384 
	`memıy
Ğ
df›ld
->
v®ue
, v®ue, 
	`MIN
(
by‹Ëngth
, 
P4_MAX_FIELD_VALUE_LENGTH
));

385 
df›ld
->
Ëngth
 =†ength;

386 
	`ÃtcÚv_p4_dige¡_f›ld
(
df›ld
);

388  
d
;

389 
	}
}

	@src/hardware_dep/odp/ctrl_plane/ctrl_plane_backend.h

1 #iâdeà
__BACKEND_H__


2 
	#__BACKEND_H__
 1

	)

4 
	~<¡dšt.h
>

5 
	~"hªdËrs.h
"

7 * 
	tback’d
;

8 * 
	tdige¡
;

11 
back’d
 
ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
);

12 
de¡roy_back’d
(
back’d
 
bg
);

13 
£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
);

14 
Ïunch_back’d
(
back’d
 
bg
);

15 
¡İ_back’d
(
back’d
 
bg
);

17 
dige¡
 
ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
);

18 
dige¡
 
add_dige¡_f›ld
(dige¡ 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
);

	@src/hardware_dep/odp/ctrl_plane/dpdk_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_smac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

18 
p4_f›ld_m©ch_exaù
* 
exaù
;

20 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

21 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

22 
	`¡rıy
(
‹
->
bË_Çme
, "smac");

24 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

25 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.srcAddr");

26 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

27 
exaù
->
Ëngth
 = 6*8+0;

29 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

30 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "_nop");

32 
	`ÃtcÚv_p4_h—d”
(
h
);

33 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

34 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

35 
	`ÃtcÚv_p4_aùiÚ
(
a
);

37 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

38 
	}
}

40 
	$fl_dmac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

42 
bufãr
[2048];

43 
p4_h—d”
* 
h
;

44 
p4_add_bË_’Œy
* 
‹
;

45 
p4_aùiÚ
* 
a
;

46 
p4_aùiÚ_·¿m‘”
* 
­
;

47 
p4_f›ld_m©ch_exaù
* 
exaù
;

49 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

50 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

51 
	`¡rıy
(
‹
->
bË_Çme
, "dmac");

53 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

54 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.dstAddr");

55 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

56 
exaù
->
Ëngth
 = 6*8+0;

58 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

59 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "forward");

61 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

62 
	`¡rıy
(
­
->
Çme
, "port");

63 
	`memıy
(
­
->
b™m­
, &
pÜt
, 1);

64 
­
->
Ëngth
 = 1*8+0;

66 
	`ÃtcÚv_p4_h—d”
(
h
);

67 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

68 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

69 
	`ÃtcÚv_p4_aùiÚ
(
a
);

70 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

72 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

73 
	}
}

75 
	$mac_Ë¬n_dige¡
(* 
b
) {

76 
i
;

77 
ušt8_t
 
mac
[6];

78 
ušt8_t
 
pÜt
[2];

79 
ušt16_t
 
off£t
=0;

80 
off£t
 = (
p4_dige¡
);

81 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

82 
	`memıy
(
mac
, 
df
->
v®ue
, 6);

83 
off£t
 +ğ(
p4_dige¡_f›ld
);

84 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

85 
	`memıy
(
pÜt
, 
df
->
v®ue
, 2);

87 
ušt8_t
 
p
 = 
pÜt
[0];

88 
	`´štf
("CŒl: mac_Ë¬n_dige¡ PORT: %d MAC: %02x:%02x:%02x:%02x:%02x:%02x\n", 
p
, 
mac
[0],mac[1],mac[2],mac[3],mac[4],mac[5]);

89 
	`fl_dmac_bË
(
p
, 
mac
);

90 
	`fl_smac_bË
(
p
, 
mac
);

92 
i
=0;i<6;++i)

93 
mac
[
i
]=255;

94 
	`fl_dmac_bË
(1,
mac
);

96 
	}
}

98 
	$‹¡_Ë¬n_
(* 
b
) {

99 
ušt8_t
 

[4];

100 
ušt16_t
 
´
;

101 
i1
;

102 
i2
;

103 
i3
;

105 
ušt16_t
 
off£t
=0;

106 
off£t
 = (
p4_dige¡
);

107 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

108 
	`memıy
(

, 
df
->
v®ue
, 4);

109 
off£t
 +ğ(
p4_dige¡_f›ld
);

110 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

111 
	`memıy
(&
´
, 
df
->
v®ue
, 2);

112 
off£t
 +ğ(
p4_dige¡_f›ld
);

113 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

114 
	`memıy
(&
i1
, 
df
->
v®ue
, 4);

115 
off£t
 +ğ(
p4_dige¡_f›ld
);

116 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

117 
	`memıy
(&
i2
, 
df
->
v®ue
, 4);

118 
off£t
 +ğ(
p4_dige¡_f›ld
);

119 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

120 
	`memıy
(&
i3
, 
df
->
v®ue
, 4);

122 
	`´štf
("test_learn_ip\n");

124 
bufãr
[2048];

125 
p4_h—d”
* 
h
;

126 
p4_add_bË_’Œy
* 
‹
;

127 
p4_aùiÚ
* 
a
;

128 
p4_aùiÚ_·¿m‘”
 *
­1
, *
­2
, *
­3
;

129 
p4_f›ld_m©ch_Ím
* 
Ím
;

130 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

131 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

132 
	`¡rıy
(
‹
->
bË_Çme
, "table1");

133 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

134 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "field1");

135 
	`memıy
(
Ím
->
b™m­
, 

, 4);

136 
Ím
->
´efix_Ëngth
 = 
´
;

137 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

138 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "korte");

139 
­1
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

140 
	`memıy
(
­1
->
b™m­
, &
i1
, 4);

141 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

142 
	`memıy
(
­2
->
b™m­
, &
i2
, 4);

143 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

144 
	`memıy
(
­3
->
b™m­
, &
i3
, 4);

145 
	`ÃtcÚv_p4_h—d”
(
h
);

146 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

147 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

148 
	`ÃtcÚv_p4_aùiÚ
(
a
);

149 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­1
);

150 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

151 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

152 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

153 
	}
}

155 
	$dhf
(* 
b
) {

156 
p4_h—d”
* 
h
 = 
	`ÃtcÚv_p4_h—d”
(
	`uÅack_p4_h—d”
(
b
, 0));

157 ià(
h
->
ty³
 !ğ
P4T_DIGEST
) {

158 
	`´štf
("Method is‚ot implemented\n");

162 
p4_dige¡
* 
d
 = 
	`uÅack_p4_dige¡
(
b
,0);

163 ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "mac_learn_digest")==0) {

164 
	`mac_Ë¬n_dige¡
(
b
);

165 } ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "test_learn_ip")==0) {

166 
	`‹¡_Ë¬n_
(
b
);

168 
	`´štf
("UnknowÀdige¡„eûived: X%sX\n", 
d
->
f›ld_li¡_Çme
);

170 
	}
}

172 
	$maš
()

174 
	`´štf
("Create‡nd configure controller...\n");

175 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

177 
	`´štf
("Launching controller's main†oop...\n");

178 
	`execu‹_cÚŒŞËr
(
c
);

180 
	`´štf
("Destroy controller\n");

181 
	`de¡roy_cÚŒŞËr
(
c
);

184 
	}
}

	@src/hardware_dep/odp/ctrl_plane/fifo.c

1 
	~"fifo.h
"

2 
	~<¡dio.h
>

4 
fifo_t
* 
	$fifo_š™
Ğ
fifo_t
* 
queue
)

6 
queue
->
h—d
 = 0;

7 
queue
->
size
 = 0;

8 
queue
->

 = -1;

11 if(
	`±h»ad_mu‹x_š™
(&(
queue
->
lock
),
NULL
)) {

12 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

15 if(
	`±h»ad_cÚd_š™
(&(
queue
->
em±y
),
NULL
)) {

16 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

19 if(
	`±h»ad_cÚd_š™
(&(
queue
->
nÙ_em±y
),
NULL
)) {

20 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

23  
queue
;

24 
	}
}

26 
	$fifo_de¡roy
Ğ
fifo_t
* 
queue
 )

28 
	`±h»ad_mu‹x_de¡roy
(&(
queue
->
lock
));

29 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
em±y
));

30 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
nÙ_em±y
));

31 
	}
}

33 
fifo_t
* 
	$fifo_add_msg
Ğ
fifo_t
* 
queue
, * 
–em’t
)

35 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

36 ià(
queue
->
size
 < 
P4_BG_QUEUE_SIZE
)

38 
queue
->

 = (queue->+1è% 
P4_BG_QUEUE_SIZE
;

39 ++(
queue
->
size
);

40 
queue
->queue[queue->

] = 
–em’t
;

41 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
nÙ_em±y
));

43 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

45  
queue
;

46 
	}
}

48 * 
	$fifo_»move_msg
Ğ
fifo_t
* 
queue
 )

50 * 
»suÉ
 = 0;

51 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

52 ià(
queue
->
size
 > 0)

54 
»suÉ
 = 
queue
->queue[queue->
h—d
];

55 
queue
->
h—d
 = (queue->h—d+1è% 
P4_BG_QUEUE_SIZE
;

56 --(
queue
->
size
);

57 ià(
queue
->
size
==0)

58 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
em±y
));

60 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

62  
»suÉ
;

63 
	}
}

65 
	$fifo_size
Ğ
fifo_t
* 
queue
 )

67 
size
 = 0;

68 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

69 
size
 = 
queue
->size;

70 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

72  
size
;

73 
	}
}

75 
	$fifo_wa™
Ğ
fifo_t
* 
queue
)

77 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

79 ià(
queue
->
size
==0)

80 
	`±h»ad_cÚd_wa™
(&(
queue
->
nÙ_em±y
), &(queue->
lock
));

82 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

83 
	}
}

	@src/hardware_dep/odp/ctrl_plane/fifo.h

1 #iâdeà
__FIFO_H__


2 
	#__FIFO_H__


	)

4 
	~<±h»ad.h
>

6 
	#P4_BG_QUEUE_SIZE
 1024

	)

8 
	sfifo_¡
 {

9 * 
	mqueue
[
P4_BG_QUEUE_SIZE
];

10 
	mh—d
;

11 
	msize
;

12 
	m
;

13 
±h»ad_mu‹x_t
 
	mlock
;

14 
±h»ad_cÚd_t
 
	mnÙ_em±y
;

15 
±h»ad_cÚd_t
 
	mem±y
;

16 } 
	tfifo_t
;

18 
fifo_t
* 
fifo_š™
Ğfifo_t* 
queue
 );

19 
fifo_de¡roy
Ğ
fifo_t
* 
queue
 );

20 
fifo_t
* 
fifo_add_msg
Ğfifo_t* 
queue
, * 
–em’t
);

21 * 
fifo_»move_msg
Ğ
fifo_t
* 
queue
 );

22 
fifo_size
Ğ
fifo_t
* 
queue
 );

23 
fifo_wa™
Ğ
fifo_t
* 
queue
 );

	@src/hardware_dep/odp/ctrl_plane/handlers.c

1 
	~"hªdËrs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

6 
	$hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
)

8 
p4_h—d”
* 
h—d”
;

9 
p4_ù¾_msg
 
ù¾_m
;

10 
rv®
;

12 ià(
Ëngth
<(
p4_h—d”
))  -1;

14 
h—d”
 = 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)
bufãr
);

16 ià(
h—d”
->
Ëngth
>length)  -1;

18 
h—d”
->
ty³
)

20 
P4T_SET_DEFAULT_ACTION
:

21 
	`´štf
(" :::: SET_DEFAULT_ACTION\n");

22 
rv®
 = 
	`hªdË_p4_£t_deçuÉ_aùiÚ
Ğ
	`ÃtcÚv_p4_£t_deçuÉ_aùiÚ
((
p4_£t_deçuÉ_aùiÚ
*)
bufãr
), &
ù¾_m
);

23 
	`´štf
(" ::„v®=%d\n", 
rv®
);

24 ià(
rv®
<0) „val;

25 
	`cb
(&
ù¾_m
);

27 
P4T_ADD_TABLE_ENTRY
:

28 
	`´štf
(" :::: ADD_TABLE_ENTRY\n");

29 
rv®
 = 
	`hªdË_p4_add_bË_’Œy
(
	`ÃtcÚv_p4_add_bË_’Œy
((
p4_add_bË_’Œy
*)
bufãr
), &
ù¾_m
);

30 
	`´štf
(" ::„v®=%d\n", 
rv®
);

31 ià(
rv®
<0) „val;

32 
	`cb
(&
ù¾_m
);

35 
	`´štf
(" :::: Mes§gty³ i nÙ im¶em’‹d!y³=%d\n", 
h—d”
->
ty³
);

36 
	`cb
(&
ù¾_m
);

41 
	}
}

43 
	$hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

45 
i
;

46 
num_·¿ms
;

47 
ušt16_t
 
off£t
 = 0;

48 * 
bufãr
 = 0;

50 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

51 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

52 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

53 
ù¾_m
->
aùiÚ_ty³
 = 
m
->
aùiÚ
.
desütiÚ
.
ty³
;

54 
ù¾_m
->
aùiÚ_Çme
 = 
m
->
aùiÚ
.
desütiÚ
.
Çme
;

55 
num_·¿ms
 = 
m
->
aùiÚ
.
·¿m_size
;

56 
bufãr
 = (*)(
m
è+ (
p4_£t_deçuÉ_aùiÚ
);

58 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

61 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

63 
i
=0;i<
num_·¿ms
;++i)

65 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

66 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

70 
	}
}

72 
	$hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

74 
i
;

75 
num_·¿ms
;

76 
size
;

77 
ušt16_t
 
off£t
 = 0;

78 * 
bufãr
 = 0;

79 
p4_aùiÚ
* 
aùiÚ
;

81 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

82 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

83 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

84 
num_·¿ms
 = 
m
->
»ad_size
;

86 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_FIELD_MATCHES
)

89 
ù¾_m
->
num_f›ld_m©ches
 = 
num_·¿ms
;

91 
bufãr
 = (*)(
m
è+ (
p4_add_bË_’Œy
);

92 
off£t
 = 0;

94 
i
=0;i<
num_·¿ms
;++i)

96 
ù¾_m
->
f›ld_m©ches
[
i
] = 
	`ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
	`uÅack_p4_f›ld_m©ch_h—d”
(
bufãr
, 
off£t
),&
size
);

97 
off£t
 +ğ
size
;

100 
aùiÚ
 = 
	`uÅack_p4_aùiÚ
(
bufãr
, 
off£t
);

102 
ù¾_m
->
aùiÚ_ty³
 = 
aùiÚ
->
desütiÚ
.
ty³
;

103 
ù¾_m
->
aùiÚ_Çme
 = 
aùiÚ
->
desütiÚ
.
Çme
;

104 
num_·¿ms
 = 
aùiÚ
->
·¿m_size
;

105 
off£t
 +ğ(
p4_aùiÚ
);

107 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

110 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

112 
i
=0;i<
num_·¿ms
;++i)

114 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

115 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

119 
	}
}

	@src/hardware_dep/odp/ctrl_plane/handlers.h

1 #iâdeà
__HANDLERS_H__


2 
	#__HANDLERS_H__


	)

4 
	~"mes§ges.h
"

6 
	#P4_MAX_NUMBER_OF_ACTION_PARAMETERS
 10

	)

7 
	#P4_MAX_NUMBER_OF_FIELD_MATCHES
 10

	)

9 
	sp4_ù¾_msg
 {

10 
ušt8_t
 
	mty³
;

11 
ušt32_t
 
	mxid
;

12 * 
	mbË_Çme
;

13 
ušt8_t
 
	maùiÚ_ty³
;

14 * 
	maùiÚ_Çme
;

15 
	mnum_aùiÚ_·¿ms
;

16 
p4_aùiÚ_·¿m‘”
* 
	maùiÚ_·¿ms
[
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
];

17 
	mnum_f›ld_m©ches
;

18 
p4_f›ld_m©ch_h—d”
* 
	mf›ld_m©ches
[
P4_MAX_NUMBER_OF_FIELD_MATCHES
];

21 (*
	tp4_msg_ÿÎback
)(
	tp4_ù¾_msg
*);

23 
	`hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
);

24 
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

25 
	`hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

	@src/hardware_dep/odp/ctrl_plane/messages.c

1 
	~"mes§ges.h
"

2 
	~<¡dio.h
>

3 
	~<as£¹.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

9 
p4_h—d”
 *
	$ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

10 
p4_h—d”
* 
h—d”
;

11 ià(
off£t
+(
p4_h—d”
è> 
maxËngth
)  0;

12 
h—d”
 = (
p4_h—d”
*)(
bufãr
 + 
off£t
);

13 
h—d”
->
v”siÚ
 = 
P4_VERSION
;

14 
h—d”
->
ty³
 = 0;

15 
h—d”
->
Ëngth
 =  (
p4_h—d”
);

16 
h—d”
->
xid
 = 0;

17  
h—d”
;

18 
	}
}

20 
šlše
 
p4_h—d”
* 
	$ÃtcÚv_p4_h—d”
(
p4_h—d”
* 
m
)

22 
m
->
Ëngth
 = 
	`htÚs
(m->length);

23 
m
->
xid
 = 
	`htÚl
(m->xid);

24  
m
;

25 
	}
}

27 
šlše
 
p4_h—d”
 *
	$uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

28  (
p4_h—d”
*)(
bufãr
 + 
off£t
);

29 
	}
}

31 
	$check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
) {

32 
	`as£¹
(
a
->
v”siÚ
 =ğ
b
->version);

33 
	`as£¹
(
a
->
ty³
 =ğ
b
->type);

34 
	`as£¹
(
a
->
Ëngth
 =ğ
b
->length);

35 
	`as£¹
(
a
->
xid
 =ğ
b
->xid);

36 
	}
}

38 
p4_add_bË_’Œy
* 
	$ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

39 
p4_add_bË_’Œy
* 
add_bË_’Œy
;

40 ià(
off£t
+(
p4_add_bË_’Œy
è>ğ
maxËngth
)  0;

41 
add_bË_’Œy
 = (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

42 
add_bË_’Œy
->
h—d”
.
Ëngth
 =  (
p4_add_bË_’Œy
);

43 
add_bË_’Œy
->
h—d”
.
ty³
 = 
P4T_ADD_TABLE_ENTRY
;

44 
add_bË_’Œy
->
»ad_size
 = 0;

45 
add_bË_’Œy
->
bË_Çme
[0] = '\0';

46  
add_bË_’Œy
;

47 
	}
}

49 
šlše
 
p4_add_bË_’Œy
* 
	$ÃtcÚv_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
) {

50  
m
;

51 
	}
}

53 
p4_f›ld_m©ch_Ím
* 
	$add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

54 
p4_f›ld_m©ch_Ím
* 
f›ld_m©ch_Ím
;

55 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_Ím
è> 
maxËngth
)  0;

56 
f›ld_m©ch_Ím
 = (
p4_f›ld_m©ch_Ím
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

57 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_Ím
);

58 
add_bË_’Œy
->
»ad_size
 += 1;

59 
f›ld_m©ch_Ím
->
h—d”
.
ty³
 = 
P4_FMT_LPM
;

60 
f›ld_m©ch_Ím
->
´efix_Ëngth
 = 0;

61  
f›ld_m©ch_Ím
;

62 
	}
}

64 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$ÃtcÚv_p4_f›ld_m©ch_Ím
(
p4_f›ld_m©ch_Ím
* 
m
) {

65 
m
->
´efix_Ëngth
 = 
	`htÚs
(m->prefix_length);

66  
m
;

67 
	}
}

69 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$ÃtcÚv_p4_f›ld_m©ch_exaù
(
p4_f›ld_m©ch_exaù
* 
m
) {

70 
m
->
Ëngth
 = 
	`htÚs
(m->length);

71  
m
;

72 
	}
}

74 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$ÃtcÚv_p4_f›ld_m©ch_¿nge
(
p4_f›ld_m©ch_¿nge
* 
m
) {

75 
m
->
Ëngth
 = 
	`htÚs
(m->length);

76  
m
;

77 
	}
}

79 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(
p4_f›ld_m©ch_‹º¬y
* 
m
) {

80 
m
->
Ëngth
 = 
	`htÚs
(m->length);

81  
m
;

82 
	}
}

84 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$ÃtcÚv_p4_f›ld_m©ch_v®id
(
p4_f›ld_m©ch_v®id
* 
m
) {

85 
m
->
Ëngth
 = 
	`htÚs
(m->length);

86  
m
;

87 
	}
}

89 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
p4_f›ld_m©ch_h—d”
 *
m
, * 
size
) {

90 
m
->
ty³
)

92 
P4_FMT_EXACT
:

93 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
((
p4_f›ld_m©ch_exaù
*)
m
);

94 *
size
 = (
p4_f›ld_m©ch_exaù
);

96 
P4_FMT_TERNARY
:

97 
	`ÃtcÚv_p4_f›ld_m©ch_‹º¬y
((
p4_f›ld_m©ch_‹º¬y
*)
m
);

98 *
size
 = (
p4_f›ld_m©ch_‹º¬y
);

100 
P4_FMT_LPM
:

101 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
((
p4_f›ld_m©ch_Ím
*)
m
);

102 *
size
 = (
p4_f›ld_m©ch_Ím
);

104 
P4_FMT_RANGE
:

105 
	`ÃtcÚv_p4_f›ld_m©ch_¿nge
((
p4_f›ld_m©ch_¿nge
*)
m
);

106 *
size
 = (
p4_f›ld_m©ch_¿nge
);

108 
P4_FMT_VALID
:

109 
	`ÃtcÚv_p4_f›ld_m©ch_v®id
((
p4_f›ld_m©ch_v®id
*)
m
);

110 *
size
 = (
p4_f›ld_m©ch_v®id
);

113 *
size
 = 0;

116  
m
;

117 
	}
}

119 
šlše
 
p4_dige¡_f›ld
* 
	$ÃtcÚv_p4_dige¡_f›ld
(
p4_dige¡_f›ld
* 
m
) {

120 
m
->
Ëngth
 = 
	`htÚl
(m->length);

121  
m
;

122 
	}
}

124 
šlše
 
p4_aùiÚ
* 
	$ÃtcÚv_p4_aùiÚ
Ğ
p4_aùiÚ
* 
m
) {

125  
m
;

126 
	}
}

128 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$ÃtcÚv_p4_aùiÚ_·¿m‘”
(
p4_aùiÚ_·¿m‘”
* 
m
) {

129 
m
->
Ëngth
 = 
	`htÚl
(m->length);

130  
m
;

131 
	}
}

133 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
) {

135  
m
;

136 
	}
}

138 
šlše
 
p4_add_bË_’Œy
* 
	$uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
) {

139  (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

140 
	}
}

142 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

143  (
p4_f›ld_m©ch_h—d”
*)(
bufãr
 + 
off£t
);

144 
	}
}

146 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
) {

147  (
p4_f›ld_m©ch_Ím
*)(
bufãr
 + 
off£t
);

148 
	}
}

150 
p4_f›ld_m©ch_exaù
* 
	$add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

151 
p4_f›ld_m©ch_exaù
* 
f›ld_m©ch_exaù
;

152 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_exaù
è> 
maxËngth
)  0;

153 
f›ld_m©ch_exaù
 = (
p4_f›ld_m©ch_exaù
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

154 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_exaù
);

155 
add_bË_’Œy
->
»ad_size
 += 1;

156 
f›ld_m©ch_exaù
->
h—d”
.
ty³
 = 
P4_FMT_EXACT
;

157 
f›ld_m©ch_exaù
->
Ëngth
 = 0;

158  
f›ld_m©ch_exaù
;

159 
	}
}

161 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
) {

162  (
p4_f›ld_m©ch_exaù
*)(
bufãr
 + 
off£t
);

163 
	}
}

165 
p4_f›ld_m©ch_¿nge
* 
	$add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

166 
p4_f›ld_m©ch_¿nge
* 
f›ld_m©ch_¿nge
;

167 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_¿nge
è> 
maxËngth
)  0;

168 
f›ld_m©ch_¿nge
 = (
p4_f›ld_m©ch_¿nge
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

169 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_¿nge
);

170 
add_bË_’Œy
->
»ad_size
 += 1;

171 
f›ld_m©ch_¿nge
->
h—d”
.
ty³
 = 
P4_FMT_RANGE
;

172 
f›ld_m©ch_¿nge
->
Ëngth
 = 0;

173 
f›ld_m©ch_¿nge
->
is_sigÃd
 = 
çl£
;

174  
f›ld_m©ch_¿nge
;

175 
	}
}

177 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
) {

178  (
p4_f›ld_m©ch_¿nge
*)(
bufãr
 + 
off£t
);

179 
	}
}

181 
p4_f›ld_m©ch_v®id
* 
	$add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

182 
p4_f›ld_m©ch_v®id
* 
f›ld_m©ch_v®id
;

183 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_v®id
è> 
maxËngth
)  0;

184 
f›ld_m©ch_v®id
 = (
p4_f›ld_m©ch_v®id
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

185 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_v®id
);

186 
add_bË_’Œy
->
»ad_size
 += 1;

187 
f›ld_m©ch_v®id
->
h—d”
.
ty³
 = 
P4_FMT_VALID
;

188 
f›ld_m©ch_v®id
->
Ëngth
 = 0;

189 
f›ld_m©ch_v®id
->
is_v®id
 = 
çl£
;

190  
f›ld_m©ch_v®id
;

191 
	}
}

193 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
) {

194  (
p4_f›ld_m©ch_v®id
*)(
bufãr
 + 
off£t
);

195 
	}
}

197 
p4_f›ld_m©ch_‹º¬y
* 
	$add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

198 
p4_f›ld_m©ch_‹º¬y
* 
f›ld_m©ch_‹º¬y
;

199 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_‹º¬y
è> 
maxËngth
)  0;

200 
f›ld_m©ch_‹º¬y
 = (
p4_f›ld_m©ch_‹º¬y
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

201 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_‹º¬y
);

202 
add_bË_’Œy
->
»ad_size
 += 1;

203 
f›ld_m©ch_‹º¬y
->
h—d”
.
ty³
 = 
P4_FMT_TERNARY
;

204 
f›ld_m©ch_‹º¬y
->
Ëngth
 = 0;

205 
f›ld_m©ch_‹º¬y
->
´iÜ™y
 = 0;

206  
f›ld_m©ch_‹º¬y
;

207 
	}
}

209 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
) {

210  (
p4_f›ld_m©ch_‹º¬y
*)(
bufãr
 + 
off£t
);

211 
	}
}

213 
p4_aùiÚ
* 
	$add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
) {

214 
p4_aùiÚ
* 
aùiÚ
;

215 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ
è> 
maxËngth
)  0;

216 
aùiÚ
 = (
p4_aùiÚ
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

217 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ
);

218 
aùiÚ
->
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

219 
aùiÚ
->
desütiÚ
.
Çme
[0] = '\0';

220 
aùiÚ
->
·¿m_size
 = 0;

221  
aùiÚ
;

222 
	}
}

224 
šlše
 
p4_aùiÚ
* 
	$uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

225  (
p4_aùiÚ
*)(
bufãr
 + 
off£t
);

226 
	}
}

228 
p4_aùiÚ_·¿m‘”
* 
	$add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
) {

229 
p4_aùiÚ_·¿m‘”
* 
aùiÚ_p
;

230 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ_·¿m‘”
è> 
maxËngth
)  0;

231 
aùiÚ_p
 = (
p4_aùiÚ_·¿m‘”
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

232 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ_·¿m‘”
);

233 
aùiÚ
->
·¿m_size
 += 1;

234 
aùiÚ_p
->
Çme
[0] = '\0';

235 
aùiÚ_p
->
Ëngth
 = 0;

236  
aùiÚ_p
;

237 
	}
}

239 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

240  (
p4_aùiÚ_·¿m‘”
*)(
bufãr
 + 
off£t
);

241 
	}
}

243 
p4_£t_deçuÉ_aùiÚ
* 
	$ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

244 
p4_£t_deçuÉ_aùiÚ
* 
deçuÉ_aùiÚ
;

245 ià(
off£t
+(
p4_£t_deçuÉ_aùiÚ
è>ğ
maxËngth
)  0;

246 
deçuÉ_aùiÚ
 = (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

247 
deçuÉ_aùiÚ
->
h—d”
.
Ëngth
 = (
p4_£t_deçuÉ_aùiÚ
);

248 
deçuÉ_aùiÚ
->
h—d”
.
ty³
 = 
P4T_SET_DEFAULT_ACTION
;

249 
deçuÉ_aùiÚ
->
bË_Çme
[0] = '\0';

250 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

251 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
Çme
[0] = '\0';

252 
deçuÉ_aùiÚ
->
aùiÚ
.
·¿m_size
 = 0;

253  
deçuÉ_aùiÚ
;

254 
	}
}

256 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

257  (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

258 
	}
}

260 
p4_dige¡
* 
	$ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

261 
p4_dige¡
* 
dige¡
;

262 ià(
off£t
+(
p4_dige¡
è>ğ
maxËngth
)  0;

263 
dige¡
 = (
p4_dige¡
*)(
bufãr
 + 
off£t
);

264 
dige¡
->
h—d”
.
Ëngth
 = (
p4_dige¡
);

265 
dige¡
->
h—d”
.
ty³
 = 
P4T_DIGEST
;

266 
dige¡
->
f›ld_li¡_Çme
[0] = '\0';

267 
dige¡
->
li¡_size
 = 0;

268  
dige¡
;

269 
	}
}

271 
šlše
 
p4_dige¡
* 
	$uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
) {

272  (
p4_dige¡
*)(
bufãr
 + 
off£t
);

273 
	}
}

275 
p4_dige¡_f›ld
* 
	$add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
) {

276 
p4_dige¡_f›ld
* 
dige¡_f
;

277 ià(
dige¡
->
h—d”
.
Ëngth
 + (
p4_dige¡_f›ld
è> 
maxËngth
)  0;

278 
dige¡_f
 = (
p4_dige¡_f›ld
*)ĞĞ(*)
dige¡
 ) + dige¡->
h—d”
.
Ëngth
);

279 
dige¡
->
h—d”
.
Ëngth
 +ğ(
p4_dige¡_f›ld
);

280 
dige¡
->
li¡_size
 += 1;

281 
dige¡_f
->
Çme
[0] = '\0';

282 
dige¡_f
->
Ëngth
 = 0;

283  
dige¡_f
;

284 
	}
}

286 
šlše
 
p4_dige¡_f›ld
* 
	$uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
) {

287  (
p4_dige¡_f›ld
*)(
bufãr
 + 
off£t
);

288 
	}
}

	@src/hardware_dep/odp/ctrl_plane/messages.h

1 #iâdeà
_MESSAGES_H_


2 
	#_MESSAGES_H_
 1

	)

4 
	~<¡dšt.h
>

6 
	#P4_VERSION
 1

	)

7 
	#Œue
 1

	)

8 
	#çl£
 0

	)

11 
	sp4_h—d”
 {

12 
ušt8_t
 
	mv”siÚ
;

13 
ušt8_t
 
	mty³
;

14 
ušt16_t
 
	mËngth
;

15 
ušt32_t
 
	mxid
;

19 
	ep4_ty³
 {

21 
	mP4T_HELLO
 = 0,

22 
	mP4T_ERROR
 = 1,

23 
	mP4T_ECHO_REQUEST
 = 2,

24 
	mP4T_ECHO_REPLY
 = 3,

25 
	mP4T_SUCCESS
 = 4,

28 
	mP4T_GET_TABLE_DEFINITIONS
 = 100,

29 
	mP4T_GET_TABLE_COUNTERS
 = 101,

30 
	mP4T_GET_TABLE_ENTRIES
 = 102,

33 
	mP4T_SET_DEFAULT_ACTION
 = 103,

34 
	mP4T_ADD_TABLE_ENTRY
 = 104,

35 
	mP4T_MODIFY_TABLE_ENTRY
 = 105,

36 
	mP4T_REMOVE_TABLE_ENTRY
 = 106,

37 
	mP4T_DROP_TABLE_ENTRIES
 = 107,

38 
	mP4T_ADD_AP_MEMBER
 = 108,

39 
	mP4T_REMOVE_AP_MEMBER
 = 109,

42 
	mP4T_DIGEST
 = 110

45 
	sp4_h–lo
 {

46 
p4_h—d”
 
	mh—d”
;

48 
p4_h–lo_–em_h—d”
 *
	m–em’ts
;

53 
	ep4_h–lo_–em_ty³
 {

54 
	mOFPHET_VERSIONBITMAP
 = 1

58 
	sp4_h–lo_–em_h—d”
 {

59 
ušt16_t
 
	mty³
;

60 
ušt16_t
 
	mËngth
;

65 
	sp4_h–lo_–em_v”siÚb™m­
 {

66 
ušt16_t
 
	mty³
;

67 
ušt16_t
 
	mËngth
;

73 
ušt32_t
* 
	mb™m­s
;

76 
	sp4_”rÜ
 {

77 
p4_h—d”
 
	mh—d”
;

78 
ušt16_t
 
	m”rÜ_code
;

81 
	sp4_sucûss
 {

82 
p4_h—d”
 
	mh—d”
;

83 
ušt32_t
 
	mid
;

86 
	#P4_MAX_TABLE_NAME_LEN
 128

	)

87 
	#P4_MAX_FIELD_NAME_LEN
 128

	)

88 
	#P4_MAX_ACTION_NAME_LEN
 128

	)

90 
	ep4_f›ld_m©ch_ty³
 {

91 
	mP4_FMT_EXACT
 = 0,

92 
	mP4_FMT_TERNARY
 = 1,

93 
	mP4_FMT_LPM
 = 2,

94 
	mP4_FMT_RANGE
 = 3,

95 
	mP4_FMT_VALID
 = 4

98 
	sp4_f›ld_m©ch_desc
 {

99 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

100 
ušt8_t
 
	mty³
;

103 
	ep4_suµÜt_timeout
 {

104 
	mP4_STO_FALSE
 = 0,

105 
	mP4_STO_TRUE
 = 1

108 
	ep4_aùiÚ_ty³
 {

109 
	mP4_AT_ACTION
 = 0,

110 
	mP4_AT_ACTION_PROFILE
 = 1

113 
	sp4_bË_aùiÚ_desc
 {

114 
ušt8_t
 
	mty³
;

115 
	mÇme
[
P4_MAX_ACTION_NAME_LEN
];

118 
	sp4_bË_defš™iÚ
 {

119 
p4_h—d”
 
	mh—d”
;

120 
	mÇme
[
P4_MAX_TABLE_NAME_LEN
];

121 
ušt8_t
 
	m»ads
;

122 
ušt16_t
 
	mmš_size
;

123 
ušt16_t
 
	mmax_size
;

124 
ušt16_t
 
	msize
;

125 
ušt8_t
 
	msuµÜt_timeout
;

126 
ušt8_t
 
	m»ad_size
;

127 
ušt8_t
 
	maùiÚ_size
;

133 
	#MAX_ACTION_PARAMETER_NAME_LENGTH
 128

	)

134 
	#MAX_ACTION_PARAMETER_BITMAP_LENGTH
 128

	)

135 
	sp4_aùiÚ_·¿m‘”
 {

136 
	mÇme
[
MAX_ACTION_PARAMETER_NAME_LENGTH
];

137 
ušt32_t
 
	mËngth
;

138 
	mb™m­
[
MAX_ACTION_PARAMETER_BITMAP_LENGTH
];

143 
	sp4_aùiÚ
 {

144 
p4_bË_aùiÚ_desc
 
	mdesütiÚ
;

145 
ušt8_t
 
	m·¿m_size
;

149 
	sp4_£t_deçuÉ_aùiÚ
 {

150 
p4_h—d”
 
	mh—d”
;

151 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

152 
p4_aùiÚ
 
	maùiÚ
;

155 
	sp4_f›ld_m©ch_h—d”
 {

156 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

157 
ušt8_t
 
	mty³
;

160 
	#MAX_FIELD_LENGTH
 256

	)

162 
	sp4_f›ld_m©ch_Ím
 {

163 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

164 
ušt16_t
 
	m´efix_Ëngth
;

165 
	mb™m­
[
MAX_FIELD_LENGTH
];

168 
	sp4_f›ld_m©ch_exaù
 {

169 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

170 
ušt16_t
 
	mËngth
;

171 
	mb™m­
[
MAX_FIELD_LENGTH
];

174 
	sp4_f›ld_m©ch_¿nge
 {

175 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

176 
ušt16_t
 
	mËngth
;

177 
ušt8_t
 
	mis_sigÃd
;

178 
	mmš_b™m­
[
MAX_FIELD_LENGTH
];

179 
	mmax_b™m­
[
MAX_FIELD_LENGTH
];

182 
	sp4_f›ld_m©ch_‹º¬y
 {

183 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

184 
ušt16_t
 
	mËngth
;

185 
ušt8_t
 
	m´iÜ™y
;

186 
	mb™m­
[
MAX_FIELD_LENGTH
];

187 
	mmask
[
MAX_FIELD_LENGTH
];

190 
	sp4_f›ld_m©ch_v®id
 {

191 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

192 
ušt16_t
 
	mËngth
;

193 
ušt8_t
 
	mis_v®id
;

194 
	mb™m­
[
MAX_FIELD_LENGTH
];

197 
	sp4_add_bË_’Œy
 {

198 
p4_h—d”
 
	mh—d”
;

199 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

200 
ušt8_t
 
	m»ad_size
;

205 
	#P4_MAX_FIELD_LIST_NAME_LEN
 128

	)

206 
	#P4_MAX_FIELD_NAME_LENGTH
 128

	)

207 
	#P4_MAX_FIELD_VALUE_LENGTH
 32

	)

209 
	sp4_dige¡_f›ld
 {

210 
	mÇme
[
P4_MAX_FIELD_NAME_LENGTH
];

211 
ušt32_t
 
	mËngth
;

212 
	mv®ue
[
P4_MAX_FIELD_VALUE_LENGTH
];

215 
	sp4_dige¡
 {

216 
p4_h—d”
 
	mh—d”
;

217 
	mf›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
];

218 
ušt8_t
 
	mli¡_size
;

222 
p4_h—d”
 *
ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

223 
p4_h—d”
 *
uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

224 
check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
);

225 
p4_h—d”
* 
ÃtcÚv_p4_h—d”
(p4_h—d”* 
m
);

227 
p4_add_bË_’Œy
* 
ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

228 
p4_f›ld_m©ch_Ím
* 
add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

229 
p4_add_bË_’Œy
* 
uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
);

230 
p4_f›ld_m©ch_h—d”
* 
uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

231 
p4_f›ld_m©ch_Ím
* 
uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
);

232 
p4_f›ld_m©ch_exaù
* 
add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

233 
p4_f›ld_m©ch_exaù
* 
uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
);

234 
p4_f›ld_m©ch_¿nge
* 
add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

235 
p4_f›ld_m©ch_¿nge
* 
uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
);

236 
p4_f›ld_m©ch_v®id
* 
add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

237 
p4_f›ld_m©ch_v®id
* 
uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
);

238 
p4_f›ld_m©ch_‹º¬y
* 
add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

239 
p4_f›ld_m©ch_‹º¬y
* 
uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
);

240 
p4_aùiÚ
* 
add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
);

241 
p4_aùiÚ
* 
uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

242 
p4_aùiÚ_·¿m‘”
* 
add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
);

243 
p4_aùiÚ_·¿m‘”
* 
uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
);

244 
p4_£t_deçuÉ_aùiÚ
* 
ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

245 
p4_£t_deçuÉ_aùiÚ
* 
uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

246 
p4_dige¡
* 
ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

247 
p4_dige¡
* 
uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
);

248 
p4_dige¡_f›ld
* 
add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
);

249 
p4_dige¡_f›ld
* 
uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
);

251 
p4_f›ld_m©ch_Ím
* 
ÃtcÚv_p4_f›ld_m©ch_Ím
(p4_f›ld_m©ch_Ím* 
m
);

252 
p4_f›ld_m©ch_exaù
* 
ÃtcÚv_p4_f›ld_m©ch_exaù
(p4_f›ld_m©ch_exaù* 
m
);

253 
p4_f›ld_m©ch_¿nge
* 
ÃtcÚv_p4_f›ld_m©ch_¿nge
(p4_f›ld_m©ch_¿nge* 
m
);

254 
p4_f›ld_m©ch_‹º¬y
* 
ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(p4_f›ld_m©ch_‹º¬y* 
m
);

255 
p4_f›ld_m©ch_v®id
* 
ÃtcÚv_p4_f›ld_m©ch_v®id
(p4_f›ld_m©ch_v®id* 
m
);

256 
p4_dige¡_f›ld
* 
ÃtcÚv_p4_dige¡_f›ld
(p4_dige¡_f›ld* 
m
);

257 
p4_aùiÚ
* 
ÃtcÚv_p4_aùiÚ
Ğp4_aùiÚ* 
m
);

258 
p4_aùiÚ_·¿m‘”
* 
ÃtcÚv_p4_aùiÚ_·¿m‘”
(p4_aùiÚ_·¿m‘”* 
m
);

259 
p4_£t_deçuÉ_aùiÚ
* 
ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(p4_£t_deçuÉ_aùiÚ* 
m
);

260 
p4_f›ld_m©ch_h—d”
* 
ÃtcÚv_p4_f›ld_m©ch_com¶ex
(p4_f›ld_m©ch_h—d” *
m
, * 
size
);

261 
p4_add_bË_’Œy
* 
ÃtcÚv_p4_add_bË_’Œy
(p4_add_bË_’Œy* 
m
);

	@src/hardware_dep/odp/ctrl_plane/odp_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_smac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

18 
p4_f›ld_m©ch_exaù
* 
exaù
;

20 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

21 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

22 
	`¡rıy
(
‹
->
bË_Çme
, "smac");

24 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

25 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.srcAddr");

26 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

27 
exaù
->
Ëngth
 = 6*8+0;

29 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

30 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "_nop");

32 
	`ÃtcÚv_p4_h—d”
(
h
);

33 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

34 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

35 
	`ÃtcÚv_p4_aùiÚ
(
a
);

37 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

38 
	}
}

40 
	$fl_dmac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

42 
bufãr
[2048];

43 
p4_h—d”
* 
h
;

44 
p4_add_bË_’Œy
* 
‹
;

45 
p4_aùiÚ
* 
a
;

46 
p4_aùiÚ_·¿m‘”
* 
­
;

47 
p4_f›ld_m©ch_exaù
* 
exaù
;

49 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

50 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

51 
	`¡rıy
(
‹
->
bË_Çme
, "dmac");

53 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

54 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.dstAddr");

55 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

56 
exaù
->
Ëngth
 = 6*8+0;

58 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

59 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "forward");

61 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

62 
	`¡rıy
(
­
->
Çme
, "port");

63 
	`memıy
(
­
->
b™m­
, &
pÜt
, 1);

64 
­
->
Ëngth
 = 1*8+0;

66 
	`ÃtcÚv_p4_h—d”
(
h
);

67 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

68 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

69 
	`ÃtcÚv_p4_aùiÚ
(
a
);

70 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

72 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

73 
	}
}

75 
	$mac_Ë¬n_dige¡
(* 
b
) {

76 
i
;

77 
ušt8_t
 
mac
[6];

78 
ušt8_t
 
pÜt
[2];

79 
ušt16_t
 
off£t
=0;

80 
off£t
 = (
p4_dige¡
);

81 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

82 
	`memıy
(
mac
, 
df
->
v®ue
, 6);

83 
off£t
 +ğ(
p4_dige¡_f›ld
);

84 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

85 
	`memıy
(
pÜt
, 
df
->
v®ue
, 2);

87 
ušt8_t
 
p
 = 
pÜt
[0];

88 
	`´štf
("CŒl: mac_Ë¬n_dige¡ PORT: %d MAC: %02x:%02x:%02x:%02x:%02x:%02x\n", 
p
, 
mac
[0],mac[1],mac[2],mac[3],mac[4],mac[5]);

89 
	`fl_dmac_bË
(
p
, 
mac
);

90 
	`fl_smac_bË
(
p
, 
mac
);

92 
i
=0;i<6;++i)

93 
mac
[
i
]=255;

94 
	`fl_dmac_bË
(1,
mac
);

96 
	}
}

98 
	$‹¡_Ë¬n_
(* 
b
) {

99 
ušt8_t
 

[4];

100 
ušt16_t
 
´
;

101 
i1
;

102 
i2
;

103 
i3
;

105 
ušt16_t
 
off£t
=0;

106 
off£t
 = (
p4_dige¡
);

107 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

108 
	`memıy
(

, 
df
->
v®ue
, 4);

109 
off£t
 +ğ(
p4_dige¡_f›ld
);

110 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

111 
	`memıy
(&
´
, 
df
->
v®ue
, 2);

112 
off£t
 +ğ(
p4_dige¡_f›ld
);

113 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

114 
	`memıy
(&
i1
, 
df
->
v®ue
, 4);

115 
off£t
 +ğ(
p4_dige¡_f›ld
);

116 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

117 
	`memıy
(&
i2
, 
df
->
v®ue
, 4);

118 
off£t
 +ğ(
p4_dige¡_f›ld
);

119 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

120 
	`memıy
(&
i3
, 
df
->
v®ue
, 4);

122 
	`´štf
("test_learn_ip\n");

124 
bufãr
[2048];

125 
p4_h—d”
* 
h
;

126 
p4_add_bË_’Œy
* 
‹
;

127 
p4_aùiÚ
* 
a
;

128 
p4_aùiÚ_·¿m‘”
 *
­1
, *
­2
, *
­3
;

129 
p4_f›ld_m©ch_Ím
* 
Ím
;

130 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

131 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

132 
	`¡rıy
(
‹
->
bË_Çme
, "table1");

133 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

134 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "field1");

135 
	`memıy
(
Ím
->
b™m­
, 

, 4);

136 
Ím
->
´efix_Ëngth
 = 
´
;

137 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

138 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "korte");

139 
­1
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

140 
	`memıy
(
­1
->
b™m­
, &
i1
, 4);

141 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

142 
	`memıy
(
­2
->
b™m­
, &
i2
, 4);

143 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

144 
	`memıy
(
­3
->
b™m­
, &
i3
, 4);

145 
	`ÃtcÚv_p4_h—d”
(
h
);

146 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

147 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

148 
	`ÃtcÚv_p4_aùiÚ
(
a
);

149 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­1
);

150 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

151 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

152 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

153 
	}
}

155 
	$dhf
(* 
b
) {

156 
p4_h—d”
* 
h
 = 
	`ÃtcÚv_p4_h—d”
(
	`uÅack_p4_h—d”
(
b
, 0));

157 ià(
h
->
ty³
 !ğ
P4T_DIGEST
) {

158 
	`´štf
("Method is‚ot implemented\n");

162 
p4_dige¡
* 
d
 = 
	`uÅack_p4_dige¡
(
b
,0);

163 ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "mac_learn_digest")==0) {

164 
	`mac_Ë¬n_dige¡
(
b
);

165 } ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "test_learn_ip")==0) {

166 
	`‹¡_Ë¬n_
(
b
);

168 
	`´štf
("UnknowÀdige¡„eûived: X%sX\n", 
d
->
f›ld_li¡_Çme
);

170 
	}
}

172 
	$maš
()

174 
	`´štf
("Create‡nd configure controller...\n");

175 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

177 
	`´štf
("Launching controller's main†oop...\n");

178 
	`execu‹_cÚŒŞËr
(
c
);

180 
	`´štf
("Destroy controller\n");

181 
	`de¡roy_cÚŒŞËr
(
c
);

184 
	}
}

	@src/hardware_dep/odp/ctrl_plane/sock_helpers.c

1 
	~"sock_h–³rs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<uni¡d.h
>

5 
	~<Ãtš‘/š.h
>

7 
	$»ad_fix
(
sock
, * 
bufãr
, 
nby‹s
)

9 
rby‹s
 = 0;

10 
rv®
 = 0;

11 
rby‹s
<
nby‹s
)

13 
rv®
 = 
	`»ad
(
sock
, 
bufãr
 + 
rby‹s
, 
nby‹s
-rbytes);

14 ià(
rv®
<=0) „val;

15 
rby‹s
 +ğ
rv®
;

18  
rby‹s
;

19 
	}
}

21 
	$wr™e_fix
(
sock
, * 
bufãr
, 
nby‹s
)

23 
wby‹s
 = 0;

24 
wv®
 = 0;

25 
wby‹s
<
nby‹s
)

27 
wv®
 = 
	`wr™e
(
sock
, 
bufãr
 + 
wby‹s
, 
nby‹s
-wbytes);

28 ià(
wv®
<0)  wval;

29 
wby‹s
 +ğ
wv®
;

32  
wby‹s
;

33 
	}
}

35 
	$»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

37 
rv®
;

38 
msgËn
;

39 ià(
Ëngth
<(
p4_h—d”
))  -1;

41 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
, (
p4_h—d”
)))<=0)

42  
rv®
;

44 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

46 ià(
msgËn
>
Ëngth
)

49 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
 + (
p4_h—d”
), 
msgËn
-(p4_header)))<=0)

50  
rv®
;

51  
msgËn
;

52 
	}
}

54 
	$wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

56 
msgËn
;

57 ià(
Ëngth
<(
p4_h—d”
))  -1;

59 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

61 ià(
msgËn
>
Ëngth
)  -1;

63  
	`wr™e_fix
(
sock
, 
bufãr
, 
msgËn
);

64 
	}
}

	@src/hardware_dep/odp/ctrl_plane/sock_helpers.h

1 #iâdeà
__SOCK_HELPERS_H__


2 
	#__SOCK_HELPERS_H__
 1

	)

4 
»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

5 
wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/odp/ctrl_plane/tests/test_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<¬·/š‘.h
>

5 
	~"hªdËrs.h
"

7 
	$cbf_‹¡
(
p4_ù¾_msg
* 
ù¾_m
)

9 
i
;

10 
p4_f›ld_m©ch_h—d”
* 
fmh
;

11 
p4_f›ld_m©ch_exaù
* 
exaù
 = 0;

12 
	`´štf
("-----------CALLBACK---------------\n");

14 ià(
ù¾_m
->
ty³
 =ğ
P4T_ADD_TABLE_ENTRY
)

16 
	`´štf
(" #### ADD_TABLE_ENTRY\n");

17 
	`´štf
(" ## TabË‚ame: %s\n", 
ù¾_m
->
bË_Çme
);

18 
i
=0;i<
ù¾_m
->
num_f›ld_m©ches
;++i) {

19 
fmh
 = 
ù¾_m
->
f›ld_m©ches
[
i
];

20 ià(
fmh
->
ty³
==
P4_FMT_EXACT
) {

21 
exaù
 = (
p4_f›ld_m©ch_exaù
*)
fmh
;

22 
	`´štf
(" ## F›ld m©ch %d: % %d b™ exaù %02x:%02x:%02x:%02x:%02x:%02x\n", 
i
, 
fmh
->
Çme
,
exaù
->
Ëngth
,ƒxaù->
b™m­
[0],exaù->b™m­[1],exaù->b™m­[2],(
ušt8_t
)exact->bitmap[3],exact->bitmap[4],exact->bitmap[5] );

25 
	`´štf
(" ## F›ld m©ch %d: % nÙƒxaù\n", 
i
, 
fmh
->
Çme
);

27 
	`´štf
(" ## AùiÚ‚ame: %s\n", 
ù¾_m
->
aùiÚ_Çme
);

28 
i
=0;i<
ù¾_m
->
num_aùiÚ_·¿ms
;++i)

30 
	`´štf
(" ## AùiÚ…¬am %d: % %d b™ V:%d\n", 
i
, 
ù¾_m
->
aùiÚ_·¿ms
[i]->
Çme
,ù¾_m->aùiÚ_·¿ms[i]->
Ëngth
, *((
ušt8_t
*)ù¾_m->aùiÚ_·¿ms[i]->
b™m­
));

37 
	}
}

39 
	$maš
()

41 
i
=0;

42 
back’d
 
bg
;

43 
dige¡
 
d
;

44 
ušt8_t
 
mac
[6] = {0x00, 0x0d, 0x3f, 0xcd, 0x02, 0x5f};

45 
ušt8_t
 
pÜt
 = 16;

47 
	`´štf
("Create backend...\n");

48 
bg
 = 
	`ü—‹_back’d
(3,1000,"loÿlho¡", 11111, 
cbf_‹¡
);

50 
	`´štf
("Launch backend...\n");

51 
	`Ïunch_back’d
(
bg
);

53 ;
i
<2;++i) {

54 
	`´štf
("Wait...\n");

55 
	`¦“p
(1);

58 
	`´štf
("Send‡ digest...\n");

60 
	`´štf
(" * Create‡ digest‡nd‡dd fields...\n");

61 
d
 = 
	`ü—‹_dige¡
(
bg
, "mac_learn_digest");

65 
	`add_dige¡_f›ld
(
d
, 
mac
, 48);

66 
	`add_dige¡_f›ld
(
d
, &
pÜt
, 8);

69 
	`´štf
(" * Sendhe…repared digestohe„eceiver...\n");

70 
i
 = 
	`£nd_dige¡
(
bg
, 
d
, 0);

72 
	`´štf
(" *„‘v® = %d\n", 
i
);

74 
i
=0;i<10;++i) {

75 
	`´štf
("Wait...\n");

76 
	`¦“p
(1);

79 
	`´štf
("Stop backend...");

80 
	`¡İ_back’d
(
bg
);

82 
	`´štf
("Destroy backend...");

83 
	`de¡roy_back’d
(
bg
);

86 
	}
}

	@src/hardware_dep/odp/ctrl_plane/tests/test_messages.c

1 
	~"mes§ges.h
"

2 
	~"hªdËrs.h
"

3 
	~<¡dio.h
>

4 
	~<as£¹.h
>

5 
	~<¡ršg.h
>

7 
	#BUFFLEN
 1024

	)

9 
	$‹¡_p4_h—d”
()

11 
bufãr
[
BUFFLEN
];

12 
p4_h—d”
* 
h—d”
;

13 
p4_h—d”
* 
h—d”2
;

15 
h—d”
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

16 
h—d”
->
xid
 = 112222;

17 
h—d”
->
ty³
 = 
P4T_ECHO_REQUEST
;

19 
h—d”2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

21 
	`check_p4_h—d”
Ğ
h—d”
, 
h—d”2
 );

22 
	}
}

24 
	$‹¡_p4_£t_deçuÉ_aùiÚ
()

26 
bufãr
[
BUFFLEN
];

27 
p4_h—d”
* 
h
;

28 
p4_h—d”
* 
h2
;

29 
p4_£t_deçuÉ_aùiÚ
* 
sda
;

30 
p4_£t_deçuÉ_aùiÚ
* 
sda2
;

31 
p4_aùiÚ
* 
a
;

32 
p4_aùiÚ
* 
a2
;

33 
p4_aùiÚ_·¿m‘”
* 
­
;

34 
p4_aùiÚ_·¿m‘”
* 
­2
;

35 
ušt32_t
 
v®
 = 9987112;

36 
ušt16_t
 
off£t
 = 0;

37 
ušt16_t
 
i
 = 0;

38 
p4_ù¾_msg
 
ù¾_m
;

40 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

41 
h
->
xid
 = 112223;

43 
sda
 = 
	`ü—‹_p4_£t_deçuÉ_aùiÚ
(
bufãr
,0,
BUFFLEN
);

44 
	`¡rıy
(
sda
->
bË_Çme
,"smac");

46 
a
 = &(
sda
->
aùiÚ
);

47 
	`¡rıy
(
a
->
desütiÚ
.
Çme
,"smac_hit");

49 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 
BUFFLEN
);

50 
	`¡rıy
(
­
->
Çme
, "port");

51 
	`memıy
(
­
->
b™m­
, &
v®
, (val));

52 
­
->
Ëngth
 = (
v®
)*8;

54 
	`as£¹
(
h
->
Ëngth
 =ğ((
p4_£t_deçuÉ_aùiÚ
è+ (
p4_aùiÚ_·¿m‘”
)));

55 
	`as£¹
(
a
->
·¿m_size
 == 1);

57 
h2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

59 
	`as£¹
(
h2
->
xid
 == 112223);

61 
sda2
 = 
	`uÅack_p4_£t_deçuÉ_aùiÚ
(
bufãr
, 0);

62 
a2
 = &(
sda2
->
aùiÚ
);

63 
off£t
 = (
p4_£t_deçuÉ_aùiÚ
);

65 
	`as£¹
Ğ
a2
->
·¿m_size
 == 1);

67 
i
 = 0;˜< 
a2
->
·¿m_size
; ++i) {

68 
­2
 = 
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
,
off£t
);

69 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

72 
	`as£¹
(
­2
->
Ëngth
 =ğ(
ušt32_t
)*8);

73 
	`as£¹
(*(
ušt32_t
*)&(
­2
->
b™m­
è=ğ
v®
);

77 
	`as£¹
(
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
sda2
, &
ù¾_m
) == 0);

79 
	`as£¹
(
ù¾_m
.
num_aùiÚ_·¿ms
 == 1);

80 
	`as£¹
(
ù¾_m
.
aùiÚ_·¿ms
[0]->
Ëngth
 =ğ(
ušt32_t
)*8);

81 
	`as£¹
(*(
ušt32_t
*)&(
ù¾_m
.
aùiÚ_·¿ms
[0]->
b™m­
è=ğ
v®
);

83 
	}
}

86 
	$maš
()

88 
	`´štf
("Test cases:\n");

89 
	`´štf
("*est_p4_header");

90 
	`fæush
(
¡dout
);

91 
	`‹¡_p4_h—d”
();

92 
	`´štf
(" OK\n");

95 
	`´štf
("*est_p4_set_default_action");

96 
	`fæush
(
¡dout
);

97 
	`‹¡_p4_£t_deçuÉ_aùiÚ
();

98 
	`´štf
(" OK\n");

101 
	}
}

	@src/hardware_dep/odp/ctrl_plane/threadpool.c

7 
	~<¡dio.h
>

8 
	~<¡dlib.h
>

9 
	~<uni¡d.h
>

10 
	~<±h»ad.h
>

11 
	~<sigÇl.h
>

12 
	~"th»adpoŞ.h
"

15 
±h»ad_kl
(
±h»ad_t
 
th»ad
, 
sig
);

17 
	swÜk_¡
{

18 (*
	mroutše
) (*);

19 * 
	m¬g
;

20 
wÜk_¡
* 
	mÃxt
;

21 } 
	twÜk_t
;

23 
	s_th»adpoŞ_¡
 {

25 
	mnum_th»ads
;

26 
	mqsize
;

27 
±h»ad_t
 *
	mth»ads
;

28 
wÜk_t
* 
	mqh—d
;

29 
wÜk_t
* 
	mq
;

30 
±h»ad_mu‹x_t
 
	mqlock
;

31 
±h»ad_cÚd_t
 
	mq_nÙ_em±y
;

32 
±h»ad_cÚd_t
 
	mq_em±y
;

33 
	mshutdown
;

34 
	mdÚt_acû±
;

35 } 
	t_th»adpoŞ
;

38 * 
	$do_wÜk
(
th»adpoŞ
 
p
) {

39 
_th»adpoŞ
 * 
poŞ
 = (_th»adpoŞ *è
p
;

40 
wÜk_t
* 
cur
;

43 
poŞ
->
qsize
 =…ool->qsize;

44 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

47  
poŞ
->
qsize
 == 0) {

48 if(
poŞ
->
shutdown
) {

49 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

50 
	`±h»ad_ex™
(
NULL
);

53 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

54 
	`±h»ad_cÚd_wa™
(&(
poŞ
->
q_nÙ_em±y
),&ÕoŞ->
qlock
));

57 if(
poŞ
->
shutdown
) {

58 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

59 
	`±h»ad_ex™
(
NULL
);

63 
cur
 = 
poŞ
->
qh—d
;

65 
poŞ
->
qsize
--;

67 if(
poŞ
->
qsize
 == 0) {

68 
poŞ
->
qh—d
 = 
NULL
;

69 
poŞ
->
q
 = 
NULL
;

72 
poŞ
->
qh—d
 = 
cur
->
Ãxt
;

75 if(
poŞ
->
qsize
 =ğ0 && !…oŞ->
shutdown
) {

77 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_em±y
));

79 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

80 (
cur
->
routše
è(cur->
¬g
);

81 
	`ä“
(
cur
);

83 
	}
}

85 
th»adpoŞ
 
	$ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
) {

86 
_th»adpoŞ
 *
poŞ
;

87 
i
;

90 ià((
num_th»ads_š_poŞ
 <ğ0è|| (num_th»ads_š_poŞ > 
MAXT_IN_POOL
))

91  
NULL
;

93 
poŞ
 = (
_th»adpoŞ
 *è
	`m®loc
((_threadpool));

94 ià(
poŞ
 =ğ
NULL
) {

95 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

96  
NULL
;

99 
poŞ
->
th»ads
 = (
±h»ad_t
*è
	`m®loc
 (Õth»ad_tè* 
num_th»ads_š_poŞ
);

101 if(!
poŞ
->
th»ads
) {

102 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

103  
NULL
;

106 
poŞ
->
num_th»ads
 = 
num_th»ads_š_poŞ
;

107 
poŞ
->
qsize
 = 0;

108 
poŞ
->
qh—d
 = 
NULL
;

109 
poŞ
->
q
 = 
NULL
;

110 
poŞ
->
shutdown
 = 0;

111 
poŞ
->
dÚt_acû±
 = 0;

114 if(
	`±h»ad_mu‹x_š™
(&
poŞ
->
qlock
,
NULL
)) {

115 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

116  
NULL
;

118 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_em±y
),
NULL
)) {

119 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

120  
NULL
;

122 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_nÙ_em±y
),
NULL
)) {

123 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

124  
NULL
;

129 
i
 = 0;˜< 
num_th»ads_š_poŞ
;i++) {

130 if(
	`±h»ad_ü—‹
(&(
poŞ
->
th»ads
[
i
]),
NULL
,
do_wÜk
,pool)) {

131 
	`årštf
(
¡d”r
, "Thread initiationƒrror!\n");

132  
NULL
;

135  (
th»adpoŞ
è
poŞ
;

136 
	}
}

139 
	$di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
,

140 *
¬g
) {

141 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
äom_me
;

142 
wÜk_t
 * 
cur
;

144 
cur
 = (
wÜk_t
*è
	`m®loc
((work_t));

145 if(
cur
 =ğ
NULL
) {

146 
	`årštf
(
¡d”r
, "Out of memory creating‡ work struct!\n");

150 
cur
->
routše
 = 
di¥©ch_to_h”e
;

151 
cur
->
¬g
 =‡rg;

152 
cur
->
Ãxt
 = 
NULL
;

154 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

156 if(
poŞ
->
dÚt_acû±
) {

157 
	`´štf
("Closed\n");

158 
	`ä“
(
cur
);

161 if(
poŞ
->
qsize
 == 0) {

162 
poŞ
->
qh—d
 = 
cur
;

163 
poŞ
->
q
 = 
cur
;

164 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_nÙ_em±y
));

166 
poŞ
->
q
->
Ãxt
 = 
cur
;

167 
poŞ
->
q
 = 
cur
;

169 
poŞ
->
qsize
++;

170 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

171 
	}
}

173 
	$de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
) {

174 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
de¡royme
;

175 
i
=0;

176 * 
nÙhšg
;

178 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

179 ;
i
 < 
poŞ
->
num_th»ads
;i++) {

180 
	`±h»ad_kl
(
poŞ
->
th»ads
[
i
], 
SIGUSR1
);

182 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

185 
i
=0;˜< 
poŞ
->
num_th»ads
;i++) {

187 
	`±h»ad_još
(
poŞ
->
th»ads
[
i
],&
nÙhšg
);

190 
	`ä“
(
poŞ
->
th»ads
);

192 
	`±h»ad_mu‹x_de¡roy
(&(
poŞ
->
qlock
));

193 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_em±y
));

194 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_nÙ_em±y
));

196 
	}
}

	@src/hardware_dep/odp/ctrl_plane/threadpool.h

9 
	#MAXT_IN_POOL
 200

	)

17 *
	tth»adpoŞ
;

25 (*
	tdi¥©ch_â
)(*);

32 
th»adpoŞ
 
	`ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
);

46 
	`di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
, *
¬g
);

53 
	`de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
);

	@src/hardware_dep/odp/data_plane/odp_lib.c

1 
	~"odp_­i.h
"

2 
	~"®Ÿ£s.h
"

3 
	~"back’d.h
"

4 
	~"ù¾_¶ªe_back’d.h
"

5 
	~"d©­ÏÃ.h
"

6 
	~<uni¡d.h
>

8 
	~"odp_lib.h
"

9 
	~<odp/h–³r/lšux.h
>

10 
	~<odp_­i.h
>

11 
	~<odp/h–³r/‘h.h
>

12 
	~<odp/h–³r/.h
>

13 
	~<odp/h–³r/bË.h
>

14 
	~<Ãt/‘h”Ãt.h
>

18 
š™_cÚŒŞ_¶ªe
();

21 
ušt32_t
 
’abËd_pÜt_mask
;

22 
	g´omiscuous_Ú
 = 0;

23 
	gnuma_Ú
 = 1;

25 
	#MAX_LCORE_PARAMS
 1024

	)

26 
ušt16_t
 
	gnb_lcÜe_·¿ms
;

28 
l2fwd_pÜt_¡©i¡ics
 
	gpÜt_¡©i¡ics
[
MAX_ETHPORTS
];

32 
	#MAX_JUMBO_PKT_LEN
 9600

	)

34 
	#RTE_TEST_RX_DESC_DEFAULT
 128

	)

35 
	#RTE_TEST_TX_DESC_DEFAULT
 512

	)

36 
ušt16_t
 
	gnb_rxd
 = 
RTE_TEST_RX_DESC_DEFAULT
;

37 
ušt16_t
 
	gnb_txd
 = 
RTE_TEST_TX_DESC_DEFAULT
;

40 
	#POOL_NUM_PKT
 8192

	)

41 
	#POOL_SEG_LEN
 1856

	)

42 
	#MAX_PKT_BURST
 32

	)

45 
odp_pktio_t
 
	mif0
, 
	mif1
;

46 
odp_pktš_queue_t
 
	mif0š
, 
	mif1š
;

47 
odp_pktout_queue_t
 
	mif0out
, 
	mif1out
;

48 
odph_‘haddr_t
 
	m¤c
, 
	md¡
;

49 } 
	gglob®
;

52 
odp_maš_wÜk”
 ();

61 
	#UNUSED
(
x
è()(x)

	)

65 
	$´št_u§ge
(cÚ¡ *
´gÇme
)

67 
	`´štf
 ("%s [EAL options] -- -p PORTMASK -P"

77 
´gÇme
);

78 
	}
}

80 
	$·r£_max_pkt_Ën
(cÚ¡ *
pk’
)

82 *
’d
 = 
NULL
;

83 
Ën
;

86 
Ën
 = 
	`¡¹oul
(
pk’
, &
’d
, 10);

87 ià((
pk’
[0] =ğ'\0'è|| (
’d
 =ğ
NULL
) || (*end != '\0'))

90 ià(
Ën
 == 0)

93  
Ën
;

94 
	}
}

97 
	$·r£_pÜtmask
(cÚ¡ *
pÜtmask
)

99 *
’d
 = 
NULL
;

100 
pm
;

103 
pm
 = 
	`¡¹oul
(
pÜtmask
, &
’d
, 16);

104 ià((
pÜtmask
[0] =ğ'\0'è|| (
’d
 =ğ
NULL
) || (*end != '\0'))

107 ià(
pm
 == 0)

110  
pm
;

111 
	}
}

114 
	$·r£_cÚfig
(cÚ¡ *
q_¬g
)

117 
s
[256];

118 cÚ¡ *
p
, *
p0
 = 
q_¬g
;

119 *
’d
;

120 
	ef›ldÇmes
 {

121 
FLD_PORT
 = 0,

122 
FLD_QUEUE
,

123 
FLD_LCORE
,

124 
_NUM_FLD


126 
št_æd
[
_NUM_FLD
];

127 *
¡r_æd
[
_NUM_FLD
];

128 
i
;

129 
size
;

131 
nb_lcÜe_·¿ms
 = 0;

133 (
p
 = 
	`¡rchr
(
p0
,'(')è!ğ
NULL
) {

134 ++
p
;

135 if((
p0
 = 
	`¡rchr
(
p
,')')è=ğ
NULL
)

138 
size
 = 
p0
 - 
p
;

139 if(
size
 >ğ(
s
))

142 
	`¢´štf
(
s
, (s), "%.*s", 
size
, 
p
);

143 ià(
	`¹e_¡r¥l™
(
s
, (s), 
¡r_æd
, 
_NUM_FLD
, ',') != _NUM_FLD)

145 
i
 = 0; i < 
_NUM_FLD
; i++){

146 
”ºo
 = 0;

147 
št_æd
[
i
] = 
	`¡¹oul
(
¡r_æd
[i], &
’d
, 0);

148 ià(
”ºo
 !ğ0 || 
’d
 =ğ
¡r_æd
[
i
] || 
št_æd
[i] > 255)

151 ià(
nb_lcÜe_·¿ms
 >ğ
MAX_LCORE_PARAMS
) {

152 
	`´štf
("exceeded max‚umber of†core…arams: %hu\n",

153 
nb_lcÜe_·¿ms
);

156 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
pÜt_id
 = (
ušt8_t
)
št_æd
[
FLD_PORT
];

157 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
queue_id
 = (
ušt8_t
)
št_æd
[
FLD_QUEUE
];

158 
lcÜe_·¿ms_¬¿y
[
nb_lcÜe_·¿ms
].
lcÜe_id
 = (
ušt8_t
)
št_æd
[
FLD_LCORE
];

159 ++
nb_lcÜe_·¿ms
;

161 
lcÜe_·¿ms
 = 
lcÜe_·¿ms_¬¿y
;

164 
	}
}

166 
	#CMD_LINE_OPT_CONFIG
 "cÚfig"

	)

167 
	#CMD_LINE_OPT_NO_NUMA
 "no-numa"

	)

168 
	#CMD_LINE_OPT_ENABLE_JUMBO
 "’abË-jumbo"

	)

169 
	#CMD_LINE_OPT_HASH_ENTRY_NUM
 "hash-’Œy-num"

	)

173 
	$·r£_¬gs
(
¬gc
, **
¬gv
)

175 
»t
;

177 
İt
;

178 **
¬gvİt
;

179 
İtiÚ_šdex
;

180 *
´gÇme
 = 
¬gv
[0];

181 
İtiÚ
 
lgİts
[] = {

182 {
CMD_LINE_OPT_CONFIG
, 1, 0, 0},

183 {
CMD_LINE_OPT_NO_NUMA
, 0, 0, 0},

184 {
CMD_LINE_OPT_ENABLE_JUMBO
, 0, 0, 0},

185 {
CMD_LINE_OPT_HASH_ENTRY_NUM
, 1, 0, 0},

186 {
NULL
, 0, 0, 0}

189 
¬gvİt
 = 
¬gv
;

191 (
İt
 = 
	`g‘İt_lÚg
(
¬gc
, 
¬gvİt
, "p:P",

192 
lgİts
, &
İtiÚ_šdex
)è!ğ
EOF
) {

194 
İt
) {

197 
’abËd_pÜt_mask
 = 
	`·r£_pÜtmask
(
İrg
);

198 ià(
’abËd_pÜt_mask
 == 0) {

199 
	`´štf
("invalid…ortmask\n");

200 
	`´št_u§ge
(
´gÇme
);

205 
	`´štf
("Promiscuous mode selected\n");

206 
´omiscuous_Ú
 = 1;

211 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_CONFIG
,

212  (
CMD_LINE_OPT_CONFIG
))) {

213 
»t
 = 
	`·r£_cÚfig
(
İrg
);

214 ià(
»t
) {

215 
	`´štf
("invalid config\n");

216 
	`´št_u§ge
(
´gÇme
);

221 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_NO_NUMA
,

222 (
CMD_LINE_OPT_NO_NUMA
))) {

223 
	`´štf
("numa is disabled \n");

224 
numa_Ú
 = 0;

227 ià(!
	`¡ºcmp
(
lgİts
[
İtiÚ_šdex
].
Çme
, 
CMD_LINE_OPT_ENABLE_JUMBO
,

228  (
CMD_LINE_OPT_ENABLE_JUMBO
))) {

229 
İtiÚ
 
Ënİts
 = {"max-pkt-Ën", 
»quœed_¬gum’t
, 0, 0};

231 
	`´štf
("jumbo frame isƒnabled - disabling simple TX…ath\n");

232 
pÜt_cÚf
.
rxmode
.
jumbo_äame
 = 1;

235 ià(0 =ğ
	`g‘İt_lÚg
(
¬gc
, 
¬gvİt
, "", &
Ënİts
, &
İtiÚ_šdex
)) {

236 
»t
 = 
	`·r£_max_pkt_Ën
(
İrg
);

237 ià((
»t
 < 64è|| (»ˆ> 
MAX_JUMBO_PKT_LEN
)){

238 
	`´štf
("invalid…acket†ength\n");

239 
	`´št_u§ge
(
´gÇme
);

242 
pÜt_cÚf
.
rxmode
.
max_rx_pkt_Ën
 = 
»t
;

244 
	`´štf
("set jumbo frame max…acket†engtho %u\n",

245 ()
pÜt_cÚf
.
rxmode
.
max_rx_pkt_Ën
);

250 
	`´št_u§ge
(
´gÇme
);

255 ià(
İtšd
 >= 0)

256 
¬gv
[
İtšd
-1] = 
´gÇme
;

258 
»t
 = 
İtšd
-1;

259 
İtšd
 = 0;

261  
»t
;

262 
	}
}

265 
	$´št_‘haddr
(cÚ¡ *
Çme
, cÚ¡ 
‘h”_addr
 *
‘h_addr
)

268 
buf
[
ETHER_ADDR_FMT_SIZE
];

269 
	`‘h”_fÜm©_addr
(
buf
, 
ETHER_ADDR_FMT_SIZE
, 
‘h_addr
);

270 
	`´štf
("%s%s", 
Çme
, 
buf
);

272 
	}
}

275 
	$ü—‹_bËs_Ú_sock‘
 (
sock‘id
)

278 ià(
bË_cÚfig
 =ğ
NULL
) ;

279 
i
;

280 
i
=0;˜< 
NB_TABLES
; i++) {

281 
	`´štf
("ü‘šgabË %d \n", 
i
);

282 
lookup_bË_t
 
t
 = 
bË_cÚfig
[
i
];

283 
j
;

284 
j
 = 0; j < 
NB_REPLICA
; j++) {

285 
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
] = 
	`m®loc
((
lookup_bË_t
));

286 
	`memıy
(
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
], &
t
, (
lookup_bË_t
));

287 
	`bË_ü—‹
(
bËs_Ú_sock‘s
[
sock‘id
][
i
][
j
], socketid);

289 
aùive_»¶iÿ
[
sock‘id
][
i
] = 0;

291 
	}
}

293 
	$š™_lookup_bËs
()

295 
sock‘id
 = 
SOCKET_DEF
;

296 
	`´štf
("Initializingables...\n");

297 ià(
bËs_Ú_sock‘s
[
sock‘id
][0][0] =ğ
NULL
)

298 
	`ü—‹_bËs_Ú_sock‘
(
sock‘id
);

299 
	`´štf
("Initializingables Done.\n");

301 
	}
}

303 
	$chªge_»¶iÿ
(
sock‘id
, 
tid
, 
»¶iÿ
) {

305 
	}
}

307 
	#CHANGE_TABLE
(
fun
, 
·r
...) \

309 
cu¼’t_»¶iÿ
 = 
aùive_»¶iÿ
[
sock‘id
][
bËid
]; \

310 
Ãxt_»¶iÿ
 = (
cu¼’t_»¶iÿ
+1)%
NB_REPLICA
; \

311 
	`fun
(
bËs_Ú_sock‘s
[
sock‘id
][
bËid
][
Ãxt_»¶iÿ
], 
·r
); \

312 
	`chªge_»¶iÿ
(
sock‘id
, 
bËid
, 
Ãxt_»¶iÿ
); \

313 
	`u¦“p
(
TABCHANGE_DELAY
); \

314 
cu¼’t_»¶iÿ
 = 0; cu¼’t_»¶iÿ < 
NB_REPLICA
; current_replica++) \

315 if(
cu¼’t_»¶iÿ
 !ğ
Ãxt_»¶iÿ
è
	`fun
(
bËs_Ú_sock‘s
[
sock‘id
][
bËid
][cu¼’t_»¶iÿ], 
·r
); \

316 }

	)

318 
	#FORALLNUMANODES
(
b
) \

319 
sock‘id
; \

320 
sock‘id
 = 0; sock‘id < 
NB_SOCKETS
; socketid++) \

321 if(
bËs_Ú_sock‘s
[
sock‘id
][0][0] !ğ
NULL
) \

322 
b


	)

324 
	$exaù_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
) {

325 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
exaù_add
, 
key
, 
v®ue
))

326 
	}
}

328 
	$Ím_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
) {

329 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
Ím_add
, 
key
, 
d•th
, 
v®ue
))

330 
	}
}

332 
	$‹º¬y_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
) {

333 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
‹º¬y_add
, 
key
, 
mask
, 
v®ue
))

334 
	}
}

336 
	$bË_£tdeçuÉ_´omÙe
(
bËid
, 
ušt8_t
* 
v®ue
) {

337 
	`FORALLNUMANODES
(
	`CHANGE_TABLE
(
bË_£tdeçuÉ
, 
v®ue
))

338 
	}
}

340 
odp_pktio_t
 
	$ü—‹_pktio
(cÚ¡ *
Çme
, 
odp_poŞ_t
 
poŞ
,

341 
odp_pktš_queue_t
 *
pktš
,

342 
odp_pktout_queue_t
 *
pktout
)

344 
odp_pktio_·¿m_t
 
pktio_·¿m
;

345 
odp_pktš_queue_·¿m_t
 
š_queue_·¿m
;

346 
odp_pktout_queue_·¿m_t
 
out_queue_·¿m
;

347 
odp_pktio_t
 
pktio
;

349 
	`odp_pktio_·¿m_š™
(&
pktio_·¿m
);

351 
pktio
 = 
	`odp_pktio_İ’
(
Çme
, 
poŞ
, &
pktio_·¿m
);

352 ià(
pktio
 =ğ
ODP_PKTIO_INVALID
) {

353 
	`´štf
("FaedØİ’ %s\n", 
Çme
);

354 
	`ex™
(1);

357 
	`odp_pktš_queue_·¿m_š™
(&
š_queue_·¿m
);

358 
	`odp_pktout_queue_·¿m_š™
(&
out_queue_·¿m
);

360 
š_queue_·¿m
.
İ_mode
 = 
ODP_PKTIO_OP_MT_UNSAFE
;

361 ià(
	`odp_pktš_queue_cÚfig
(
pktio
, &
š_queue_·¿m
)) {

362 
	`´štf
("FaedØcÚfig iÅuˆqueufÜ %s\n", 
Çme
);

363 
	`ex™
(1);

366 
out_queue_·¿m
.
İ_mode
 = 
ODP_PKTIO_OP_MT_UNSAFE
;

367 ià(
	`odp_pktout_queue_cÚfig
(
pktio
, &
out_queue_·¿m
)) {

368 
	`´štf
("FaedØcÚfig ouuˆqueufÜ %s\n", 
Çme
);

369 
	`ex™
(1);

371 ià(
	`odp_pktš_queue
(
pktio
, 
pktš
, 1) != 1) {

372 
	`´štf
("pktš queuqu”y faed fÜ %s\n", 
Çme
);

373 
	`ex™
(1);

375 ià(
	`odp_pktout_queue
(
pktio
, 
pktout
, 1) != 1) {

376 
	`´štf
("pktouˆqueuqu”y faed fÜ %s\n", 
Çme
);

377 
	`ex™
(1);

379  
pktio
;

380 
	}
}

383 *
	$Ïunch_wÜk”
(*
¬g
 
ODP_UNUSED
)

385 
	`odp_maš_wÜk”
();

386  
NULL
;

387 
	}
}

389 
ušt8_t


390 
	$odp_š™Ÿlize
(
¬gc
, **
¬gv
)

393 
odp_poŞ_t
 
poŞ
;

394 
odp_poŞ_·¿m_t
 
·¿ms
;

395 
odp_ıumask_t
 
ıumask
;

396 
odph_lšux_±h»ad_t
 
thd
;

398 
nb_pÜts
;

401 ià(
	`odp_š™_glob®
(
NULL
, NULL)) {

402 
	`´štf
("Error: ODP global init failed.\n");

403 
	`ex™
(1);

406 ià(
	`odp_š™_loÿl
(
ODP_THREAD_CONTROL
)) {

407 
	`´štf
("Error: ODP†ocal init failed.\n");

408 
	`ex™
(1);

412 
	`odp_poŞ_·¿m_š™
(&
·¿ms
);

413 
·¿ms
.
pkt
.
£g_Ën
 = 
POOL_SEG_LEN
;

414 
·¿ms
.
pkt
.
Ën
 = 
POOL_SEG_LEN
;

415 
·¿ms
.
pkt
.
num
 = 
POOL_NUM_PKT
;

416 
·¿ms
.
ty³
 = 
ODP_POOL_PACKET
;

418 
poŞ
 = 
	`odp_poŞ_ü—‹
("·ck‘…oŞ", &
·¿ms
);

420 ià(
poŞ
 =ğ
ODP_POOL_INVALID
) {

421 
	`´štf
("Error:…acket…ool create failed.\n");

422 
	`ex™
(1);

426 
nb_pÜts
 = 2;

429 
glob®
.
if0
 = 
	`ü—‹_pktio
("‘h1", 
poŞ
, &glob®.
if0š
, &glob®.
if0out
);

431 
glob®
.
if1
 = 
	`ü—‹_pktio
("‘h2", 
poŞ
, &glob®.
if1š
, &glob®.
if1out
);

437 
	`š™_lookup_bËs
();

442 
	`š™_cÚŒŞ_¶ªe
();

444 
	`odp_ıumask_deçuÉ_wÜk”
(&
ıumask
, 1);

445 
	`odph_lšux_±h»ad_ü—‹
(&
thd
, &
ıumask
, 
Ïunch_wÜk”
, 
NULL
,

446 
ODP_THREAD_WORKER
);

447 
	`odph_lšux_±h»ad_još
(&
thd
, 1);

449  
nb_pÜts
;

450 
	}
}

	@src/hardware_dep/odp/data_plane/odp_primitives.c

1 
	~"back’d.h
"

2 
	~"d©­ÏÃ.h
"

4 
	~<¡ršg.h
>

6 
	~<¬·/š‘.h
>

10 
	$add_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

12 if(
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 =ğ
NULL
) {

13 
ušt16_t
 
Ën
 = 
h
.
by‹width
;

14 * 
add»ss
 = 
	`¹e_pktmbuf_´•’d
(
p
->
poš‹r
, 
Ën
);

15 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
] =

16 (
h—d”_desütÜ_t
) {

17 .
ty³
 = 
h
.
h—d”_š¡ªû
,

18 .
poš‹r
 = 
add»ss
,

19 .
Ëngth
 = 
h
.
by‹width


22 
	`´štf
("Cannot‡dd‡ header instance‡lready…resent inhe…acket\n");

24 
	}
}

27 
	$»move_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

29 
h—d”_desütÜ_t
 
hd
 = 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
];

30 if(
hd
.
poš‹r
 !ğ
NULL
) {

31 
ušt16_t
 
Ën
 = (ušt16_t)
hd
.
Ëngth
;

32 
	`¹e_pktmbuf_adj
(
p
->
poš‹r
, 
Ën
);

33 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
Ëngth
 = 0;

34 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 = 
NULL
;

36 
	`´štf
("Cannot„emove‡ header instance‚ot…resent inhe…acket\n");

38 
	}
}

40 
	#FIELD_BYTE_ADDR
(
p
, 
f
è((
ušt8_t
*)Õ)->
h—d”s
[f.
h—d”
].
poš‹r
)+f.
by‹off£t


	)

42 
ušt32_t


43 
	$exŒaù_štv®ue
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

45 
ušt32_t
 
v®
;

46 if(
f
.
by‹width
 <= 4)

47 
v®
 = (*(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
)è& f.
mask
è>> f.
b™off£t
;

49 
v®
 = *(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
è+ f.
by‹width
 - (uint32_t));

50  
f
.
m‘a
 ? 
v®
 : 
	`Áohl
(val);

51 
	}
}

53 
ušt8_t
*

54 
	$exŒaù_by‹buf
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

56 if(
f
.
b™width
 % 8 =ğ0 && f.
b™off£t
 == 0)

57  
	`FIELD_BYTE_ADDR
(
p
, 
f
);

60  
NULL
;

61 
	}
}

72 
	$add_to_št_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
¤c_v®
)

74 
ušt32_t
 
»s
 = 
	`exŒaù_štv®ue
(
p
, 
f
è+ 
¤c_v®
;

75 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
»s
);

76 
	}
}

79 
	$add_cÚ¡_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
) {

80 if(
f
.
by‹width
 <= 4) {

82 
ušt32_t
 
¤c_v®
 = 0;

83 
	`memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

84 
	`add_to_št_f›ld
(
p
, 
f
, 
¤c_v®
);

88 
	}
}

91 
	$modify_f›ld_to_cÚ¡32
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
v®
)

94 
ušt32_t
 
nv®
 = 
f
.
m‘a
 ? 
v®
 : 
	`htÚl
(val);

95 
ušt32_t
 
mask
 = 
f
.mask;

96 
ušt32_t
 
Ãwšt
 = (*(
	`FIELD_BYTE_ADDR
(
p
, 
f
))&~
mask
)|(
nv®
&(mask>>f.
b™off£t
))<<f.bitoffset;

97 
	`memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), &
Ãwšt
, f.
by‹width
);

98 
	}
}

101 
	$modify_f›ld_to_cÚ¡
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
)

103 if(
f
.
by‹width
 <= 4) {

104 
ušt32_t
 
¤c_v®
 = 0;

105 
	`memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

106 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
¤c_v®
);

108 if(
f
.
by‹width
 =ğ
¤ş’
)

109 
	`memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), 
¤c
, 
¤ş’
);

112 
	}
}

115 
	$modify_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

117 if(
d¡f
.
by‹width
 =ğ
¤cf
.bytewidth)

118 
	`modify_f›ld_to_cÚ¡
(
p
, 
d¡f
, 
	`FIELD_BYTE_ADDR
Õ, 
¤cf
), srcf.
by‹width
);

121 
	}
}

124 
	$add_f›lds
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf1
, f›ld_»ã»nû_ˆ
¤cf2
) {

125 if(
d¡f
.
by‹width
 <= 4) {

126 
ušt32_t
 
v®
 = 
	`exŒaù_štv®ue
(
p
, 
¤cf1
è+ƒxŒaù_štv®ueÕ, 
¤cf2
);

127 
	`modify_f›ld_to_cÚ¡32
(
p
, 
d¡f
, 
v®
);

131 
	}
}

134 
	$add_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

136 
	`add_f›lds
(
p
, 
d¡f
, d¡f, 
¤cf
);

137 
	}
}

141 
	$g’”©e_dige¡
(
back’d
 
bg
, * 
Çme
, 
»ûiv”
, 
ty³_f›ld_li¡
* 
dige¡_f›ld_li¡
)

143 
dige¡
 
d
 = 
	`ü—‹_dige¡
(
bg
, 
Çme
);

144 
i
;

145 
i
 = 0; i < 
dige¡_f›ld_li¡
->
f›lds_quªt™y
; i++)

146 
d
 = 
	`add_dige¡_f›ld
(d, 
dige¡_f›ld_li¡
->
f›ld_off£ts
[
i
], dige¡_f›ld_li¡->
f›ld_widths
[i]);

147 
	`£nd_dige¡
(
bg
, 
d
, 
»ûiv”
);

148 
	}
}

150 
	$no_İ
()

152 
	}
}

154 
	$cİy_h—d”
(
·ck‘
* 
p1
,…ack‘* 
p2
, 
h—d”_idx
 
h1
, h—d”_idx 
h2
, 
Ëngth
 
l
)

157 
	}
}

159 
	$drİ
(
·ck‘
* 
p
)

162 
	}
}

	@src/hardware_dep/odp/data_plane/odp_tables.c

1 
	~"back’d.h
"

2 
	~"d©­ÏÃ.h
"

3 
	~"odp_bËs.h
"

4 
	~"odp_­i.h
"

5 
	~"¡dio.h
"

10 
	~"‹º¬y_Çive.h
"

13 
ušt8_t
*

14 
	$cİy_to_sock‘
(
ušt8_t
* 
¤c
, 
Ëngth
, 
sock‘id
) {

15 
ušt8_t
* 
d¡
 = 
	`¹e_m®loc_sock‘
("ušt8_t", (ušt8_t)*
Ëngth
, 0, 
sock‘id
);

16 
	`memıy
(
d¡
, 
¤c
, 
Ëngth
);

17  
d¡
;

18 
	}
}

20 
ušt8_t
*

21 
	$cİy_to_sock‘
(
ušt8_t
* 
¤c
, 
Ëngth
, 
sock‘id
) {

23 
	}
}

27 
ušt32_t
 
	$üc32
(cÚ¡ *
d©a
, 
ušt32_t
 
d©a_Ën
, ušt32_ˆ
š™_v®
) {

28 cÚ¡ 
ušt8_t
* 
by‹s
 = 
d©a
;

29 
ušt32_t
 
üc
, 
mask
;

30 
i
, 
j
;

31 
i
 = 0;

32 
üc
 = 0xFFFFFFFF;

33 
i
 < 
d©a_Ën
) {

34 
üc
 = crø^ 
by‹s
[
i
];

35 
j
 = 7; j >= 0; j--) {

36 
mask
 = -(
üc
 & 1);

37 
üc
 = (üø>> 1è^ (0xEDB88320 & 
mask
);

39 
i
 = i + 1;

41  ~
üc
;

42 
	}
}

48 
št32_t


49 
	$hash_add_key
(
¹e_hash
* 
h
, *
key
)

51 
št32_t
 
»t
;

52 
»t
 = 
	`¹e_hash_add_key
(
h
,(*è
key
);

53 ià(
»t
 < 0)

54 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe hash.\n");

55  
»t
;

56 
	}
}

61 
	$Ím4_add
(
¹e_Ím
* 
l
, 
ušt32_t
 
key
, 
ušt8_t
 
d•th
, ušt8_ˆ
v®ue
)

63 
»t
;

64 
»t
 = 
	`¹e_Ím_add
(
l
, 
key
, 
d•th
, 
v®ue
);

65 ià(
»t
 < 0)

66 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe LPMable\n");

67 
	`´štf
("LPM: Added 0x%08x / %d (%d)\n", ()
key
, 
d•th
, 
v®ue
);

68 
	}
}

73 
	$Ím6_add
(
¹e_Ím6
* 
l
, 
ušt8_t
 
key
[16], ušt8_ˆ
d•th
, ušt8_ˆ
v®ue
)

75 
»t
;

76 
»t
 = 
	`¹e_Ím6_add
(
l
, 
key
, 
d•th
, 
v®ue
);

77 ià(
»t
 < 0)

78 
	`¹e_ex™
(
EXIT_FAILURE
, "Unableo‡ddƒntryohe LPMable\n");

79 
	`´štf
("LPM: Addšg„ou‹ % / %d (%d)\n", "IPV6", 
d•th
, 
v®ue
);

80 
	}
}

90 
	$ü—‹_ext_bË
(
lookup_bË_t
* 
t
, * 
bË
, 
sock‘id
)

92 
ex‹nded_bË_t
* 
ext
 = 
NULL
;

93 
odp_shm_t
 
shm
;

95 
shm
 = 
	`odp_shm_»£rve
("ext_bË", (
ex‹nded_bË_t
),

96 
ODP_CACHE_LINE_SIZE
, 0);

97 
ext
 = 
	`odp_shm_addr
(
shm
);

98 ià(
ext
 =ğ
NULL
) {

100 
	`ex™
(
EXIT_FAILURE
);

102 
	`mem£t
(
ext
, 0, (*ext));

106 
ext
->
odp_bË
 = 
bË
;

107 
ext
->
size
 = 0;

110 
shm
 = 
	`odp_shm_»£rve
("ext_bË_cÚ‹Á", (
ušt8_t
*)*
TABLE_MAX
,

111 
ODP_CACHE_LINE_SIZE
, 0);

112 
ext
->
cÚ‹Á
 = 
	`odp_shm_addr
(
shm
);

113 ià(
ext
 =ğ
NULL
) {

115 
	`ex™
(
EXIT_FAILURE
);

117 
	`mem£t
(
ext
->
cÚ‹Á
, 0, (*(ext->content)));

119 
t
->
bË
 = 
ext
;

120 
	}
}

123 
	$bË_ü—‹
(
lookup_bË_t
* 
t
, 
sock‘id
)

125 
Çme
[64];

126 
t
->
sock‘id
 = socketid;

127 
odph_bË_t
 
bË
;

128 
odph_bË_İs_t
 *
‹¡_İs
;

130 
	`´štf
("test hashable:\n");

131 
‹¡_İs
 = &
odph_hash_bË_İs
;

133 
t
->
ty³
)

135 
LOOKUP_EXACT
:

136 
	`¢´štf
(
Çme
, Òame), "%s_exaù_%d", 
t
->Çme, 
sock‘id
);

139 
bË
 = 
‹¡_İs
->
	`f_ü—‹
("test", 2, 4, 16);

140 if(
bË
 =ğ
NULL
) {

141 
	`´štf
("table create fail\n");

142 
	`ex™
(0);

146 
	`ü—‹_ext_bË
(
t
, 
bË
, 
sock‘id
);

149 
LOOKUP_LPM
:

150 
	`¢´štf
(
Çme
, Òame), "%s_Ím_%d", 
t
->Çme, 
sock‘id
);

151 if(
t
->
key_size
 <= 4)

153 
¹e_Ím
* 
l
 = 
	`Ím4_ü—‹
(
sock‘id
, 
Çme
, 
t
->
max_size
);

154 
	`ü—‹_ext_bË
(
t
, 
l
, 
sock‘id
);

157 if(
t
->
key_size
 <= 16)

159 
¹e_Ím6
* 
l
 = 
	`Ím6_ü—‹
(
sock‘id
, 
Çme
, 
t
->
max_size
);

160 
	`ü—‹_ext_bË
(
t
, 
l
, 
sock‘id
);

164 
	`¹e_ex™
(
EXIT_FAILURE
, "LPM: key_size‚ot supported\n");

165 
LOOKUP_TERNARY
:

166 
t
->
bË
 = 
	`Çive_‹º¬y_ü—‹
Ñ->
key_size
,->
max_size
);

170 
	`´štf
("C»©edabË oàty³ %d oÀsock‘ %d\n", 
t
->
ty³
, 
sock‘id
);

171 
	}
}

177 
	$bË_£tdeçuÉ
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
v®ue
)

179 
	`´štf
("£t_deçuÉ - %d, %d, %p\n", 
t
->
v®_size
,->
sock‘id
,);

180 
t
->
deçuÉ_v®
 = 
	`cİy_to_sock‘
(
v®ue
,->
v®_size
,->
sock‘id
);

181 
	}
}

187 
	$exaù_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
)

190 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

191 
ušt32_t
 
šdex
 = 
	`¹e_hash_add_key
(
ext
->
¹e_bË
, (*è
key
);

192 if(
šdex
 < 0)

193 
	`¹e_ex™
(
EXIT_FAILURE
, "HASH:‡dd failed\n");

194 
ext
->
cÚ‹Á
[
šdex
%256] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

196 
	}
}

199 
	$Ím_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
)

202 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

203 if(
t
->
key_size
 <= 4)

205 
ext
->
cÚ‹Á
[ext->
size
] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

207 
ušt32_t
* 
key32
 = 
	`ÿÎoc
(1, (uint32_t));

208 
	`memıy
(
key32
, 
key
, 
t
->
key_size
);

209 
	`Ím4_add
(
ext
->
¹e_bË
, *
key32
, 
d•th
,ƒxt->
size
++);

211 if(
t
->
key_size
 <= 16)

213 
ext
->
cÚ‹Á
[ext->
size
] = 
	`cİy_to_sock‘
(
v®ue
, 
t
->
v®_size
,->
sock‘id
);

215 
ušt8_t
* 
key128
 = 
	`ÿÎoc
(16, (uint8_t));

216 
	`memıy
(
key128
, 
key
, 
t
->
key_size
);

217 
	`Ím6_add
(
ext
->
¹e_bË
, 
key128
, 
d•th
,ƒxt->
size
++);

220 
	}
}

223 
	$‹º¬y_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
)

226 
	`Çive_‹º¬y_add
(
t
->
bË
, 
key
, 
mask
, 
	`cİy_to_sock‘
(
v®ue
,->
v®_size
,->
sock‘id
));

228 
	}
}

233 
ušt8_t
*

234 
	$exaù_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

237 
	`´štf
("looku°%p\n", 
t
);

238 
»t
 = 0;

239 
»t
 = 
	`¹e_hash_lookup
(
ext
->
¹e_bË
, 
key
);

240  (
»t
 < 0)? 
t
->
deçuÉ_v®
 : 
ext
->
cÚ‹Á
[ret % 256];

244 
	}
}

246 
ušt8_t
*

247 
	$Ím_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

249  
NULL
;

250 
	}
}

252 
ušt8_t
*

253 
	$‹º¬y_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

256 
ušt8_t
* 
»t
 = 
	`Çive_‹º¬y_lookup
(
t
->
bË
, 
key
);

257  
»t
 =ğ
NULL
 ? 
t
->
deçuÉ_v®
 :„et;

261 
	}
}

	@src/hardware_dep/odp/includes/aliases.h

1 #iâdeà
__ALIASES_H_


2 
	#__ALIASES_H_


	)

4 
	~<š‰y³s.h
>

5 
	~<odp_­i.h
>

8 
odp_·ck‘_t
 
	t·ck‘
;

9 
lcÜe_cÚf
 
	tcÚfigu¿tiÚ
;

11 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

12 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

13 
f›ld_ty³_e
 
	tf›ld_ty³_t
;

16 
ušt8_t
 
	th—d”_idx
;

17 
ušt8_t
 
	tf›ld
;

18 
ušt16_t
 
	tËngth
;

23 
·ck‘_desütÜ_s
 
	t·ck‘_desütÜ_t
;

24 
h—d”_desütÜ_s
 
	th—d”_desütÜ_t
;

26 
h—d”_»ã»nû_s
 
	th—d”_»ã»nû_t
;

27 
f›ld_»ã»nû_s
 
	tf›ld_»ã»nû_t
;

	@src/hardware_dep/odp/includes/odp_lib.h

1 #iâdeà
ODP_LIB_H


2 
	#ODP_LIB_H


	)

6 
	~<g‘İt.h
>

10 
	~"d©a_¶ªe_d©a.h
"

11 
	~"back’d.h
"

12 
	~"d©­ÏÃ.h
"

13 
	~"odp_bËs.h
"

14 
	~"ù¾_¶ªe_back’d.h
"

15 
	~<¡dšt.h
>

16 
	~<¡dio.h
>

17 
	~<Ãt/‘h”Ãt.h
>

21 
	~"®Ÿ£s.h
"

23 
	#·r£_as
 
¹e_pktmbuf_mtod


	)

24 
	#MAX_ETHPORTS
 32

	)

29 
ušt32_t
 
’abËd_pÜt_mask
;

30 
´omiscuous_Ú
;

31 
numa_Ú
;

33 
	#RTE_LOGTYPE_L3FWD
 
RTE_LOGTYPE_USER1


34 
	#RTE_LOGTYPE_L2FWD
 
RTE_LOGTYPE_USER1


35 

	)

36 
	#MBUF_SIZE
 (2048 + (
¹e_mbuf
è+ 
RTE_PKTMBUF_HEADROOM
)

	)

46 
	#NB_MBUF
 8192

	)

47 
	#MEMPOOL_CACHE_SIZE
 256

	)

49 
	#MAX_PKT_BURST
 32

	)

50 
	#BURST_TX_DRAIN_US
 100

	)

52 
‘h”_addr
 
	gpÜts_‘h_addr
[
MAX_ETHPORTS
];

54 
	smbuf_bË
 {

55 
ušt16_t
 
	mËn
;

56 
¹e_mbuf
 *
	mm_bË
[
MAX_PKT_BURST
];

59 
	#MAX_RX_QUEUE_PER_LCORE
 1

60 
	#MAX_TX_QUEUE_PER_PORT
 1

61 
	#MAX_RX_QUEUE_PER_PORT
 1

62 

	)

63 
	#NB_SOCKETS
 8

	)

66 #iâdeà
NB_TABLES


67 
	#NB_TABLES
 0

	)

72 
	#NB_REPLICA
 2

	)

74 
	#SOCKET_DEF
 0

	)

76 
lookup_bË_t
 *
	gbËs_Ú_sock‘s
[
NB_SOCKETS
][
NB_TABLES
][
NB_REPLICA
];

77 
	gaùive_»¶iÿ
[
NB_SOCKETS
][
NB_TABLES
];

79 
	#TABCHANGE_DELAY
 50

80 

	)

82 
	sl2fwd_pÜt_¡©i¡ics
 {

83 
ušt64_t
 
	mtx
;

84 
ušt64_t
 
	mrx
;

85 
ušt64_t
 
	mdrİ³d
;

86 } 
	g__¹e_ÿche_®igÃd
;

88 
l2fwd_pÜt_¡©i¡ics
 
pÜt_¡©i¡ics
[
MAX_ETHPORTS
];

	@src/hardware_dep/odp/includes/odp_tables.h

1 #iâdeà
DPDK_TABLES_H


2 
	#DPDK_TABLES_H


	)

5 
	~<odp/h–³r/bË.h
>

6 
	~<../odph_hashbË.h
>

8 
	sex‹nded_bË_s
 {

9 * 
	modp_bË
;

10 
ušt8_t
 
	msize
;

11 
ušt8_t
** 
	mcÚ‹Á
;

12 } 
	tex‹nded_bË_t
;

15 
odph_bË_İs_t
 
	godph_hash_bË_İs
;

20 #ifdeà
RTE_ARCH_X86_64


22 
	#HASH_ENTRIES
 1024*1024*4

	)

25 
	#HASH_ENTRIES
 1024*1024*1

	)

27 
	#LPM_MAX_RULES
 1024

	)

28 
	#LPM6_NUMBER_TBL8S
 (1 << 16)

	)

30 
	#TABLE_MAX
 256

	)

32 
	#TABLE_SIZE
 2

34 
	#TABLE_KEY_SIZE
 4

35 
	#TABLE_VALUE_SIZE
 16

36 

	)

	@src/hardware_dep/odp/main.c

1 
	~"odp_lib.h
"

3 
ušt8_t
 
odp_š™Ÿlize
(
¬gc
, **
¬gv
);

4 
š™_cÚŒŞ_¶ªe
();

7 
	$maš
(
¬gc
, ** 
¬gv
)

9 
	`odp_š™Ÿlize
(
¬gc
, 
¬gv
);

12 
	`´štf
("Exiting…rogram.\n");

14 
	}
}

	@src/hardware_dep/odp/main_dpdk_main_loop_simulator.c

1 
	~"odp_lib.h
"

2 
	~<uni¡d.h
>

4 
__m128i
 
	gv®_‘h
[
RTE_MAX_ETHPORTS
];

5 
¹e_mempoŞ
 * 
	gpktmbuf_poŞ
[
NB_SOCKETS
];

6 
¹e_mempoŞ
 *
	gh—d”_poŞ
, *
	gşÚe_poŞ
;

7 
lcÜe_cÚf
 
	glcÜe_cÚf
[
RTE_MAX_LCORE
];

11 
ušt32_t
 
	g’abËd_pÜt_mask
 = 0;

12 
‘h”_addr
 
	gpÜts_‘h_addr
[
RTE_MAX_ETHPORTS
];

16 
	#EXTRACT_EGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 6è& 0x7fcè>> 2

	)

18 
šlše
 

19 
	$£nd_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘_desc
)

21 
pÜt
 = 
	`EXTRACT_EGRESSPORT
(
·ck‘_desc
);

22 
ušt32_t
 
lcÜe_id
;

23 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

24 
	`´štf
(" :::: PACKET HANDLED SUCCESSFULLY BY LCORE %d, TRANSMITTING ON PORT %d\n", 
lcÜe_id
, 
pÜt
);

26 
	}
}

29 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

31 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

32 (
h—d”_desütÜ_t
) {

33 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

34 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

35 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

37 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

38 
	}
}

40 
¹e_mbuf
* 
	gçke_·ck‘s
[2][4];

43 
	$dpdk_maš_loİ
()

45 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

46 
lcÜe_cÚf
 *
cÚf
 = &lcÜe_cÚf[
lcÜe_id
];

47 
	`RTE_LOG
(
INFO
, 
L2FWD
, "’‹ršg maš†oİ oÀlcÜ%u\n", 
lcÜe_id
);

48 
šdex
 = 0;

49 
¹e_mbuf
* 
p
;

50 
šdex
 < 4) {

51 
p
 = 
çke_·ck‘s
[
lcÜe_id
][
šdex
];

52 
·ck‘_desütÜ_t
 
·ck‘_desc
;

53 
·ck‘_desc
.
poš‹r
 = 
	`¹e_pktmbuf_mtod
(
p
, 
ušt8_t
 *);

54 
	`š™_m‘ad©a
(&
·ck‘_desc
, (
lcÜe_id
*2+
šdex
+1));

55 
	`hªdË_·ck‘
(&
·ck‘_desc
, 
cÚf
->
bËs
);

56 
	`£nd_·ck‘
(&
·ck‘_desc
);

57 if(
šdex
 == 1) {

58 
	`´štf
("### PACKET_GEN IS WAITING FOR THE DATAPLANE TO LEARN\n");

59 
	`¦“p
(1);

61 
šdex
++;

63 
	}
}

67 
Ïunch_Úe_lcÜe
(
__©Œibu‹__
((
unu£d
)è*
dummy
)

69 
dpdk_maš_loİ
();

73 
¹e_mempoŞ
* 
	gçkemempoŞ
;

76 
	$¡r2by‹s
(cÚ¡ * 
¡r
, 
size_t
 
Ën
, * 
»s
)

78 cÚ¡ *
pos
 = 
¡r
;

79 
size_t
 
couÁ
 = 0;

80 
couÁ
 = 0; couÁ < 
Ën
; count++) {

81 
	`ssÿnf
(
pos
, "%2hhx", &
»s
[
couÁ
]);

82 
pos
 += 2;

84 
	}
}

86 
¹e_mbuf
*

87 
	$çke_šcomšg_v4_·ck‘
(cÚ¡ * 
v4_d¡addr
)

89 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

90 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

91 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

92 * 
v4
 = 
	`¹e_pktmbuf_´•’d
(
p
, 20);

93 
	`¡r2by‹s
("450000280f444000800691f091ãa0ed", 16, 
v4
);

94 
	`¡r2by‹s
(
v4_d¡addr
, 4, 
v4
+16);

95 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

96 
	`¡r2by‹s
("080027ç4ff60000010000000800", 14, 
‘h”Ãt
);

97  
p
;

98 
	}
}

100 
¹e_mbuf
*

101 
	$çke_šcomšg_‘h_·ck‘
(cÚ¡ * 
d¡
, cÚ¡ * 
¤c
)

103 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

104 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

105 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

106 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

107 
	`¡r2by‹s
(
d¡
, 6, 
‘h”Ãt
+0);

108 
	`¡r2by‹s
(
¤c
, 6, 
‘h”Ãt
+6);

109 
	`¡r2by‹s
("0800", 2, 
‘h”Ãt
+12);

110  
p
;

111 
	}
}

114 
	$š™_çke_·ck‘s
()

116 
çkemempoŞ
 = 
	`¹e_mempoŞ_ü—‹
("‹¡_mbuf_poŞ", ()1023, 
MBUF_SIZE
, 
MEMPOOL_CACHE_SIZE
, (
¹e_pktmbuf_poŞ_´iv©e
), 
¹e_pktmbuf_poŞ_š™
, 
NULL
, 
¹e_pktmbuf_š™
, NULL, 0, 0);

123 
çke_·ck‘s
[0][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000001000000");

124 
çke_·ck‘s
[0][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000002000000");

125 
çke_·ck‘s
[1][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000003000000");

126 
çke_·ck‘s
[1][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000004000000");

129 
çke_·ck‘s
[0][2] = 
	`çke_šcomšg_‘h_·ck‘
("000001000000", "001234567890");

130 
çke_·ck‘s
[0][3] = 
	`çke_šcomšg_‘h_·ck‘
("000002000000", "001234567890");

131 
çke_·ck‘s
[1][2] = 
	`çke_šcomšg_‘h_·ck‘
("000003000000", "001234567890");

132 
çke_·ck‘s
[1][3] = 
	`çke_šcomšg_‘h_·ck‘
("000004000000", "001234567890");

133 
	}
}

135 
	$Ïunch_dpdk
()

137 
	`´štf
("Creating fake…ackets forest...\n");

138 
	`š™_çke_·ck‘s
();

139 
	`´štf
("Faked…ackets created.\n");

140 
	`´štf
("Executing…acket handlers onƒach core...\n");

141 
	`¹e_—l_mp_»mÙe_Ïunch
(
Ïunch_Úe_lcÜe
, 
NULL
, 
CALL_MASTER
);

142 
lcÜe_id
;

143 
	`RTE_LCORE_FOREACH_SLAVE
(
lcÜe_id
)

144 ià(
	`¹e_—l_wa™_lcÜe
(
lcÜe_id
) < 0)

147 
	}
}

	@src/hardware_dep/odp/main_odp.c

1 
	~<odp_­i.h
>

2 
	~"odp_lib.h
"

3 
	~<odp/­i/·ck‘.h
>

4 
	~<odp/h–³r/lšux.h
>

5 
	~<odp/h–³r/‘h.h
>

6 
	~<odp/h–³r/.h
>

12 
ušt32_t
 
	g’abËd_pÜt_mask
 = 0;

13 
‘h”_addr
 
	gpÜts_‘h_addr
[
MAX_ETHPORTS
];

18 
	#TIMER_MILLISECOND
 2000000ULL

	)

19 
	#MAX_TIMER_PERIOD
 86400

	)

20 
št64_t
 
	gtim”_³riod
 = 10 * 
TIMER_MILLISECOND
 * 1000;

22 
	#MAX_PORTS
 16

	)

24 
	#MCAST_CLONE_PORTS
 2

	)

25 
	#MCAST_CLONE_SEGS
 2

	)

27 
	#RTE_TEST_RX_DESC_DEFAULT
 128

	)

28 
	#RTE_TEST_TX_DESC_DEFAULT
 512

	)

29 
ušt16_t
 
	gnb_rxd
 = 
RTE_TEST_RX_DESC_DEFAULT
;

30 
ušt16_t
 
	gnb_txd
 = 
RTE_TEST_TX_DESC_DEFAULT
;

32 
	#PKT_MBUF_DATA_SIZE
 
RTE_MBUF_DEFAULT_BUF_SIZE


	)

33 
	#NB_PKT_MBUF
 8192

	)

35 
	#HDR_MBUF_DATA_SIZE
 (2 * 
RTE_PKTMBUF_HEADROOM
)

	)

36 
	#NB_HDR_MBUF
 (
NB_PKT_MBUF
 * 
MAX_PORTS
)

	)

38 
	#NB_CLONE_MBUF
 (
NB_PKT_MBUF
 * 
MCAST_CLONE_PORTS
 * 
MCAST_CLONE_SEGS
 * 2)

	)

40 
	#BURST_TX_DRAIN_US
 100

	)

43 
	#DEPARSE_BUFFER_SIZE
 1024

	)

47 
odp_pktio_t
 
	mif0
, 
	mif1
;

48 
odp_pktš_queue_t
 
	mif0š
, 
	mif1š
;

49 
odp_pktout_queue_t
 
	mif0out
, 
	mif1out
;

50 
odph_‘haddr_t
 
	m¤c
, 
	md¡
;

51 } 
	gglob®
;

56 
šlše
 

57 
	$£nd_bur¡
(
lcÜe_cÚf
 *
qcÚf
, 
ušt16_t
 
n
, 
ušt8_t
 
pÜt
)

75 
	}
}

78 
šlše
 

79 
	$£nd_timeout_bur¡
(
lcÜe_cÚf
 *
qcÚf
)

98 
	}
}

101 
	$g‘_sock‘id
(
lcÜe_id
)

110 
	}
}

112 
šlše
 

113 
	$dbg_´št_h—d”s
(
·ck‘_desütÜ_t
* 
pd
)

115 
i
 = 0; i < 
HEADER_INSTANCE_COUNT
; ++i) {

116 
	`´štf
(" :: h—d” %d (ty³=%d,†’=%dèğ", 
i
, 
pd
->
h—d”s
[i].
ty³
,…d->h—d”s[i].
Ëngth
);

117 
j
 = 0; j < 
pd
->
h—d”s
[
i
].
Ëngth
; ++j) {

118 
	`´štf
("%02x ", ((
ušt8_t
*)(
pd
->
h—d”s
[
i
].
poš‹r
))[
j
]);

120 
	`´štf
("\n");

122 
	}
}

124 
šlše
 

125 
	$d•¬£_h—d”s
(
·ck‘_desütÜ_t
* 
pd
, 
sock‘id
)

143 
	}
}

146 
šlše
 
ušt32_t


147 
	$b™út
(
ušt32_t
 
v
)

149 
ušt32_t
 
n
;

151 
n
 = 0; 
v
 != 0; v &= v - 1,‚++)

154  (
n
);

155 
	}
}

157 
	#EXTRACT_EGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 6è& 0x7fcè>> 2

	)

158 
	#EXTRACT_INGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 0è& 0x1ffè>> 0

	)

161 
šlše
 

162 
	$£nd_·ck‘
(
·ck‘_desütÜ_t
* 
pd
)

164 
pÜt
 = 
	`EXTRACT_EGRESSPORT
(
pd
);

165 
špÜt
 = 
	`EXTRACT_INGRESSPORT
(
pd
);

167 
	`´štf
(" :::: EGRESSING\n");

168 
	`dbg_´št_h—d”s
(
pd
);

169 
	`´štf
(" :: deparsing headers\n");

170 
	`´štf
(" :: sendPacket called\n");

182 
	}
}

186 
	$modify_f›ld_to_cÚ¡
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
)

189 if(
f
.
by‹width
 <= 4) {

190 
ušt32_t
 
¤c_v®
 = 0;

191 
	`memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

192 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
¤c_v®
);

194 if(
f
.
by‹width
 =ğ
¤ş’
)

195 
	`memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), 
¤c
, 
¤ş’
);

199 
	}
}

202 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

204 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

205 (
h—d”_desütÜ_t
) {

206 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

207 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

208 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

210 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

211 
	}
}

214 
	$·ck‘_»ûived
(
odp_·ck‘_t
 *
p
, 
pÜtid
)

216 
·ck‘_desütÜ_t
 
·ck‘_desc
;

218 
·ck‘_desc
.
poš‹r
 = (
ušt8_t
 *)
	`odp_·ck‘_d©a
(*
p
);

220 
·ck‘_desc
.
·ck‘
 = (·ck‘ *)
p
;

221 
	`š™_m‘ad©a
(&
·ck‘_desc
, 
pÜtid
);

225 
	`£nd_·ck‘
(&
·ck‘_desc
);

226 
	}
}

229 
	$odp_maš_wÜk”
 ()

231 
odp_·ck‘_t
 
pkt_tbl
[
MAX_PKT_BURST
];

232 
pkts
, 
i
;

233 
pÜtid
;

235 ià(
	`odp_pktio_¡¬t
(
glob®
.
if0
)) {

236 
	`´štf
("unableo start input interface\n");

237 
	`ex™
(1);

239 
	`´štf
("started input interface\n");

240 ià(
	`odp_pktio_¡¬t
(
glob®
.
if1
)) {

241 
	`´štf
("unableo start output interface\n");

242 
	`ex™
(1);

244 
	`´štf
("started output interface\n");

245 
	`´štf
("started‡ll\n");

248 
pkts
 = 
	`odp_pktš_»cv
(
glob®
.
if0š
, 
pkt_tbl
, 
MAX_PKT_BURST
);

249 ià(
	`odp_uÆik–y
(
pkts
 <= 0))

251 
i
 = 0; i < 
pkts
; i++) {

252 
odp_·ck‘_t
 
pkt
 = 
pkt_tbl
[
i
];

264 
	`·ck‘_»ûived
(&
pkt
, 
pÜtid
=0);

276 
	}
}

	@src/hardware_dep/odp/main_odp_main_loop_simulator.c

1 
	~"dpdk_lib.h
"

2 
	~<uni¡d.h
>

4 
__m128i
 
	gv®_‘h
[
RTE_MAX_ETHPORTS
];

5 
¹e_mempoŞ
 * 
	gpktmbuf_poŞ
[
NB_SOCKETS
];

6 
¹e_mempoŞ
 *
	gh—d”_poŞ
, *
	gşÚe_poŞ
;

7 
lcÜe_cÚf
 
	glcÜe_cÚf
[
RTE_MAX_LCORE
];

11 
ušt32_t
 
	g’abËd_pÜt_mask
 = 0;

12 
‘h”_addr
 
	gpÜts_‘h_addr
[
RTE_MAX_ETHPORTS
];

16 
	#EXTRACT_EGRESSPORT
(
p
è(*(
ušt32_t
 *)(((
ušt8_t
*)Õ)->
h—d”s
[ 0].
poš‹r
)+ 6è& 0x7fcè>> 2

	)

18 
šlše
 

19 
	$£nd_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘_desc
)

21 
pÜt
 = 
	`EXTRACT_EGRESSPORT
(
·ck‘_desc
);

22 
ušt32_t
 
lcÜe_id
;

23 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

24 
	`´štf
(" :::: PACKET HANDLED SUCCESSFULLY BY LCORE %d, TRANSMITTING ON PORT %d\n", 
lcÜe_id
, 
pÜt
);

26 
	}
}

29 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

31 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

32 (
h—d”_desütÜ_t
) {

33 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

34 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

35 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

37 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

38 
	}
}

40 
¹e_mbuf
* 
	gçke_·ck‘s
[2][4];

43 
	$dpdk_maš_loİ
()

45 
lcÜe_id
 = 
	`¹e_lcÜe_id
();

46 
lcÜe_cÚf
 *
cÚf
 = &lcÜe_cÚf[
lcÜe_id
];

47 
	`RTE_LOG
(
INFO
, 
L2FWD
, "’‹ršg maš†oİ oÀlcÜ%u\n", 
lcÜe_id
);

48 
šdex
 = 0;

49 
¹e_mbuf
* 
p
;

50 
šdex
 < 4) {

51 
p
 = 
çke_·ck‘s
[
lcÜe_id
][
šdex
];

52 
·ck‘_desütÜ_t
 
·ck‘_desc
;

53 
·ck‘_desc
.
poš‹r
 = 
	`¹e_pktmbuf_mtod
(
p
, 
ušt8_t
 *);

54 
	`š™_m‘ad©a
(&
·ck‘_desc
, (
lcÜe_id
*2+
šdex
+1));

55 
	`hªdË_·ck‘
(&
·ck‘_desc
, 
cÚf
->
bËs
);

56 
	`£nd_·ck‘
(&
·ck‘_desc
);

57 if(
šdex
 == 1) {

58 
	`´štf
("### PACKET_GEN IS WAITING FOR THE DATAPLANE TO LEARN\n");

59 
	`¦“p
(1);

61 
šdex
++;

63 
	}
}

67 
Ïunch_Úe_lcÜe
(
__©Œibu‹__
((
unu£d
)è*
dummy
)

69 
dpdk_maš_loİ
();

73 
¹e_mempoŞ
* 
	gçkemempoŞ
;

76 
	$¡r2by‹s
(cÚ¡ * 
¡r
, 
size_t
 
Ën
, * 
»s
)

78 cÚ¡ *
pos
 = 
¡r
;

79 
size_t
 
couÁ
 = 0;

80 
couÁ
 = 0; couÁ < 
Ën
; count++) {

81 
	`ssÿnf
(
pos
, "%2hhx", &
»s
[
couÁ
]);

82 
pos
 += 2;

84 
	}
}

86 
¹e_mbuf
*

87 
	$çke_šcomšg_v4_·ck‘
(cÚ¡ * 
v4_d¡addr
)

89 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

90 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

91 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

92 * 
v4
 = 
	`¹e_pktmbuf_´•’d
(
p
, 20);

93 
	`¡r2by‹s
("450000280f444000800691f091ãa0ed", 16, 
v4
);

94 
	`¡r2by‹s
(
v4_d¡addr
, 4, 
v4
+16);

95 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

96 
	`¡r2by‹s
("080027ç4ff60000010000000800", 14, 
‘h”Ãt
);

97  
p
;

98 
	}
}

100 
¹e_mbuf
*

101 
	$çke_šcomšg_‘h_·ck‘
(cÚ¡ * 
d¡
, cÚ¡ * 
¤c
)

103 
¹e_mbuf
 *
p
 = 
	`¹e_pktmbuf_®loc
(
çkemempoŞ
);

104 * 
·ylßd
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

105 
	`¡r2by‹s
("ffffffff", 4, 
·ylßd
);

106 * 
‘h”Ãt
 = 
	`¹e_pktmbuf_´•’d
(
p
, 14);

107 
	`¡r2by‹s
(
d¡
, 6, 
‘h”Ãt
+0);

108 
	`¡r2by‹s
(
¤c
, 6, 
‘h”Ãt
+6);

109 
	`¡r2by‹s
("0800", 2, 
‘h”Ãt
+12);

110  
p
;

111 
	}
}

114 
	$š™_çke_·ck‘s
()

116 
çkemempoŞ
 = 
	`¹e_mempoŞ_ü—‹
("‹¡_mbuf_poŞ", ()1023, 
MBUF_SIZE
, 
MEMPOOL_CACHE_SIZE
, (
¹e_pktmbuf_poŞ_´iv©e
), 
¹e_pktmbuf_poŞ_š™
, 
NULL
, 
¹e_pktmbuf_š™
, NULL, 0, 0);

123 
çke_·ck‘s
[0][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000001000000");

124 
çke_·ck‘s
[0][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000002000000");

125 
çke_·ck‘s
[1][0] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000003000000");

126 
çke_·ck‘s
[1][1] = 
	`çke_šcomšg_‘h_·ck‘
("001234567890", "000004000000");

129 
çke_·ck‘s
[0][2] = 
	`çke_šcomšg_‘h_·ck‘
("000001000000", "001234567890");

130 
çke_·ck‘s
[0][3] = 
	`çke_šcomšg_‘h_·ck‘
("000002000000", "001234567890");

131 
çke_·ck‘s
[1][2] = 
	`çke_šcomšg_‘h_·ck‘
("000003000000", "001234567890");

132 
çke_·ck‘s
[1][3] = 
	`çke_šcomšg_‘h_·ck‘
("000004000000", "001234567890");

133 
	}
}

135 
	$Ïunch_dpdk
()

137 
	`´štf
("Creating fake…ackets forest...\n");

138 
	`š™_çke_·ck‘s
();

139 
	`´štf
("Faked…ackets created.\n");

140 
	`´štf
("Executing…acket handlers onƒach core...\n");

141 
	`¹e_—l_mp_»mÙe_Ïunch
(
Ïunch_Úe_lcÜe
, 
NULL
, 
CALL_MASTER
);

142 
lcÜe_id
;

143 
	`RTE_LCORE_FOREACH_SLAVE
(
lcÜe_id
)

144 ià(
	`¹e_—l_wa™_lcÜe
(
lcÜe_id
) < 0)

147 
	}
}

	@src/hardware_dep/pcap/ctrl_plane/control_plane.c

2 
	~<¡dio.h
>

3 
	~<¡dlib.h
>

5 
	~<pÿp.h
>

7 
	~<p4_hw_bËs.h
>

10 
dbg_´štf
(cÚ¡ 
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...);

12 cÚ¡ 
bË_couÁ
;

13 cÚ¡ * 
bË_Çmes
[];

14 cÚ¡ ** 
bË_aùiÚ_Çmes
[];

15 cÚ¡ 
bË_aùiÚ_Çmes_couÁ
[];

16 cÚ¡ 
bËs_tÙ®_size
;

18 
d©a_¶ªe_Ë¬n_mac
(* 
mac
, 
šg»ss_pÜt
);

20 
š™_bËs
();

21 
bË_t
* 
g‘_bË
(* 
bË_Çme
);

22 
aùiÚ_Çme_to_id
(
bË_t
* 
bË
, cÚ¡ * 
aùiÚ_Çme
);

24 
add_bË_’Œy
(
lše_numb”
, 
bË_t
* 
bË
, 
aùiÚ_id
, * 
lše_d©a
);

27 
	$´oûss_cÚfig_fe_lše
(
lše_numb”
, * 
lše
, 
ssize_t
* 
»ad
)

29 
bË_Çme
[256];

30 
bË_aùiÚ
[256];

31 
lše_d©a
[256];

33 
·r£d_¬g_couÁ
 = 
	`ssÿnf
(
lše
, "% % %[^\n]", 
bË_Çme
, 
bË_aùiÚ
, 
lše_d©a
);

35 ià(
·r£d_¬g_couÁ
 != 3) {

36 
	`årštf
(
¡d”r
, "E¼Ü iÀcÚfig fÚ†š%d\n", 
lše_numb”
);

37 
	`ex™
(1);

40 
bË_t
* 
bË
 = 
	`g‘_bË
(
bË_Çme
);

41 
aùiÚ_id
 = 
	`aùiÚ_Çme_to_id
(
bË
, 
bË_aùiÚ
);

43 
	`add_bË_’Œy
(
lše_numb”
, 
bË
, 
aùiÚ_id
, 
lše_d©a
);

44 
	}
}

46 
	$´oûss_cÚfig_fe_lšes
(
FILE
* 
å
)

48 * 
lše
 = 
NULL
;

49 
size_t
 
Ën
 = 0;

50 
ssize_t
 
»ad
;

52 
lše_numb”
 = 1;

53 (
»ad
 = 
	`g‘lše
(&
lše
, &
Ën
, 
å
)) != -1) {

54 
	`´oûss_cÚfig_fe_lše
(
lše_numb”
, 
lše
, &
»ad
);

55 ++
lše_numb”
;

57 
	}
}

60 
	$š™_cÚfig_bËs
(cÚ¡ * 
cÚfig_fe_f’ame
)

62 
FILE
* 
å
 = 
	`fİ’
(
cÚfig_fe_f’ame
, "r");

64 ià(!
å
) {

65 
	`årštf
(
¡d”r
, "CÚfig fnÙ found: %s\n", 
cÚfig_fe_f’ame
);

66 
	`ex™
(1);

69 
	`´oûss_cÚfig_fe_lšes
(
å
);

71 
	`fşo£
(
å
);

72 
	}
}

74 
	$š™_cÚŒŞ_¶ªe
(cÚ¡ * 
cÚfig_fe_f’ame
)

76 
	`š™_bËs
();

77 
	`š™_cÚfig_bËs
(
cÚfig_fe_f’ame
);

78 
	}
}

	@src/hardware_dep/pcap/ctrl_plane/control_plane_actions.c

2 
	~<¡ršg.h
>

3 
	~<¡dlib.h
>

4 
	~<¡dboŞ.h
>

6 
	~<p4_hw_bËs.h
>

8 
	~"bË_cÚfig.h
"

9 
	~"cÚŒŞ_¶ªe_aùiÚs.h
"

11 
	~<¡dio.h
>

12 
	~<¡ddef.h
>

14 
bË_t
 
bË_dmac
;

15 
bË_t
 
bË_smac
;

17 
£t_bË_’Œy_d©a
(
bË_t
*cÚ¡ 
bË
, 
’Œy_šdex
, cÚ¡ *cÚ¡ 
d©a
);

18 
boŞ
 
bË_cÚšs_’Œy
(
bË_t
*cÚ¡ 
bË
, cÚ¡ *cÚ¡ 
’Œy_d©a
);

20 
cÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy
* 
	gmsg1
;

21 
cÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy
* 
	gmsg2
;

23 cÚ¡ 
bË_dmac_aùiÚ_dmac_miss
;

24 cÚ¡ 
bË_dmac_aùiÚ_dmac_h™
;

25 cÚ¡ 
bË_smac_aùiÚ_smac_miss
;

26 cÚ¡ 
bË_smac_aùiÚ_smac_h™
;

28 
dbg_´štf
(
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...);

29 
dbg_´št_hex
(
v”bos™y_Ëv–
, 
Ëngth
, cÚ¡ *cÚ¡ 
d©a
);

31 
mac_to_lÚg
(cÚ¡ *cÚ¡ 
mac
);

34 
	$hªdË_£t_bË_aùiÚ
(
cÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy
* 
msg
)

36 ià(
	`bË_cÚšs_’Œy
(
msg
->
bË
, msg->
d©a
)) {

37 
	`dbg_´štf
(1, "bË %°®»ady cÚš d©a,‚ØÃwabËƒÁry i Ãûs§ry\n", 
msg
->
bË
);

41 
	`£t_bË_’Œy_d©a
(
msg
->
bË
, msg->
’Œy_šdex
, msg->
d©a
);

42 ++
msg
->
bË
->
’Œy_couÁ
;

44 
	`dbg_´štf
(0, "cÚŒŞ s’ˆÃwƒÁry fÜabË %p: ", 
msg
->
bË
);

45 
	`dbg_´št_hex
(0, 
msg
->
bË
->
’Œy_size
, msg->
d©a
);

46 
	}
}

49 
	$cÚŒŞ_¶ªe_g’”©e_dmac_msg
(* 
mac
, 
šg»ss_pÜt
)

51 
msg1
 = 
	`m®loc
((
cÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy
*));

52 
msg1
->
bË
 = &
bË_dmac
;

53 
msg1
->
’Œy_šdex
 = 
bË_dmac
.
’Œy_couÁ
;

54 
msg1
->
d©a
 = 
	`m®loc
((
bË_’Œy_dmac_t
));

55 
	`memıy
(
msg1
->
d©a
 + 
	`off£tof
(
bË_’Œy_dmac_t
, 
mac
), mac, 6);

56 *(*)(
msg1
->
d©a
 + 
	`off£tof
(
bË_’Œy_dmac_t
, 
aùiÚ_code
)èğ
bË_dmac_aùiÚ_dmac_h™
;

57 *(*)(
msg1
->
d©a
 + 
	`off£tof
(
bË_’Œy_dmac_t
, 
pÜt
)èğ
šg»ss_pÜt
;

58 
	}
}

61 
	$cÚŒŞ_¶ªe_g’”©e_smac_msg
(* 
mac
, 
šg»ss_pÜt
)

63 
msg2
 = 
	`m®loc
((
cÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy
*));

64 
msg2
->
bË
 = &
bË_smac
;

65 
msg2
->
’Œy_šdex
 = 
bË_smac
.
’Œy_couÁ
;

66 
msg2
->
d©a
 = 
	`m®loc
((
bË_’Œy_smac_t
));

67 
	`memıy
(
msg2
->
d©a
 + 
	`off£tof
(
bË_’Œy_smac_t
, 
mac
), mac, 6);

68 *(*)(
msg2
->
d©a
 + 
	`off£tof
(
bË_’Œy_smac_t
, 
aùiÚ_code
)èğ
bË_smac_aùiÚ_smac_h™
;

69 *(*)(
msg2
->
d©a
 + 
	`off£tof
(
bË_’Œy_smac_t
, 
pÜt
)èğ
šg»ss_pÜt
;

70 
	}
}

74 
	$£nd_msg_to_cÚŒŞ_¶ªe
(* 
mac
, 
šg»ss_pÜt
)

76 
	`cÚŒŞ_¶ªe_g’”©e_dmac_msg
(
mac
, 
šg»ss_pÜt
);

77 
	`cÚŒŞ_¶ªe_g’”©e_smac_msg
(
mac
, 
šg»ss_pÜt
);

78 
	}
}

81 
boŞ
 
	$is_»ûived_aùiÚ_£t_bË_’Œy
()

83  
Œue
;

84 
	}
}

86 
	$»cv_msg_äom_cÚŒŞ_¶ªe
()

88 ià(
	`is_»ûived_aùiÚ_£t_bË_’Œy
()) {

89 
	`dbg_´štf
(1, "receiving messages from control…lane...\n");

90 
	`hªdË_£t_bË_aùiÚ
(
msg1
);

91 
	`hªdË_£t_bË_aùiÚ
(
msg2
);

93 
	`dbg_´štf
(1, "cu¼’ˆdmaø’Œy couÁ %d\n", 
bË_dmac
.
’Œy_couÁ
);

94 
	`dbg_´štf
(1, "cu¼’ˆsmaø’Œy couÁ %d\n", 
bË_smac
.
’Œy_couÁ
);

96 
	}
}

	@src/hardware_dep/pcap/ctrl_plane/control_plane_actions.h

2 #iâdeà
__CONTROL_PLANE_ACTIONS_H_


3 
	#__CONTROL_PLANE_ACTIONS_H_


	)

5 
	~<p4_hw_bËs.h
>

9 
	scÚŒŞ_¶ªe_aùiÚ_£t_bË_’Œy


11 
bË_t
* 
	mbË
;

12 
	m’Œy_šdex
;

13 * 
	md©a
;

	@src/hardware_dep/pcap/ctrl_plane/control_plane_generate_digest.c

2 
	~"¡ªd¬d_m‘ad©a.h
"

3 
	~"g’”©ed_m‘ad©a.h
"

5 
	~<¡dlib.h
>

7 
¡ªd¬d_m‘ad©a_t
* 
¡ªd¬d_m‘ad©a
;

8 
mac_to_lÚg
(* 
mac
);

10 cÚ¡ 
	gMAC_LEARN_RECEIVER
 = 1024;

12 
£nd_msg_to_cÚŒŞ_¶ªe
(* 
mac
, 
šg»ss_pÜt
);

13 
»cv_msg_äom_cÚŒŞ_¶ªe
();

15 
dbg_´štf
(cÚ¡ 
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...);

18 
	$d©a_¶ªe_Ë¬n_mac
(* 
mac
, 
šg»ss_pÜt
)

20 
	`£nd_msg_to_cÚŒŞ_¶ªe
(
mac
, 
šg»ss_pÜt
);

21 
	`»cv_msg_äom_cÚŒŞ_¶ªe
();

22 
	}
}

24 
	$g’”©e_mac_Ë¬n_dige¡
(
»ûiv”
, 
ªy_f›ldli¡_t
* 
ªy_f›ldli¡
)

26 ià(
»ûiv”
 =ğ
MAC_LEARN_RECEIVER
) {

27 cÚ¡ 
f›ldli¡_mac_Ë¬n_dige¡_t
* 
f›ldli¡_mac_Ë¬n_dige¡
 = &
ªy_f›ldli¡
->fieldlist_mac_learn_digest;

29 
	`dbg_´štf
(1, "Dige¡šg dmaø%012lX ->…Üˆ%d\n", 
	`mac_to_lÚg
(
f›ldli¡_mac_Ë¬n_dige¡
->
‘h”Ãt_¤cAddr
), 
¡ªd¬d_m‘ad©a
->
šg»ss_pÜt
);

31 
	`d©a_¶ªe_Ë¬n_mac
(
f›ldli¡_mac_Ë¬n_dige¡
->
‘h”Ãt_¤cAddr
, 
¡ªd¬d_m‘ad©a
->
šg»ss_pÜt
);

33 
	}
}

36 
	$g’”©e_dige¡
(
»ûiv”
, 
ªy_f›ldli¡_t
* 
ªy_f›ldli¡
)

38 ià(
»ûiv”
 =ğ
MAC_LEARN_RECEIVER
) {

39 
	`g’”©e_mac_Ë¬n_dige¡
(
»ûiv”
, 
ªy_f›ldli¡
);

41 
	}
}

	@src/hardware_dep/pcap/data_plane/constants.c

2 cÚ¡ 
	glookup_mode_exaù
 = 0;

	@src/hardware_dep/pcap/data_plane/data_plane.c

2 
	~<¡dlib.h
>

4 
	~<pÿp.h
>

6 
	~"¡ªd¬d_m‘ad©a.h
"

9 
´oûss_·ck‘
(
u_ch¬
* 
pkt_±r
, 
pÿp_pkthdr
* 
pkt_h—d”_±r
);

11 
·ck‘_couÁ_lim™
;

13 
dbg_´štf
(cÚ¡ 
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...);

16 
pÿp_t
* 
	gšg»ss_pÿp_hªdË
;

18 
	geg»ss_pÜt_couÁ
;

19 * 
	gpÜts
;

20 
pÿp_dum³r_t
** 
	geg»ss_pÿp_hªdËs
;

22 
¡ªd¬d_m‘ad©a_t
* 
	g¡ªd¬d_m‘ad©a
;

27 
pÿp_dum³r_t
* 
	$fšd_pÿp_hªdË_by_pÜt
(
pÜt
)

29 
i
 = 0; i < 
eg»ss_pÜt_couÁ
; ++i) {

30 
	`dbg_´štf
(1, "dum³¸%d i fÜ…Üˆ%d\n", 
i
, 
pÜts
[i]);

32 ià(
pÜts
[
i
] =ğ
pÜt
) {

33  
eg»ss_pÿp_hªdËs
[
i
];

38 
	}
}

40 
	$cÚŒŞ_eg»ss_Ú_pÜt
(
pÜt
, 
pÿp_dum³r_t
* 
dum³r
, 
u_ch¬
* 
pkt_±r
, 
pÿp_pkthdr
* 
pkt_h—d”_±r
)

42 
	`pÿp_dump
((
u_ch¬
*)
dum³r
, 
pkt_h—d”_±r
, (cÚ¡ u_ch¬*)
pkt_±r
);

43 
	}
}

46 
	$cÚŒŞ_eg»ss
(
u_ch¬
* 
pkt_±r
, 
pÿp_pkthdr
* 
pkt_h—d”_±r
)

48 
	`dbg_´štf
(1, "´•¬šgƒg»s fÜ…Üˆ%d\n", 
¡ªd¬d_m‘ad©a
->
eg»ss_¥ec
);

50 
pÿp_dum³r_t
* 
dum³r
 = 
	`fšd_pÿp_hªdË_by_pÜt
(
¡ªd¬d_m‘ad©a
->
eg»ss_¥ec
);

52 ià(
dum³r
) {

53 
	`dbg_´štf
(0, "eg»s pÜˆfound, s’dšg…ack‘ØpÜˆ%d\n", 
¡ªd¬d_m‘ad©a
->
eg»ss_¥ec
);

54 
pÜt
 = 
¡ªd¬d_m‘ad©a
->
eg»ss_¥ec
;

55 
	`cÚŒŞ_eg»ss_Ú_pÜt
(
pÜt
, 
dum³r
, 
pkt_±r
, 
pkt_h—d”_±r
);

57 
	`dbg_´štf
(0, "eg»ss:…Üˆ%d‚Ù found, brßdÿ¡šg…ack‘...\n", 
¡ªd¬d_m‘ad©a
->
eg»ss_¥ec
);

59 
i
 = 0; i < 
eg»ss_pÜt_couÁ
; ++i) {

60 
bÿ¡_pÜt
 = 
pÜts
[
i
];

61 
pÿp_dum³r_t
* 
bÿ¡_dum³r
 = 
eg»ss_pÿp_hªdËs
[
i
];

62 
	`cÚŒŞ_eg»ss_Ú_pÜt
(
bÿ¡_pÜt
, 
bÿ¡_dum³r
, 
pkt_±r
, 
pkt_h—d”_±r
);

66 
	`dbg_´štf
(1, "egress done\n");

67 
	`dbg_´štf
(0, "\n");

68 
	}
}

72 
	$šg»ss_£t_m‘ad©a_fÜ_·ck‘
(
u_ch¬
* 
pkt_±r
, 
pkt_numb”
)

74 
	`dbg_´štf
(1, "£‰šg snd¬d_m‘ad©a->šg»ss_pÜˆ%d\n", 1000 + 
pkt_numb”
 % 3);

75 
¡ªd¬d_m‘ad©a
->
šg»ss_pÜt
 = 1000 + 
pkt_numb”
 % 3;

76 
	}
}

78 
	$run_d©a_¶ªe_p–še
()

80 
pkt_numb”
 = 0;

82 cÚ¡ 
u_ch¬
* 
·ck‘
;

83 
pÿp_pkthdr
 
pkt_h—d”
;

85 (
·ck‘
 = 
	`pÿp_Ãxt
(
šg»ss_pÿp_hªdË
, &
pkt_h—d”
))) {

86 
u_ch¬
* 
pkt_±r
 = (u_ch¬*)
·ck‘
;

87 
	`šg»ss_£t_m‘ad©a_fÜ_·ck‘
(
pkt_±r
, 
pkt_numb”
);

88 
	`´oûss_·ck‘
(
pkt_±r
, &
pkt_h—d”
);

90 ++
pkt_numb”
;

92 ià(
·ck‘_couÁ_lim™
 !ğ-1 && 
pkt_numb”
 ==…acket_count_limit) ;

95 
i
 = 0; i < 
eg»ss_pÜt_couÁ
; ++i) {

96 
	`pÿp_dump_æush
(
eg»ss_pÿp_hªdËs
[
i
]);

98 
	}
}

101 
	$š™_šg»ss
(* 
šg»ss_pÿp_f’ame
)

103 
¡ªd¬d_m‘ad©a
 = 
	`m®loc
((
¡ªd¬d_m‘ad©a_t
));

105 
”rbuf
[
PCAP_ERRBUF_SIZE
];

106 
šg»ss_pÿp_hªdË
 = 
	`pÿp_İ’_ofæše
(
šg»ss_pÿp_f’ame
, 
”rbuf
);

108 ià(!
šg»ss_pÿp_hªdË
) {

109 
	`årštf
(
¡d”r
,"Couldn'ˆİ’ ing»s pÿ°f%s: %s\n", 
šg»ss_pÿp_f’ame
, 
”rbuf
);

110 
	`ex™
(1);

112 
	}
}

115 
	$š™_eg»ss_pÿp
(
idx
, * 
eg»ss_pÿp_f’ame
)

117 
”rbuf
[
PCAP_ERRBUF_SIZE
];

118 
eg»ss_pÿp_hªdËs
[
idx
] = 
	`pÿp_dump_İ’
(
šg»ss_pÿp_hªdË
, 
eg»ss_pÿp_f’ame
);

120 ià(!
eg»ss_pÿp_hªdËs
[
idx
]) {

121 
	`årštf
(
¡d”r
,"Couldn'ˆİ’ƒg»s pÿ°f%s: %s\n", 
eg»ss_pÿp_f’ame
, 
”rbuf
);

122 
	`ex™
(1);

124 
	}
}

127 
	$š™_eg»ss
(
eg»ss_pÜt_couÁ_·r
, ** 
eg»ss_pÜts
, * 
cwd
)

129 
eg»ss_pÜt_couÁ
 = 
eg»ss_pÜt_couÁ_·r
;

131 
eg»ss_pÿp_hªdËs
 = 
	`m®loc
(
eg»ss_pÜt_couÁ
 * (
pÿp_dum³r_t
*));

132 
pÜts
 = 
	`m®loc
(
eg»ss_pÜt_couÁ
 * ());

134 
i
 = 0; i < 
eg»ss_pÜt_couÁ
; ++i) {

135 
pÜts
[
i
] = 
	`©oi
(
eg»ss_pÜts
[i]);

137 
f’ame
[256];

138 
	`¥rštf
(
f’ame
, "%s/ouut/eg»ss%d.pÿp", 
cwd
, 
pÜts
[
i
]);

140 
	`š™_eg»ss_pÿp
(
i
, 
f’ame
);

142 
	}
}

144 
	$š™_d©a_¶ªe
(* 
šg»ss_pÿp_f’ame
, 
eg»ss_pÜt_couÁ_·r
, ** 
eg»ss_pÜts
, * 
cwd
)

146 
	`š™_šg»ss
(
šg»ss_pÿp_f’ame
);

147 
	`š™_eg»ss
(
eg»ss_pÜt_couÁ_·r
, 
eg»ss_pÜts
, 
cwd
);

148 
	}
}

	@src/hardware_dep/pcap/data_plane/mac_learning_example_main.c

2 
	~<¡dio.h
>

3 
	~<¡dlib.h
>

4 
	~<uni¡d.h
>

6 
	~<pÿp.h
>

10 
	gDBG_VERBOSITY
 = -1;

13 
š™_d©a_¶ªe
(* 
šg»ss_pÿp_f’ame
, 
eg»ss_pÜt_couÁ_·r
, ** 
eg»ss_pÜts
, * 
cwd
);

14 
run_d©a_¶ªe_p–še
();

15 
š™_cÚŒŞ_¶ªe
(cÚ¡ * 
cÚfig_fe_f’ame
);

19 
	g·ck‘_couÁ_lim™
 = -1;

22 
	$maš
(
¬gc
, ** 
¬gv
)

24 * 
DBG_VERBOSITY_ENV
 = 
	`g‘’v
("DBG_VERBOSITY");

25 ià(
DBG_VERBOSITY_ENV
) {

26 
DBG_VERBOSITY
 = 
	`©oi
(
DBG_VERBOSITY_ENV
);

29 ià(
¬gc
 <= 3) {

30 
	`årštf
(
¡d”r
, "U§ge: % <cÚfig fe> <š…ÿp> <ouˆÕÜˆpÿp)s>\n", 
¬gv
[0]);

31 
	`ex™
(1);

34 * 
cÚfig_fe_f’ame
 = 
¬gv
[1];

35 * 
šg»ss_pÿp_f’ame
 = 
¬gv
[2];

37 
eg»ss_pÜt_couÁ
 = 
¬gc
 - 3;

38 ** 
eg»ss_pÜts
 = 
¬gv
 + 3;

40 
cwdbuf
[256];

41 * 
cwd
 = 
	`g‘cwd
(
cwdbuf
, (cwdbuf));

43 
	`š™_d©a_¶ªe
(
šg»ss_pÿp_f’ame
, 
eg»ss_pÜt_couÁ
, 
eg»ss_pÜts
, 
cwd
);

44 
	`š™_cÚŒŞ_¶ªe
(
cÚfig_fe_f’ame
);

46 
	`run_d©a_¶ªe_p–še
();

49 
	}
}

	@src/hardware_dep/pcap/data_plane/table_utils.c

2 
	~<¡dio.h
>

4 
	~<¡dboŞ.h
>

5 
	~<¡dlib.h
>

6 
	~<¡ršg.h
>

8 
	~<p4_hw_bËs.h
>

10 
bË_t
** 
bËs
;

12 cÚ¡ 
bË_couÁ
;

13 cÚ¡ * 
bË_Çmes
[];

14 cÚ¡ ** 
bË_aùiÚ_Çmes
[];

15 cÚ¡ 
bË_aùiÚ_Çmes_couÁ
[];

16 cÚ¡ 
bË_aùiÚs_couÁ
[];

18 
dbg_´štf
(cÚ¡ 
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...);

19 
dbg_´št_hex
(
v”bos™y_Ëv–
, 
Ëngth
, cÚ¡ *cÚ¡ 
d©a
);

23 
bË_t
* 
	$g‘_bË
(* 
bË_Çme
)

25 
i
 = 0; i < 
bË_couÁ
; ++i)

27 ià(0 =ğ
	`¡rcmp
(
bËs
[
i
]->
Çme
, 
bË_Çme
)) {

28  
bËs
[
i
];

33 
	}
}

36 
	$aùiÚ_Çme_to_id
(
bË_t
* 
bË
, cÚ¡ *cÚ¡ 
aùiÚ_Çme
)

38 cÚ¡ *cÚ¡*cÚ¡ 
aùiÚ_Çmes
 = 
bË
->action_names;

39 cÚ¡ 
aùiÚs_couÁ
 = 
bË
->actions_count;

40 
i
 = 0; i < 
aùiÚs_couÁ
; ++i)

42 ià(0 =ğ
	`¡rcmp
(
aùiÚ_Çmes
[
i
], 
aùiÚ_Çme
)) {

43  
i
;

48 
	}
}

50 
	$dbg_´št_bË
(
v”bos™y_Ëv–
, 
bË_t
*cÚ¡ 
bË
)

52 
i
 = 0; i < 
bË
->
’Œy_couÁ
; ++i)

54 
	`dbg_´štf
(
v”bos™y_Ëv–
, "bË %°row %d ", 
bË
, 
i
);

55 
	`dbg_´št_hex
(
v”bos™y_Ëv–
, 
bË
->
’Œy_size
,abË->bË + 
i
 *able->entry_size);

57 
	}
}

60 
boŞ
 
	$bË_cÚšs_’Œy
(
bË_t
*cÚ¡ 
bË
, cÚ¡ *cÚ¡ 
’Œy_d©a
)

62 
	`dbg_´štf
(1, "Looku°šabË %p: ", 
bË
);

63 
	`dbg_´št_hex
(1, 
bË
->
’Œy_size
, 
’Œy_d©a
);

64 
	`dbg_´št_bË
(1, 
bË
);

67 
i
 = 0; i < 
bË
->
’Œy_couÁ
; ++i)

69 ià(0 =ğ
	`memcmp
(
bË
->bË + 
i
 *abË->
’Œy_size
, 
’Œy_d©a
,able->entry_size)) {

70  
Œue
;

73  
çl£
;

74 
	}
}

79 
	$£t_bË_’Œy_d©a
(
bË_t
*cÚ¡ 
bË
, 
’Œy_šdex
, cÚ¡ *cÚ¡ 
d©a
)

81 
	`dbg_´štf
(1, "S‘tšgƒÁry %d iÀbË %p\n", 
’Œy_šdex
, 
bË
);

82 
	`memıy
(
bË
->bË + 
’Œy_šdex
 *abË->
’Œy_size
, 
d©a
,able->entry_size);

83 
	}
}

	@src/hardware_dep/pcap/data_plane/utils.c

2 
	~<¡dio.h
>

3 
	~<¡dlib.h
>

4 
	~<¡d¬g.h
>

6 
DBG_VERBOSITY
;

10 
	$dbg_´štf
(
v”bos™y_Ëv–
, cÚ¡ *
fmt
, ...)

12 ià(
DBG_VERBOSITY
 < 
v”bos™y_Ëv–
) ;

14 
va_li¡
 
¬gs
;

15 
	`va_¡¬t
(
¬gs
, 
fmt
);

16 
	`v´štf
(
fmt
, 
¬gs
);

17 
	`va_’d
(
¬gs
);

18 
	}
}

24 
	$b™_¿nge_to_št
(* 
by‹s
, 
low_b™_idx
, 
high_b™_idx
)

26 cÚ¡ 
low_by‹_idx
 = 
low_b™_idx
 / 8;

27 cÚ¡ 
high_by‹_idx
 = 
high_b™_idx
 / 8;

28 cÚ¡ 
fuÎ_low_by‹
 = ()
by‹s
[
low_by‹_idx
];

30 cÚ¡ 
low_by‹_mask
 = 0xFF >> (
low_b™_idx
 % 8);

31 
»tv®
 = (
fuÎ_low_by‹
 & 
low_by‹_mask
);

33 
i
 = 
low_by‹_idx
 + 1; i < 
high_by‹_idx
; ++i) {

34 
»tv®
 = (»tv® << 8è+ ()
by‹s
[
i
];

37 ià(
low_by‹_idx
 !ğ
high_by‹_idx
) {

38 cÚ¡ 
high_by‹_mask
 = 0xFF >> ((
high_b™_idx
+1) % 8);

39 cÚ¡ 
masked_high_by‹
 = (()
by‹s
[
high_by‹_idx
]è% 
high_by‹_mask
;

40 
»tv®
 = (»tv® << 8è+ 
masked_high_by‹
;

43  
»tv®
;

44 
	}
}

47 
	$b™_¿nge_to_lÚg
(* 
by‹s
, 
low_b™_idx
, 
high_b™_idx
)

49 cÚ¡ 
low_by‹_idx
 = 
low_b™_idx
 / 8;

50 cÚ¡ 
high_by‹_idx
 = 
high_b™_idx
 / 8;

51 cÚ¡ 
fuÎ_low_by‹
 = ()
by‹s
[
low_by‹_idx
];

53 cÚ¡ 
low_by‹_mask
 = 0xFF >> (
low_b™_idx
 % 8);

54 
»tv®
 = (
fuÎ_low_by‹
 & 
low_by‹_mask
);

56 
i
 = 
low_by‹_idx
 + 1; i < 
high_by‹_idx
; ++i) {

57 
»tv®
 = (»tv® << 8è+ ()
by‹s
[
i
];

60 ià(
low_by‹_idx
 !ğ
high_by‹_idx
) {

61 cÚ¡ 
high_by‹_mask
 = 0xFF >> ((
high_b™_idx
+1) % 8);

62 cÚ¡ 
masked_high_by‹
 = (()
by‹s
[
high_by‹_idx
]è% 
high_by‹_mask
;

63 
»tv®
 = (»tv® << 8è+ 
masked_high_by‹
;

66  
»tv®
;

67 
	}
}

70 * 
	$mac_¡r_to_mac
(cÚ¡ * 
mac_¡r
)

72 * 
mac
 = 
	`m®loc
(6);

74 
fËd_f›lds
 =

75 
	`ssÿnf
(
mac_¡r
, "%hhx:%hhx:%hhx:%hhx:%hhx:%hhx", &
mac
[0], &mac[1], &mac[2], &mac[3], &mac[4], &mac[5]);

77 ià(
fËd_f›lds
 < 6)

79 
	`årštf
(
¡d”r
, "Could‚Ù…¬£ %s\n", 
mac_¡r
);

80 
	`ex™
(1);

83  
mac
;

84 
	}
}

86 
	$mac_to_lÚg
(cÚ¡ *cÚ¡ 
mac
)

88  (()
mac
[0] << (8*5)) + (()mac[1] << (8*4)) + (()mac[2] << (8*3)) + (()mac[3] << (8*2)) + (()mac[4] << (8*1)) + (()mac[5] << (8*0));

89 
	}
}

91 
	$dbg_´št_hex
(
v”bos™y_Ëv–
, 
Ëngth
, cÚ¡ *cÚ¡ 
d©a
)

93 
i
 = 0; i < 
Ëngth
; i++)

95 
	`dbg_´štf
(
v”bos™y_Ëv–
, "%02X ", ()
d©a
[
i
]);

97 
	`dbg_´štf
(
v”bos™y_Ëv–
, "\n");

98 
	}
}

	@src/hardware_dep/pcap/includes/p4_hw_lib.h

4 #iâdeà
__PCAP_HWLIB_H_


5 
	#__PCAP_HWLIB_H_


	)

7 
	~<pÿp.h
>

9 
pÿp_pkthdr
 
	th—d”_t
;

	@src/hardware_dep/pcap/includes/p4_hw_tables.h

2 #iâdeà
__TABLES_H_


3 
	#__TABLES_H_


	)

5 
	~"p4_hw_lib.h
"

7 
	sbË_lookup_»suÉ_t


9 
	mty³
;

10 ** 
	mf›lds
;

13 
	sbË_t


15 cÚ¡ *cÚ¡ 
	mÇme
;

16 cÚ¡ 
	maùiÚs_couÁ
;

17 cÚ¡ *cÚ¡*cÚ¡ 
	maùiÚ_Çmes
;

19 cÚ¡ 
	mmax_’Œy_couÁ
;

20 cÚ¡ 
	m’Œy_size
;

22 
	m’Œy_couÁ
;

25 
	mdeçuÉ_aùiÚ_code
;

27 * 
	mbË
;

	@src/hardware_dep/pcap/includes/standard_metadata.h

2 
	s¡ªd¬d_m‘ad©a_t
 {

3 
	mšg»ss_pÜt
;

4 
	meg»ss_pÜt
;

6 
	meg»ss_¥ec
;

	@src/hardware_dep/shared/ctrl_plane/controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<±h»ad.h
>

5 
	~<¡ršg.h
>

6 
	~<¡dlib.h
>

7 
	~<Ãtš‘/š.h
>

8 
	~<sys/ty³s.h
>

9 
	~<sys/sock‘.h
>

10 
	~"sock_h–³rs.h
"

11 
	~"fifo.h
"

12 
	~<sys/£Ëù.h
>

13 
	~"th»adpoŞ.h
"

15 
	smsg_buf_¡


17 
	md©a
[2048];

18 
	mËngth
;

19 } 
	tmsg_buf_t
;

21 
	scÚŒŞËr_¡


23 
th»adpoŞ
 
	moŞ
;

24 
fifo_t
 
	mšput_queue
;

25 
fifo_t
 
	mouut_queue
;

26 
	mcÚŒŞËr_fd
;

27 
dige¡_hªdËr
 
	mdh
;

28 
	mpÜt
;

29 } 
	tcÚŒŞËr_t
;

31 
	sth»adšfo_¡
 {

32 
cÚŒŞËr_t
* 
	mù
;

33 
	msock_fd
;

34 } 
	tth»adšfo_t
;

37 
	$šput_´oûssÜ
(*
t
)

39 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

40 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

41 
msg_buf_t
* 
mem_ûÎ
;

45 
	`fifo_wa™
Ğ&(
ù
->
šput_queue
) );

46 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
šput_queue
));

48 ià(
mem_ûÎ
==0) ;

50 
ù
->
	`dh
Ğ
mem_ûÎ
->
d©a
 );

53 
	`ä“
Ğ
mem_ûÎ
 );

55 
	}
}

57 
	$ouut_´oûssÜ
(*
t
)

59 
th»adšfo_t
* 
ti
 = (th»adšfo_t*)
t
;

60 
cÚŒŞËr_t
* 
ù
 = 
ti
->ct;

61 
msg_buf_t
* 
mem_ûÎ
;

65 
	`fifo_wa™
Ğ&(
ù
->
ouut_queue
) );

66 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
ù
->
ouut_queue
));

68 ià(
mem_ûÎ
==0) ;

69 
	`wr™e_p4_msg
(
ti
->
sock_fd
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

70 
	`ä“
 ( 
mem_ûÎ
 );

72 
	}
}

74 
cÚŒŞËr
 
	$ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
)

76 
cÚŒŞËr_t
* 
ù
;

77 
sockaddr_š
 
£rv”
;

80 ià((
pÜt
<=0è|| (
numb”_of_th»ads
<=0))

83 
ù
 = (
cÚŒŞËr_t
*è
	`m®loc
((controller_t));

85 ià(
ù
==0)

88 
ù
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(3);

90 
	`fifo_š™
(&(
ù
->
šput_queue
));

91 
	`fifo_š™
(&(
ù
->
ouut_queue
));

92 
ù
->
dh
 = dh;

94 
ù
->
cÚŒŞËr_fd
 = 
	`sock‘
Ğ
PF_INET
, 
SOCK_STREAM
, 0 );

97 
£rv”
.
sš_çmy
 = 
AF_INET
;

98 
£rv”
.
sš_addr
.
s_addr
 = 
INADDR_ANY
;

99 
£rv”
.
sš_pÜt
 = 
	`htÚs
(
pÜt
);

100 
ù
->
pÜt
 =…ort;

103 
	`bšd
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
£rv”
,  server );

105 
	`li¡’
Ğ
ù
->
cÚŒŞËr_fd
, 5 );

107  (
cÚŒŞËr
)
ù
;

108 
	}
}

110 
	$de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
)

112 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

113 
	`de¡roy_th»adpoŞ
(
ù
->
oŞ
);

114 
	`fifo_de¡roy
Ğ&(
ù
->
šput_queue
) );

115 
	`fifo_de¡roy
Ğ&(
ù
->
ouut_queue
) );

116 
	`şo£
(
ù
->
cÚŒŞËr_fd
);

117 
	`ä“
(
ù
);

118 
	}
}

120 
	$execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
)

122 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

123 
sockaddr_š
 
ş›Á
;

124 
sockËn_t
 
Ëngth
;

125 
th»adšfo_t
* 
ti
;

126 
cÚn
;

127 
i
;

128 
rv
;

129 
fd_£t
 
ma¡”
;

130 
fd_£t
 
»adfds
;

131 
maxfds
 = 
ù
->
cÚŒŞËr_fd
;

132 
msg_buf_t
* 
mem_ûÎ
;

134 
	`FD_ZERO
(&
ma¡”
);

135 
	`FD_SET
(
ù
->
cÚŒŞËr_fd
, &
ma¡”
);

139 
»adfds
 = 
ma¡”
;

141 
	`£Ëù
(
maxfds
+1, &
»adfds
, 0,0,0);

143 
i
=0;i<
maxfds
+1;++i)

145 ià(
	`FD_ISSET
(
i
, &
»adfds
)) {

146 ià(
i
==
ù
->
cÚŒŞËr_fd
) {

147 ià((
cÚn
 = 
	`acû±
Ğ
ù
->
cÚŒŞËr_fd
, (
sockaddr
 *è&
ş›Á
, &
Ëngth
 )) < 0 )

150 
	`´štf
("New device connected...\n");

151 
ti
 = (
th»adšfo_t
*è
	`m®loc
((threadinfo_t));

152 
ti
->
ù
 = ct;

153 
ti
->
sock_fd
 = 
cÚn
;

154 
	`di¥©ch
(
ù
->
oŞ
, 
ouut_´oûssÜ
, (*)
ti
);

155 
	`¦“p
(1);

156 
	`di¥©ch
(
ù
->
oŞ
, 
šput_´oûssÜ
, (*)
ti
);

157 
	`FD_SET
(
cÚn
, &
ma¡”
);

158 
maxfds
 = 
cÚn
>maxfds?conn:maxfds;

160 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

161 
mem_ûÎ
->
Ëngth
 = 2048;

162 ià((
rv
=
	`»ad_p4_msg
(
i
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

164 
	`fifo_add_msg
Ğ&(
ù
->
šput_queue
), (*)
mem_ûÎ
 );

165 } ià(
rv
==0) {

166 
	`FD_CLR
(
i
, &
ma¡”
);

167 
	`şo£
(
i
);

168 
	`ä“
(
mem_ûÎ
);

177 
	}
}

179 
	$£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
)

181 
cÚŒŞËr_t
* 
ù
 = (cÚŒŞËr_t*)
c
;

182 
msg_buf_t
* 
mem_ûÎ
;

183 ià(
Ëngth
>2048)

186 
mem_ûÎ
 = (
msg_buf_t
*)
	`m®loc
((msg_buf_t));

188 
	`memıy
(
mem_ûÎ
->
d©a
, 
bufãr
, 
Ëngth
);

189 
mem_ûÎ
->
Ëngth
 =†ength;

190 ifĞ
	`fifo_add_msg
Ğ&(
ù
->
ouut_queue
), (*)
mem_ûÎ
 )==0)

191 
	`´štf
("ERR!!\n");

194 
	}
}

	@src/hardware_dep/shared/ctrl_plane/controller.h

1 #iâdeà
__CONTROLLER_H__


2 
	#__CONTROLLER_H__
 1

	)

4 
	~<uni¡d.h
>

5 
	~<¡dio.h
>

6 
	~<¡dšt.h
>

8 * 
	tcÚŒŞËr
;

9 (*
	tdige¡_hªdËr
)(*);

12 
cÚŒŞËr
 
	`ü—‹_cÚŒŞËr
(
ušt16_t
 
pÜt
, 
numb”_of_th»ads
, 
dige¡_hªdËr
 
dh
);

13 
	`de¡roy_cÚŒŞËr
(
cÚŒŞËr
 
c
);

15 
	`execu‹_cÚŒŞËr
(
cÚŒŞËr
 
c
);

16 
	`£nd_p4_msg
(
cÚŒŞËr
 
c
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/shared/ctrl_plane/ctrl_plane_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<¡ršg.h
>

5 
	~<¡dlib.h
>

6 
	~<uni¡d.h
>

7 
	~<±h»ad.h
>

8 
	~"th»adpoŞ.h
"

9 
	~<sys/ty³s.h
>

10 
	~<sys/sock‘.h
>

11 
	~<Ãtš‘/š.h
>

12 
	~<Ãtdb.h
>

13 
	~"sock_h–³rs.h
"

14 
	~"fifo.h
"

15 
	~<sys/£Ëù.h
>

17 
	#P4_BG_MEM_CELL_SIZE
 2048

	)

18 
	#P4_BG_QUEUE_SIZE
 1024

	)

20 
	#MIN
(
x
,
y
è(((xè< (y)è? (xè: (y))

	)

22 
	smem_ûÎ_¡
 {

23 * 
	md©a
;

24 
ušt16_t
 
	mËngth
;

25 
mem_ûÎ_¡
* 
	mÃxt
;

26 
mem_ûÎ_¡
* 
	m´ev
;

27 } 
	tmem_ûÎ_t
;

29 
	sback’d_¡
 {

30 * 
	mmsg_bufãr
;

31 
mem_ûÎ_t
* 
	munu£d_h—d
;

32 
mem_ûÎ_t
* 
	mu£d_h—d
;

33 
±h»ad_mu‹x_t
 
	mmemlock
;

34 
±h»ad_cÚd_t
 
	mmem_nÙ_em±y
;

35 
±h»ad_cÚd_t
 
	mmem_em±y
;

36 
	mshutdown
;

37 
	mdÚt_acû±
;

38 
th»adpoŞ
 
	moŞ
;

39 
	mcÚŒŞËr_fd
;

40 
sockaddr_š
 
	mcÚŒŞËr_addr
;

41 
	mcÚŒŞËr_sock
;

42 
fifo_t
 
	mšput_queue
;

43 
fifo_t
 
	mouut_queue
;

44 
p4_msg_ÿÎback
 
	mcb
;

45 } 
	tback’d_t
;

47 
	sdige¡_¡
 {

48 
mem_ûÎ_t
* 
	mmem_ûÎ
;

49 
p4_dige¡
* 
	mdige¡
;

50 } 
	tdige¡_t
;

52 
mem_ûÎ_t
* 
touch_mem_ûÎ
(
back’d_t
* 
bgt
);

53 
d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
);

55 
	$back’d_´oûssÜ
(* 
bg
)

57 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

58 
mem_ûÎ_t
* 
mem_ûÎ
;

59 
timev®
 
tv
;

60 
rv
;

61 
fd_£t
 
rfs
;

62 
fd_£t
 
ma¡”
;

64 
	`FD_ZERO
(&
ma¡”
);

65 
	`FD_SET
(
bgt
->
cÚŒŞËr_sock
, &
ma¡”
);

69 
tv
.
tv_£c
 = 5;

70 
tv
.
tv_u£c
 = 0;

71 
rfs
 = 
ma¡”
;

72 
rv
 = 
	`£Ëù
(
bgt
->
cÚŒŞËr_sock
+1, &
rfs
, 0, 0, &
tv
);

74 ià(
bgt
->
shutdown
==1) ;

75 ià(
rv
==0) ;

77 ià(
	`FD_ISSET
(
bgt
->
cÚŒŞËr_sock
, &
rfs
))

79 
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

80 ià((
rv
=
	`»ad_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
)) > 0)

82 
	`fifo_add_msg
Ğ&(
bgt
->
šput_queue
), (*)
mem_ûÎ
 );

83 } ià(
rv
==0) ;

86 
	`şo£
(
bgt
->
cÚŒŞËr_sock
);

87 
	}
}

89 
	$šput_´oûssÜ
(*
bg
)

91 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

92 
mem_ûÎ_t
* 
mem_ûÎ
;

93 
rv®
;

97 
	`fifo_wa™
Ğ&(
bgt
->
šput_queue
) );

98 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
šput_queue
));

100 ià(
bgt
->
shutdown
==1) ;

101 ià(
mem_ûÎ
==0) ;

103 
rv®
 = 
	`hªdË_p4_msg
Ğ
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
, 
bgt
->
cb
 );

104 
	`´štf
(" :::: HªdË msg: %d\n", 
rv®
);

106 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

108 
	}
}

110 
	$ouut_´oûssÜ
(*
bg
)

112 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

113 
mem_ûÎ_t
* 
mem_ûÎ
;

117 
	`fifo_wa™
Ğ&(
bgt
->
ouut_queue
) );

118 
mem_ûÎ
 = 
	`fifo_»move_msg
(&(
bgt
->
ouut_queue
));

120 ià(
bgt
->
shutdown
==1) ;

121 ià(
mem_ûÎ
==0) ;

123 
	`wr™e_p4_msg
(
bgt
->
cÚŒŞËr_sock
, 
mem_ûÎ
->
d©a
, mem_ûÎ->
Ëngth
);

125 
	`d‘ouch_mem_ûÎ
Ğ
bgt
, 
mem_ûÎ
 );

127 
	}
}

129 
back’d
 
	$ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
)

131 
back’d_t
 *
bg
;

132 
mem_ûÎ_t
 *
tmp
;

133 
i
;

134 
ho¡’t
 *
£rv”
;

136 ià((
num_of_th»ads
<=0è|| (
queue_size
<=0))

139 
bg
 = (
back’d_t
*è
	`m®loc
((backend_t));

140 ià(
bg
 == 0) {

141 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew backend!\n");

145 
bg
->
msg_bufãr
 = (*è
	`m®loc
(
P4_BG_MEM_CELL_SIZE
 * 
queue_size
);

146 ià(
bg
->
msg_bufãr
 == 0) {

147 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew msg_buffer!\n");

151 
bg
->
unu£d_h—d
 = 0;

152 
bg
->
u£d_h—d
 = 0;

154 
i
=0;i<
queue_size
;++i)

156 
tmp
 = (
mem_ûÎ_t
*è
	`m®loc
((mem_cell_t));

157 ià(
tmp
 == 0) {

158 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ew mem cell†ist!\n");

161 
tmp
->
d©a
 = 
bg
->
msg_bufãr
 + 
P4_BG_MEM_CELL_SIZE
 * 
i
;

162 
tmp
->
Ëngth
 = 
P4_BG_MEM_CELL_SIZE
;

163 
tmp
->
´ev
 = 0;

164 
tmp
->
Ãxt
 = 
bg
->
unu£d_h—d
;

165 
bg
->
unu£d_h—d
 = 
tmp
;

168 
bg
->
shutdown
 = 0;

169 
bg
->
dÚt_acû±
 = 0;

172 if(
	`±h»ad_mu‹x_š™
(&(
bg
->
memlock
),
NULL
)) {

173 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

176 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_em±y
),
NULL
)) {

177 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

180 if(
	`±h»ad_cÚd_š™
(&(
bg
->
mem_nÙ_em±y
),
NULL
)) {

181 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

185 
bg
->
oŞ
 = 
	`ü—‹_th»adpoŞ
(
num_of_th»ads
);

187 
	`fifo_š™
(&(
bg
->
šput_queue
));

188 
	`fifo_š™
(&(
bg
->
ouut_queue
));

190 
bg
->
cÚŒŞËr_sock
 = 
	`sock‘
Ğ
AF_INET
, 
SOCK_STREAM
, 0 );

191 ifĞ
bg
->
cÚŒŞËr_sock
 == -1 )

193 
	`årštf
(
¡d”r
, "opening stream socket" );

198 
£rv”
 = 
	`g‘ho¡byÇme
(
cÚŒŞËr_Çme
);

199 ià(
£rv”
 == 0) {

200 
	`årštf
(
¡d”r
,"ERROR, CÚŒŞË¸ÿÂÙ bfound,‚Øsuch ho¡: %s\n", 
cÚŒŞËr_Çme
);

204 
	`mem£t
((*è&(
bg
->
cÚŒŞËr_addr
), 0, (
sockaddr_š
));

205 
bg
->
cÚŒŞËr_addr
.
sš_çmy
 = 
AF_INET
;

206 
	`memıy
Ğ(*è&(
bg
->
cÚŒŞËr_addr
.
sš_addr
), (*è(
£rv”
->
h_addr
), s”v”->
h_Ëngth
);

207 
bg
->
cÚŒŞËr_addr
.
sš_pÜt
 = 
	`htÚs
(
cÚŒŞËr_pÜt
);

209 
bg
->
cb
 = cb;

211  (
back’d
è
bg
;

212 
	}
}

214 
	$Ïunch_back’d
(
back’d
 
bg
)

216 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

218 ifĞ
	`cÚÃù
Ğ
bgt
->
cÚŒŞËr_sock
, (
sockaddr
 *è&(bgt->
cÚŒŞËr_addr
), (
sockaddr_š
) ) == -1 )

220 
	`årštf
(
¡dout
, "Connecting stream socket\n" );

226 
	`di¥©ch
(
bgt
->
oŞ
, 
back’d_´oûssÜ
, (*)bgt);

227 
	`¦“p
(1);

228 
	`di¥©ch
(
bgt
->
oŞ
, 
šput_´oûssÜ
, (*)bgt);

229 
	`¦“p
(1);

230 
	`di¥©ch
(
bgt
->
oŞ
, 
ouut_´oûssÜ
, (*)bgt);

231 
	}
}

233 
	$¡İ_back’d
(
back’d
 
bg
)

235 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

236 
bgt
->
shutdown
 = 1;

238 
	`de¡roy_th»adpoŞ
(
bgt
->
oŞ
);

239 
	}
}

242 
	$de¡roy_back’d
(
back’d
 
bg
)

244 
back’d_t
 *
bgt
 = (back’d_t*è
bg
;

245 
mem_ûÎ_t
 *
tmp
;

249 
tmp
 = 
bgt
->
u£d_h—d
;

250 
tmp
!=0) {

251 
bgt
->
u£d_h—d
 = 
tmp
->
Ãxt
;

252 
	`ä“
(
tmp
);

253 
tmp
 = 
bgt
->
u£d_h—d
;

256 
tmp
 = 
bgt
->
unu£d_h—d
;

257 
tmp
!=0) {

258 
bgt
->
unu£d_h—d
 = 
tmp
->
Ãxt
;

259 
	`ä“
(
tmp
);

260 
tmp
 = 
bgt
->
unu£d_h—d
;

263 
	`ä“
(
bgt
->
msg_bufãr
);

265 
	`±h»ad_mu‹x_de¡roy
(&(
bgt
->
memlock
));

266 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_em±y
));

267 
	`±h»ad_cÚd_de¡roy
(&(
bgt
->
mem_nÙ_em±y
));

268 
	`fifo_de¡roy
Ğ&(
bgt
->
šput_queue
) );

269 
	`fifo_de¡roy
Ğ&(
bgt
->
ouut_queue
) );

271 
	`ä“
(
bgt
);

272 
	}
}

274 
mem_ûÎ_t
* 
	$touch_mem_ûÎ
(
back’d_t
* 
bgt
)

277 
mem_ûÎ_t
* 
»suÉ
 = 0;

278 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

279 ià(
bgt
->
unu£d_h—d
!=0) {

280 
»suÉ
 = 
bgt
->
unu£d_h—d
;

281 
bgt
->
unu£d_h—d
 = 
»suÉ
->
Ãxt
;

282 ià(
bgt
->
unu£d_h—d
!=0)

283 
bgt
->
unu£d_h—d
->
´ev
 = 0;

285 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_em±y
));

286 ià(
bgt
->
u£d_h—d
!=0) {

287 
bgt
->
u£d_h—d
->
´ev
 = 
»suÉ
;

288 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

290 
»suÉ
->
Ãxt
 = 
bgt
->
u£d_h—d
;

291 
bgt
->
u£d_h—d
 = 
»suÉ
;

293 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

294  
»suÉ
;

295 
	}
}

297 
	$d‘ouch_mem_ûÎ
(
back’d_t
* 
bgt
, 
mem_ûÎ_t
* 
ûÎ
)

299 
	`±h»ad_mu‹x_lock
(&(
bgt
->
memlock
));

300 ià(
bgt
->
u£d_h—d
!=
ûÎ
)

301 
ûÎ
->
´ev
->
Ãxt
 = cell->next;

303 
bgt
->
u£d_h—d
 = 
ûÎ
->
Ãxt
;

304 ià(
ûÎ
->
Ãxt
!=0)

305 
ûÎ
->
Ãxt
->
´ev
 = cell->prev;

306 ià(
bgt
->
unu£d_h—d
!=0)

307 
bgt
->
unu£d_h—d
->
´ev
 = 
ûÎ
;

308 
ûÎ
->
Ãxt
 = 
bgt
->
unu£d_h—d
;

309 
ûÎ
->
´ev
 = 0;

310 
bgt
->
unu£d_h—d
 = 
ûÎ
;

311 ià(
bgt
->
u£d_h—d
==0)

312 
	`±h»ad_cÚd_sigÇl
(&(
bgt
->
mem_nÙ_em±y
));

313 
	`±h»ad_mu‹x_uÆock
(&(
bgt
->
memlock
));

314 
	}
}

316 
	$£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
)

318 
dige¡_t
* 
dt
 = (dige¡_t*)
d
;

319 
back’d_t
* 
bgt
 = (back’d_t*)
bg
;

321 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)(
dt
->
dige¡
));

322 ià(
	`fifo_add_msg
(&(
bgt
->
ouut_queue
), 
dt
->
mem_ûÎ
)==0)

325 
	`ä“
(
dt
);

327 
	}
}

329 
dige¡
 
	$ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
)

331 
back’d_t
* 
bgt
 = (back’d_t*è
bg
;

332 
dige¡_t
* 
dg
;

334 
dg
 = (
dige¡_t
*è
	`m®loc
( (digest_t) );

335 ià(
dg
==0)

337 
	`årštf
(
¡d”r
, "Out of memoryo‡‚ew digest message!\n");

341 
dg
->
mem_ûÎ
 = 
	`touch_mem_ûÎ
(
bgt
);

342 ià(
dg
->
mem_ûÎ
 == 0)

344 
	`årštf
(
¡d”r
, "Out of memory…ool - memcell cannot be‡ssignedo‡‚ew digest message!\n");

348 
	`ü—‹_p4_h—d”
(
dg
->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

349 
dg
->
dige¡
 = 
	`ü—‹_p4_dige¡
(dg->
mem_ûÎ
->
d©a
, 0, dg->mem_ûÎ->
Ëngth
);

351 ià(
	`¡¾’
Ğ
Çme
 ) > 
P4_MAX_FIELD_LIST_NAME_LEN
-1)

353 
	`årštf
(
¡d”r
, "ToØlÚg f›ldÇme! Thmaximum†’gth‡Îowed i %d\n", (
P4_MAX_FIELD_LIST_NAME_LEN
-1));

357 
	`¡ºıy
Ğ
dg
->
dige¡
->
f›ld_li¡_Çme
, 
Çme
, 
P4_MAX_FIELD_LIST_NAME_LEN
 );

358 
dg
->
dige¡
->
f›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
-1] = '\0';

360  (
dige¡
è
dg
;

361 
	}
}

364 
dige¡
 
	$add_dige¡_f›ld
(
dige¡
 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
)

366 
dige¡_t
* 
dg
 = (dige¡_t*è
d
;

367 
p4_dige¡_f›ld
* 
df›ld
;

368 
ušt32_t
 
by‹Ëngth
 = (
Ëngth
-1)/8+1;

370 
df›ld
 = 
	`add_p4_dige¡_f›ld
Ğ
dg
->
dige¡
, dg->
mem_ûÎ
->
Ëngth
 );

380 ià(
by‹Ëngth
>
P4_MAX_FIELD_VALUE_LENGTH
)

382 
	`årštf
(
¡d”r
, "ToØlÚg v®u¬¿y! Thmaximum by‹†’gth‡Îowed i %d\n", 
P4_MAX_FIELD_VALUE_LENGTH
);

386 
	`memıy
Ğ
df›ld
->
v®ue
, v®ue, 
	`MIN
(
by‹Ëngth
, 
P4_MAX_FIELD_VALUE_LENGTH
));

387 
df›ld
->
Ëngth
 =†ength;

388 
	`ÃtcÚv_p4_dige¡_f›ld
(
df›ld
);

390  
d
;

391 
	}
}

	@src/hardware_dep/shared/ctrl_plane/ctrl_plane_backend.h

1 #iâdeà
__BACKEND_H__


2 
	#__BACKEND_H__
 1

	)

4 
	~<¡dšt.h
>

5 
	~"hªdËrs.h
"

7 * 
	tback’d
;

8 * 
	tdige¡
;

11 
back’d
 
ü—‹_back’d
(
num_of_th»ads
, 
queue_size
, * 
cÚŒŞËr_Çme
, 
cÚŒŞËr_pÜt
, 
p4_msg_ÿÎback
 
cb
);

12 
de¡roy_back’d
(
back’d
 
bg
);

13 
£nd_dige¡
(
back’d
 
bg
, 
dige¡
 
d
, 
ušt32_t
 
»ûiv”_id
);

14 
Ïunch_back’d
(
back’d
 
bg
);

15 
¡İ_back’d
(
back’d
 
bg
);

17 
dige¡
 
ü—‹_dige¡
(
back’d
 
bg
, * 
Çme
);

18 
dige¡
 
add_dige¡_f›ld
(dige¡ 
d
, * 
v®ue
, 
ušt32_t
 
Ëngth
);

	@src/hardware_dep/shared/ctrl_plane/dpdk_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_smac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

18 
p4_f›ld_m©ch_exaù
* 
exaù
;

20 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

21 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

22 
	`¡rıy
(
‹
->
bË_Çme
, "smac");

24 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

25 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.srcAddr");

26 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

27 
exaù
->
Ëngth
 = 6*8+0;

29 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

30 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "_nop");

32 
	`ÃtcÚv_p4_h—d”
(
h
);

33 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

34 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

35 
	`ÃtcÚv_p4_aùiÚ
(
a
);

37 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

38 
	}
}

40 
	$fl_dmac_bË
(
ušt8_t
 
pÜt
, ušt8_ˆ
mac
[6])

42 
bufãr
[2048];

43 
p4_h—d”
* 
h
;

44 
p4_add_bË_’Œy
* 
‹
;

45 
p4_aùiÚ
* 
a
;

46 
p4_aùiÚ_·¿m‘”
* 
­
;

47 
p4_f›ld_m©ch_exaù
* 
exaù
;

49 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

50 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

51 
	`¡rıy
(
‹
->
bË_Çme
, "dmac");

53 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

54 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ethernet.dstAddr");

55 
	`memıy
(
exaù
->
b™m­
, 
mac
, 6);

56 
exaù
->
Ëngth
 = 6*8+0;

58 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

59 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "forward");

61 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

62 
	`¡rıy
(
­
->
Çme
, "port");

63 
	`memıy
(
­
->
b™m­
, &
pÜt
, 1);

64 
­
->
Ëngth
 = 1*8+0;

66 
	`ÃtcÚv_p4_h—d”
(
h
);

67 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

68 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

69 
	`ÃtcÚv_p4_aùiÚ
(
a
);

70 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

72 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

73 
	}
}

75 
	$mac_Ë¬n_dige¡
(* 
b
) {

76 
ušt8_t
 
mac
[6];

77 
ušt8_t
 
pÜt
[2];

78 
ušt16_t
 
off£t
=0;

79 
off£t
 = (
p4_dige¡
);

80 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

81 
	`memıy
(
mac
, 
df
->
v®ue
, 6);

82 
off£t
 +ğ(
p4_dige¡_f›ld
);

83 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

84 
	`memıy
(
pÜt
, 
df
->
v®ue
, 2);

86 
ušt8_t
 
p
 = 
pÜt
[0];

87 
	`´štf
("CŒl: mac_Ë¬n_dige¡ PORT: %d MAC: %02x:%02x:%02x:%02x:%02x:%02x\n", 
p
, 
mac
[0],mac[1],mac[2],mac[3],mac[4],mac[5]);

88 
	`fl_dmac_bË
(
p
, 
mac
);

89 
	`fl_smac_bË
(
p
, 
mac
);

90 
	}
}

92 
	$‹¡_Ë¬n_
(* 
b
) {

93 
ušt8_t
 

[4];

94 
ušt16_t
 
´
;

95 
i1
;

96 
i2
;

97 
i3
;

99 
ušt16_t
 
off£t
=0;

100 
off£t
 = (
p4_dige¡
);

101 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

102 
	`memıy
(

, 
df
->
v®ue
, 4);

103 
off£t
 +ğ(
p4_dige¡_f›ld
);

104 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

105 
	`memıy
(&
´
, 
df
->
v®ue
, 2);

106 
off£t
 +ğ(
p4_dige¡_f›ld
);

107 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

108 
	`memıy
(&
i1
, 
df
->
v®ue
, 4);

109 
off£t
 +ğ(
p4_dige¡_f›ld
);

110 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

111 
	`memıy
(&
i2
, 
df
->
v®ue
, 4);

112 
off£t
 +ğ(
p4_dige¡_f›ld
);

113 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

114 
	`memıy
(&
i3
, 
df
->
v®ue
, 4);

116 
bufãr
[2048];

117 
p4_h—d”
* 
h
;

118 
p4_add_bË_’Œy
* 
‹
;

119 
p4_aùiÚ
* 
a
;

120 
p4_aùiÚ_·¿m‘”
 *
­1
, *
­2
, *
­3
;

121 
p4_f›ld_m©ch_Ím
* 
Ím
;

122 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

123 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

124 
	`¡rıy
(
‹
->
bË_Çme
, "table1");

125 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

126 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "field1");

127 
	`memıy
(
Ím
->
b™m­
, 

, 4);

128 
Ím
->
´efix_Ëngth
 = 
´
;

129 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

130 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "korte");

131 
­1
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

132 
	`memıy
(
­1
->
b™m­
, &
i1
, 4);

133 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

134 
	`memıy
(
­2
->
b™m­
, &
i2
, 4);

135 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

136 
	`memıy
(
­3
->
b™m­
, &
i3
, 4);

137 
	`ÃtcÚv_p4_h—d”
(
h
);

138 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

139 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

140 
	`ÃtcÚv_p4_aùiÚ
(
a
);

141 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­1
);

142 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

143 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

144 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

145 
	}
}

147 
	$dhf
(* 
b
) {

148 
p4_h—d”
* 
h
 = 
	`ÃtcÚv_p4_h—d”
(
	`uÅack_p4_h—d”
(
b
, 0));

149 ià(
h
->
ty³
 !ğ
P4T_DIGEST
) {

150 
	`´štf
("Method is‚ot implemented\n");

154 
p4_dige¡
* 
d
 = 
	`uÅack_p4_dige¡
(
b
,0);

155 ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "mac_learn_digest")==0) {

156 
	`mac_Ë¬n_dige¡
(
b
);

157 } ià(
	`¡rcmp
(
d
->
f›ld_li¡_Çme
, "test_learn_ip")==0) {

158 
	`‹¡_Ë¬n_
(
b
);

160 
	`´štf
("UnknowÀdige¡„eûived: X%sX\n", 
d
->
f›ld_li¡_Çme
);

162 
	}
}

164 
	$maš
()

166 
	`´štf
("Create‡nd configure controller...\n");

167 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

169 
	`´štf
("Launching controller's main†oop...\n");

170 
	`execu‹_cÚŒŞËr
(
c
);

172 
	`´štf
("Destroy controller\n");

173 
	`de¡roy_cÚŒŞËr
(
c
);

176 
	}
}

	@src/hardware_dep/shared/ctrl_plane/dpdk_l3-full_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_v4_Ím_bË
(
ušt8_t
 

[4], 
ušt32_t
 
nhg½
)

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

16 
p4_aùiÚ_·¿m‘”
* 
­
;

17 
p4_f›ld_m©ch_Ím
* 
Ím
;

19 
	`´štf
("ipv4_lpm\n");

20 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

21 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

22 
	`¡rıy
(
‹
->
bË_Çme
, "ipv4_lpm");

24 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

25 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "ipv4.dstAddr");

26 
	`memıy
(
Ím
->
b™m­
, 

, 4);

27 
Ím
->
´efix_Ëngth
 = 16;

29 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

30 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "set_nhop");

32 
	`´štf
("add‚hgrp\n");

33 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

34 
	`¡rıy
(
­
->
Çme
, "nhgroup");

35 
	`memıy
(
­
->
b™m­
, &
nhg½
, 4);

36 
­
->
Ëngth
 = 4*8+0;

38 
	`´štf
("NH-1\n");

39 
	`ÃtcÚv_p4_h—d”
(
h
);

40 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

41 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

42 
	`ÃtcÚv_p4_aùiÚ
(
a
);

43 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

45 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

46 
	}
}

48 
	$fl_Ãxthİs_bË
(
ušt32_t
 
nhgroup
, 
ušt8_t
 
pÜt
, ušt8_ˆ
smac
[6], ušt8_ˆ
dmac
[6])

50 
bufãr
[2048];

51 
p4_h—d”
* 
h
;

52 
p4_add_bË_’Œy
* 
‹
;

53 
p4_aùiÚ
* 
a
;

54 
p4_aùiÚ_·¿m‘”
* 
­
, *
­2
, *
­3
;

55 
p4_f›ld_m©ch_exaù
* 
exaù
;

57 
	`´štf
("nexthops\n");

59 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

60 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

61 
	`¡rıy
(
‹
->
bË_Çme
, "nexthops");

63 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

64 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "routing_metadata.nhgroup");

65 
	`memıy
(
exaù
->
b™m­
, &
nhgroup
, 4);

66 
exaù
->
Ëngth
 = 4*8+0;

68 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

69 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "forward");

71 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

72 
	`¡rıy
(
­
->
Çme
, "dmac");

73 
	`memıy
(
­
->
b™m­
, 
dmac
, 6);

74 
­
->
Ëngth
 = 6*8+0;

75 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

76 
	`¡rıy
(
­2
->
Çme
, "smac");

77 
	`memıy
(
­2
->
b™m­
, 
smac
, 6);

78 
­2
->
Ëngth
 = 6*8+0;

80 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

81 
	`¡rıy
(
­3
->
Çme
, "port");

82 
­3
->
b™m­
[0] = 
pÜt
;

83 
­3
->
b™m­
[1] = 0;

84 
­3
->
Ëngth
 = 2*8+0;

86 
	`ÃtcÚv_p4_h—d”
(
h
);

87 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

88 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

89 
	`ÃtcÚv_p4_aùiÚ
(
a
);

90 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

91 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

92 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

94 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

95 
	}
}

97 
	$dhf
(* 
b
) {

98 
	`´štf
("Unknown digest„eceived\n");

99 
	}
}

101 
	$maš
()

103 
ušt8_t
 

[4] = {10,0,99,99};

104 
ušt8_t
 
mac
[6] = {0xd2, 0x69, 0x0f, 0xa8, 0x39, 0x9c};

105 
ušt8_t
 
smac
[6] = {0xd2, 0x69, 0x0f, 0x00, 0x00, 0x9c};

106 
ušt8_t
 
pÜt
 = 15;

107 
ušt32_t
 
nhg½
 = 0;

109 
	`´štf
("Create‡nd configure controller...\n");

110 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

112 
	`fl_v4_Ím_bË
(

, 
nhg½
);

113 
	`fl_Ãxthİs_bË
(
nhg½
, 
pÜt
, 
smac
, 
mac
);

115 
	`´štf
("Launching controller's main†oop...\n");

116 
	`execu‹_cÚŒŞËr
(
c
);

118 
	`´štf
("Destroy controller\n");

119 
	`de¡roy_cÚŒŞËr
(
c
);

122 
	}
}

	@src/hardware_dep/shared/ctrl_plane/dpdk_l3_controller.c

1 
	~"cÚŒŞËr.h
"

2 
	~"mes§ges.h
"

3 
	~<uni¡d.h
>

4 
	~<¡dio.h
>

5 
	~<¡ršg.h
>

8 
cÚŒŞËr
 
	gc
;

10 
	$fl_v4_fib_Ím_bË
(
ušt8_t
 

[4], ušt8_ˆ
pÜt
, ušt8_ˆ
mac
[6])

12 
bufãr
[2048];

13 
p4_h—d”
* 
h
;

14 
p4_add_bË_’Œy
* 
‹
;

15 
p4_aùiÚ
* 
a
;

16 
p4_aùiÚ_·¿m‘”
* 
­
,* 
­2
;

17 
p4_f›ld_m©ch_exaù
* 
exaù
;

19 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

20 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

21 
	`¡rıy
(
‹
->
bË_Çme
, "ipv4_fib_lpm");

23 
exaù
 = 
	`add_p4_f›ld_m©ch_exaù
(
‹
, 2048);

24 
	`¡rıy
(
exaù
->
h—d”
.
Çme
, "ipv4.dstAddr");

25 
	`memıy
(
exaù
->
b™m­
, 

, 4);

26 
exaù
->
Ëngth
 = 4*8+0;

28 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

29 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "fib_hit_nexthop");

36 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

37 
	`¡rıy
(
­
->
Çme
, "dmac");

38 
	`memıy
(
­
->
b™m­
, 
mac
, 6);

39 
­
->
Ëngth
 = 6*8+0;

41 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

42 
	`¡rıy
(
­2
->
Çme
, "port");

43 
­2
->
b™m­
[0] = 
pÜt
;

44 
­2
->
b™m­
[1] = 0;

45 
­2
->
Ëngth
 = 2*8+0;

47 
	`ÃtcÚv_p4_h—d”
(
h
);

48 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

49 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
(
exaù
);

50 
	`ÃtcÚv_p4_aùiÚ
(
a
);

51 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­
);

52 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

54 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

55 
	}
}

57 
	$mac_Ë¬n_dige¡
(* 
b
) {

59 
	}
}

61 
	$‹¡_Ë¬n_
(* 
b
) {

62 
ušt8_t
 

[4];

63 
ušt16_t
 
´
;

64 
i1
;

65 
i2
;

66 
i3
;

68 
ušt16_t
 
off£t
=0;

69 
off£t
 = (
p4_dige¡
);

70 
p4_dige¡_f›ld
* 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

71 
	`memıy
(

, 
df
->
v®ue
, 4);

72 
off£t
 +ğ(
p4_dige¡_f›ld
);

73 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

74 
	`memıy
(&
´
, 
df
->
v®ue
, 2);

75 
off£t
 +ğ(
p4_dige¡_f›ld
);

76 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

77 
	`memıy
(&
i1
, 
df
->
v®ue
, 4);

78 
off£t
 +ğ(
p4_dige¡_f›ld
);

79 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

80 
	`memıy
(&
i2
, 
df
->
v®ue
, 4);

81 
off£t
 +ğ(
p4_dige¡_f›ld
);

82 
df
 = 
	`ÃtcÚv_p4_dige¡_f›ld
(
	`uÅack_p4_dige¡_f›ld
(
b
, 
off£t
));

83 
	`memıy
(&
i3
, 
df
->
v®ue
, 4);

85 
	`´štf
("test_learn_ip\n");

87 
bufãr
[2048];

88 
p4_h—d”
* 
h
;

89 
p4_add_bË_’Œy
* 
‹
;

90 
p4_aùiÚ
* 
a
;

91 
p4_aùiÚ_·¿m‘”
 *
­1
, *
­2
, *
­3
;

92 
p4_f›ld_m©ch_Ím
* 
Ím
;

93 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
, 0, 2048);

94 
‹
 = 
	`ü—‹_p4_add_bË_’Œy
(
bufãr
,0,2048);

95 
	`¡rıy
(
‹
->
bË_Çme
, "table1");

96 
Ím
 = 
	`add_p4_f›ld_m©ch_Ím
(
‹
, 2048);

97 
	`¡rıy
(
Ím
->
h—d”
.
Çme
, "field1");

98 
	`memıy
(
Ím
->
b™m­
, 

, 4);

99 
Ím
->
´efix_Ëngth
 = 
´
;

100 
a
 = 
	`add_p4_aùiÚ
(
h
, 2048);

101 
	`¡rıy
(
a
->
desütiÚ
.
Çme
, "korte");

102 
­1
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

103 
	`memıy
(
­1
->
b™m­
, &
i1
, 4);

104 
­2
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

105 
	`memıy
(
­2
->
b™m­
, &
i2
, 4);

106 
­3
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 2048);

107 
	`memıy
(
­3
->
b™m­
, &
i3
, 4);

108 
	`ÃtcÚv_p4_h—d”
(
h
);

109 
	`ÃtcÚv_p4_add_bË_’Œy
(
‹
);

110 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
(
Ím
);

111 
	`ÃtcÚv_p4_aùiÚ
(
a
);

112 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­1
);

113 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­2
);

114 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
­3
);

115 
	`£nd_p4_msg
(
c
, 
bufãr
, 2048);

116 
	}
}

118 
	$dhf
(* 
b
) {

119 
	`´štf
("Unknown digest„eceived\n");

120 
	}
}

122 
	$maš
()

124 
ušt8_t
 

[4] = {10,0,0,1};

125 
ušt8_t
 
mac
[6] = {0xd2, 0x69, 0x0f, 0xa8, 0x39, 0x9c};

126 
ušt8_t
 
pÜt
 = 1;

128 
	`´štf
("Create‡nd configure controller...\n");

129 
c
 = 
	`ü—‹_cÚŒŞËr
(11111, 3, 
dhf
);

131 
	`fl_v4_fib_Ím_bË
(

, 
pÜt
, 
mac
);

133 
	`´štf
("Launching controller's main†oop...\n");

134 
	`execu‹_cÚŒŞËr
(
c
);

136 
	`´štf
("Destroy controller\n");

137 
	`de¡roy_cÚŒŞËr
(
c
);

140 
	}
}

	@src/hardware_dep/shared/ctrl_plane/fifo.c

1 
	~"fifo.h
"

2 
	~<¡dio.h
>

4 
fifo_t
* 
	$fifo_š™
Ğ
fifo_t
* 
queue
)

6 
queue
->
h—d
 = 0;

7 
queue
->
size
 = 0;

8 
queue
->

 = -1;

11 if(
	`±h»ad_mu‹x_š™
(&(
queue
->
lock
),
NULL
)) {

12 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

15 if(
	`±h»ad_cÚd_š™
(&(
queue
->
em±y
),
NULL
)) {

16 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

19 if(
	`±h»ad_cÚd_š™
(&(
queue
->
nÙ_em±y
),
NULL
)) {

20 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

23  
queue
;

24 
	}
}

26 
	$fifo_de¡roy
Ğ
fifo_t
* 
queue
 )

28 
	`±h»ad_mu‹x_de¡roy
(&(
queue
->
lock
));

29 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
em±y
));

30 
	`±h»ad_cÚd_de¡roy
(&(
queue
->
nÙ_em±y
));

31 
	}
}

33 
fifo_t
* 
	$fifo_add_msg
Ğ
fifo_t
* 
queue
, * 
–em’t
)

35 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

36 ià(
queue
->
size
 < 
P4_BG_QUEUE_SIZE
)

38 
queue
->

 = (queue->+1è% 
P4_BG_QUEUE_SIZE
;

39 ++(
queue
->
size
);

40 
queue
->queue[queue->

] = 
–em’t
;

41 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
nÙ_em±y
));

43 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

45  
queue
;

46 
	}
}

48 * 
	$fifo_»move_msg
Ğ
fifo_t
* 
queue
 )

50 * 
»suÉ
 = 0;

51 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

52 ià(
queue
->
size
 > 0)

54 
»suÉ
 = 
queue
->queue[queue->
h—d
];

55 
queue
->
h—d
 = (queue->h—d+1è% 
P4_BG_QUEUE_SIZE
;

56 --(
queue
->
size
);

57 ià(
queue
->
size
==0)

58 
	`±h»ad_cÚd_sigÇl
(&(
queue
->
em±y
));

60 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

62  
»suÉ
;

63 
	}
}

65 
	$fifo_size
Ğ
fifo_t
* 
queue
 )

67 
size
 = 0;

68 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

69 
size
 = 
queue
->size;

70 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

72  
size
;

73 
	}
}

75 
	$fifo_wa™
Ğ
fifo_t
* 
queue
)

77 
	`±h»ad_mu‹x_lock
(&(
queue
->
lock
));

79 ià(
queue
->
size
==0)

80 
	`±h»ad_cÚd_wa™
(&(
queue
->
nÙ_em±y
), &(queue->
lock
));

82 
	`±h»ad_mu‹x_uÆock
(&(
queue
->
lock
));

83 
	}
}

	@src/hardware_dep/shared/ctrl_plane/fifo.h

1 #iâdeà
__FIFO_H__


2 
	#__FIFO_H__


	)

4 
	~<±h»ad.h
>

6 
	#P4_BG_QUEUE_SIZE
 1024

	)

8 
	sfifo_¡
 {

9 * 
	mqueue
[
P4_BG_QUEUE_SIZE
];

10 
	mh—d
;

11 
	msize
;

12 
	m
;

13 
±h»ad_mu‹x_t
 
	mlock
;

14 
±h»ad_cÚd_t
 
	mnÙ_em±y
;

15 
±h»ad_cÚd_t
 
	mem±y
;

16 } 
	tfifo_t
;

18 
fifo_t
* 
fifo_š™
Ğfifo_t* 
queue
 );

19 
fifo_de¡roy
Ğ
fifo_t
* 
queue
 );

20 
fifo_t
* 
fifo_add_msg
Ğfifo_t* 
queue
, * 
–em’t
);

21 * 
fifo_»move_msg
Ğ
fifo_t
* 
queue
 );

22 
fifo_size
Ğ
fifo_t
* 
queue
 );

23 
fifo_wa™
Ğ
fifo_t
* 
queue
 );

	@src/hardware_dep/shared/ctrl_plane/handlers.c

1 
	~"hªdËrs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

6 
	$hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
)

8 
p4_h—d”
* 
h—d”
;

9 
p4_ù¾_msg
 
ù¾_m
;

10 
rv®
;

12 ià(
Ëngth
<(
p4_h—d”
))  -1;

14 
h—d”
 = 
	`ÃtcÚv_p4_h—d”
((
p4_h—d”
*)
bufãr
);

16 ià(
h—d”
->
Ëngth
>length)  -1;

18 
h—d”
->
ty³
)

20 
P4T_SET_DEFAULT_ACTION
:

21 
	`´štf
(" :::: SET_DEFAULT_ACTION\n");

22 
rv®
 = 
	`hªdË_p4_£t_deçuÉ_aùiÚ
Ğ
	`ÃtcÚv_p4_£t_deçuÉ_aùiÚ
((
p4_£t_deçuÉ_aùiÚ
*)
bufãr
), &
ù¾_m
);

23 
	`´štf
(" ::„v®=%d\n", 
rv®
);

24 ià(
rv®
<0) „val;

25 
	`cb
(&
ù¾_m
);

27 
P4T_ADD_TABLE_ENTRY
:

28 
	`´štf
(" :::: ADD_TABLE_ENTRY\n");

29 
rv®
 = 
	`hªdË_p4_add_bË_’Œy
(
	`ÃtcÚv_p4_add_bË_’Œy
((
p4_add_bË_’Œy
*)
bufãr
), &
ù¾_m
);

30 
	`´štf
(" ::„v®=%d\n", 
rv®
);

31 ià(
rv®
<0) „val;

32 
	`cb
(&
ù¾_m
);

35 
	`´štf
(" :::: Mes§gty³ i nÙ im¶em’‹d!y³=%d\n", 
h—d”
->
ty³
);

36 
	`cb
(&
ù¾_m
);

41 
	}
}

43 
	$hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

45 
i
;

46 
num_·¿ms
;

47 
ušt16_t
 
off£t
 = 0;

48 * 
bufãr
 = 0;

50 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

51 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

52 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

53 
ù¾_m
->
aùiÚ_ty³
 = 
m
->
aùiÚ
.
desütiÚ
.
ty³
;

54 
ù¾_m
->
aùiÚ_Çme
 = 
m
->
aùiÚ
.
desütiÚ
.
Çme
;

55 
num_·¿ms
 = 
m
->
aùiÚ
.
·¿m_size
;

56 
bufãr
 = (*)(
m
è+ (
p4_£t_deçuÉ_aùiÚ
);

58 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

61 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

63 
i
=0;i<
num_·¿ms
;++i)

65 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

66 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

70 
	}
}

72 
	$hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
)

74 
i
;

75 
num_·¿ms
;

76 
size
;

77 
ušt16_t
 
off£t
 = 0;

78 * 
bufãr
 = 0;

79 
p4_aùiÚ
* 
aùiÚ
;

81 
ù¾_m
->
ty³
 = 
m
->
h—d”
.type;

82 
ù¾_m
->
xid
 = 
m
->
h—d”
.xid;

83 
ù¾_m
->
bË_Çme
 = 
m
->table_name;

84 
num_·¿ms
 = 
m
->
»ad_size
;

86 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_FIELD_MATCHES
)

89 
ù¾_m
->
num_f›ld_m©ches
 = 
num_·¿ms
;

91 
bufãr
 = (*)(
m
è+ (
p4_add_bË_’Œy
);

92 
off£t
 = 0;

94 
i
=0;i<
num_·¿ms
;++i)

96 
ù¾_m
->
f›ld_m©ches
[
i
] = 
	`ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
	`uÅack_p4_f›ld_m©ch_h—d”
(
bufãr
, 
off£t
),&
size
);

97 
off£t
 +ğ
size
;

100 
aùiÚ
 = 
	`uÅack_p4_aùiÚ
(
bufãr
, 
off£t
);

102 
ù¾_m
->
aùiÚ_ty³
 = 
aùiÚ
->
desütiÚ
.
ty³
;

103 
ù¾_m
->
aùiÚ_Çme
 = 
aùiÚ
->
desütiÚ
.
Çme
;

104 
num_·¿ms
 = 
aùiÚ
->
·¿m_size
;

105 
off£t
 +ğ(
p4_aùiÚ
);

107 ià(
num_·¿ms
>
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
)

110 
ù¾_m
->
num_aùiÚ_·¿ms
 = 
num_·¿ms
;

112 
i
=0;i<
num_·¿ms
;++i)

114 
ù¾_m
->
aùiÚ_·¿ms
[
i
] = 
	`ÃtcÚv_p4_aùiÚ_·¿m‘”
(
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
, 
off£t
));

115 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

119 
	}
}

	@src/hardware_dep/shared/ctrl_plane/handlers.h

1 #iâdeà
__HANDLERS_H__


2 
	#__HANDLERS_H__


	)

4 
	~"mes§ges.h
"

6 
	#P4_MAX_NUMBER_OF_ACTION_PARAMETERS
 10

	)

7 
	#P4_MAX_NUMBER_OF_FIELD_MATCHES
 10

	)

9 
	sp4_ù¾_msg
 {

10 
ušt8_t
 
	mty³
;

11 
ušt32_t
 
	mxid
;

12 * 
	mbË_Çme
;

13 
ušt8_t
 
	maùiÚ_ty³
;

14 * 
	maùiÚ_Çme
;

15 
	mnum_aùiÚ_·¿ms
;

16 
p4_aùiÚ_·¿m‘”
* 
	maùiÚ_·¿ms
[
P4_MAX_NUMBER_OF_ACTION_PARAMETERS
];

17 
	mnum_f›ld_m©ches
;

18 
p4_f›ld_m©ch_h—d”
* 
	mf›ld_m©ches
[
P4_MAX_NUMBER_OF_FIELD_MATCHES
];

21 (*
	tp4_msg_ÿÎback
)(
	tp4_ù¾_msg
*);

23 
	`hªdË_p4_msg
(* 
bufãr
, 
Ëngth
, 
p4_msg_ÿÎback
 
cb
);

24 
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

25 
	`hªdË_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
, 
p4_ù¾_msg
* 
ù¾_m
);

	@src/hardware_dep/shared/ctrl_plane/messages.c

1 
	~"mes§ges.h
"

2 
	~<¡dio.h
>

3 
	~<as£¹.h
>

4 
	~<Ãtš‘/š.h
>

5 
	~<¬·/š‘.h
>

9 
p4_h—d”
 *
	$ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

10 
p4_h—d”
* 
h—d”
;

11 ià(
off£t
+(
p4_h—d”
è> 
maxËngth
)  0;

12 
h—d”
 = (
p4_h—d”
*)(
bufãr
 + 
off£t
);

13 
h—d”
->
v”siÚ
 = 
P4_VERSION
;

14 
h—d”
->
ty³
 = 0;

15 
h—d”
->
Ëngth
 =  (
p4_h—d”
);

16 
h—d”
->
xid
 = 0;

17  
h—d”
;

18 
	}
}

20 
šlše
 
p4_h—d”
* 
	$ÃtcÚv_p4_h—d”
(
p4_h—d”
* 
m
)

22 
m
->
Ëngth
 = 
	`htÚs
(m->length);

23 
m
->
xid
 = 
	`htÚl
(m->xid);

24  
m
;

25 
	}
}

27 
šlše
 
p4_h—d”
 *
	$uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

28  (
p4_h—d”
*)(
bufãr
 + 
off£t
);

29 
	}
}

31 
	$check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
) {

32 
	`as£¹
(
a
->
v”siÚ
 =ğ
b
->version);

33 
	`as£¹
(
a
->
ty³
 =ğ
b
->type);

34 
	`as£¹
(
a
->
Ëngth
 =ğ
b
->length);

35 
	`as£¹
(
a
->
xid
 =ğ
b
->xid);

36 
	}
}

38 
p4_add_bË_’Œy
* 
	$ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

39 
p4_add_bË_’Œy
* 
add_bË_’Œy
;

40 ià(
off£t
+(
p4_add_bË_’Œy
è>ğ
maxËngth
)  0;

41 
add_bË_’Œy
 = (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

42 
add_bË_’Œy
->
h—d”
.
Ëngth
 =  (
p4_add_bË_’Œy
);

43 
add_bË_’Œy
->
h—d”
.
ty³
 = 
P4T_ADD_TABLE_ENTRY
;

44 
add_bË_’Œy
->
»ad_size
 = 0;

45 
add_bË_’Œy
->
bË_Çme
[0] = '\0';

46  
add_bË_’Œy
;

47 
	}
}

49 
šlše
 
p4_add_bË_’Œy
* 
	$ÃtcÚv_p4_add_bË_’Œy
(
p4_add_bË_’Œy
* 
m
) {

50  
m
;

51 
	}
}

53 
p4_f›ld_m©ch_Ím
* 
	$add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

54 
p4_f›ld_m©ch_Ím
* 
f›ld_m©ch_Ím
;

55 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_Ím
è> 
maxËngth
)  0;

56 
f›ld_m©ch_Ím
 = (
p4_f›ld_m©ch_Ím
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

57 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_Ím
);

58 
add_bË_’Œy
->
»ad_size
 += 1;

59 
f›ld_m©ch_Ím
->
h—d”
.
ty³
 = 
P4_FMT_LPM
;

60 
f›ld_m©ch_Ím
->
´efix_Ëngth
 = 0;

61  
f›ld_m©ch_Ím
;

62 
	}
}

64 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$ÃtcÚv_p4_f›ld_m©ch_Ím
(
p4_f›ld_m©ch_Ím
* 
m
) {

65 
m
->
´efix_Ëngth
 = 
	`htÚs
(m->prefix_length);

66  
m
;

67 
	}
}

69 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$ÃtcÚv_p4_f›ld_m©ch_exaù
(
p4_f›ld_m©ch_exaù
* 
m
) {

70 
m
->
Ëngth
 = 
	`htÚs
(m->length);

71  
m
;

72 
	}
}

74 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$ÃtcÚv_p4_f›ld_m©ch_¿nge
(
p4_f›ld_m©ch_¿nge
* 
m
) {

75 
m
->
Ëngth
 = 
	`htÚs
(m->length);

76  
m
;

77 
	}
}

79 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(
p4_f›ld_m©ch_‹º¬y
* 
m
) {

80 
m
->
Ëngth
 = 
	`htÚs
(m->length);

81  
m
;

82 
	}
}

84 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$ÃtcÚv_p4_f›ld_m©ch_v®id
(
p4_f›ld_m©ch_v®id
* 
m
) {

85 
m
->
Ëngth
 = 
	`htÚs
(m->length);

86  
m
;

87 
	}
}

89 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$ÃtcÚv_p4_f›ld_m©ch_com¶ex
(
p4_f›ld_m©ch_h—d”
 *
m
, * 
size
) {

90 
m
->
ty³
)

92 
P4_FMT_EXACT
:

93 
	`ÃtcÚv_p4_f›ld_m©ch_exaù
((
p4_f›ld_m©ch_exaù
*)
m
);

94 *
size
 = (
p4_f›ld_m©ch_exaù
);

96 
P4_FMT_TERNARY
:

97 
	`ÃtcÚv_p4_f›ld_m©ch_‹º¬y
((
p4_f›ld_m©ch_‹º¬y
*)
m
);

98 *
size
 = (
p4_f›ld_m©ch_‹º¬y
);

100 
P4_FMT_LPM
:

101 
	`ÃtcÚv_p4_f›ld_m©ch_Ím
((
p4_f›ld_m©ch_Ím
*)
m
);

102 *
size
 = (
p4_f›ld_m©ch_Ím
);

104 
P4_FMT_RANGE
:

105 
	`ÃtcÚv_p4_f›ld_m©ch_¿nge
((
p4_f›ld_m©ch_¿nge
*)
m
);

106 *
size
 = (
p4_f›ld_m©ch_¿nge
);

108 
P4_FMT_VALID
:

109 
	`ÃtcÚv_p4_f›ld_m©ch_v®id
((
p4_f›ld_m©ch_v®id
*)
m
);

110 *
size
 = (
p4_f›ld_m©ch_v®id
);

113 *
size
 = 0;

116  
m
;

117 
	}
}

119 
šlše
 
p4_dige¡_f›ld
* 
	$ÃtcÚv_p4_dige¡_f›ld
(
p4_dige¡_f›ld
* 
m
) {

120 
m
->
Ëngth
 = 
	`htÚl
(m->length);

121  
m
;

122 
	}
}

124 
šlše
 
p4_aùiÚ
* 
	$ÃtcÚv_p4_aùiÚ
Ğ
p4_aùiÚ
* 
m
) {

125  
m
;

126 
	}
}

128 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$ÃtcÚv_p4_aùiÚ_·¿m‘”
(
p4_aùiÚ_·¿m‘”
* 
m
) {

129 
m
->
Ëngth
 = 
	`htÚl
(m->length);

130  
m
;

131 
	}
}

133 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(
p4_£t_deçuÉ_aùiÚ
* 
m
) {

135  
m
;

136 
	}
}

138 
šlše
 
p4_add_bË_’Œy
* 
	$uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
) {

139  (
p4_add_bË_’Œy
*)(
bufãr
 + 
off£t
);

140 
	}
}

142 
šlše
 
p4_f›ld_m©ch_h—d”
* 
	$uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

143  (
p4_f›ld_m©ch_h—d”
*)(
bufãr
 + 
off£t
);

144 
	}
}

146 
šlše
 
p4_f›ld_m©ch_Ím
* 
	$uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
) {

147  (
p4_f›ld_m©ch_Ím
*)(
bufãr
 + 
off£t
);

148 
	}
}

150 
p4_f›ld_m©ch_exaù
* 
	$add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

151 
p4_f›ld_m©ch_exaù
* 
f›ld_m©ch_exaù
;

152 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_exaù
è> 
maxËngth
)  0;

153 
f›ld_m©ch_exaù
 = (
p4_f›ld_m©ch_exaù
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

154 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_exaù
);

155 
add_bË_’Œy
->
»ad_size
 += 1;

156 
f›ld_m©ch_exaù
->
h—d”
.
ty³
 = 
P4_FMT_EXACT
;

157 
f›ld_m©ch_exaù
->
Ëngth
 = 0;

158  
f›ld_m©ch_exaù
;

159 
	}
}

161 
šlše
 
p4_f›ld_m©ch_exaù
* 
	$uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
) {

162  (
p4_f›ld_m©ch_exaù
*)(
bufãr
 + 
off£t
);

163 
	}
}

165 
p4_f›ld_m©ch_¿nge
* 
	$add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

166 
p4_f›ld_m©ch_¿nge
* 
f›ld_m©ch_¿nge
;

167 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_¿nge
è> 
maxËngth
)  0;

168 
f›ld_m©ch_¿nge
 = (
p4_f›ld_m©ch_¿nge
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

169 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_¿nge
);

170 
add_bË_’Œy
->
»ad_size
 += 1;

171 
f›ld_m©ch_¿nge
->
h—d”
.
ty³
 = 
P4_FMT_RANGE
;

172 
f›ld_m©ch_¿nge
->
Ëngth
 = 0;

173 
f›ld_m©ch_¿nge
->
is_sigÃd
 = 
çl£
;

174  
f›ld_m©ch_¿nge
;

175 
	}
}

177 
šlše
 
p4_f›ld_m©ch_¿nge
* 
	$uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
) {

178  (
p4_f›ld_m©ch_¿nge
*)(
bufãr
 + 
off£t
);

179 
	}
}

181 
p4_f›ld_m©ch_v®id
* 
	$add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

182 
p4_f›ld_m©ch_v®id
* 
f›ld_m©ch_v®id
;

183 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_v®id
è> 
maxËngth
)  0;

184 
f›ld_m©ch_v®id
 = (
p4_f›ld_m©ch_v®id
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

185 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_v®id
);

186 
add_bË_’Œy
->
»ad_size
 += 1;

187 
f›ld_m©ch_v®id
->
h—d”
.
ty³
 = 
P4_FMT_VALID
;

188 
f›ld_m©ch_v®id
->
Ëngth
 = 0;

189 
f›ld_m©ch_v®id
->
is_v®id
 = 
çl£
;

190  
f›ld_m©ch_v®id
;

191 
	}
}

193 
šlše
 
p4_f›ld_m©ch_v®id
* 
	$uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
) {

194  (
p4_f›ld_m©ch_v®id
*)(
bufãr
 + 
off£t
);

195 
	}
}

197 
p4_f›ld_m©ch_‹º¬y
* 
	$add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
) {

198 
p4_f›ld_m©ch_‹º¬y
* 
f›ld_m©ch_‹º¬y
;

199 ià(
add_bË_’Œy
->
h—d”
.
Ëngth
 + (
p4_f›ld_m©ch_‹º¬y
è> 
maxËngth
)  0;

200 
f›ld_m©ch_‹º¬y
 = (
p4_f›ld_m©ch_‹º¬y
*)ĞĞ(*)
add_bË_’Œy
 ) +‡dd_bË_’Œy->
h—d”
.
Ëngth
);

201 
add_bË_’Œy
->
h—d”
.
Ëngth
 +ğ(
p4_f›ld_m©ch_‹º¬y
);

202 
add_bË_’Œy
->
»ad_size
 += 1;

203 
f›ld_m©ch_‹º¬y
->
h—d”
.
ty³
 = 
P4_FMT_TERNARY
;

204 
f›ld_m©ch_‹º¬y
->
Ëngth
 = 0;

205 
f›ld_m©ch_‹º¬y
->
´iÜ™y
 = 0;

206  
f›ld_m©ch_‹º¬y
;

207 
	}
}

209 
šlše
 
p4_f›ld_m©ch_‹º¬y
* 
	$uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
) {

210  (
p4_f›ld_m©ch_‹º¬y
*)(
bufãr
 + 
off£t
);

211 
	}
}

213 
p4_aùiÚ
* 
	$add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
) {

214 
p4_aùiÚ
* 
aùiÚ
;

215 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ
è> 
maxËngth
)  0;

216 
aùiÚ
 = (
p4_aùiÚ
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

217 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ
);

218 
aùiÚ
->
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

219 
aùiÚ
->
desütiÚ
.
Çme
[0] = '\0';

220 
aùiÚ
->
·¿m_size
 = 0;

221  
aùiÚ
;

222 
	}
}

224 
šlše
 
p4_aùiÚ
* 
	$uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

225  (
p4_aùiÚ
*)(
bufãr
 + 
off£t
);

226 
	}
}

228 
p4_aùiÚ_·¿m‘”
* 
	$add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
) {

229 
p4_aùiÚ_·¿m‘”
* 
aùiÚ_p
;

230 ià(
h—d”
->
Ëngth
 + (
p4_aùiÚ_·¿m‘”
è> 
maxËngth
)  0;

231 
aùiÚ_p
 = (
p4_aùiÚ_·¿m‘”
*)ĞĞ(*)
h—d”
 ) + h—d”->
Ëngth
);

232 
h—d”
->
Ëngth
 +ğ(
p4_aùiÚ_·¿m‘”
);

233 
aùiÚ
->
·¿m_size
 += 1;

234 
aùiÚ_p
->
Çme
[0] = '\0';

235 
aùiÚ_p
->
Ëngth
 = 0;

236  
aùiÚ_p
;

237 
	}
}

239 
šlše
 
p4_aùiÚ_·¿m‘”
* 
	$uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
) {

240  (
p4_aùiÚ_·¿m‘”
*)(
bufãr
 + 
off£t
);

241 
	}
}

243 
p4_£t_deçuÉ_aùiÚ
* 
	$ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

244 
p4_£t_deçuÉ_aùiÚ
* 
deçuÉ_aùiÚ
;

245 ià(
off£t
+(
p4_£t_deçuÉ_aùiÚ
è>ğ
maxËngth
)  0;

246 
deçuÉ_aùiÚ
 = (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

247 
deçuÉ_aùiÚ
->
h—d”
.
Ëngth
 = (
p4_£t_deçuÉ_aùiÚ
);

248 
deçuÉ_aùiÚ
->
h—d”
.
ty³
 = 
P4T_SET_DEFAULT_ACTION
;

249 
deçuÉ_aùiÚ
->
bË_Çme
[0] = '\0';

250 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
ty³
 = 
P4_AT_ACTION
;

251 
deçuÉ_aùiÚ
->
aùiÚ
.
desütiÚ
.
Çme
[0] = '\0';

252 
deçuÉ_aùiÚ
->
aùiÚ
.
·¿m_size
 = 0;

253  
deçuÉ_aùiÚ
;

254 
	}
}

256 
šlše
 
p4_£t_deçuÉ_aùiÚ
* 
	$uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
) {

257  (
p4_£t_deçuÉ_aùiÚ
*)(
bufãr
 + 
off£t
);

258 
	}
}

260 
p4_dige¡
* 
	$ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
) {

261 
p4_dige¡
* 
dige¡
;

262 ià(
off£t
+(
p4_dige¡
è>ğ
maxËngth
)  0;

263 
dige¡
 = (
p4_dige¡
*)(
bufãr
 + 
off£t
);

264 
dige¡
->
h—d”
.
Ëngth
 = (
p4_dige¡
);

265 
dige¡
->
h—d”
.
ty³
 = 
P4T_DIGEST
;

266 
dige¡
->
f›ld_li¡_Çme
[0] = '\0';

267 
dige¡
->
li¡_size
 = 0;

268  
dige¡
;

269 
	}
}

271 
šlše
 
p4_dige¡
* 
	$uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
) {

272  (
p4_dige¡
*)(
bufãr
 + 
off£t
);

273 
	}
}

275 
p4_dige¡_f›ld
* 
	$add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
) {

276 
p4_dige¡_f›ld
* 
dige¡_f
;

277 ià(
dige¡
->
h—d”
.
Ëngth
 + (
p4_dige¡_f›ld
è> 
maxËngth
)  0;

278 
dige¡_f
 = (
p4_dige¡_f›ld
*)ĞĞ(*)
dige¡
 ) + dige¡->
h—d”
.
Ëngth
);

279 
dige¡
->
h—d”
.
Ëngth
 +ğ(
p4_dige¡_f›ld
);

280 
dige¡
->
li¡_size
 += 1;

281 
dige¡_f
->
Çme
[0] = '\0';

282 
dige¡_f
->
Ëngth
 = 0;

283  
dige¡_f
;

284 
	}
}

286 
šlše
 
p4_dige¡_f›ld
* 
	$uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
) {

287  (
p4_dige¡_f›ld
*)(
bufãr
 + 
off£t
);

288 
	}
}

	@src/hardware_dep/shared/ctrl_plane/messages.h

1 #iâdeà
_MESSAGES_H_


2 
	#_MESSAGES_H_
 1

	)

4 
	~<¡dšt.h
>

6 
	#P4_VERSION
 1

	)

7 
	#Œue
 1

	)

8 
	#çl£
 0

	)

11 
	sp4_h—d”
 {

12 
ušt8_t
 
	mv”siÚ
;

13 
ušt8_t
 
	mty³
;

14 
ušt16_t
 
	mËngth
;

15 
ušt32_t
 
	mxid
;

19 
	ep4_ty³
 {

21 
	mP4T_HELLO
 = 0,

22 
	mP4T_ERROR
 = 1,

23 
	mP4T_ECHO_REQUEST
 = 2,

24 
	mP4T_ECHO_REPLY
 = 3,

25 
	mP4T_SUCCESS
 = 4,

28 
	mP4T_GET_TABLE_DEFINITIONS
 = 100,

29 
	mP4T_GET_TABLE_COUNTERS
 = 101,

30 
	mP4T_GET_TABLE_ENTRIES
 = 102,

33 
	mP4T_SET_DEFAULT_ACTION
 = 103,

34 
	mP4T_ADD_TABLE_ENTRY
 = 104,

35 
	mP4T_MODIFY_TABLE_ENTRY
 = 105,

36 
	mP4T_REMOVE_TABLE_ENTRY
 = 106,

37 
	mP4T_DROP_TABLE_ENTRIES
 = 107,

38 
	mP4T_ADD_AP_MEMBER
 = 108,

39 
	mP4T_REMOVE_AP_MEMBER
 = 109,

42 
	mP4T_DIGEST
 = 110

45 
	sp4_h–lo
 {

46 
p4_h—d”
 
	mh—d”
;

48 
p4_h–lo_–em_h—d”
 *
	m–em’ts
;

53 
	ep4_h–lo_–em_ty³
 {

54 
	mOFPHET_VERSIONBITMAP
 = 1

58 
	sp4_h–lo_–em_h—d”
 {

59 
ušt16_t
 
	mty³
;

60 
ušt16_t
 
	mËngth
;

65 
	sp4_h–lo_–em_v”siÚb™m­
 {

66 
ušt16_t
 
	mty³
;

67 
ušt16_t
 
	mËngth
;

73 
ušt32_t
* 
	mb™m­s
;

76 
	sp4_”rÜ
 {

77 
p4_h—d”
 
	mh—d”
;

78 
ušt16_t
 
	m”rÜ_code
;

81 
	sp4_sucûss
 {

82 
p4_h—d”
 
	mh—d”
;

83 
ušt32_t
 
	mid
;

86 
	#P4_MAX_TABLE_NAME_LEN
 128

	)

87 
	#P4_MAX_FIELD_NAME_LEN
 128

	)

88 
	#P4_MAX_ACTION_NAME_LEN
 128

	)

90 
	ep4_f›ld_m©ch_ty³
 {

91 
	mP4_FMT_EXACT
 = 0,

92 
	mP4_FMT_TERNARY
 = 1,

93 
	mP4_FMT_LPM
 = 2,

94 
	mP4_FMT_RANGE
 = 3,

95 
	mP4_FMT_VALID
 = 4

98 
	sp4_f›ld_m©ch_desc
 {

99 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

100 
ušt8_t
 
	mty³
;

103 
	ep4_suµÜt_timeout
 {

104 
	mP4_STO_FALSE
 = 0,

105 
	mP4_STO_TRUE
 = 1

108 
	ep4_aùiÚ_ty³
 {

109 
	mP4_AT_ACTION
 = 0,

110 
	mP4_AT_ACTION_PROFILE
 = 1

113 
	sp4_bË_aùiÚ_desc
 {

114 
ušt8_t
 
	mty³
;

115 
	mÇme
[
P4_MAX_ACTION_NAME_LEN
];

118 
	sp4_bË_defš™iÚ
 {

119 
p4_h—d”
 
	mh—d”
;

120 
	mÇme
[
P4_MAX_TABLE_NAME_LEN
];

121 
ušt8_t
 
	m»ads
;

122 
ušt16_t
 
	mmš_size
;

123 
ušt16_t
 
	mmax_size
;

124 
ušt16_t
 
	msize
;

125 
ušt8_t
 
	msuµÜt_timeout
;

126 
ušt8_t
 
	m»ad_size
;

127 
ušt8_t
 
	maùiÚ_size
;

133 
	#MAX_ACTION_PARAMETER_NAME_LENGTH
 128

	)

134 
	#MAX_ACTION_PARAMETER_BITMAP_LENGTH
 128

	)

135 
	sp4_aùiÚ_·¿m‘”
 {

136 
	mÇme
[
MAX_ACTION_PARAMETER_NAME_LENGTH
];

137 
ušt32_t
 
	mËngth
;

138 
	mb™m­
[
MAX_ACTION_PARAMETER_BITMAP_LENGTH
];

143 
	sp4_aùiÚ
 {

144 
p4_bË_aùiÚ_desc
 
	mdesütiÚ
;

145 
ušt8_t
 
	m·¿m_size
;

149 
	sp4_£t_deçuÉ_aùiÚ
 {

150 
p4_h—d”
 
	mh—d”
;

151 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

152 
p4_aùiÚ
 
	maùiÚ
;

155 
	sp4_f›ld_m©ch_h—d”
 {

156 
	mÇme
[
P4_MAX_FIELD_NAME_LEN
];

157 
ušt8_t
 
	mty³
;

160 
	#MAX_FIELD_LENGTH
 256

	)

162 
	sp4_f›ld_m©ch_Ím
 {

163 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

164 
ušt16_t
 
	m´efix_Ëngth
;

165 
	mb™m­
[
MAX_FIELD_LENGTH
];

168 
	sp4_f›ld_m©ch_exaù
 {

169 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

170 
ušt16_t
 
	mËngth
;

171 
	mb™m­
[
MAX_FIELD_LENGTH
];

174 
	sp4_f›ld_m©ch_¿nge
 {

175 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

176 
ušt16_t
 
	mËngth
;

177 
ušt8_t
 
	mis_sigÃd
;

178 
	mmš_b™m­
[
MAX_FIELD_LENGTH
];

179 
	mmax_b™m­
[
MAX_FIELD_LENGTH
];

182 
	sp4_f›ld_m©ch_‹º¬y
 {

183 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

184 
ušt16_t
 
	mËngth
;

185 
ušt8_t
 
	m´iÜ™y
;

186 
	mb™m­
[
MAX_FIELD_LENGTH
];

187 
	mmask
[
MAX_FIELD_LENGTH
];

190 
	sp4_f›ld_m©ch_v®id
 {

191 
p4_f›ld_m©ch_h—d”
 
	mh—d”
;

192 
ušt16_t
 
	mËngth
;

193 
ušt8_t
 
	mis_v®id
;

194 
	mb™m­
[
MAX_FIELD_LENGTH
];

197 
	sp4_add_bË_’Œy
 {

198 
p4_h—d”
 
	mh—d”
;

199 
	mbË_Çme
[
P4_MAX_TABLE_NAME_LEN
];

200 
ušt8_t
 
	m»ad_size
;

205 
	#P4_MAX_FIELD_LIST_NAME_LEN
 128

	)

206 
	#P4_MAX_FIELD_NAME_LENGTH
 128

	)

207 
	#P4_MAX_FIELD_VALUE_LENGTH
 32

	)

209 
	sp4_dige¡_f›ld
 {

210 
	mÇme
[
P4_MAX_FIELD_NAME_LENGTH
];

211 
ušt32_t
 
	mËngth
;

212 
	mv®ue
[
P4_MAX_FIELD_VALUE_LENGTH
];

215 
	sp4_dige¡
 {

216 
p4_h—d”
 
	mh—d”
;

217 
	mf›ld_li¡_Çme
[
P4_MAX_FIELD_LIST_NAME_LEN
];

218 
ušt8_t
 
	mli¡_size
;

222 
p4_h—d”
 *
ü—‹_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

223 
p4_h—d”
 *
uÅack_p4_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

224 
check_p4_h—d”
Ğ
p4_h—d”
* 
a
, p4_h—d”* 
b
);

225 
p4_h—d”
* 
ÃtcÚv_p4_h—d”
(p4_h—d”* 
m
);

227 
p4_add_bË_’Œy
* 
ü—‹_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

228 
p4_f›ld_m©ch_Ím
* 
add_p4_f›ld_m©ch_Ím
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

229 
p4_add_bË_’Œy
* 
uÅack_p4_add_bË_’Œy
(* 
bufãr
, 
ušt16_t
 
off£t
);

230 
p4_f›ld_m©ch_h—d”
* 
uÅack_p4_f›ld_m©ch_h—d”
(* 
bufãr
, 
ušt16_t
 
off£t
);

231 
p4_f›ld_m©ch_Ím
* 
uÅack_p4_f›ld_m©ch_Ím
(* 
bufãr
, 
ušt16_t
 
off£t
);

232 
p4_f›ld_m©ch_exaù
* 
add_p4_f›ld_m©ch_exaù
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

233 
p4_f›ld_m©ch_exaù
* 
uÅack_p4_f›ld_m©ch_exaù
(* 
bufãr
, 
ušt16_t
 
off£t
);

234 
p4_f›ld_m©ch_¿nge
* 
add_p4_f›ld_m©ch_¿nge
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

235 
p4_f›ld_m©ch_¿nge
* 
uÅack_p4_f›ld_m©ch_¿nge
(* 
bufãr
, 
ušt16_t
 
off£t
);

236 
p4_f›ld_m©ch_v®id
* 
add_p4_f›ld_m©ch_v®id
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

237 
p4_f›ld_m©ch_v®id
* 
uÅack_p4_f›ld_m©ch_v®id
(* 
bufãr
, 
ušt16_t
 
off£t
);

238 
p4_f›ld_m©ch_‹º¬y
* 
add_p4_f›ld_m©ch_‹º¬y
(
p4_add_bË_’Œy
* 
add_bË_’Œy
, 
ušt16_t
 
maxËngth
);

239 
p4_f›ld_m©ch_‹º¬y
* 
uÅack_p4_f›ld_m©ch_‹º¬y
(* 
bufãr
, 
ušt16_t
 
off£t
);

240 
p4_aùiÚ
* 
add_p4_aùiÚ
(
p4_h—d”
* 
h—d”
, 
ušt16_t
 
maxËngth
);

241 
p4_aùiÚ
* 
uÅack_p4_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

242 
p4_aùiÚ_·¿m‘”
* 
add_p4_aùiÚ_·¿m‘”
(
p4_h—d”
* 
h—d”
, 
p4_aùiÚ
* 
aùiÚ
, 
ušt16_t
 
maxËngth
);

243 
p4_aùiÚ_·¿m‘”
* 
uÅack_p4_aùiÚ_·¿m‘”
(* 
bufãr
, 
ušt16_t
 
off£t
);

244 
p4_£t_deçuÉ_aùiÚ
* 
ü—‹_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

245 
p4_£t_deçuÉ_aùiÚ
* 
uÅack_p4_£t_deçuÉ_aùiÚ
(* 
bufãr
, 
ušt16_t
 
off£t
);

246 
p4_dige¡
* 
ü—‹_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
, ušt16_ˆ
maxËngth
);

247 
p4_dige¡
* 
uÅack_p4_dige¡
(* 
bufãr
, 
ušt16_t
 
off£t
);

248 
p4_dige¡_f›ld
* 
add_p4_dige¡_f›ld
(
p4_dige¡
* 
dige¡
, 
ušt16_t
 
maxËngth
);

249 
p4_dige¡_f›ld
* 
uÅack_p4_dige¡_f›ld
(* 
bufãr
, 
ušt16_t
 
off£t
);

251 
p4_f›ld_m©ch_Ím
* 
ÃtcÚv_p4_f›ld_m©ch_Ím
(p4_f›ld_m©ch_Ím* 
m
);

252 
p4_f›ld_m©ch_exaù
* 
ÃtcÚv_p4_f›ld_m©ch_exaù
(p4_f›ld_m©ch_exaù* 
m
);

253 
p4_f›ld_m©ch_¿nge
* 
ÃtcÚv_p4_f›ld_m©ch_¿nge
(p4_f›ld_m©ch_¿nge* 
m
);

254 
p4_f›ld_m©ch_‹º¬y
* 
ÃtcÚv_p4_f›ld_m©ch_‹º¬y
(p4_f›ld_m©ch_‹º¬y* 
m
);

255 
p4_f›ld_m©ch_v®id
* 
ÃtcÚv_p4_f›ld_m©ch_v®id
(p4_f›ld_m©ch_v®id* 
m
);

256 
p4_dige¡_f›ld
* 
ÃtcÚv_p4_dige¡_f›ld
(p4_dige¡_f›ld* 
m
);

257 
p4_aùiÚ
* 
ÃtcÚv_p4_aùiÚ
Ğp4_aùiÚ* 
m
);

258 
p4_aùiÚ_·¿m‘”
* 
ÃtcÚv_p4_aùiÚ_·¿m‘”
(p4_aùiÚ_·¿m‘”* 
m
);

259 
p4_£t_deçuÉ_aùiÚ
* 
ÃtcÚv_p4_£t_deçuÉ_aùiÚ
(p4_£t_deçuÉ_aùiÚ* 
m
);

260 
p4_f›ld_m©ch_h—d”
* 
ÃtcÚv_p4_f›ld_m©ch_com¶ex
(p4_f›ld_m©ch_h—d” *
m
, * 
size
);

261 
p4_add_bË_’Œy
* 
ÃtcÚv_p4_add_bË_’Œy
(p4_add_bË_’Œy* 
m
);

	@src/hardware_dep/shared/ctrl_plane/sock_helpers.c

1 
	~"sock_h–³rs.h
"

2 
	~"mes§ges.h
"

3 
	~<¡dio.h
>

4 
	~<uni¡d.h
>

5 
	~<Ãtš‘/š.h
>

7 
	$»ad_fix
(
sock
, * 
bufãr
, 
nby‹s
)

9 
rby‹s
 = 0;

10 
rv®
 = 0;

11 
rby‹s
<
nby‹s
)

13 
rv®
 = 
	`»ad
(
sock
, 
bufãr
 + 
rby‹s
, 
nby‹s
-rbytes);

14 ià(
rv®
<=0) „val;

15 
rby‹s
 +ğ
rv®
;

18  
rby‹s
;

19 
	}
}

21 
	$wr™e_fix
(
sock
, * 
bufãr
, 
nby‹s
)

23 
wby‹s
 = 0;

24 
wv®
 = 0;

25 
wby‹s
<
nby‹s
)

27 
wv®
 = 
	`wr™e
(
sock
, 
bufãr
 + 
wby‹s
, 
nby‹s
-wbytes);

28 ià(
wv®
<0)  wval;

29 
wby‹s
 +ğ
wv®
;

32  
wby‹s
;

33 
	}
}

35 
	$»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

37 
rv®
;

38 
msgËn
;

39 ià(
Ëngth
<(
p4_h—d”
))  -1;

41 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
, (
p4_h—d”
)))<=0)

42  
rv®
;

44 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

46 ià(
msgËn
>
Ëngth
)

49 ià((
rv®
=
	`»ad_fix
(
sock
, 
bufãr
 + (
p4_h—d”
), 
msgËn
-(p4_header)))<=0)

50  
rv®
;

51  
msgËn
;

52 
	}
}

54 
	$wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
)

56 
msgËn
;

57 ià(
Ëngth
<(
p4_h—d”
))  -1;

59 
msgËn
 = 
	`Áohs
(((
p4_h—d”
*)
bufãr
)->
Ëngth
);

61 ià(
msgËn
>
Ëngth
)  -1;

63  
	`wr™e_fix
(
sock
, 
bufãr
, 
msgËn
);

64 
	}
}

	@src/hardware_dep/shared/ctrl_plane/sock_helpers.h

1 #iâdeà
__SOCK_HELPERS_H__


2 
	#__SOCK_HELPERS_H__
 1

	)

4 
»ad_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

5 
wr™e_p4_msg
(
sock
, * 
bufãr
, 
Ëngth
);

	@src/hardware_dep/shared/ctrl_plane/tests/test_backend.c

1 
	~"ù¾_¶ªe_back’d.h
"

2 
	~<uni¡d.h
>

3 
	~<¡dio.h
>

4 
	~<¬·/š‘.h
>

5 
	~"hªdËrs.h
"

7 
	$cbf_‹¡
(
p4_ù¾_msg
* 
ù¾_m
)

9 
i
;

10 
p4_f›ld_m©ch_h—d”
* 
fmh
;

11 
p4_f›ld_m©ch_exaù
* 
exaù
 = 0;

12 
	`´štf
("-----------CALLBACK---------------\n");

14 ià(
ù¾_m
->
ty³
 =ğ
P4T_ADD_TABLE_ENTRY
)

16 
	`´štf
(" #### ADD_TABLE_ENTRY\n");

17 
	`´štf
(" ## TabË‚ame: %s\n", 
ù¾_m
->
bË_Çme
);

18 
i
=0;i<
ù¾_m
->
num_f›ld_m©ches
;++i) {

19 
fmh
 = 
ù¾_m
->
f›ld_m©ches
[
i
];

20 ià(
fmh
->
ty³
==
P4_FMT_EXACT
) {

21 
exaù
 = (
p4_f›ld_m©ch_exaù
*)
fmh
;

22 
	`´štf
(" ## F›ld m©ch %d: % %d b™ exaù %02x:%02x:%02x:%02x:%02x:%02x\n", 
i
, 
fmh
->
Çme
,
exaù
->
Ëngth
,ƒxaù->
b™m­
[0],exaù->b™m­[1],exaù->b™m­[2],(
ušt8_t
)exact->bitmap[3],exact->bitmap[4],exact->bitmap[5] );

25 
	`´štf
(" ## F›ld m©ch %d: % nÙƒxaù\n", 
i
, 
fmh
->
Çme
);

27 
	`´štf
(" ## AùiÚ‚ame: %s\n", 
ù¾_m
->
aùiÚ_Çme
);

28 
i
=0;i<
ù¾_m
->
num_aùiÚ_·¿ms
;++i)

30 
	`´štf
(" ## AùiÚ…¬am %d: % %d b™ V:%d\n", 
i
, 
ù¾_m
->
aùiÚ_·¿ms
[i]->
Çme
,ù¾_m->aùiÚ_·¿ms[i]->
Ëngth
, *((
ušt8_t
*)ù¾_m->aùiÚ_·¿ms[i]->
b™m­
));

37 
	}
}

39 
	$maš
()

41 
i
=0;

42 
back’d
 
bg
;

43 
dige¡
 
d
;

44 
ušt8_t
 
mac
[6] = {0x00, 0x0d, 0x3f, 0xcd, 0x02, 0x5f};

45 
ušt8_t
 
pÜt
 = 16;

47 
	`´štf
("Create backend...\n");

48 
bg
 = 
	`ü—‹_back’d
(3,1000,"loÿlho¡", 11111, 
cbf_‹¡
);

50 
	`´štf
("Launch backend...\n");

51 
	`Ïunch_back’d
(
bg
);

53 ;
i
<2;++i) {

54 
	`´štf
("Wait...\n");

55 
	`¦“p
(1);

58 
	`´štf
("Send‡ digest...\n");

60 
	`´štf
(" * Create‡ digest‡nd‡dd fields...\n");

61 
d
 = 
	`ü—‹_dige¡
(
bg
, "mac_learn_digest");

65 
	`add_dige¡_f›ld
(
d
, 
mac
, 48);

66 
	`add_dige¡_f›ld
(
d
, &
pÜt
, 8);

69 
	`´štf
(" * Sendhe…repared digestohe„eceiver...\n");

70 
i
 = 
	`£nd_dige¡
(
bg
, 
d
, 0);

72 
	`´štf
(" *„‘v® = %d\n", 
i
);

74 
i
=0;i<10;++i) {

75 
	`´štf
("Wait...\n");

76 
	`¦“p
(1);

79 
	`´štf
("Stop backend...");

80 
	`¡İ_back’d
(
bg
);

82 
	`´štf
("Destroy backend...");

83 
	`de¡roy_back’d
(
bg
);

86 
	}
}

	@src/hardware_dep/shared/ctrl_plane/tests/test_messages.c

1 
	~"mes§ges.h
"

2 
	~"hªdËrs.h
"

3 
	~<¡dio.h
>

4 
	~<as£¹.h
>

5 
	~<¡ršg.h
>

7 
	#BUFFLEN
 1024

	)

9 
	$‹¡_p4_h—d”
()

11 
bufãr
[
BUFFLEN
];

12 
p4_h—d”
* 
h—d”
;

13 
p4_h—d”
* 
h—d”2
;

15 
h—d”
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

16 
h—d”
->
xid
 = 112222;

17 
h—d”
->
ty³
 = 
P4T_ECHO_REQUEST
;

19 
h—d”2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

21 
	`check_p4_h—d”
Ğ
h—d”
, 
h—d”2
 );

22 
	}
}

24 
	$‹¡_p4_£t_deçuÉ_aùiÚ
()

26 
bufãr
[
BUFFLEN
];

27 
p4_h—d”
* 
h
;

28 
p4_h—d”
* 
h2
;

29 
p4_£t_deçuÉ_aùiÚ
* 
sda
;

30 
p4_£t_deçuÉ_aùiÚ
* 
sda2
;

31 
p4_aùiÚ
* 
a
;

32 
p4_aùiÚ
* 
a2
;

33 
p4_aùiÚ_·¿m‘”
* 
­
;

34 
p4_aùiÚ_·¿m‘”
* 
­2
;

35 
ušt32_t
 
v®
 = 9987112;

36 
ušt16_t
 
off£t
 = 0;

37 
ušt16_t
 
i
 = 0;

38 
p4_ù¾_msg
 
ù¾_m
;

40 
h
 = 
	`ü—‹_p4_h—d”
(
bufãr
,0, 
BUFFLEN
);

41 
h
->
xid
 = 112223;

43 
sda
 = 
	`ü—‹_p4_£t_deçuÉ_aùiÚ
(
bufãr
,0,
BUFFLEN
);

44 
	`¡rıy
(
sda
->
bË_Çme
,"smac");

46 
a
 = &(
sda
->
aùiÚ
);

47 
	`¡rıy
(
a
->
desütiÚ
.
Çme
,"smac_hit");

49 
­
 = 
	`add_p4_aùiÚ_·¿m‘”
(
h
, 
a
, 
BUFFLEN
);

50 
	`¡rıy
(
­
->
Çme
, "port");

51 
	`memıy
(
­
->
b™m­
, &
v®
, (val));

52 
­
->
Ëngth
 = (
v®
)*8;

54 
	`as£¹
(
h
->
Ëngth
 =ğ((
p4_£t_deçuÉ_aùiÚ
è+ (
p4_aùiÚ_·¿m‘”
)));

55 
	`as£¹
(
a
->
·¿m_size
 == 1);

57 
h2
 = 
	`uÅack_p4_h—d”
(
bufãr
, 0);

59 
	`as£¹
(
h2
->
xid
 == 112223);

61 
sda2
 = 
	`uÅack_p4_£t_deçuÉ_aùiÚ
(
bufãr
, 0);

62 
a2
 = &(
sda2
->
aùiÚ
);

63 
off£t
 = (
p4_£t_deçuÉ_aùiÚ
);

65 
	`as£¹
Ğ
a2
->
·¿m_size
 == 1);

67 
i
 = 0;˜< 
a2
->
·¿m_size
; ++i) {

68 
­2
 = 
	`uÅack_p4_aùiÚ_·¿m‘”
(
bufãr
,
off£t
);

69 
off£t
 +ğ(
p4_aùiÚ_·¿m‘”
);

72 
	`as£¹
(
­2
->
Ëngth
 =ğ(
ušt32_t
)*8);

73 
	`as£¹
(*(
ušt32_t
*)&(
­2
->
b™m­
è=ğ
v®
);

77 
	`as£¹
(
	`hªdË_p4_£t_deçuÉ_aùiÚ
(
sda2
, &
ù¾_m
) == 0);

79 
	`as£¹
(
ù¾_m
.
num_aùiÚ_·¿ms
 == 1);

80 
	`as£¹
(
ù¾_m
.
aùiÚ_·¿ms
[0]->
Ëngth
 =ğ(
ušt32_t
)*8);

81 
	`as£¹
(*(
ušt32_t
*)&(
ù¾_m
.
aùiÚ_·¿ms
[0]->
b™m­
è=ğ
v®
);

83 
	}
}

86 
	$maš
()

88 
	`´štf
("Test cases:\n");

89 
	`´štf
("*est_p4_header");

90 
	`fæush
(
¡dout
);

91 
	`‹¡_p4_h—d”
();

92 
	`´štf
(" OK\n");

95 
	`´štf
("*est_p4_set_default_action");

96 
	`fæush
(
¡dout
);

97 
	`‹¡_p4_£t_deçuÉ_aùiÚ
();

98 
	`´štf
(" OK\n");

101 
	}
}

	@src/hardware_dep/shared/ctrl_plane/threadpool.c

7 
	~<¡dio.h
>

8 
	~<¡dlib.h
>

9 
	~<uni¡d.h
>

10 
	~<±h»ad.h
>

11 
	~<sigÇl.h
>

12 
	~"th»adpoŞ.h
"

15 
±h»ad_kl
(
±h»ad_t
 
th»ad
, 
sig
);

17 
	swÜk_¡
{

18 (*
	mroutše
) (*);

19 * 
	m¬g
;

20 
wÜk_¡
* 
	mÃxt
;

21 } 
	twÜk_t
;

23 
	s_th»adpoŞ_¡
 {

25 
	mnum_th»ads
;

26 
	mqsize
;

27 
±h»ad_t
 *
	mth»ads
;

28 
wÜk_t
* 
	mqh—d
;

29 
wÜk_t
* 
	mq
;

30 
±h»ad_mu‹x_t
 
	mqlock
;

31 
±h»ad_cÚd_t
 
	mq_nÙ_em±y
;

32 
±h»ad_cÚd_t
 
	mq_em±y
;

33 
	mshutdown
;

34 
	mdÚt_acû±
;

35 } 
	t_th»adpoŞ
;

38 * 
	$do_wÜk
(
th»adpoŞ
 
p
) {

39 
_th»adpoŞ
 * 
poŞ
 = (_th»adpoŞ *è
p
;

40 
wÜk_t
* 
cur
;

43 
poŞ
->
qsize
 =…ool->qsize;

44 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

47  
poŞ
->
qsize
 == 0) {

48 if(
poŞ
->
shutdown
) {

49 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

50 
	`±h»ad_ex™
(
NULL
);

53 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

54 
	`±h»ad_cÚd_wa™
(&(
poŞ
->
q_nÙ_em±y
),&ÕoŞ->
qlock
));

57 if(
poŞ
->
shutdown
) {

58 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

59 
	`±h»ad_ex™
(
NULL
);

63 
cur
 = 
poŞ
->
qh—d
;

65 
poŞ
->
qsize
--;

67 if(
poŞ
->
qsize
 == 0) {

68 
poŞ
->
qh—d
 = 
NULL
;

69 
poŞ
->
q
 = 
NULL
;

72 
poŞ
->
qh—d
 = 
cur
->
Ãxt
;

75 if(
poŞ
->
qsize
 =ğ0 && !…oŞ->
shutdown
) {

77 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_em±y
));

79 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

80 (
cur
->
routše
è(cur->
¬g
);

81 
	`ä“
(
cur
);

83 
	}
}

85 
th»adpoŞ
 
	$ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
) {

86 
_th»adpoŞ
 *
poŞ
;

87 
i
;

90 ià((
num_th»ads_š_poŞ
 <ğ0è|| (num_th»ads_š_poŞ > 
MAXT_IN_POOL
))

91  
NULL
;

93 
poŞ
 = (
_th»adpoŞ
 *è
	`m®loc
((_threadpool));

94 ià(
poŞ
 =ğ
NULL
) {

95 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

96  
NULL
;

99 
poŞ
->
th»ads
 = (
±h»ad_t
*è
	`m®loc
 (Õth»ad_tè* 
num_th»ads_š_poŞ
);

101 if(!
poŞ
->
th»ads
) {

102 
	`årštf
(
¡d”r
, "Out of memory creating‡‚ewhreadpool!\n");

103  
NULL
;

106 
poŞ
->
num_th»ads
 = 
num_th»ads_š_poŞ
;

107 
poŞ
->
qsize
 = 0;

108 
poŞ
->
qh—d
 = 
NULL
;

109 
poŞ
->
q
 = 
NULL
;

110 
poŞ
->
shutdown
 = 0;

111 
poŞ
->
dÚt_acû±
 = 0;

114 if(
	`±h»ad_mu‹x_š™
(&
poŞ
->
qlock
,
NULL
)) {

115 
	`årštf
(
¡d”r
, "Mutex initiationƒrror!\n");

116  
NULL
;

118 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_em±y
),
NULL
)) {

119 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

120  
NULL
;

122 if(
	`±h»ad_cÚd_š™
(&(
poŞ
->
q_nÙ_em±y
),
NULL
)) {

123 
	`årštf
(
¡d”r
, "CV initiationƒrror!\n");

124  
NULL
;

129 
i
 = 0;˜< 
num_th»ads_š_poŞ
;i++) {

130 if(
	`±h»ad_ü—‹
(&(
poŞ
->
th»ads
[
i
]),
NULL
,
do_wÜk
,pool)) {

131 
	`årštf
(
¡d”r
, "Thread initiationƒrror!\n");

132  
NULL
;

135  (
th»adpoŞ
è
poŞ
;

136 
	}
}

139 
	$di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
,

140 *
¬g
) {

141 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
äom_me
;

142 
wÜk_t
 * 
cur
;

144 
cur
 = (
wÜk_t
*è
	`m®loc
((work_t));

145 if(
cur
 =ğ
NULL
) {

146 
	`årštf
(
¡d”r
, "Out of memory creating‡ work struct!\n");

150 
cur
->
routše
 = 
di¥©ch_to_h”e
;

151 
cur
->
¬g
 =‡rg;

152 
cur
->
Ãxt
 = 
NULL
;

154 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

156 if(
poŞ
->
dÚt_acû±
) {

157 
	`´štf
("Closed\n");

158 
	`ä“
(
cur
);

161 if(
poŞ
->
qsize
 == 0) {

162 
poŞ
->
qh—d
 = 
cur
;

163 
poŞ
->
q
 = 
cur
;

164 
	`±h»ad_cÚd_sigÇl
(&(
poŞ
->
q_nÙ_em±y
));

166 
poŞ
->
q
->
Ãxt
 = 
cur
;

167 
poŞ
->
q
 = 
cur
;

169 
poŞ
->
qsize
++;

170 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

171 
	}
}

173 
	$de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
) {

174 
_th»adpoŞ
 *
poŞ
 = (_th»adpoŞ *è
de¡royme
;

175 
i
=0;

176 * 
nÙhšg
;

178 
	`±h»ad_mu‹x_lock
(&(
poŞ
->
qlock
));

179 ;
i
 < 
poŞ
->
num_th»ads
;i++) {

180 
	`±h»ad_kl
(
poŞ
->
th»ads
[
i
], 
SIGUSR1
);

182 
	`±h»ad_mu‹x_uÆock
(&(
poŞ
->
qlock
));

185 
i
=0;˜< 
poŞ
->
num_th»ads
;i++) {

187 
	`±h»ad_još
(
poŞ
->
th»ads
[
i
],&
nÙhšg
);

190 
	`ä“
(
poŞ
->
th»ads
);

192 
	`±h»ad_mu‹x_de¡roy
(&(
poŞ
->
qlock
));

193 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_em±y
));

194 
	`±h»ad_cÚd_de¡roy
(&(
poŞ
->
q_nÙ_em±y
));

196 
	}
}

	@src/hardware_dep/shared/ctrl_plane/threadpool.h

9 
	#MAXT_IN_POOL
 200

	)

17 *
	tth»adpoŞ
;

25 (*
	tdi¥©ch_â
)(*);

32 
th»adpoŞ
 
	`ü—‹_th»adpoŞ
(
num_th»ads_š_poŞ
);

46 
	`di¥©ch
(
th»adpoŞ
 
äom_me
, 
di¥©ch_â
 
di¥©ch_to_h”e
, *
¬g
);

53 
	`de¡roy_th»adpoŞ
(
th»adpoŞ
 
de¡royme
);

	@src/hardware_dep/shared/data_plane/ternary_naive.c

1 
	~"‹º¬y_Çive.h
"

3 
‹º¬y_bË
*

4 
	$Çive_‹º¬y_ü—‹
(
ušt8_t
 
keyËn
, ušt8_ˆ
max_size
)

6 
‹º¬y_bË
* 
t
 = 
	`m®loc
((ternary_table));

7 
t
->
’Œ›s
 = 
	`m®loc
((
‹º¬y_’Œy
)*
max_size
);

8 
t
->
keyËn
 = keylen;

9 
t
->
size
 = 0;

10  
t
;

11 
	}
}

14 
	$Çive_‹º¬y_de¡roy
(
‹º¬y_bË
* 
t
)

17 
	`ä“
(
t
->
’Œ›s
);

18 
	`ä“
(
t
);

19 
	}
}

22 
	$Çive_‹º¬y_add
(
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
)

24 
‹º¬y_’Œy
* 
e
 = 
	`m®loc
((ternary_entry));

25 
e
->
key
 = 
	`m®loc
(
t
->
keyËn
);

26 
e
->
mask
 = 
	`m®loc
(
t
->
keyËn
);

27 
	`memıy
(
e
->
key
, key, 
t
->
keyËn
);

28 
	`memıy
(
e
->
mask
, mask, 
t
->
keyËn
);

29 
e
->
v®ue
 = value;

30 
t
->
’Œ›s
[t->
size
++] = 
e
;

31 
	}
}

33 
ušt8_t
*

34 
	$Çive_‹º¬y_lookup
(
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
)

36 
i
, 
j
, 
m©ch
=1;

37 
‹º¬y_’Œy
* 
e
;

38 
‹º¬y_’Œy
* 
»s
 = 
NULL
;

39 
i
 = 0; i < 
t
->
size
; i++)

41 
e
 = 
t
->
’Œ›s
[
i
];

43 
m©ch
 = 1;

44 
j
 = 0; j < 
t
->
keyËn
; j++) {

45 if(
e
->
key
[
j
] !ğ(key[j] &ƒ->
mask
[j])) {

46 
m©ch
 = 0;

50 if(
m©ch
è
»s
 = 
e
;

52  
m©ch
 ? 
»s
->
v®ue
 : 
NULL
;

53 
	}
}

	@src/hardware_dep/shared/includes/backend.h

1 #iâdeà
__BACKEND_H_


2 
	#__BACKEND_H_


	)

4 
	~"®Ÿ£s.h
"

5 
	~"ù¾_¶ªe_back’d.h
"

6 
	~"d©a_¶ªe_d©a.h
"

7 
	~"d©­ÏÃ.h
"

12 
ušt8_t
 
š™Ÿlize
 (
¬gc
, **
¬gv
);

13 
Ïunch
 ();

18 
lookup_bË_s
 
	tlookup_bË_t
;

20 
bË_ü—‹
 (
lookup_bË_t
* 
t
, 
sock‘id
);

22 
bË_£tdeçuÉ
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
v®ue
);

24 
exaù_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
);

25 
Ím_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
);

26 
‹º¬y_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

28 
ušt8_t
* 
exaù_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

29 
ušt8_t
* 
Ím_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

30 
ušt8_t
* 
‹º¬y_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

35 
·ck‘_desütÜ_s
 
	t·ck‘_desütÜ_t
;

36 
h—d”_desütÜ_s
 
	th—d”_desütÜ_t
;

38 
h—d”_»ã»nû_s
 
	th—d”_»ã»nû_t
;

39 
f›ld_»ã»nû_s
 
	tf›ld_»ã»nû_t
;

44 
add_h—d”
 (
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
);

45 
»move_h—d”
 (
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
);

48 
modify_f›ld_to_cÚ¡
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
);

49 
modify_f›ld_to_cÚ¡32
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
v®
);

50 
modify_f›ld_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
);

53 
add_cÚ¡_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
);

54 
add_f›ld_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
);

57 
add_f›lds
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf1
, f›ld_»ã»nû_ˆ
¤cf2
);

62 
ušt32_t
 
exŒaù_štv®ue
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
);

63 
ušt8_t
* 
exŒaù_by‹buf
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
);

71 
modify_f›ld
 (
·ck‘
* 
p
, 
f›ld
 
f
, 
Ëngth
 
l
, * 
v®ue
, 
modify_Ëngth
);

72 
modify_f›ld_w™h_mask
 (
·ck‘
* 
p
, 
f›ld
 
f
, * 
v®ue
, * 
mask
, 
modify_Ëngth
);

73 
modify_f›ld_cÚ¡_lÚg
(
·ck‘
* 
p
, 
f›ld
 
f
, 
Ëngth
 
l
, 
v®ue
, 
modify_Ëngth
);

74 
add_to_f›ld
 (
·ck‘
* 
p
, 
f›ld
* 
f
, * 
v®ue
);

75 
add
 (
·ck‘
* 
p
, 
f›ld
* 
f
, * 
v®ue1
, * 
v®ue2
);

76 
£t_f›ld_to_hash_šdex
(
·ck‘
* 
p
, 
f›ld
* 
f
, f›ld* 
æc
, 
ba£
, 
size
);

77 
Œunÿ‹_pkg
 (
·ck‘
* 
p
, 
Ëngth
);

78 
drİ
 (
·ck‘
* 
p
);

79 
no_İ
 ();

80 
push
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
);

81 
push_n
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
, 
couÁ
);

82 
pİ
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
);

83 
pİ_n
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
, 
couÁ
);

86 
g’”©e_dige¡
 (
back’d
 
bg
, * 
Çme
, 
»ûiv”
, 
ty³_f›ld_li¡
* 
dige¡_f›ld_li¡
);

	@src/hardware_dep/shared/includes/dataplane.h

1 #iâdeà
DATAPLANE_H


2 
	#DATAPLANE_H


	)

4 
	~<š‰y³s.h
>

5 
	~"®Ÿ£s.h
"

6 
	~"·r£r.h
"

8 
	~<odp_­i.h
>

10 
	#LOOKUP_EXACT
 0

	)

11 
	#LOOKUP_LPM
 1

	)

12 
	#LOOKUP_TERNARY
 2

	)

14 
	sty³_f›ld_li¡
 {

15 
ušt8_t
 
	mf›lds_quªt™y
;

16 
ušt8_t
** 
	mf›ld_off£ts
;

17 
ušt8_t
* 
	mf›ld_widths
;

20 
	slookup_bË_s
 {

21 * 
	mÇme
;

22 
ušt8_t
 
	mty³
;

23 
ušt8_t
 
	mkey_size
;

24 
ušt8_t
 
	mv®_size
;

25 
ušt8_t
 
	mmš_size
;

26 
ušt8_t
 
	mmax_size
;

27 * 
	mdeçuÉ_v®
;

28 * 
	mbË
;

29 
	msock‘id
;

30 } 
	tlookup_bË_t
;

34 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

35 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

36 
f›ld_š¡ªû_e
 
	tf›ld_š¡ªû_t
;

39 
	sf›ld_»ã»nû_s
 {

40 
h—d”_š¡ªû_t
 
	mh—d”
;

41 
	mm‘a
;

42 
	mb™width
;

43 
	mby‹width
;

44 
	mb™off£t
;

45 
	mby‹off£t
;

46 
ušt32_t
 
	mmask
;

47 } 
	tf›ld_»ã»nû_t
;

49 
	sh—d”_»ã»nû_s
 {

50 
h—d”_š¡ªû_t
 
	mh—d”_š¡ªû
;

51 
	mby‹width
;

52 } 
	th—d”_»ã»nû_t
;

54 
	#f›ld_desc
(
f
è(
f›ld_»ã»nû_t
) \

56 .
h—d”
 = 
f›ld_š¡ªû_h—d”
[
f
], \

57 .
m‘a
 = 
h—d”_š¡ªû_is_m‘ad©a
[
f›ld_š¡ªû_h—d”
[
f
]], \

58 .
b™width
 = 
f›ld_š¡ªû_b™_width
[
f
], \

59 .
by‹width
 = (
f›ld_š¡ªû_b™_width
[
f
]+7)/8, \

60 .
b™off£t
 = 
f›ld_š¡ªû_b™_off£t
[
f
], \

61 .
by‹off£t
 = 
f›ld_š¡ªû_by‹_off£t_hdr
[
f
], \

62 .
mask
 = 
f›ld_š¡ªû_mask
[
f
] \

63 }

	)

65 
	#h—d”_desc
(
h
è(
h—d”_»ã»nû_t
) \

67 .
h—d”_š¡ªû
 = 
h
, \

68 .
by‹width
 = 
h—d”_š¡ªû_by‹_width
[
h
], \

69 }

	)

71 
	sh—d”_desütÜ_s
 {

72 
h—d”_š¡ªû_t
 
	mty³
;

73 * 
	mpoš‹r
;

74 
ušt32_t
 
	mËngth
;

75 } 
	th—d”_desütÜ_t
;

77 
	s·ck‘_desütÜ_s
 {

78 * 
	mpoš‹r
;

79 
h—d”_desütÜ_t
 
	mh—d”s
[
HEADER_INSTANCE_COUNT
+1];

80 
·ck‘
 * 
	m·ck‘
;

81 } 
	t·ck‘_desütÜ_t
;

87 
lookup_bË_t
 
bË_cÚfig
[];

90 
hªdË_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘
);

93 
	#FIELD_BYTE_ADDR
(
p
, 
f
è(((
ušt8_t
*)Õ)->
h—d”s
[f.
h—d”
].
poš‹r
)+f.
by‹off£t
)

	)

95 
	#MODIFY_BYTEBUF_BYTEBUF
(
pd
, 
d¡f›ld
, 
¤c
, 
¤ş’
) { \

96 
	`memıy
(
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
d¡f›ld
)), 
¤c
, 
¤ş’
); \

97 }

	)

100 
	#MODIFY_INT32_BYTEBUF
(
pd
, 
d¡f›ld
, 
¤c
, 
¤ş’
) { \

101 
v®ue32
 = 0; \

102 
	`memıy
(&
v®ue32
, 
¤c
, 
¤ş’
); \

103 
	`MODIFY_INT32_INT32
(
pd
, 
d¡f›ld
, 
v®ue32
); \

104 }

	)

107 
	#MODIFY_INT32_INT32
(
pd
, 
d¡f›ld
, 
v®ue32
) { \

108 
»s32
 = (*
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
d¡f›ld
)è& ~f›ld_desc(d¡f›ld).
mask
è| (
v®ue32
 & (f›ld_desc(d¡f›ld).mask >> f›ld_desc(d¡f›ld).
b™off£t
)) << field_desc(dstfield).bitoffset; \

109 
	`memıy
(
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
d¡f›ld
)), &
»s32
, f›ld_desc(d¡f›ld).
by‹width
); \

110 }

	)

112 
	#NTOH16
(
v®
, 
f›ld
è(
	`f›ld_desc
(f›ld).
m‘a
 ? v® : 
	`¹e_be_to_ıu_16
(v®))

	)

113 
	#NTOH32
(
v®
, 
f›ld
è(
	`f›ld_desc
(f›ld).
m‘a
 ? v® : 
	`¹e_be_to_ıu_32
(v®))

	)

115 
	#EXTRACT_INT32
(
pd
, 
f›ld
, 
d¡
) { \

116 if(
	`f›ld_desc
(
f›ld
).
b™width
 <= 8) \

117 
d¡
 = (
ušt32_t
)((*(
ušt8_t
 *)
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
)è& (ušt8_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
); \

118 if(
	`f›ld_desc
(
f›ld
).
b™width
 <= 16) \

119 
d¡
 = (
ušt32_t
)
	`NTOH16
(((*(
ušt16_t
 *)
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
)è& (ušt16_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
), field); \

121 
d¡
 = (
ušt32_t
)
	`NTOH32
(((*(ušt32_ˆ*)(
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
))è& (ušt32_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
), field); \

122 }

	)

125 
	#EXTRACT_32BITS
(
pd
, 
f›ld
, 
d¡
) { \

126 if(
	`f›ld_desc
(
f›ld
).
b™width
 <= 8) \

127 
d¡
 = (
ušt32_t
)((*(
ušt8_t
 *)
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
)è& (ušt8_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
); \

128 if(
	`f›ld_desc
(
f›ld
).
b™width
 <= 16) \

129 
d¡
 = (
ušt32_t
)((*(
ušt16_t
 *)
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
)è& (ušt16_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
); \

131 
d¡
 = (
ušt32_t
)((*(ušt32_ˆ*)(
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
))è& (ušt32_t)f›ld_desc(f›ld).
mask
è>> f›ld_desc(f›ld).
b™off£t
); \

132 }

	)

134 
	#EXTRACT_BYTEBUF
(
pd
, 
f›ld
, 
d¡
) { \

135 
	`memıy
(
d¡
, 
	`FIELD_BYTE_ADDR
(
pd
, 
	`f›ld_desc
(
f›ld
)), f›ld_desc(f›ld).
by‹width
); \

136 }

	)

	@src/hardware_dep/shared/includes/ternary_naive.h

1 #iâdeà
TERNARY_NAIVE_H


2 
	#TERNARY_NAIVE_H


	)

4 
	~<š‰y³s.h
>

5 
	~<¡dlib.h
>

6 
	~<¡ršg.h
>

9 
ušt8_t
* 
	mmask
;

10 
ušt8_t
* 
	mkey
;

11 
ušt8_t
* 
	mv®ue
;

12 } 
	t‹º¬y_’Œy
;

15 ** 
	m’Œ›s
;

16 
ušt8_t
 
	mkeyËn
;

17 
ušt8_t
 
	msize
;

18 } 
	t‹º¬y_bË
;

20 
‹º¬y_bË
* 
Çive_‹º¬y_ü—‹
 (
ušt8_t
 
keyËn
, ušt8_ˆ
max_size
);

21 
Çive_‹º¬y_de¡roy
(
‹º¬y_bË
* 
t
);

22 
Çive_‹º¬y_add
 (
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

23 
ušt8_t
* 
Çive_‹º¬y_lookup
 (
‹º¬y_bË
* 
t
, ušt8_t* 
key
);

	@src/hardware_dep/spider/data_plane/shared_primitives.c

1 
	~"back’d.h
"

2 
	~"d©­ÏÃ.h
"

4 
	~<¡ršg.h
>

6 
	~"efs_fg.h
"

7 
	~"efs_fg.c
"

8 
	~"ich_™mh_fg.h
"

9 
	~"¡ddef.h
"

10 
	~"çbl_­i.h
"

11 
	~"•p_rbŒ“.h
"

12 
	~"efs_Í.h
"

13 
	~"©Œ.h
"

14 
	~"pkthdr_uts_fg.h
"

15 
	~"modlog_•p.h
"

16 
	~"defšes.h
"

17 
	~"ich_™mh_fg.h
"

18 
	~"ssc_rbos_çbl_ty³s.h
"

19 
	~"¥ad_uts.h
"

20 
	~"efs.c
"

23 
	$add_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

25 if(
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 =ğ
NULL
) {

26 
ušt16_t
 
Ën
 = 
h
.
by‹width
;

27 * 
add»ss
 = 
	`memÜy_´•’d
(
p
->
poš‹r
, 
Ën
);

28 
	`h¬dw¬e_d•_memıy
(
add»ss
, 
h
.
h—d”_š¡ªû
, 
Ën
);

29 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
] =

30 (
h—d”_desütÜ_t
) {

31 .
ty³
 = 
h
.
h—d”_š¡ªû
,

32 .
poš‹r
 = 
add»ss
,

33 .
Ëngth
 = 
h
.
by‹width


36 
	`´štf
("Cannot‡dd‡ header instance‡lready…resent inhe…acket\n");

38 
	}
}

41 
	$»move_h—d”
(
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
)

43 
h—d”_desütÜ_t
 
hd
 = 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
];

44 if(
hd
.
poš‹r
 !ğ
NULL
) {

45 
ušt16_t
 
Ën
 = (ušt16_t)
hd
.
Ëngth
;

46 
	`memÜy_adj
(
p
->
poš‹r
, 
Ën
);

47 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
Ëngth
 = 0;

48 
p
->
h—d”s
[
h
.
h—d”_š¡ªû
].
poš‹r
 = 
NULL
;

50 
	`´štf
("Cannot„emove‡ header instance‚ot…resent inhe…acket\n");

52 
	}
}

54 
	#FIELD_BYTE_ADDR
(
p
, 
f
è((
ušt8_t
*)Õ)->
h—d”s
[f.
h—d”
].
poš‹r
)+f.
by‹off£t


	)

56 
ušt32_t


57 
	$exŒaù_štv®ue
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

59 
ušt32_t
 
v®
;

60 if(
f
.
by‹width
 <= 4)

61 
v®
 = (*(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
)è& f.
mask
è>> f.
b™off£t
;

63 
v®
 = *(cÚ¡ 
ušt32_t
 *)(
	`FIELD_BYTE_ADDR
(
p
, 
f
è+ f.
by‹width
 - (uint32_t));

64  
f
.
m‘a
 ? 
v®
 : 
	`Áohl
(val);

65 
	}
}

67 
ušt8_t
*

68 
	$exŒaù_by‹buf
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

70 if(
f
.
b™width
 % 8 =ğ0 && f.
b™off£t
 == 0)

71  
	`FIELD_BYTE_ADDR
(
p
, 
f
);

74  
NULL
;

75 
	}
}

86 
	$add_to_št_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
¤c_v®
)

88 
ušt32_t
 
»s
 = 
	`exŒaù_štv®ue
(
p
, 
f
è+ 
¤c_v®
;

89 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
»s
);

90 
	}
}

93 
	$add_cÚ¡_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
) {

94 if(
f
.
by‹width
 <= 4) {

96 
ušt32_t
 
¤c_v®
 = 0;

97 
	`h¬dw¬e_d•_memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

98 
	`add_to_št_f›ld
(
p
, 
f
, 
¤c_v®
);

102 
	}
}

105 
	$modify_f›ld_to_cÚ¡32
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt32_t
 
v®
)

108 
ušt32_t
 
nv®
 = 
f
.
m‘a
 ? 
v®
 : 
	`htÚl
(val);

109 
ušt32_t
 
mask
 = 
f
.mask;

110 
ušt32_t
 
Ãwšt
 = (*(
	`FIELD_BYTE_ADDR
(
p
, 
f
))&~
mask
)|(
nv®
&(mask>>f.
b™off£t
))<<f.bitoffset;

111 
	`h¬dw¬e_d•_memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), &
Ãwšt
, f.
by‹width
);

112 
	}
}

115 
	$modify_f›ld_to_cÚ¡
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
)

117 if(
f
.
by‹width
 <= 4) {

118 
ušt32_t
 
¤c_v®
 = 0;

119 
	`h¬dw¬e_d•_memıy
(&
¤c_v®
, 
¤c
, 
¤ş’
);

120 
	`modify_f›ld_to_cÚ¡32
(
p
, 
f
, 
¤c_v®
);

122 if(
f
.
by‹width
 =ğ
¤ş’
)

123 
	`h¬dw¬e_d•_memıy
(
	`FIELD_BYTE_ADDR
(
p
, 
f
), 
¤c
, 
¤ş’
);

126 
	}
}

129 
	$modify_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

131 if(
d¡f
.
by‹width
 =ğ
¤cf
.bytewidth)

132 
	`modify_f›ld_to_cÚ¡
(
p
, 
d¡f
, 
	`FIELD_BYTE_ADDR
Õ, 
¤cf
), srcf.
by‹width
);

135 
	}
}

138 
	$add_f›lds
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf1
, f›ld_»ã»nû_ˆ
¤cf2
) {

139 if(
d¡f
.
by‹width
 <= 4) {

140 
ušt32_t
 
v®
 = 
	`exŒaù_štv®ue
(
p
, 
¤cf1
è+ƒxŒaù_štv®ueÕ, 
¤cf2
);

141 
	`modify_f›ld_to_cÚ¡32
(
p
, 
d¡f
, 
v®
);

145 
	}
}

148 
	$add_f›ld_to_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
)

150 
	`add_f›lds
(
p
, 
d¡f
, d¡f, 
¤cf
);

151 
	}
}

153 
	$no_İ
()

155 
	}
}

	@src/hardware_dep/spider/data_plane/spider_primitives.c

1 
	~"sh¬ed_´im™ives.c
"

2 
	~"back’d.h
"

3 
	~"d©­ÏÃ.h
"

5 
	~<¡ršg.h
>

7 
	~"efs_fg.h
"

8 
	~"efs_fg.c
"

9 
	~"ich_™mh_fg.h
"

10 
	~"¡ddef.h
"

11 
	~"çbl_­i.h
"

12 
	~"•p_rbŒ“.h
"

13 
	~"efs_Í.h
"

14 
	~"©Œ.h
"

15 
	~"pkthdr_uts_fg.h
"

16 
	~"modlog_•p.h
"

17 
	~"defšes.h
"

18 
	~"ich_™mh_fg.h
"

19 
	~"ssc_rbos_çbl_ty³s.h
"

20 
	~"¥ad_uts.h
"

21 
	~"efs.c
"

24 
	$memÜy_´•’d
(* 
p
, 
ušt8_t
 
size
)

26  
	`pkthdr_’ÿp
(
size
);

27 
	}
}

30 
	$memÜy_adj
(* 
p
, 
ušt8_t
 
size
)

32 
	`pkthdr_deÿp
(
size
);

33 
	}
}

36 
	$h¬dw¬e_d•_memıy
(* 
d¡
, * 
¤c
, 
ušt8_t
 
size
){

37 
	`¥ad_cİy
(
d¡
, 
¤c
, 
size
);

38 
	`pkthdr_m¬k_dœty
(
d¡
, 
size
);

39 
	}
}

42 
	$g’”©e_dige¡
(
back’d
 
bg
, * 
Çme
, 
»ûiv”
, 
ty³_f›ld_li¡
* 
dige¡_f›ld_li¡
)

45 
	}
}

47 
	$cİy_h—d”
(
·ck‘
* 
p1
,…ack‘* 
p2
, 
h—d”_idx
 
h1
, h—d”_idx 
h2
, 
Ëngth
 
l
)

49 
	`¥ad_cİy
(
h1
, (
ušt8_t
 *è
h2
, 
l
);

50 
	}
}

52 
	$drİ
(
·ck‘
* 
p
)

54 
	`·ck‘_drİ
(
PACKET_DROP_REASON_DEFAULT
, 
PACKET_DROP_TYPE_DEFAULT
);

55 
	}
}

	@src/hardware_dep/spider/data_plane/spider_tables.c

1 
	~"¥id”_bËs.h
"

2 
	~"../../sh¬ed/d©a_¶ªe/sh¬ed_bËs.c
"

4 
	~"back’d.h
"

5 
	~"d©­ÏÃ.h
"

7 
	~"‹º¬y_Çive.h
"

8 
	~"efs_fg.h
"

9 
	~"efs_fg.c
"

10 
	~"ich_™mh_fg.h
"

11 
	~"¡ddef.h
"

12 
	~"çbl_­i.h
"

13 
	~"•p_rbŒ“.h
"

14 
	~"efs_Í.h
"

15 
	~"©Œ.h
"

16 
	~"pkthdr_uts_fg.h
"

17 
	~"modlog_•p.h
"

18 
	~"defšes.h
"

19 
	~"ich_™mh_fg.h
"

20 
	~"ssc_rbos_çbl_ty³s.h
"

21 
	~"¥ad_uts.h
"

22 
	~"efs.c
"

23 
	~"©Œ.h
"

24 
	~"_commÚ.h
"

25 
	~"_rou‹.h
"

26 
	~"fib/fib_bË_commÚ.h
"

27 
	~"fib/fib_bË_©Œ.h
"

28 
	~"fib/fib_bË.h
"

29 
	~"fib/fib_»suÉ.h
"

31 
	#FIB_ID_STRIDE_1_LENGTH
 (5)

	)

32 
	#FIB_ID_STRIDE_2_LENGTH
 (
FIB_ID_SIZE
 - 
FIB_ID_STRIDE_1_LENGTH
)

	)

35 
	$_rou‹_»suÉ_d”eã»nû
 (
fib_»asÚ_t
 
»asÚ
 
UNUSED
,

36 
fib_bË_ty³_t
 
bË_ty³
 
UNUSED
,

37 *
ş›Á_d©a
)

40 
fib_»suÉ_cÚŒŞ_t
 *
»suÉ
 = (fib_»suÉ_cÚŒŞ_ˆ*è
ş›Á_d©a
;

42 ià(
»suÉ
) {

43 
	`fib_»suÉ_cÚŒŞ_d”eã»nû
(
»suÉ
);

45 
	}
}

47 
fib_bË_©Œ_t
 
	gfib_bË_v4_©Œ
 = {

48 .
bË_ty³
 = 
FIB_TABLE_TYPE_IPV4
,

49 .
	glookup_ty³
 = 
FIB_TABLE_LOOKUP_LPM
,

50 .
	gturbo_¡rides
 = 3,

51 .
	gsu³rç¡_¡rides
 = 3,

52 .
	gmax_¡rides
 = 6,

53 .
	g¡ride_Ëngths
 = {
FIB_ID_STRIDE_1_LENGTH
, 
FIB_ID_STRIDE_2_LENGTH
,

55 .
	gmax_key_f›ld
 = 2,

56 .
	gkey_f›ld
 =

57 {{
PROV_FIB_ID_START
, 
LKUP_FIB_ID_START
, 
FIB_ID_SIZE
},

58 {
PROV_IP_DST_ADDR_START
, 
LKUP_IP_DST_ADDR_START
,

59 
FIB_IPV4_ADDR_KEYBIT_SIZE
}},

60 .
	gËaf_size
 = 
FIB_SLE_LEAF_SIZE
,

61 .
	gb©ch_ms
 = 100,

62 .
	gb©ch_cßËsû_couÁ_max
 = 10,

63 .
	gb©ch_cßËsû_th»shŞd_mes§ges
 = 3000,

64 .
	gd”ef_func
 = 
_rou‹_»suÉ_d”eã»nû
,

65 .
	gbË_desütiÚ
 = "Fib IPv4 sleable",

68 
fib_bË_©Œ_t
 
	gfib_bË_v6_©Œ
 = {

69 .
bË_ty³
 = 
FIB_TABLE_TYPE_IPV6
,

70 .
	glookup_ty³
 = 
FIB_TABLE_LOOKUP_LPM
,

71 .
	gturbo_¡rides
 = 4,

72 .
	gsu³rç¡_¡rides
 = 2,

73 .
	gmax_¡rides
 = 16,

74 .
	g¡ride_Ëngths
 = {
FIB_ID_STRIDE_1_LENGTH
, 
FIB_ID_STRIDE_2_LENGTH
,

76 .
	gmax_key_f›ld
 = 2,

77 .
	gkey_f›ld
 =

78 {{
PROV_FIB_ID_START
, 
LKUP_FIB_ID_START
, 
FIB_ID_SIZE
},

79 {
PROV_IP_DST_ADDR_START
, 
LKUP_IPV6_DST_ADDR_START
,

80 
FIB_IPV6_ADDR_KEYBIT_SIZE
}},

81 .
	gËaf_size
 = 
FIB_SLE_LEAF_SIZE
,

82 .
	gb©ch_ms
 = 100,

83 .
	gb©ch_cßËsû_couÁ_max
 = 10,

84 .
	gb©ch_cßËsû_th»shŞd_mes§ges
 = 3000,

85 .
	gd”ef_func
 = 
_rou‹_»suÉ_d”eã»nû
,

86 .
	gbË_desütiÚ
 = "Fib IPv6 sleable",

90 
	$bË_ü—‹
(
lookup_bË_t
* 
t
, 
sock‘id
)

92 
Çme
[64];

94 
t
->
ty³
)

96 
LOOKUP_EXACT
:

97 
	`¢´štf
(
Çme
, Òame), "%s_exaù_%d", 
t
->Çme, 
sock‘id
);

98 
¦e_hash_bË_cÚfig_t
 
cÚfig
;

99 
cÚfig
.
hash_func_id
 = 
SLE_HASH_CRC32_IEEE_802_3
;

100 
cÚfig
.
hash_size
 = 15;

101 
cÚfig
.
max_key_size
 = 50;

102 
cÚfig
.
d©a_size
 = 64;

103 
cÚfig
.
disüim_Ëaf
 = 
¦e_½c_64b_Ëaf_t_DISCRIM_–em_šfo
;

104 
cÚfig
.
num_turbo_Ëv–s
 = 1;

105 
cÚfig
.
num_su³rç¡_Ëv–s
 = 2;

106 
cÚfig
.
key_is_šlše
 = 
TRUE
;

107 
bË_hash
 
h
 = 
	`¦e_hash_ü—‹_bË
(&
cÚfig
);

108 
	`ü—‹_ext_bË
(
t
, 
h
);

110 
LOOKUP_LPM
:

111 
	`¢´štf
(
Çme
, Òame), "%s_Ím_%d", 
t
->Çme, 
sock‘id
);

112 
fib_bË_¦e_cÚfig_t
 *
¦e_cÚfig
;

113 
fib_bË_¦e_image_t
 *
¦e_image
;

114 if(
t
->
key_size
 <= 32)

116 
	`fib_bË_ü—‹
 (
sock‘id
, 
EPP_OFA_TABLE_LPM_IPV4
);

117 
¹e_Ím
* 
l
 = 
	`fib_bË_g‘
(
sock‘id
, 
EPP_OFA_TABLE_LPM_IPV4
);

118 
	`fib_bË_¦e_cÚfig
(
¦e_cÚfig
, 
fib_bË_v4_©Œ
);

119 
	`fib_bË_¦e_image
(
¦e_image
,
¦e_cÚfig
,
sock‘id
, 
fib_bË_v4_©Œ
);

122 
	`ü—‹_ext_bË
(
t
, 
l
);

125 if(
t
->
key_size
 <= 128)

127 
	`fib_bË_ü—‹
 (
sock‘id
, 
EPP_OFA_TABLE_LPM_IPV6
);

128 
¹e_Ím
* 
l
 = 
	`fib_bË_g‘
(
sock‘id
, 
EPP_OFA_TABLE_LPM_IPV6
);

129 
	`fib_bË_¦e_cÚfig
(
¦e_cÚfig
, 
fib_bË_v6_©Œ
);

130 
	`fib_bË_¦e_image
(
¦e_image
,
¦e_cÚfig
,
sock‘id
, 
fib_bË_v6_©Œ
);

131 
	`ü—‹_ext_bË
(
t
, 
l
);

136 
LOOKUP_TERNARY
:

139 
	`´štf
("C»©edabË oàty³ %d oÀsock‘ %d\n", 
t
->
ty³
, 
sock‘id
);

140 
	}
}

146 
	$bË_£tdeçuÉ
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
v®ue
)

148 
t
->
deçuÉ_v®
 = 
	`cİy
(
v®ue
,->
v®_size
);

149 
	}
}

155 
	$exaù_add
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
)

157 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

159 
¦e_Ëaf_t
 
–em_šfo
;

160 
	`memıy
(
–em_šfo
, 
v®ue
, (
¦e_32b_Ëaf_t
));

161 
	`¦e_hash_š£¹_–em
 (
t
->
bË
, 
key
,->
key_size
, 
–em_šfo
);

163 
	}
}

166 
	$Ím_add
Ğ
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
)

168 
ex‹nded_bË_t
* 
ext
 = (ex‹nded_bË_t*)
t
->
bË
;

169 
fib_»suÉ_cÚŒŞ_t
 *
»suÉ_’t™y
 = (fib_»suÉ_cÚŒŞ_ˆ*)
v®ue
;

171 if(
t
->
key_size
 <= 32)

173 
	`fib_´efix_add_»suÉ
 (
sock‘_id
, 
EPP_OFA_TABLE_LPM_IPV4
, 
key
, 
d•th
, 
»suÉ_’t™y
);

176 if(
t
->
key_size
 <= 128)

178 
	`fib_´efix_add_»suÉ
(
sock‘_id
, 
EPP_OFA_TABLE_LPM_IPV6
, 
key
, 
d•th
, 
»suÉ_’t™y
);

180 
	}
}

186 
ušt8_t
*

187 
	$exaù_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

190 
¦e_hash_node_¬¿y_obj_t
 *
Ëaf_¬¿ys
;

191 
¦e_hash_–em_t
 *
h–em
;

192 
¦e_hash_buck‘_t
 *
buck‘
;

193 
ušt32_t
 
Ëaf_idx
;

194 
»suÉ_t
 
rc
;

195 
rc
 = 
	`¦e_hash_fšd_loÿ‹_–em
(
t
->
bË
, 
key
,->
key_size
, &
Ëaf_¬¿ys
, &
Ëaf_idx
, &
buck‘
, &
h–em
, 
TRUE
);

196  
h–em
->
–em_šfo
;

197 
	}
}

199 
ušt8_t
*

200 
	$Ím_lookup
(
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
)

202  
fib_¦e_bË_fwd_t
 *
¥_¦e_bË
 = 
	`__µa_®locs
((fib_¦e_bË_fwd_t), 
FIB_SLE_TABLE_FWD_ALIGN
);

203 
	`fib_¦e_bË_ãtch
(
¥_¦e_bË
, 
t
->
bË
);

204 
	`fib_ÿched_bË_lookup_begš
(
¥_¦e_bË
, 
key
, 
t
->
key_size
);

205 
¦e_lookup_»suÉ_t
 *
¦e_lookup_»suÉ
;

206 
	`¦e_bË_lookup_g‘_»suÉ_32
(
¦e_lookup_»suÉ
);

207  
¦e_lookup_»suÉ
->
u
.
d©a_32
;

208 
	}
}

	@src/hardware_dep/spider/data_plane/ternary_naive.c

1 
	~"‹º¬y_Çive.h
"

3 
‹º¬y_bË
*

4 
	$Çive_‹º¬y_ü—‹
(
ušt8_t
 
keyËn
, ušt8_ˆ
max_size
)

6 
‹º¬y_bË
* 
t
 = 
	`m®loc
((ternary_table));

7 
t
->
’Œ›s
 = 
	`m®loc
((
‹º¬y_’Œy
)*
max_size
);

8 
t
->
keyËn
 = keylen;

9 
t
->
size
 = 0;

10  
t
;

11 
	}
}

14 
	$Çive_‹º¬y_de¡roy
(
‹º¬y_bË
* 
t
)

17 
	`ä“
(
t
->
’Œ›s
);

18 
	`ä“
(
t
);

19 
	}
}

22 
	$Çive_‹º¬y_add
(
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
)

24 
‹º¬y_’Œy
* 
e
 = 
	`m®loc
((ternary_entry));

25 
e
->
key
 = 
	`m®loc
(
t
->
keyËn
);

26 
e
->
mask
 = 
	`m®loc
(
t
->
keyËn
);

27 
	`memıy
(
e
->
key
, key, 
t
->
keyËn
);

28 
	`memıy
(
e
->
mask
, mask, 
t
->
keyËn
);

29 
e
->
v®ue
 = value;

30 
t
->
’Œ›s
[t->
size
++] = 
e
;

31 
	}
}

33 
ušt8_t
*

34 
	$Çive_‹º¬y_lookup
(
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
)

36 
i
, 
j
, 
m©ch
=1;

37 
‹º¬y_’Œy
* 
e
;

38 
‹º¬y_’Œy
* 
»s
 = 
NULL
;

39 
i
 = 0; i < 
t
->
size
; i++)

41 
e
 = 
t
->
’Œ›s
[
i
];

43 
m©ch
 = 1;

44 
j
 = 0; j < 
t
->
keyËn
; j++) {

45 if(
e
->
key
[
j
] !ğ(key[j] &ƒ->
mask
[j])) {

46 
m©ch
 = 0;

50 if(
m©ch
è
»s
 = 
e
;

52  
m©ch
 ? 
»s
->
v®ue
 : 
NULL
;

53 
	}
}

	@src/hardware_dep/spider/handle_packet.c

1 
	~"¥id”_bËs.h
"

2 
	~"back’d.h
"

4 
	$hªdË_·ck‘
()

8 
	}
}

	@src/hardware_dep/spider/includes/aliases.h

1 #iâdeà
__ALIASES_H_


2 
	#__ALIASES_H_


	)

4 
	~<š‰y³s.h
>

6 
¹e_mbuf
 
	t·ck‘
;

7 
lcÜe_cÚf
 
	tcÚfigu¿tiÚ
;

9 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

12 
f›ld_ty³_e
 
	tf›ld_ty³_t
;

15 
ušt8_t
 
	th—d”_idx
;

16 
ušt8_t
 
	tf›ld
;

17 
ušt16_t
 
	tËngth
;

22 
·ck‘_desütÜ_s
 
	t·ck‘_desütÜ_t
;

23 
h—d”_desütÜ_s
 
	th—d”_desütÜ_t
;

25 
h—d”_»ã»nû_s
 
	th—d”_»ã»nû_t
;

26 
f›ld_»ã»nû_s
 
	tf›ld_»ã»nû_t
;

	@src/hardware_dep/spider/includes/backend.h

1 #iâdeà
__BACKEND_H_


2 
	#__BACKEND_H_


	)

4 
	~"®Ÿ£s.h
"

5 
	~"ù¾_¶ªe_back’d.h
"

6 
	~"d©a_¶ªe_d©a.h
"

11 
ušt8_t
 
š™Ÿlize
 (
¬gc
, **
¬gv
);

12 
Ïunch
 ();

17 
lookup_bË_s
 
	tlookup_bË_t
;

19 
bË_ü—‹
 (
lookup_bË_t
* 
t
, 
sock‘id
);

21 
bË_£tdeçuÉ
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
v®ue
);

23 
exaù_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
);

24 
Ím_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
);

25 
‹º¬y_add
 (
lookup_bË_t
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

27 
ušt8_t
* 
exaù_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

28 
ušt8_t
* 
Ím_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

29 
ušt8_t
* 
‹º¬y_lookup
 (
lookup_bË_t
* 
t
, ušt8_t* 
key
);

34 
·ck‘_desütÜ_s
 
	t·ck‘_desütÜ_t
;

35 
h—d”_desütÜ_s
 
	th—d”_desütÜ_t
;

37 
h—d”_»ã»nû_s
 
	th—d”_»ã»nû_t
;

38 
f›ld_»ã»nû_s
 
	tf›ld_»ã»nû_t
;

43 
add_h—d”
 (
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
);

44 
»move_h—d”
 (
·ck‘_desütÜ_t
* 
p
, 
h—d”_»ã»nû_t
 
h
);

47 
modify_f›ld_to_cÚ¡
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
);

48 
modify_f›ld_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
);

51 
add_cÚ¡_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
, 
ušt8_t
 *
¤c
, 
¤ş’
);

52 
add_f›ld_to_f›ld
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf
);

55 
add_f›lds
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
d¡f
, f›ld_»ã»nû_ˆ
¤cf1
, f›ld_»ã»nû_ˆ
¤cf2
);

60 
ušt32_t
 
exŒaù_štv®ue
 (
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
);

68 
modify_f›ld
 (
·ck‘
* 
p
, 
f›ld
 
f
, 
Ëngth
 
l
, * 
v®ue
, 
modify_Ëngth
);

69 
modify_f›ld_w™h_mask
 (
·ck‘
* 
p
, 
f›ld
 
f
, * 
v®ue
, * 
mask
, 
modify_Ëngth
);

70 
modify_f›ld_cÚ¡_lÚg
(
·ck‘
* 
p
, 
f›ld
 
f
, 
Ëngth
 
l
, 
v®ue
, 
modify_Ëngth
);

71 
add_to_f›ld
 (
·ck‘
* 
p
, 
f›ld
* 
f
, * 
v®ue
);

72 
add
 (
·ck‘
* 
p
, 
f›ld
* 
f
, * 
v®ue1
, * 
v®ue2
);

73 
£t_f›ld_to_hash_šdex
(
·ck‘
* 
p
, 
f›ld
* 
f
, f›ld* 
æc
, 
ba£
, 
size
);

74 
Œunÿ‹_pkg
 (
·ck‘
* 
p
, 
Ëngth
);

75 
drİ
 (
·ck‘
* 
p
);

76 
no_İ
 ();

77 
push
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
);

78 
push_n
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
, 
couÁ
);

79 
pİ
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
);

80 
pİ_n
 (
·ck‘
* 
p
, 
h—d”_idx
* 
hdr_¬¿y
, 
couÁ
);

83 
g’”©e_dige¡
 (
back’d
 
bg
, * 
Çme
, 
»ûiv”
, 
ty³_f›ld_li¡
* 
dige¡_f›ld_li¡
);

	@src/hardware_dep/spider/includes/dataplane.h

1 #iâdeà
DATAPLANE_H


2 
	#DATAPLANE_H


	)

4 
	~<š‰y³s.h
>

5 
	~"®Ÿ£s.h
"

6 
	~"·r£r.h
"

7 
	~"d©a_¶ªe_d©a.h
"

9 
	#LOOKUP_EXACT
 0

	)

10 
	#LOOKUP_LPM
 1

	)

11 
	#LOOKUP_TERNARY
 2

	)

13 
	slookup_bË_s
 {

14 * 
	mÇme
;

15 
ušt8_t
 
	mty³
;

16 
ušt8_t
 
	mkey_size
;

17 
ušt8_t
 
	mv®_size
;

18 
ušt8_t
 
	mmš_size
;

19 
ušt8_t
 
	mmax_size
;

20 * 
	mdeçuÉ_v®
;

21 * 
	mbË
;

22 } 
	tlookup_bË_t
;

26 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

27 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

28 
f›ld_š¡ªû_e
 
	tf›ld_š¡ªû_t
;

31 
	sf›ld_»ã»nû_s
 {

32 
h—d”_š¡ªû_t
 
	mh—d”
;

33 
	mm‘a
;

34 
	mb™width
;

35 
	mby‹width
;

36 
	mb™off£t
;

37 
	mby‹off£t
;

38 } 
	tf›ld_»ã»nû_t
;

40 
	sh—d”_»ã»nû_s
 {

41 
h—d”_š¡ªû_t
 
	mh—d”_š¡ªû
;

42 
	mby‹width
;

43 } 
	th—d”_»ã»nû_t
;

45 
	#f›ld_desc
(
f
è(
f›ld_»ã»nû_t
) \

47 .
h—d”
 = 
f›ld_š¡ªû_h—d”
[
f
], \

48 .
m‘a
 = 
h—d”_š¡ªû_is_m‘ad©a
[
f›ld_š¡ªû_h—d”
[
f
]], \

49 .
b™width
 = 
f›ld_š¡ªû_b™_width
[
f
], \

50 .
by‹width
 = (
f›ld_š¡ªû_b™_width
[
f
]+7)/8, \

51 .
b™off£t
 = 
f›ld_š¡ªû_b™_off£t
[
f
], \

52 .
by‹off£t
 = 
f›ld_š¡ªû_by‹_off£t_hdr
[
f
] \

53 }

	)

55 
	#h—d”_desc
(
h
è(
h—d”_»ã»nû_t
) \

57 .
h—d”_š¡ªû
 = 
h
, \

58 .
by‹width
 = 
h—d”_š¡ªû_by‹_width
[
h
], \

59 }

	)

61 
	sh—d”_desütÜ_s
 {

62 
h—d”_š¡ªû_t
 
	mty³
;

63 * 
	mpoš‹r
;

64 
ušt32_t
 
	mËngth
;

65 } 
	th—d”_desütÜ_t
;

67 
	s·ck‘_desütÜ_s
 {

68 * 
	mpoš‹r
;

69 
h—d”_desütÜ_t
 
	mh—d”s
[
HEADER_INSTANCE_COUNT
+1];

70 } 
	t·ck‘_desütÜ_t
;

75 
lookup_bË_t
 
bË_cÚfig
[];

77 
hªdË_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘
, 
lookup_bË_t
** 
bËs
);

	@src/hardware_dep/spider/includes/spider_tables.h

1 #iâdeà
SPIDER_TABLES_H


2 
	#SPIDER_TABLES_H


	)

4 
	sex‹nded_bË_s
 {

5 * 
	m¹e_bË
;

6 
ušt8_t
 
	msize
;

7 
ušt8_t
 
	mkey_size
;

8 
ušt8_t
** 
	mcÚ‹Á
;

9 } 
	tex‹nded_bË_t
;

	@src/hardware_dep/spider/includes/standard_metadata.h

4 
	s¡ªd¬d_m‘ad©a_t
 {

5 
	mšg»ss_pÜt
;

6 
	meg»ss_pÜt
;

8 
	meg»ss_¥ec
;

	@src/hardware_dep/spider/includes/ternary_naive.h

1 #iâdeà
TERNARY_NAIVE_H


2 
	#TERNARY_NAIVE_H


	)

4 
	~<š‰y³s.h
>

5 
	~<¡dlib.h
>

6 
	~<¡ršg.h
>

9 
ušt8_t
* 
	mmask
;

10 
ušt8_t
* 
	mkey
;

11 
ušt8_t
* 
	mv®ue
;

12 } 
	t‹º¬y_’Œy
;

15 ** 
	m’Œ›s
;

16 
ušt8_t
 
	mkeyËn
;

17 
ušt8_t
 
	msize
;

18 } 
	t‹º¬y_bË
;

20 
‹º¬y_bË
* 
Çive_‹º¬y_ü—‹
 (
ušt8_t
 
keyËn
, ušt8_ˆ
max_size
);

21 
Çive_‹º¬y_de¡roy
(
‹º¬y_bË
* 
t
);

22 
Çive_‹º¬y_add
 (
‹º¬y_bË
* 
t
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

23 
ušt8_t
* 
Çive_‹º¬y_lookup
 (
‹º¬y_bË
* 
t
, ušt8_t* 
key
);

	@tests/dpdk_actions+tables/action_info.h

1 #iâdeà
__ACTION_INFO_H__


2 
	#__ACTION_INFO_H__


	)

4 
	eaùiÚs
 {

5 
	maùiÚ_®ma
,

6 
	maùiÚ_kÜ‹
,

9 
	saùiÚ_®ma_·¿ms
 {

10 
	mi1
;

13 
	saùiÚ_kÜ‹_·¿ms
 {

14 
	mi1
;

15 
	mi2
;

16 
	mi3
;

19 
	sbË1_aùiÚ
 {

20 
	maùiÚ_id
;

22 
aùiÚ_®ma_·¿ms
 
	m®ma_·¿ms
;

23 
aùiÚ_kÜ‹_·¿ms
 
	mkÜ‹_·¿ms
;

	@tests/dpdk_actions+tables/ctrl_plane.c

1 
	~"dpdk_lib.h
"

2 
	~"aùiÚ_šfo.h
"

4 
bË_£tdeçuÉ_´omÙe
 (
bËid
, 
ušt8_t
* 
v®ue
);

5 
exaù_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
);

6 
Ím_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
);

7 
‹º¬y_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

13 
	$bË1_add
(
ušt8_t
 
f›ld1
[4], ušt8_ˆ
f›ld1_´efix_Ëngth
, 
bË1_aùiÚ
 
aùiÚ
)

15 
ušt8_t
 
´efix_Ëngth
 = 
f›ld1_´efix_Ëngth
;

16 
	`Ím_add_´omÙe
(
TABLE1
, (
ušt8_t
*)
f›ld1
, 
´efix_Ëngth
, (ušt8_t*)&
aùiÚ
);

17 
	}
}

22 
	$bË1_add_bË_’Œy
(
p4_ù¾_msg
* 
ù¾_m
)

24 
ušt8_t
* 
f›ld1
 = (ušt8_t*)(((
p4_f›ld_m©ch_Ím
*)
ù¾_m
->
f›ld_m©ches
[0])->
b™m­
);

25 
ušt16_t
 
f›ld1_´efix_Ëngth
 = ((
p4_f›ld_m©ch_Ím
*)
ù¾_m
->
f›ld_m©ches
[0])->
´efix_Ëngth
;

26 ià(
	`¡rcmp
("kÜ‹", 
ù¾_m
->
aùiÚ_Çme
)==0)

28 
ušt8_t
* 
­1
 = (ušt8_t*)((
p4_aùiÚ_·¿m‘”
*)
ù¾_m
->
aùiÚ_·¿ms
[0])->
b™m­
;

29 
ušt8_t
* 
­2
 = (ušt8_t*)((
p4_aùiÚ_·¿m‘”
*)
ù¾_m
->
aùiÚ_·¿ms
[1])->
b™m­
;

30 
ušt8_t
* 
­3
 = (ušt8_t*)((
p4_aùiÚ_·¿m‘”
*)
ù¾_m
->
aùiÚ_·¿ms
[2])->
b™m­
;

31 
bË1_aùiÚ
 
aùiÚ
;

32 
aùiÚ
.
aùiÚ_id
 = 
aùiÚ_kÜ‹
;

33 
aùiÚ
.
kÜ‹_·¿ms
 = (
aùiÚ_kÜ‹_·¿ms
){*
­1
, *
­2
, *
­3
};

34 
	`bË1_add
(
f›ld1
, (
ušt8_t
)
f›ld1_´efix_Ëngth
, 
aùiÚ
);

36 
	}
}

38 
	$»cv_äom_cÚŒŞËr
(
p4_ù¾_msg
* 
ù¾_m
)

40 ià(
ù¾_m
->
ty³
 =ğ
P4T_ADD_TABLE_ENTRY
) {

41 ià(
	`¡rcmp
("bË1", 
ù¾_m
->
bË_Çme
) == 0)

42 
	`bË1_add_bË_’Œy
(
ù¾_m
);

44 
	}
}

46 
back’d
 
	gbg
;

48 
	$š™_cÚŒŞ_¶ªe
()

50 
	`´štf
("Creating control…lane connection...\n");

51 
bg
 = 
	`ü—‹_back’d
(3, 1000, "loÿlho¡", 11111, 
»cv_äom_cÚŒŞËr
);

52 
	`Ïunch_back’d
(
bg
);

53 
	}
}

	@tests/dpdk_actions+tables/data_plane.c

1 
	~"dpdk_lib.h
"

2 
	~"aùiÚ_šfo.h
"

4 
·r£_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘_desc
);

6 
ušt8_t
* 
	$bË1_lookup
(
lookup_bË_t
** 
bËs
, 
ušt8_t
 
f›ld1
[4])

8  
	`Ím_lookup
(
bËs
[
TABLE1
], (
ušt8_t
*)
f›ld1
);

9 
	}
}

11 
	$aùiÚ_code_®ma
(
·ck‘_desütÜ_t
* 
·ck‘
, 
lookup_bË_t
** 
bËs
, 
aùiÚ_®ma_·¿ms
 
·¿ms
)

13 
	`´štf
("### RUNNING ACTION‡lma...\n");

14 
v®
 = 55;

15 
	`modify_f›ld_to_cÚ¡
(
·ck‘
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
), &
v®
, 4);

16 
	}
}

18 
	$aùiÚ_code_kÜ‹
(
·ck‘_desütÜ_t
* 
·ck‘
, 
lookup_bË_t
** 
bËs
, 
aùiÚ_kÜ‹_·¿ms
 
·¿ms
)

20 
	`´štf
("### RUNNING ACTION kÜ‹ w™h…¬am (%d, %d, %d)...\n", 
·¿ms
.
i1
,…¬ams.
i2
,…¬ams.
i3
);

21 
v®
 = 
·¿ms
.
i3
;

23 
	`modify_f›ld_to_cÚ¡
(
·ck‘
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
), &
v®
, 4);

24 
	}
}

26 
	$bË1
(
·ck‘_desütÜ_t
* 
·ck‘
, 
lookup_bË_t
** 
bËs
) {

28 
ušt32_t
 

 = 
	`exŒaù_štv®ue
(
·ck‘
, 
	`f›ld_desc
(
f›ld_š¡ªû_v4_d¡Addr
));

30 
bË1_aùiÚ
* 
»s
 = (bË1_aùiÚ*)
	`bË1_lookup
(
bËs
, (
ušt8_t
*)&

);

31 if(
»s
 =ğ
NULL
) {

32 
	`´štf
("### NO RESULT, NO DEFAULT ACTION, IGNORING PACKET...\n");

35 
»s
->
aùiÚ_id
) {

36 
aùiÚ_kÜ‹
:

37 
	`aùiÚ_code_kÜ‹
(
·ck‘
, 
bËs
, 
»s
->
kÜ‹_·¿ms
);

39 
aùiÚ_®ma
:

40 
	`aùiÚ_code_®ma
(
·ck‘
, 
bËs
, 
»s
->
®ma_·¿ms
);

44 
	}
}

46 
	$´št
(
ušt32_t
 

) {

47 
a
 = (

 & 0xff000000) >> 24;

48 
b
 = (

 & 0x00ff0000) >> 16;

49 
c
 = (

 & 0x0000ff00) >> 8;

50 
d
 = 

 & 0x000000ff;

51 
	`´štf
("%d.%d.%d.%d", 
a
, 
b
, 
c
, 
d
);

52 
	}
}

54 
	$hªdË_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘
, 
lookup_bË_t
** 
bËs
) {

56 
	`·r£_·ck‘
(
·ck‘
);

58 
	`´štf
("\n\n### HANDLING PACKET...\n");

59 
	`´štf
(" ipv4 d¡addr: %" 
PRIx32
 ",h© i ", 
	`exŒaù_štv®ue
(
·ck‘
, 
	`f›ld_desc
(
f›ld_š¡ªû_v4_d¡Addr
)));

60 
	`´št
(
	`exŒaù_štv®ue
(
·ck‘
, 
	`f›ld_desc
(
f›ld_š¡ªû_v4_d¡Addr
)));

61 
	`´štf
("\n");

63 
	`bË1
(
·ck‘
, 
bËs
);

64 
	}
}

	@tests/dpdk_actions+tables/data_plane_data.h

1 #iâdeà
__DATA_PLANE_DATA_H__


2 
	#__DATA_PLANE_DATA_H__


	)

4 
	~"h—d”_šfo.h
"

6 
	#TABLE1
 0

	)

7 
	#NB_TABLES
 1

	)

	@tests/dpdk_actions+tables/header_info.h

1 #iâdeà
__HEADER_INFO_H__


2 
	#__HEADER_INFO_H__


	)

4 
	#HEADER_INSTANCE_COUNT
 2+2

	)

5 
	#FIELD_INSTANCE_COUNT
 15+9

	)

7 
	eh—d”_š¡ªû_e
 {

8 
	mh—d”_š¡ªû_NONE
,

10 
	mh—d”_š¡ªû_‘h”Ãt
,

11 
	mh—d”_š¡ªû_v4
,

12 
	mh—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

13 
	mh—d”_š¡ªû_COUNT


16 
	ef›ld_š¡ªû_e
 {

17 
	mf›ld_š¡ªû_NONE
,

19 
	mf›ld_š¡ªû_‘h”Ãt_d¡Addr
,

20 
	mf›ld_š¡ªû_‘h”Ãt_¤cAddr
,

21 
	mf›ld_š¡ªû_‘h”Ãt_‘h”Ty³
,

22 
	mf›ld_š¡ªû_v4_v”siÚ
,

23 
	mf›ld_š¡ªû_v4_ihl
,

24 
	mf›ld_š¡ªû_v4_diff£rv
,

25 
	mf›ld_š¡ªû_v4_tÙ®L’
,

26 
	mf›ld_š¡ªû_v4_id’tifiÿtiÚ
,

27 
	mf›ld_š¡ªû_v4_æags
,

28 
	mf›ld_š¡ªû_v4_äagOff£t
,

29 
	mf›ld_š¡ªû_v4_‰l
,

30 
	mf›ld_š¡ªû_v4_´ÙocŞ
,

31 
	mf›ld_š¡ªû_v4_hdrChecksum
,

32 
	mf›ld_š¡ªû_v4_¤cAddr
,

33 
	mf›ld_š¡ªû_v4_d¡Addr
,

35 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
,

36 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_·ck‘_Ëngth
,

37 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_¥ec
,

38 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
,

39 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_š¡ªû
,

40 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_š¡ªû_ty³
,

41 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_şÚe_¥ec
,

42 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a__·ddšg
,

43 
	mf›ld_š¡ªû_COUNT


46 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

47 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

48 
f›ld_š¡ªû_e
 
	tf›ld_š¡ªû_t
;

50 cÚ¡ 
	gh—d”_š¡ªû_by‹_width
[
HEADER_INSTANCE_COUNT
 + 1] = {

58 cÚ¡ 
	gh—d”_š¡ªû_is_m‘ad©a
[
HEADER_INSTANCE_COUNT
 + 1] = {

68 cÚ¡ 
	gf›ld_š¡ªû_b™_width
[
FIELD_INSTANCE_COUNT
 + 1] = {

96 cÚ¡ 
	gf›ld_š¡ªû_b™_off£t
[
FIELD_INSTANCE_COUNT
 + 1] = {

124 cÚ¡ 
	gf›ld_š¡ªû_by‹_off£t_hdr
[
FIELD_INSTANCE_COUNT
 + 1] = {

152 cÚ¡ 
ušt32_t
 
	gf›ld_š¡ªû_mask
[
FIELD_INSTANCE_COUNT
 + 1] = {

180 cÚ¡ 
h—d”_š¡ªû_t
 
	gf›ld_š¡ªû_h—d”
[
FIELD_INSTANCE_COUNT
 + 1] = {

181 
h—d”_š¡ªû_NONE
,

182 
h—d”_š¡ªû_‘h”Ãt
,

183 
h—d”_š¡ªû_‘h”Ãt
,

184 
h—d”_š¡ªû_‘h”Ãt
,

185 
h—d”_š¡ªû_v4
,

186 
h—d”_š¡ªû_v4
,

187 
h—d”_š¡ªû_v4
,

188 
h—d”_š¡ªû_v4
,

189 
h—d”_š¡ªû_v4
,

190 
h—d”_š¡ªû_v4
,

191 
h—d”_š¡ªû_v4
,

192 
h—d”_š¡ªû_v4
,

193 
h—d”_š¡ªû_v4
,

194 
h—d”_š¡ªû_v4
,

195 
h—d”_š¡ªû_v4
,

196 
h—d”_š¡ªû_v4
,

197 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

198 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

199 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

200 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

201 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

202 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

203 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

204 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

205 
h—d”_š¡ªû_NONE


	@tests/dpdk_actions+tables/parser.c

1 
	~"dpdk_lib.h
"

4 
	$·r£_h—d”
(
ušt8_t
* 
bufãr
, 
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
h—d”_š¡ªû_t
 
h
)

6 
·ck‘_desc
->
h—d”s
[
h
] =

7 (
h—d”_desütÜ_t
) {

8 .
ty³
 = 
h
,

9 .
poš‹r
 = 
bufãr
,

10 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h
]

12 
	}
}

15 
	$·r£_·ck‘
(
·ck‘_desütÜ_t
* 
·ck‘_desc
)

17 
ušt8_t
* 
bufãr
 = 
·ck‘_desc
->
poš‹r
;

18 
	`·r£_h—d”
(
bufãr
, 
·ck‘_desc
, 
h—d”_š¡ªû_‘h”Ãt
);

19 
bufãr
 +ğ
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_‘h”Ãt
];

20 
	`·r£_h—d”
(
bufãr
, 
·ck‘_desc
, 
h—d”_š¡ªû_v4
);

21 
	}
}

	@tests/dpdk_actions+tables/parser.h

	@tests/dpdk_actions+tables/switch.c

1 
	~"dpdk_lib.h
"

2 
	~<uni¡d.h
>

4 
š™_cÚŒŞ_¶ªe
();

5 
Ïunch_dpdk
();

7 
	~"bË_šfo.h
"

9 
	#IPv4
(
a
,
b
,
c
,
d
è((
ušt32_t
)((×è& 0xffè<< 24è| (((bè& 0xffè<< 16è| (((cè& 0xffè<< 8è| ((dè& 0xff))

	)

11 
back’d
 
bg
;

14 
	$çke_dige¡
(
ušt16_t
 
´
, 
i3
)

16 
ušt32_t
 

 = 
	`IPv4
(65, 208, 228, 223);

17 
i1
 = 11;

18 
i2
 = 22;

20 
ty³_f›ld_li¡
 
f›lds
;

21 
f›lds
.
f›lds_quªt™y
 = 5;

22 
f›lds
.
f›ld_off£ts
 = 
	`m®loc
((
ušt8_t
*)*f›lds.
f›lds_quªt™y
);

23 
f›lds
.
f›ld_widths
 = 
	`m®loc
((
ušt8_t
*)*f›lds.
f›lds_quªt™y
);

25 
f›lds
.
f›ld_off£ts
[0] = (
ušt8_t
*)&

;

26 
f›lds
.
f›ld_off£ts
[1] = (
ušt8_t
*)&
´
;

27 
f›lds
.
f›ld_off£ts
[2] = (
ušt8_t
*)&
i1
;

28 
f›lds
.
f›ld_off£ts
[3] = (
ušt8_t
*)&
i2
;

29 
f›lds
.
f›ld_off£ts
[4] = (
ušt8_t
*)&
i3
;

30 
f›lds
.
f›ld_widths
[0] = (

)*8;

31 
f›lds
.
f›ld_widths
[1] = (
´
)*8;

32 
f›lds
.
f›ld_widths
[2] = ()*8;

33 
f›lds
.
f›ld_widths
[3] = ()*8;

34 
f›lds
.
f›ld_widths
[4] = ()*8;

36 
	`g’”©e_dige¡
(
bg
, "‹¡_Ë¬n_", 0, &
f›lds
);

37 
	}
}

39 
	$maš
(
¬gc
, ** 
¬gv
)

41 
	`´štf
("\n\n### HELLO DPDK SWITCH!\n\n");

42 
	`š™Ÿlize
(
¬gc
, 
¬gv
);

43 
	`´štf
("\n\n### Backend initialized.\n\n");

44 
	`š™_cÚŒŞ_¶ªe
();

45 
	`´štf
("\n\n### Control…lane initialized.\n\n");

46 
	`çke_dige¡
(32, 33);

47 
	`çke_dige¡
(24, 42);

48 
	`´štf
("### Waiting for fake digestso be‡pplied...\n");

49 
	`¦“p
(1);

50 
	`´štf
("\n\n### Control…lane filledheables.\n\n");

51  
	`Ïunch_dpdk
();

52 
	}
}

	@tests/dpdk_actions+tables/table_info.h

1 #iâdeà
__TABLE_INFO_H__


2 
	#__TABLE_INFO_H__


	)

4 
	~"d©­ÏÃ.h
"

5 
	~"aùiÚ_šfo.h
"

7 
lookup_bË_t
 
	gbË_cÚfig
[
NB_TABLES
] = {

9 .
Çme
 = "table1",

10 .
	gty³
 = 
LOOKUP_LPM
,

11 .
	gkey_size
 = 4,

12 .
	gv®_size
 = (
bË1_aùiÚ
),

13 .
	gmš_size
 = 0,

14 .
	gmax_size
 = 255

	@tests/dpdk_actions/actions.c

1 
	~"dpdk_lib.h
"

2 
	~<as£¹.h
>

4 
lookup_bË_t
 
	gbË_cÚfig
[] = {};

7 
	$·r£_h—d”
(
ušt8_t
* 
bufãr
, 
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
h—d”_š¡ªû_t
 
h
)

9 
·ck‘_desc
->
h—d”s
[
h
] =

10 (
h—d”_desütÜ_t
) {

11 .
ty³
 = 
h
,

12 .
poš‹r
 = 
bufãr
,

13 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h
]

15 
	}
}

17 
	$‹¡_·r£_·ck‘
(
ušt8_t
* 
bufãr
, 
Ën
, 
·ck‘_desütÜ_t
* 
·ck‘_desc
)

19 
·ck‘_desc
->
poš‹r
 = 
bufãr
;

20 
	`·r£_h—d”
(
bufãr
, 
·ck‘_desc
, 
h—d”_š¡ªû_wh©ev”
);

21 
bufãr
 += 4;

22 
	`·r£_h—d”
(
bufãr
, 
·ck‘_desc
, 
h—d”_š¡ªû_wh©ev”2
);

23 
	}
}

25 
	$pb
(
size_t
 cÚ¡ 
size
, cÚ¡ * cÚ¡ 
±r
){

26 *
b
 = (*è
±r
;

27 
by‹
;

28 
i
, 
j
;

29 
j
 = 
size
-1; j >= 0; j--) {

30 
i
 = 
j
/8;

31 
by‹
 = 
b
[
i
] & (1<<(
j
%8));

32 
by‹
 >>ğ(
j
%8);

33 
	`´štf
("%u", 
by‹
);

35 
	`puts
("");

36 
	}
}

37 
	$b
(
ušt32_t
 
v
){
	`pb
(32, &v);
	}
}

78 
	$eksÚ1
(
·ck‘_desütÜ_t
* 
p
, * 
aùiÚ_d©a
)

80 
	`´štf
("Hello DPDK!\n");

81 
	`modify_f›ld_to_cÚ¡
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld3
), (
ušt8_t
[]) {0x05,0x00}, 2);

82 
	`modify_f›ld_to_cÚ¡
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld4
), (
ušt8_t
[]) {0x09,0x00,0x00}, 3);

83 
	`add_cÚ¡_to_f›ld
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld3
), (
ušt8_t
[]) {0x09,0x00}, 2);

84 
	`add_cÚ¡_to_f›ld
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld4
), (
ušt8_t
[]) {0x09,0x00,0x00}, 3);

86 
	`add_f›ld_to_f›ld
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld3
), f›ld_desc(
f›ld_š¡ªû_wh©ev”2_f›ld4
));

87 
	`add_f›lds
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”_f›ld1
), f›ld_desc(
f›ld_š¡ªû_wh©ev”2_f›ld3
), f›ld_desc(
f›ld_š¡ªû_wh©ev”2_f›ld4
));

88 
	`modify_f›ld_to_f›ld
(
p
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”_f›ld2
), f›ld_desc(
f›ld_š¡ªû_wh©ev”_f›ld1
));

89 
	}
}

95 
¹e_mbuf
*

96 
	$çke_šcomšg_·ck‘
()

98 
¹e_mempoŞ
* 
mempoŞ
;

99 
mempoŞ
 = 
	`¹e_mempoŞ_ü—‹
("‹¡_mbuf_poŞ", ()1023, 
MBUF_SIZE
, 
MEMPOOL_CACHE_SIZE
, (
¹e_pktmbuf_poŞ_´iv©e
), 
¹e_pktmbuf_poŞ_š™
, 
NULL
, 
¹e_pktmbuf_š™
, NULL, 0, 0);

100 
¹e_mbuf
 *
p
 = 
NULL
;

101 
p
 = 
	`¹e_pktmbuf_®loc
(
mempoŞ
);

102 * 
wh©ev”2
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

103 
	`memıy
(
wh©ev”2
, (
ušt8_t
[]) {0x00,0x00,0x00,0x00}, 4);

104 * 
wh©ev”
 = 
	`¹e_pktmbuf_´•’d
(
p
, 4);

105 
	`memıy
(
wh©ev”
, (
ušt8_t
[]) {0x01,0x00,0x02,0x00}, 4);

106  
p
;

107 
	}
}

110 
	$debug_f›ld
(
·ck‘_desütÜ_t
* 
p
, 
f›ld_»ã»nû_t
 
f
)

112 
	`´štf
("f›ld width i %d b™s\n", 
f
.
b™width
);

113 
ušt32_t
 
exŒaù
 = 
	`exŒaù_štv®ue
(
p
, 
f
);

114 
	`pb
(
f
.
b™width
, &
exŒaù
);

115 
	`´štf
("Decim®: %" 
PRIu32
 "\n", 
exŒaù
);

116 
	}
}

119 
	$debug
(
·ck‘_desütÜ_t
* 
·ck‘_desc
)

122 
	`debug_f›ld
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”_f›ld1
));

123 
	`debug_f›ld
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”_f›ld2
));

124 
	`debug_f›ld
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld3
));

125 
	`debug_f›ld
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_wh©ev”2_f›ld4
));

126 
	`debug_f›ld
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
));

127 
	}
}

130 
	$š™_m‘ad©a
(
·ck‘_desütÜ_t
* 
·ck‘_desc
, 
ušt32_t
 
špÜt
)

132 
·ck‘_desc
->
h—d”s
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
] =

133 (
h—d”_desütÜ_t
) {

134 .
ty³
 = 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

135 .
Ëngth
 = 
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
],

136 .
poš‹r
 = 
	`ÿÎoc
(
h—d”_š¡ªû_by‹_width
[
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
], (
ušt8_t
))

138 
	`modify_f›ld_to_cÚ¡
(
·ck‘_desc
, 
	`f›ld_desc
(
f›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
), (
ušt8_t
*)&
špÜt
, 2);

139 
	}
}

142 
	$maš
(
¬gc
, **
¬gv
)

144 
	`š™Ÿlize
(
¬gc
, 
¬gv
);

145 
¹e_mbuf
* 
p
 = 
	`çke_šcomšg_·ck‘
();

146 
·ck‘_desütÜ_t
 
·ck‘_desc
;

148 
	`š™_m‘ad©a
(&
·ck‘_desc
, 111);

150 
ušt8_t
 *
bufãr
 = 
	`¹e_pktmbuf_mtod
(
p
, uint8_t *);

152 
	`‹¡_·r£_·ck‘
(
bufãr
, 
	`¹e_pktmbuf_pkt_Ën
(
p
), &
·ck‘_desc
);

154 
	`eksÚ1
(&
·ck‘_desc
, 
NULL
);

156 
	`debug
(&
·ck‘_desc
);

159 
	}
}

	@tests/dpdk_actions/data_plane.c

2 
	~"dpdk_lib.h
"

4 
	$p4_hªdË_·ck‘
(
·ck‘
 *
p
, 
pÜtid
) {

5 
	}
}

	@tests/dpdk_actions/data_plane_data.h

1 #iâdeà
__DATA_PLANE_DATA_H__


2 
	#__DATA_PLANE_DATA_H__


	)

4 
	sty³_f›ld_li¡
 {

5 
	mf›lds_quªt™y
;

6 **
	mf›ld_h—d”s
;

7 *
	mf›ld_off£ts
;

8 *
	mf›ld_widths
;

10 
	s·¿ms_ty³_fÜw¬d
 {};

11 
	s·¿ms_ty³_fÜ_‹¡
 {};

12 
	ubË_aùiÚ_·¿ms__dmac_t
 {};

14 
	~"h—d”_šfo.h
"

	@tests/dpdk_actions/header_info.h

1 #iâdeà
__HEADER_INFO_H__


2 
	#__HEADER_INFO_H__


	)

4 
	#HEADER_INSTANCE_COUNT
 2+2

	)

5 
	#FIELD_INSTANCE_COUNT
 4+9

	)

7 
	eh—d”_š¡ªû_e
 {

8 
	mh—d”_š¡ªû_NONE
,

10 
	mh—d”_š¡ªû_wh©ev”
,

11 
	mh—d”_š¡ªû_wh©ev”2
,

12 
	mh—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

13 
	mh—d”_š¡ªû_COUNT


16 
	ef›ld_š¡ªû_e
 {

17 
	mf›ld_š¡ªû_NONE
,

19 
	mf›ld_š¡ªû_wh©ev”_f›ld1
,

20 
	mf›ld_š¡ªû_wh©ev”_f›ld2
,

21 
	mf›ld_š¡ªû_wh©ev”2_f›ld3
,

22 
	mf›ld_š¡ªû_wh©ev”2_f›ld4
,

24 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_šg»ss_pÜt
,

25 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_·ck‘_Ëngth
,

26 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_¥ec
,

27 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_pÜt
,

28 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_eg»ss_š¡ªû
,

29 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_š¡ªû_ty³
,

30 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a_şÚe_¥ec
,

31 
	mf›ld_š¡ªû_¡ªd¬d_m‘ad©a__·ddšg
,

32 
	mf›ld_š¡ªû_COUNT


35 
f›ld_d©a_ty³_e
 
	tf›ld_d©a_ty³_t
;

36 
h—d”_š¡ªû_e
 
	th—d”_š¡ªû_t
;

37 
f›ld_š¡ªû_e
 
	tf›ld_š¡ªû_t
;

39 cÚ¡ 
	gh—d”_š¡ªû_by‹_width
[
HEADER_INSTANCE_COUNT
 + 1] = {

47 cÚ¡ 
	gh—d”_š¡ªû_is_m‘ad©a
[
HEADER_INSTANCE_COUNT
 + 1] = {

57 cÚ¡ 
	gf›ld_š¡ªû_b™_width
[
FIELD_INSTANCE_COUNT
 + 1] = {

74 cÚ¡ 
	gf›ld_š¡ªû_b™_off£t
[
FIELD_INSTANCE_COUNT
 + 1] = {

91 cÚ¡ 
	gf›ld_š¡ªû_by‹_off£t_hdr
[
FIELD_INSTANCE_COUNT
 + 1] = {

108 cÚ¡ 
ušt32_t
 
	gf›ld_š¡ªû_mask
[
FIELD_INSTANCE_COUNT
 + 1] = {

125 cÚ¡ 
h—d”_š¡ªû_t
 
	gf›ld_š¡ªû_h—d”
[
FIELD_INSTANCE_COUNT
 + 1] = {

126 
h—d”_š¡ªû_NONE
,

127 
h—d”_š¡ªû_wh©ev”
,

128 
h—d”_š¡ªû_wh©ev”
,

129 
h—d”_š¡ªû_wh©ev”2
,

130 
h—d”_š¡ªû_wh©ev”2
,

131 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

132 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

133 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

134 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

135 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

136 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

137 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

138 
h—d”_š¡ªû_¡ªd¬d_m‘ad©a
,

139 
h—d”_š¡ªû_NONE


	@tests/dpdk_actions/parser.h

	@tests/dpdk_tables/data_plane.c

2 
	~"dpdk_lib.h
"

4 
	$p4_hªdË_·ck‘
(
·ck‘
 *
p
, 
pÜtid
) {

5 
	}
}

	@tests/dpdk_tables/data_plane_data.h

1 #iâdeà
__DATA_PLANE_MAIN_H__


2 
	#__DATA_PLANE_MAIN_H__


	)

4 
	#NB_TABLES
 3

	)

5 
	#TABLE1
 0

	)

6 
	#TABLE2
 1

	)

7 
	#TABLE3
 2

	)

8 
	#HEADER_INSTANCE_COUNT
 0

	)

10 
	eh—d”_š¡ªû_e
 {
	ma
};

11 
	ef›ld_š¡ªû_e
 {
	mb
};

15 
	sty³_f›ld_li¡
 {

16 
	mf›lds_quªt™y
;

17 **
	mf›ld_h—d”s
;

18 *
	mf›ld_off£ts
;

19 *
	mf›ld_widths
;

21 
	s·¿ms_ty³_fÜw¬d
 {};

22 
	s·¿ms_ty³_fÜ_‹¡
 {};

23 
	ubË_aùiÚ_·¿ms__dmac_t
 {};

	@tests/dpdk_tables/header_info.h

1 #iâdeà
__HEADER_INFO_H__


2 
	#__HEADER_INFO_H__


	)

	@tests/dpdk_tables/parser.h

	@tests/dpdk_tables/tables.c

1 
	~"dpdk_lib.h
"

2 
	~<as£¹.h
>

4 
lcÜe_cÚf
†cÜe_cÚf[
RTE_MAX_LCORE
];

6 
	eaùiÚs
 {
	maùiÚ_®ma
, 
	maùiÚ_kÜ‹
};

8 
	saùiÚ_®ma_·¿ms
 { 
	mi1
; };

9 
	saùiÚ_kÜ‹_·¿ms
 { 
	mi1
; 
	mi2
; 
	mi3
; };

11 
	sbË1_aùiÚ
 {

12 
	maùiÚ_id
;

14 
aùiÚ_®ma_·¿ms
 
	m®ma_·¿ms
;

15 
aùiÚ_kÜ‹_·¿ms
 
	mkÜ‹_·¿ms
;

19 
lookup_bË_t
 
	gbË_cÚfig
[
NB_TABLES
] = {

21 .
Çme
 = "table1",

22 .
	gty³
 = 
LOOKUP_LPM
,

23 .
	gkey_size
 = 4,

24 .
	gv®_size
 = (
bË1_aùiÚ
),

25 .
	gmš_size
 = 0,

26 .
	gmax_size
 = 255

28 .
	gÇme
 = "table2",

29 .
	gty³
 = 
LOOKUP_EXACT
,

30 .
	gkey_size
 = 4,

31 .
	gv®_size
 = 3,

32 .
	gmš_size
 = 0,

33 .
	gmax_size
 = 255

35 .
	gÇme
 = "table3",

36 .
	gty³
 = 
LOOKUP_TERNARY
,

37 .
	gkey_size
 = 4,

38 .
	gv®_size
 = 3,

39 .
	gmš_size
 = 0,

40 .
	gmax_size
 = 255

77 
bË_£tdeçuÉ_´omÙe
 (
bËid
, 
ušt8_t
* 
v®ue
);

78 
exaù_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
v®ue
);

79 
Ím_add_´omÙe
 (
bËid
, 
ušt8_t
* 
key
, ušt8_ˆ
d•th
, ušt8_t* 
v®ue
);

80 
‹º¬y_add_´omÙe
(
bËid
, 
ušt8_t
* 
key
, ušt8_t* 
mask
, ušt8_t* 
v®ue
);

87 
	$bË1_add
(
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2], ušt8_ˆ
f›ld2_´efix_Ëngth
, 
bË1_aùiÚ
 
aùiÚ
)

89 
ušt32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

90 
ušt8_t
 
´efix_Ëngth
 = 16 + 
f›ld2_´efix_Ëngth
;

91 
	`Ím_add_´omÙe
(
TABLE1
, (
ušt8_t
*)&
key
, 
´efix_Ëngth
, &
aùiÚ
);

92 
	}
}

95 
	$bË2_add
(
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2], ušt8_t* 
v®ue
)

97 
št32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

98 
	`exaù_add_´omÙe
(
TABLE2
, (
ušt8_t
*)&
key
, 
v®ue
);

99 
	}
}

102 
	$bË3_add
(
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2], ušt8_ˆ
f›ld2_mask
[2], ušt8_t* 
v®ue
)

104 
ušt32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

105 
ušt32_t
 
mask
 = (0xfffà<< 16è+ (
f›ld2_mask
[0] << 8) + field2_mask[1];

106 
	`‹º¬y_add_´omÙe
(
TABLE3
, (
ušt8_t
*)&
key
, (ušt8_t*)&
mask
, 
v®ue
);

107 
	}
}

109 
ušt8_t
* 
	$bË1_lookup
(
lookup_bË_t
** 
bËs
, 
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2])

111 
ušt32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

112  
	`Ím_lookup
(
bËs
[
TABLE1
], (
ušt8_t
*)&
key
);

113 
	}
}

115 
ušt8_t
* 
	$bË2_lookup
(
lookup_bË_t
** 
bËs
, 
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2])

117 
št32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

118  
	`exaù_lookup
(
bËs
[
TABLE2
], (
ušt8_t
*)&
key
);

119 
	}
}

121 
ušt8_t
* 
	$bË3_lookup
(
lookup_bË_t
** 
bËs
, 
ušt8_t
 
f›ld1
[2], ušt8_ˆ
f›ld2
[2])

123 
ušt32_t
 
key
 = (
f›ld1
[0] << 24è+ (f›ld1[1] << 16è+ (
f›ld2
[0] << 8) + field2[1];

124  
	`‹º¬y_lookup
(
bËs
[
TABLE3
], (
ušt8_t
*)&
key
);

125 
	}
}

132 
ušt8_t
 
	ga1
[2] = {0xff, 0 };

133 
ušt8_t
 
	ga2
[2] = {0 , 0xff};

134 
ušt8_t
 
	ga3
[2] = {0 , 0xf0};

135 
ušt8_t
 
	gm1
[2] = {0 , 0xff};

138 
	$fl_bË1
()

140 
bË1_aùiÚ
 
v®ue
;

141 
v®ue
.
aùiÚ_id
 = 
aùiÚ_kÜ‹
;

142 
v®ue
.
kÜ‹_·¿ms
 = (
aùiÚ_kÜ‹_·¿ms
){11, 22, 33};

143 
	`bË1_add
(
a1
, 
a2
, 8, 
v®ue
);

144 
	}
}

147 
	$fl_bË2
()

149 
ušt8_t
 
v®ue
[3] = {4,5,6};

150 
	`bË2_add
(
a1
, 
a2
, &
v®ue
);

152 
ušt8_t
 
v®ue2
[3] = {44,55,66};

153 
	`bË_£tdeçuÉ_´omÙe
(
TABLE2
, &
v®ue2
);

154 
	}
}

157 
	$fl_bË3
()

159 
ušt8_t
 
v®ue
[3] = {7,8,9};

160 
	`bË3_add
(
a1
, 
a2
, 
m1
, 
v®ue
);

161 
	}
}

165 
	$fl_bËs
()

167 
	`fl_bË1
();

168 
	`fl_bË2
();

169 
	`fl_bË3
();

170 
	}
}

173 
	$¶ay_w™h_lookups
(
cÚfigu¿tiÚ
* 
cÚf
)

175 
bË1_aùiÚ
* 
»s
 = (bË1_aùiÚ*)
	`bË1_lookup
(
cÚf
->
bËs
, 
a1
, 
a3
);

176 
	`as£¹
(
»s
 !ğ
NULL
);

177 
	`as£¹
(
»s
->
aùiÚ_id
 =ğ
aùiÚ_kÜ‹
);

178 
	`as£¹
(
»s
->
kÜ‹_·¿ms
.
i3
 == 33);

180 
	`´štf
("LPMest…assed.\n");

182 
ušt8_t
* 
»s2
 = 
	`bË2_lookup
(
cÚf
->
bËs
, 
a1
, 
a2
);

183 
	`as£¹
(
»s2
 !ğ
NULL
);

184 
	`as£¹
(
»s2
[0] == 4);

185 
	`as£¹
(
»s2
[1] == 5);

186 
	`as£¹
(
»s2
[2] == 6);

187 
ušt8_t
* 
»s3
 = 
	`bË2_lookup
(
cÚf
->
bËs
, 
a1
, 
a3
);

188 
	`as£¹
(
»s3
 !ğ
NULL
);

189 
	`as£¹
(
»s3
[0] == 44);

190 
	`as£¹
(
»s3
[1] == 55);

191 
	`as£¹
(
»s3
[2] == 66);

193 
	`´štf
("EXACTest…assed.\n");

195 
ušt8_t
* 
»s4
 = 
	`bË3_lookup
(
cÚf
->
bËs
, 
a1
, 
a2
);

196 
	`as£¹
(
»s4
 !ğ
NULL
);

197 
	`as£¹
(
»s4
[0] == 7);

198 
	`as£¹
(
»s4
[1] == 8);

199 
	`as£¹
(
»s4
[2] == 9);

200 
ušt8_t
* 
»s5
 = 
	`bË3_lookup
(
cÚf
->
bËs
, 
a1
, 
a3
);

201 
	`as£¹
(
»s5
 =ğ
NULL
);

203 
	`´štf
("TERNARYest…assed.\n");

204 
	}
}

206 
	$maš
(
¬gc
, ** 
¬gv
)

208 
	`´štf
("Hello DPDK Tables!\n");

209 
	`š™Ÿlize
(
¬gc
, 
¬gv
);

210 
	`´štf
("Backend initialized.\n");

211 
	`´štf
("Fillig upheables...\n");

212 
	`fl_bËs
();

213 
	`´štf
("Tables filled.\n");

214 
	`´štf
("\nTesting†ookup...\n");

215 
	`¶ay_w™h_lookups
(&
lcÜe_cÚf
[0]);

217 
	}
}

	@tools/sendRawIP.c

1 
	~<¬·/š‘.h
>

2 
	~<lšux/if_·ck‘.h
>

3 
	~<¡dio.h
>

4 
	~<¡ršg.h
>

5 
	~<¡dlib.h
>

6 
	~<sys/ioùl.h
>

7 
	~<sys/sock‘.h
>

8 
	~<Ãt/if.h
>

10 
	~<Ãtš‘/.h
>

11 
	~<Ãtš‘/‘h”.h
>

14 
	#MY_DEST_MAC0
 0x00

	)

15 
	#MY_DEST_MAC1
 0x00

	)

16 
	#MY_DEST_MAC2
 0x00

	)

17 
	#MY_DEST_MAC3
 0x00

	)

18 
	#MY_DEST_MAC4
 0x01

	)

19 
	#MY_DEST_MAC5
 0x01

	)

21 
	#DEFAULT_IF
 "pvm02"

	)

22 
	#BUF_SIZ
 1024

	)

24 
	#IP4_HDRLEN
 20

25 
	#TCP_HDRLEN
 0

26 

	)

27 
ušt16_t
 
checksum
 (uint16_t *, );

28 
ušt16_t
 
_checksum
(*, 
size_t
);

29 
	$maš
(
¬gc
, *
¬gv
[])

31 
_æags
[4];

32 
¡©us
;

33 
sockfd
;

34 
iäeq
 
if_idx
;

35 
iäeq
 
if_mac
;

36 
tx_Ën
 = 0;

37 
£ndbuf
[
BUF_SIZ
];

38 
‘h”_h—d”
 *
eh
 = (‘h”_h—d” *è
£ndbuf
;

39 
hdr
 *
h
 = (hd¸*è(
£ndbuf
 + (
‘h”_h—d”
));

40 
sockaddr_Î
 
sock‘_add»ss
;

41 
ifName
[
IFNAMSIZ
];

44 ià(
¬gc
 > 1)

45 
	`¡rıy
(
ifName
, 
¬gv
[1]);

47 
	`¡rıy
(
ifName
, 
DEFAULT_IF
);

50 ià((
sockfd
 = 
	`sock‘
(
AF_PACKET
, 
SOCK_RAW
, 
IPPROTO_RAW
)) == -1) {

51 
	`³¼Ü
("socket");

55 
	`mem£t
(&
if_idx
, 0, (
iäeq
));

56 
	`¡ºıy
(
if_idx
.
iä_Çme
, 
ifName
, 
IFNAMSIZ
-1);

57 ià(
	`ioùl
(
sockfd
, 
SIOCGIFINDEX
, &
if_idx
) < 0)

58 
	`³¼Ü
("SIOCGIFINDEX");

60 
	`mem£t
(&
if_mac
, 0, (
iäeq
));

61 
	`¡ºıy
(
if_mac
.
iä_Çme
, 
ifName
, 
IFNAMSIZ
-1);

62 ià(
	`ioùl
(
sockfd
, 
SIOCGIFHWADDR
, &
if_mac
) < 0)

63 
	`³¼Ü
("SIOCGIFHWADDR");

66 
	`mem£t
(
£ndbuf
, 0, 
BUF_SIZ
);

68 
eh
->
‘h”_sho¡
[0] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[0];

69 
eh
->
‘h”_sho¡
[1] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[1];

70 
eh
->
‘h”_sho¡
[2] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[2];

71 
eh
->
‘h”_sho¡
[3] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[3];

72 
eh
->
‘h”_sho¡
[4] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[4];

73 
eh
->
‘h”_sho¡
[5] = ((
ušt8_t
 *)&
if_mac
.
iä_hwaddr
.
§_d©a
)[5];

74 
eh
->
‘h”_dho¡
[0] = 
MY_DEST_MAC0
;

75 
eh
->
‘h”_dho¡
[1] = 
MY_DEST_MAC1
;

76 
eh
->
‘h”_dho¡
[2] = 
MY_DEST_MAC2
;

77 
eh
->
‘h”_dho¡
[3] = 
MY_DEST_MAC3
;

78 
eh
->
‘h”_dho¡
[4] = 
MY_DEST_MAC4
;

79 
eh
->
‘h”_dho¡
[5] = 
MY_DEST_MAC5
;

81 
eh
->
‘h”_ty³
 = 
	`htÚs
(
ETH_P_IP
);

82 
tx_Ën
 +ğ(
‘h”_h—d”
);

93 
h
->
ihl
 = 5;

96 
h
->
v”siÚ
 = 4;

99 
h
->
tos
 = 0;

102 
h
->
tÙ_Ën
 = 
	`htÚs
 (
IP4_HDRLEN
 + 
TCP_HDRLEN
);

105 
h
->
id
 = 
	`htÚs
 (0);

110 
_æags
[0] = 0;

113 
_æags
[1] = 0;

116 
_æags
[2] = 0;

119 
_æags
[3] = 0;

121 
h
->
äag_off
 = 
	`htÚs
 ((
_æags
[0] << 15)

122 + (
_æags
[1] << 14)

123 + (
_æags
[2] << 13)

124 + 
_æags
[3]);

127 
h
->
‰l
 = 255;

130 
h
->
´ÙocŞ
 = 0;

133 ià((
¡©us
 = 
	`š‘_±Ú
 (
AF_INET
, "10.0.0.2", &(
h
->
§ddr
))) != 1) {

134 
	`årštf
 (
¡d”r
, "š‘_±Ú(èçed.\nE¼Ü mes§ge: %s", 
	`¡»¼Ü
 (
¡©us
));

135 
	`ex™
 (
EXIT_FAILURE
);

139 ià((
¡©us
 = 
	`š‘_±Ú
 (
AF_INET
, "10.0.0.1", &(
h
->
daddr
))) != 1) {

140 
	`årštf
 (
¡d”r
, "š‘_±Ú(èçed.\nE¼Ü mes§ge: %s", 
	`¡»¼Ü
 (
¡©us
));

141 
	`ex™
 (
EXIT_FAILURE
);

145 
h
->
check
 = 0;

146 
h
->
check
 = 
	`_checksum
 ((*è&h, 
IP4_HDRLEN
);

148 
tx_Ën
 +ğ(
hdr
è+ 
TCP_HDRLEN
;

151 
sock‘_add»ss
.
¦l_ifšdex
 = 
if_idx
.
iä_ifšdex
;

153 
sock‘_add»ss
.
¦l_h®’
 = 
ETH_ALEN
;

155 
sock‘_add»ss
.
¦l_addr
[0] = 
MY_DEST_MAC0
;

156 
sock‘_add»ss
.
¦l_addr
[1] = 
MY_DEST_MAC1
;

157 
sock‘_add»ss
.
¦l_addr
[2] = 
MY_DEST_MAC2
;

158 
sock‘_add»ss
.
¦l_addr
[3] = 
MY_DEST_MAC3
;

159 
sock‘_add»ss
.
¦l_addr
[4] = 
MY_DEST_MAC4
;

160 
sock‘_add»ss
.
¦l_addr
[5] = 
MY_DEST_MAC5
;

163 ià(
	`£ndto
(
sockfd
, 
£ndbuf
, 
tx_Ën
, 0, (
sockaddr
*)&
sock‘_add»ss
, (
sockaddr_Î
)) < 0)

164 
	`´štf
("Send failed\n");

167 
	}
}

171 
ušt16_t


172 
	$checksum
 (
ušt16_t
 *
addr
, 
Ën
)

174 
couÁ
 = 
Ën
;

175 
ušt32_t
 
sum
 = 0;

176 
ušt16_t
 
ªsw”
 = 0;

179 
couÁ
 > 1) {

180 
sum
 +ğ*(
addr
++);

181 ià(
sum
 & 0x80000000) {

182 
sum
 = (sum & 0xFFFF) + (sum >> 16);

184 
couÁ
 -= 2;

188 ià(
couÁ
 > 0) {

189 
sum
 +ğ*(
ušt8_t
 *è
addr
;

195 
sum
 >> 16) {

196 
sum
 = (sum & 0xffff) + (sum >> 16);

200 
ªsw”
 = ~
sum
;

202  (
ªsw”
);

203 
	}
}

205 
ušt16_t
 
	$_checksum
(* 
vd©a
, 
size_t
 
Ëngth
) {

207 * 
d©a
=(*)
vd©a
;

210 
ušt32_t
 
acc
=0xffff;

213 
size_t
 
i
;

214 
i
=0;i+1<
Ëngth
;i+=2) {

215 
ušt16_t
 
wÜd
;

216 
	`memıy
(&
wÜd
,
d©a
+
i
,2);

217 
acc
+=
	`Áohs
(
wÜd
);

218 ià(
acc
>0xffff) {

219 
acc
-=0xffff;

224 ià(
Ëngth
&1) {

225 
ušt16_t
 
wÜd
=0;

226 
	`memıy
(&
wÜd
,
d©a
+
Ëngth
-1,1);

227 
acc
+=
	`Áohs
(
wÜd
);

228 ià(
acc
>0xffff) {

229 
acc
-=0xffff;

234  
	`htÚs
(~
acc
);

235 
	}
}

	@/usr/include/aliases.h

18 #iâdeà
_ALIASES_H


19 
	#_ALIASES_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	~<sys/ty³s.h
>

26 
__BEGIN_DECLS


29 
	s®Ÿ£Á


31 *
	m®Ÿs_Çme
;

32 
size_t
 
	m®Ÿs_memb”s_Ën
;

33 **
	m®Ÿs_memb”s
;

34 
	m®Ÿs_loÿl
;

39 
	$£lŸ£Á
 (è
__THROW
;

42 
	$’d®Ÿ£Á
 (è
__THROW
;

45 
®Ÿ£Á
 *
	$g‘®Ÿ£Á
 (è
__THROW
;

48 
	$g‘®Ÿ£Á_r
 (
®Ÿ£Á
 *
__»¡riù
 
__»suÉ_buf
,

49 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

50 
®Ÿ£Á
 **
__»¡riù
 
__»suÉ
è
__THROW
;

53 
®Ÿ£Á
 *
	$g‘®ŸsbyÇme
 (cÚ¡ *
__Çme
è
__THROW
;

56 
	$g‘®ŸsbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

57 
®Ÿ£Á
 *
__»¡riù
 
__»suÉ_buf
,

58 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
,

59 
®Ÿ£Á
 **
__»¡riù
 
__»suÉ
è
__THROW
;

61 
__END_DECLS


	@/usr/include/arpa/inet.h

18 #iâdeà
_ARPA_INET_H


19 
	#_ARPA_INET_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<Ãtš‘/š.h
>

25 #iâdeà
__sockËn_t_defšed


26 
__sockËn_t
 
	tsockËn_t
;

27 
	#__sockËn_t_defšed


	)

30 
__BEGIN_DECLS


34 
š_addr_t
 
	$š‘_addr
 (cÚ¡ *
__ı
è
__THROW
;

37 
š_addr_t
 
	$š‘_Êaof
 (
š_addr
 
__š
è
__THROW
;

41 
š_addr
 
	$š‘_mak—ddr
 (
š_addr_t
 
__Ãt
, in_addr_ˆ
__ho¡
)

42 
__THROW
;

45 
š_addr_t
 
	$š‘_Ãtof
 (
š_addr
 
__š
è
__THROW
;

49 
š_addr_t
 
	$š‘_ÃtwÜk
 (cÚ¡ *
__ı
è
__THROW
;

53 *
	$š‘_Áß
 (
š_addr
 
__š
è
__THROW
;

58 
	$š‘_±Ú
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

59 *
__»¡riù
 
__buf
è
__THROW
;

64 cÚ¡ *
	$š‘_Áİ
 (
__af
, cÚ¡ *
__»¡riù
 
__ı
,

65 *
__»¡riù
 
__buf
, 
sockËn_t
 
__Ën
)

66 
__THROW
;

70 #ifdeà
__USE_MISC


73 
	$š‘_©Ú
 (cÚ¡ *
__ı
, 
š_addr
 *
__šp
è
__THROW
;

77 *
	$š‘_Ã
 (
š_addr_t
 
__Ãt
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

82 *
	$š‘_Ãt_Áİ
 (
__af
, cÚ¡ *
__ı
, 
__b™s
,

83 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

88 
	$š‘_Ãt_±Ú
 (
__af
, cÚ¡ *
__ı
,

89 *
__buf
, 
size_t
 
__Ën
è
__THROW
;

94 
	$š‘_n§p_addr
 (cÚ¡ *
__ı
,

95 *
__buf
, 
__Ën
è
__THROW
;

99 *
	$š‘_n§p_Áß
 (
__Ën
, cÚ¡ *
__ı
,

100 *
__buf
è
__THROW
;

103 
__END_DECLS


	@/usr/include/assert.h

22 #ifdef 
_ASSERT_H


24 #undeà
_ASSERT_H


25 #undeà
as£¹


26 #undeà
__ASSERT_VOID_CAST


28 #ifdef 
__USE_GNU


29 #undeà
as£¹_³¼Ü


34 
	#_ASSERT_H
 1

	)

35 
	~<ã©u»s.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

38 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

40 
	#__ASSERT_VOID_CAST
 ()

	)

48 #ifdef 
NDEBUG


50 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

58 #ifdef 
__USE_GNU


59 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

64 #iâdeà
_ASSERT_H_DECLS


65 
	#_ASSERT_H_DECLS


	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
,

70 
__lše
, cÚ¡ *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, cÚ¡ *
__fe
,

75 
__lše
, cÚ¡ *
__funùiÚ
)

76 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

81 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

82 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

85 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((cÚ¡ *è0)

	)

118 #ià
defšed
 
__USE_ISOC11
 && !defšed 
__ılu¥lus


120 #undeà
¡©ic_as£¹


121 
	#¡©ic_as£¹
 
_Stic_as£¹


	)

	@/usr/include/getopt.h

19 #iâdeà
_GETOPT_H


21 #iâdeà
__Ãed_g‘İt


22 
	#_GETOPT_H
 1

	)

32 #ià!
defšed
 
__GNU_LIBRARY__


33 
	~<ùy³.h
>

36 #iâdeà
__THROW


37 #iâdeà
__GNUC_PREREQ


38 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

40 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

41 
	#__THROW
 
	`throw
 ()

	)

43 
	#__THROW


	)

47 #ifdef 
__ılu¥lus


57 *
İrg
;

71 
İtšd
;

76 
İ‹¼
;

80 
İtİt
;

82 #iâdeà
__Ãed_g‘İt


104 
	sİtiÚ


106 cÚ¡ *
	gÇme
;

109 
	ghas_¬g
;

110 *
	gæag
;

111 
	gv®
;

116 
	#no_¬gum’t
 0

	)

117 
	#»quœed_¬gum’t
 1

	)

118 
	#İtiÚ®_¬gum’t
 2

	)

146 #ifdeà
__GNU_LIBRARY__


150 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

151 
__THROW
;

153 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

154 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


158 #ifdeà
__REDIRECT


159 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

160 cÚ¡ *
__shÜtİts
),

161 
__posix_g‘İt
);

163 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

164 cÚ¡ *
__shÜtİts
è
__THROW
;

165 
	#g‘İt
 
__posix_g‘İt


	)

169 
g‘İt
 ();

172 #iâdeà
__Ãed_g‘İt


173 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

174 cÚ¡ *
__shÜtİts
,

175 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

176 
__THROW
;

177 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

178 cÚ¡ *
__shÜtİts
,

179 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

180 
__THROW
;

184 #ifdef 
__ılu¥lus


189 #undeà
__Ãed_g‘İt


	@/usr/include/inttypes.h

22 #iâdeà
_INTTYPES_H


23 
	#_INTTYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<¡dšt.h
>

30 #iâdeà
____gwch¬_t_defšed


31 #ifdeà
__ılu¥lus


32 
	#__gwch¬_t
 
wch¬_t


	)

33 #–ià
defšed
 
__WCHAR_TYPE__


34 
__WCHAR_TYPE__
 
	t__gwch¬_t
;

36 
	#__Ãed_wch¬_t


	)

37 
	~<¡ddef.h
>

38 
wch¬_t
 
	t__gwch¬_t
;

40 
	#____gwch¬_t_defšed
 1

	)

43 #ià
__WORDSIZE
 == 64

44 
	#__PRI64_PREFIX
 "l"

	)

45 
	#__PRIPTR_PREFIX
 "l"

	)

47 
	#__PRI64_PREFIX
 "Î"

	)

48 
	#__PRIPTR_PREFIX


	)

54 
	#PRId8
 "d"

	)

55 
	#PRId16
 "d"

	)

56 
	#PRId32
 "d"

	)

57 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

59 
	#PRIdLEAST8
 "d"

	)

60 
	#PRIdLEAST16
 "d"

	)

61 
	#PRIdLEAST32
 "d"

	)

62 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

64 
	#PRIdFAST8
 "d"

	)

65 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

66 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

67 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIi8
 "i"

	)

71 
	#PRIi16
 "i"

	)

72 
	#PRIi32
 "i"

	)

73 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

75 
	#PRIiLEAST8
 "i"

	)

76 
	#PRIiLEAST16
 "i"

	)

77 
	#PRIiLEAST32
 "i"

	)

78 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

80 
	#PRIiFAST8
 "i"

	)

81 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

82 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

83 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIo8
 "o"

	)

87 
	#PRIo16
 "o"

	)

88 
	#PRIo32
 "o"

	)

89 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

91 
	#PRIoLEAST8
 "o"

	)

92 
	#PRIoLEAST16
 "o"

	)

93 
	#PRIoLEAST32
 "o"

	)

94 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

96 
	#PRIoFAST8
 "o"

	)

97 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

98 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

99 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIu8
 "u"

	)

103 
	#PRIu16
 "u"

	)

104 
	#PRIu32
 "u"

	)

105 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

107 
	#PRIuLEAST8
 "u"

	)

108 
	#PRIuLEAST16
 "u"

	)

109 
	#PRIuLEAST32
 "u"

	)

110 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

112 
	#PRIuFAST8
 "u"

	)

113 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

114 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

115 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIx8
 "x"

	)

119 
	#PRIx16
 "x"

	)

120 
	#PRIx32
 "x"

	)

121 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

123 
	#PRIxLEAST8
 "x"

	)

124 
	#PRIxLEAST16
 "x"

	)

125 
	#PRIxLEAST32
 "x"

	)

126 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

128 
	#PRIxFAST8
 "x"

	)

129 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

130 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

131 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIX8
 "X"

	)

135 
	#PRIX16
 "X"

	)

136 
	#PRIX32
 "X"

	)

137 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

139 
	#PRIXLEAST8
 "X"

	)

140 
	#PRIXLEAST16
 "X"

	)

141 
	#PRIXLEAST32
 "X"

	)

142 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

144 
	#PRIXFAST8
 "X"

	)

145 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

146 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

147 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

151 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

152 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

153 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

154 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

155 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

156 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

160 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

161 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

162 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

163 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

164 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

165 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

171 
	#SCNd8
 "hhd"

	)

172 
	#SCNd16
 "hd"

	)

173 
	#SCNd32
 "d"

	)

174 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

176 
	#SCNdLEAST8
 "hhd"

	)

177 
	#SCNdLEAST16
 "hd"

	)

178 
	#SCNdLEAST32
 "d"

	)

179 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

181 
	#SCNdFAST8
 "hhd"

	)

182 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

183 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

184 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNi8
 "hhi"

	)

188 
	#SCNi16
 "hi"

	)

189 
	#SCNi32
 "i"

	)

190 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

192 
	#SCNiLEAST8
 "hhi"

	)

193 
	#SCNiLEAST16
 "hi"

	)

194 
	#SCNiLEAST32
 "i"

	)

195 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

197 
	#SCNiFAST8
 "hhi"

	)

198 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

199 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

200 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNu8
 "hhu"

	)

204 
	#SCNu16
 "hu"

	)

205 
	#SCNu32
 "u"

	)

206 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

208 
	#SCNuLEAST8
 "hhu"

	)

209 
	#SCNuLEAST16
 "hu"

	)

210 
	#SCNuLEAST32
 "u"

	)

211 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

213 
	#SCNuFAST8
 "hhu"

	)

214 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

215 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

216 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNo8
 "hho"

	)

220 
	#SCNo16
 "ho"

	)

221 
	#SCNo32
 "o"

	)

222 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

224 
	#SCNoLEAST8
 "hho"

	)

225 
	#SCNoLEAST16
 "ho"

	)

226 
	#SCNoLEAST32
 "o"

	)

227 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

229 
	#SCNoFAST8
 "hho"

	)

230 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

231 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

232 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNx8
 "hhx"

	)

236 
	#SCNx16
 "hx"

	)

237 
	#SCNx32
 "x"

	)

238 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

240 
	#SCNxLEAST8
 "hhx"

	)

241 
	#SCNxLEAST16
 "hx"

	)

242 
	#SCNxLEAST32
 "x"

	)

243 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

245 
	#SCNxFAST8
 "hhx"

	)

246 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

247 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

248 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

252 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

253 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

254 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

255 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

256 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

259 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

260 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

261 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

262 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

263 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

266 
	g__BEGIN_DECLS


268 #ià
__WORDSIZE
 == 64

273 
	mquÙ
;

274 
	m»m
;

275 } 
	timaxdiv_t
;

282 
__ex‹nsiÚ__
 
	mquÙ
;

283 
__ex‹nsiÚ__
 
	m»m
;

284 } 
	timaxdiv_t
;

290 
štmax_t
 
	$imaxabs
 (
štmax_t
 
__n
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

293 
imaxdiv_t
 
	$imaxdiv
 (
štmax_t
 
__num”
, iÁmax_ˆ
__d’om
)

294 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

297 
štmax_t
 
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

298 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

301 
uštmax_t
 
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

302 ** 
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

305 
štmax_t
 
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

306 
__gwch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

307 
__THROW
;

310 
uštmax_t
 
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

311 
__gwch¬_t
 ** 
__»¡riù
 
__’d±r
, 
__ba£
)

312 
__THROW
;

314 #ifdeà
__USE_EXTERN_INLINES


316 #ià
__WORDSIZE
 == 64

318 
	$__¡¹Ş_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

319 **
__»¡riù
 
__’d±r
,

320 
__ba£
, 
__group
)

321 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

323 
__ex‹º_šlše
 
štmax_t


324 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

325 
ba£
))

327  
	`__¡¹Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

328 
	}
}

330 
	$__¡¹oul_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

331 ** 
__»¡riù
 
__’d±r
,

332 
__ba£
, 
__group
)

333 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

335 
__ex‹º_šlše
 
uštmax_t


336 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

337 
ba£
))

339  
	`__¡¹oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

340 
	}
}

342 
	$__wc¡Ş_š‹º®
 (cÚ¡ 
__gwch¬_t
 * 
__»¡riù
 
__ÅŒ
,

343 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

344 
__ba£
, 
__group
)

345 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

347 
__ex‹º_šlše
 
štmax_t


348 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

349 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

351  
	`__wc¡Ş_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

352 
	}
}

354 
	$__wc¡oul_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

355 
__»¡riù
 
__ÅŒ
,

356 
__gwch¬_t
 **

357 
__»¡riù
 
__’d±r
,

358 
__ba£
, 
__group
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

361 
__ex‹º_šlše
 
uštmax_t


362 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

363 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

365  
	`__wc¡oul_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

366 
	}
}

370 
__ex‹nsiÚ__


371 
	$__¡¹Şl_š‹º®
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

372 **
__»¡riù
 
__’d±r
,

373 
__ba£
, 
__group
)

374 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

376 
__ex‹º_šlše
 
štmax_t


377 
	`__NTH
 (
	$¡¹oimax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

378 
ba£
))

380  
	`__¡¹Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

381 
	}
}

383 
__ex‹nsiÚ__


384 
	$__¡¹ouÎ_š‹º®
 (const *

385 
__»¡riù
 
__ÅŒ
,

387 
__»¡riù
 
__’d±r
,

388 
__ba£
,

389 
__group
)

390 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

392 
__ex‹º_šlše
 
uštmax_t


393 
	`__NTH
 (
	$¡¹oumax
 (cÚ¡ *
__»¡riù
 
ÅŒ
, **__»¡riù 
’d±r
,

394 
ba£
))

396  
	`__¡¹ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

397 
	}
}

399 
__ex‹nsiÚ__


400 
	$__wc¡Şl_š‹º®
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
__ÅŒ
,

401 
__gwch¬_t
 **
__»¡riù
 
__’d±r
,

402 
__ba£
, 
__group
)

403 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

405 
__ex‹º_šlše
 
štmax_t


406 
	`__NTH
 (
	$wc¡oimax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

407 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

409  
	`__wc¡Şl_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

410 
	}
}

413 
__ex‹nsiÚ__


414 
	$__wc¡ouÎ_š‹º®
 (cÚ¡ 
__gwch¬_t
 *

415 
__»¡riù
 
__ÅŒ
,

416 
__gwch¬_t
 **

417 
__»¡riù
 
__’d±r
,

418 
__ba£
,

419 
__group
)

420 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

422 
__ex‹º_šlše
 
uštmax_t


423 
	`__NTH
 (
	$wc¡oumax
 (cÚ¡ 
__gwch¬_t
 *
__»¡riù
 
ÅŒ
,

424 
__gwch¬_t
 **
__»¡riù
 
’d±r
, 
ba£
))

426  
	`__wc¡ouÎ_š‹º®
 (
ÅŒ
, 
’d±r
, 
ba£
, 0);

427 
	}
}

432 
	g__END_DECLS


	@/usr/include/linux/if_packet.h

1 #iâdeà
__LINUX_IF_PACKET_H


2 
	#__LINUX_IF_PACKET_H


	)

4 
	~<lšux/ty³s.h
>

6 
	ssockaddr_pkt
 {

7 
	m¥kt_çmy
;

8 
	m¥kt_deviû
[14];

9 
__be16
 
	m¥kt_´ÙocŞ
;

12 
	ssockaddr_Î
 {

13 
	m¦l_çmy
;

14 
__be16
 
	m¦l_´ÙocŞ
;

15 
	m¦l_ifšdex
;

16 
	m¦l_h©y³
;

17 
	m¦l_pk‰y³
;

18 
	m¦l_h®’
;

19 
	m¦l_addr
[8];

24 
	#PACKET_HOST
 0

	)

25 
	#PACKET_BROADCAST
 1

	)

26 
	#PACKET_MULTICAST
 2

	)

27 
	#PACKET_OTHERHOST
 3

	)

28 
	#PACKET_OUTGOING
 4

	)

30 
	#PACKET_LOOPBACK
 5

	)

31 
	#PACKET_FASTROUTE
 6

	)

35 
	#PACKET_ADD_MEMBERSHIP
 1

	)

36 
	#PACKET_DROP_MEMBERSHIP
 2

	)

37 
	#PACKET_RECV_OUTPUT
 3

	)

39 
	#PACKET_RX_RING
 5

	)

40 
	#PACKET_STATISTICS
 6

	)

41 
	#PACKET_COPY_THRESH
 7

	)

42 
	#PACKET_AUXDATA
 8

	)

43 
	#PACKET_ORIGDEV
 9

	)

44 
	#PACKET_VERSION
 10

	)

45 
	#PACKET_HDRLEN
 11

	)

46 
	#PACKET_RESERVE
 12

	)

47 
	#PACKET_TX_RING
 13

	)

48 
	#PACKET_LOSS
 14

	)

49 
	#PACKET_VNET_HDR
 15

	)

50 
	#PACKET_TX_TIMESTAMP
 16

	)

51 
	#PACKET_TIMESTAMP
 17

	)

52 
	#PACKET_FANOUT
 18

	)

53 
	#PACKET_TX_HAS_OFF
 19

	)

55 
	#PACKET_FANOUT_HASH
 0

	)

56 
	#PACKET_FANOUT_LB
 1

	)

57 
	#PACKET_FANOUT_CPU
 2

	)

58 
	#PACKET_FANOUT_ROLLOVER
 3

	)

59 
	#PACKET_FANOUT_RND
 4

	)

60 
	#PACKET_FANOUT_FLAG_ROLLOVER
 0x1000

	)

61 
	#PACKET_FANOUT_FLAG_DEFRAG
 0x8000

	)

63 
	sack‘_¡©s
 {

64 
	m_·ck‘s
;

65 
	m_drİs
;

68 
	sack‘_¡©s_v3
 {

69 
	m_·ck‘s
;

70 
	m_drİs
;

71 
	m_ä“ze_q_út
;

74 
	uack‘_¡©s_u
 {

75 
ack‘_¡©s
 
	m¡©s1
;

76 
ack‘_¡©s_v3
 
	m¡©s3
;

79 
	sack‘_auxd©a
 {

80 
__u32
 
	m_¡©us
;

81 
__u32
 
	m_Ën
;

82 
__u32
 
	m_¢­Ën
;

83 
__u16
 
	m_mac
;

84 
__u16
 
	m_Ãt
;

85 
__u16
 
	m_vÏn_tci
;

86 
__u16
 
	m_·ddšg
;

90 
	#TP_STATUS_KERNEL
 0

	)

91 
	#TP_STATUS_USER
 (1 << 0)

	)

92 
	#TP_STATUS_COPY
 (1 << 1)

	)

93 
	#TP_STATUS_LOSING
 (1 << 2)

	)

94 
	#TP_STATUS_CSUMNOTREADY
 (1 << 3)

	)

95 
	#TP_STATUS_VLAN_VALID
 (1 << 4è

	)

96 
	#TP_STATUS_BLK_TMO
 (1 << 5)

	)

99 
	#TP_STATUS_AVAILABLE
 0

	)

100 
	#TP_STATUS_SEND_REQUEST
 (1 << 0)

	)

101 
	#TP_STATUS_SENDING
 (1 << 1)

	)

102 
	#TP_STATUS_WRONG_FORMAT
 (1 << 2)

	)

105 
	#TP_STATUS_TS_SOFTWARE
 (1 << 29)

	)

106 
	#TP_STATUS_TS_SYS_HARDWARE
 (1 << 30)

	)

107 
	#TP_STATUS_TS_RAW_HARDWARE
 (1 << 31)

	)

110 
	#TP_FT_REQ_FILL_RXHASH
 0x1

	)

112 
	sack‘_hdr
 {

113 
	m_¡©us
;

114 
	m_Ën
;

115 
	m_¢­Ën
;

116 
	m_mac
;

117 
	m_Ãt
;

118 
	m_£c
;

119 
	m_u£c
;

122 
	#TPACKET_ALIGNMENT
 16

	)

123 
	#TPACKET_ALIGN
(
x
è(((x)+
TPACKET_ALIGNMENT
-1)&~(TPACKET_ALIGNMENT-1))

	)

124 
	#TPACKET_HDRLEN
 (
	`TPACKET_ALIGN
((
ack‘_hdr
)è+ (
sockaddr_Î
))

	)

126 
	sack‘2_hdr
 {

127 
__u32
 
	m_¡©us
;

128 
__u32
 
	m_Ën
;

129 
__u32
 
	m_¢­Ën
;

130 
__u16
 
	m_mac
;

131 
__u16
 
	m_Ãt
;

132 
__u32
 
	m_£c
;

133 
__u32
 
	m_n£c
;

134 
__u16
 
	m_vÏn_tci
;

135 
__u16
 
	m_·ddšg
;

138 
	sack‘_hdr_v¬ŸÁ1
 {

139 
__u32
 
	m_rxhash
;

140 
__u32
 
	m_vÏn_tci
;

143 
	sack‘3_hdr
 {

144 
__u32
 
	m_Ãxt_off£t
;

145 
__u32
 
	m_£c
;

146 
__u32
 
	m_n£c
;

147 
__u32
 
	m_¢­Ën
;

148 
__u32
 
	m_Ën
;

149 
__u32
 
	m_¡©us
;

150 
__u16
 
	m_mac
;

151 
__u16
 
	m_Ãt
;

154 
ack‘_hdr_v¬ŸÁ1
 
	mhv1
;

158 
	sack‘_bd_ts
 {

159 
	mts_£c
;

161 
	mts_u£c
;

162 
	mts_n£c
;

166 
	sack‘_hdr_v1
 {

167 
__u32
 
	mblock_¡©us
;

168 
__u32
 
	mnum_pkts
;

169 
__u32
 
	moff£t_to_fœ¡_pkt
;

174 
__u32
 
	mblk_Ën
;

185 
__®igÃd_u64
 
	m£q_num
;

212 
ack‘_bd_ts
 
	mts_fœ¡_pkt
, 
	mts_Ï¡_pkt
;

215 
	uack‘_bd_h—d”_u
 {

216 
ack‘_hdr_v1
 
	mbh1
;

219 
	sack‘_block_desc
 {

220 
__u32
 
	mv”siÚ
;

221 
__u32
 
	moff£t_to_´iv
;

222 
ack‘_bd_h—d”_u
 
	mhdr
;

225 
	#TPACKET2_HDRLEN
 (
	`TPACKET_ALIGN
((
ack‘2_hdr
)è+ (
sockaddr_Î
))

	)

226 
	#TPACKET3_HDRLEN
 (
	`TPACKET_ALIGN
((
ack‘3_hdr
)è+ (
sockaddr_Î
))

	)

228 
	eack‘_v”siÚs
 {

229 
	mTPACKET_V1
,

230 
	mTPACKET_V2
,

231 
	mTPACKET_V3


247 
	sack‘_»q
 {

248 
	m_block_size
;

249 
	m_block_Ä
;

250 
	m_äame_size
;

251 
	m_äame_Ä
;

254 
	sack‘_»q3
 {

255 
	m_block_size
;

256 
	m_block_Ä
;

257 
	m_äame_size
;

258 
	m_äame_Ä
;

259 
	m_»tœe_blk_tov
;

260 
	m_sizeof_´iv
;

261 
	m_ã©u»_»q_wÜd
;

264 
	uack‘_»q_u
 {

265 
ack‘_»q
 
	m»q
;

266 
ack‘_»q3
 
	m»q3
;

269 
	s·ck‘_m»q
 {

270 
	mmr_ifšdex
;

271 
	mmr_ty³
;

272 
	mmr_®’
;

273 
	mmr_add»ss
[8];

276 
	#PACKET_MR_MULTICAST
 0

	)

277 
	#PACKET_MR_PROMISC
 1

	)

278 
	#PACKET_MR_ALLMULTI
 2

	)

279 
	#PACKET_MR_UNICAST
 3

	)

	@/usr/include/net/ethernet.h

21 #iâdeà
__NET_ETHERNET_H


22 
	#__NET_ETHERNET_H
 1

	)

24 
	~<sys/cdefs.h
>

25 
	~<sys/ty³s.h
>

26 
	~<lšux/if_‘h”.h
>

28 
__BEGIN_DECLS


32 
	s‘h”_addr


34 
u_št8_t
 
	m‘h”_addr_où‘
[
ETH_ALEN
];

35 } 
__©Œibu‹__
 ((
__·cked__
));

38 
	s‘h”_h—d”


40 
u_št8_t
 
	m‘h”_dho¡
[
ETH_ALEN
];

41 
u_št8_t
 
	m‘h”_sho¡
[
ETH_ALEN
];

42 
u_št16_t
 
	m‘h”_ty³
;

43 } 
__©Œibu‹__
 ((
__·cked__
));

46 
	#ETHERTYPE_PUP
 0x0200

	)

47 
	#ETHERTYPE_SPRITE
 0x0500

	)

48 
	#ETHERTYPE_IP
 0x0800

	)

49 
	#ETHERTYPE_ARP
 0x0806

	)

50 
	#ETHERTYPE_REVARP
 0x8035

	)

51 
	#ETHERTYPE_AT
 0x809B

	)

52 
	#ETHERTYPE_AARP
 0x80F3

	)

53 
	#ETHERTYPE_VLAN
 0x8100

	)

54 
	#ETHERTYPE_IPX
 0x8137

	)

55 
	#ETHERTYPE_IPV6
 0x86dd

	)

56 
	#ETHERTYPE_LOOPBACK
 0x9000

	)

59 
	#ETHER_ADDR_LEN
 
ETH_ALEN


	)

60 
	#ETHER_TYPE_LEN
 2

	)

61 
	#ETHER_CRC_LEN
 4

	)

62 
	#ETHER_HDR_LEN
 
ETH_HLEN


	)

63 
	#ETHER_MIN_LEN
 (
ETH_ZLEN
 + 
ETHER_CRC_LEN
è

	)

64 
	#ETHER_MAX_LEN
 (
ETH_FRAME_LEN
 + 
ETHER_CRC_LEN
è

	)

67 
	#ETHER_IS_VALID_LEN
(
foo
) \

68 ((
foo
è>ğ
ETHER_MIN_LEN
 && (fooè<ğ
ETHER_MAX_LEN
)

	)

75 
	#ETHERTYPE_TRAIL
 0x1000

	)

76 
	#ETHERTYPE_NTRAILER
 16

	)

78 
	#ETHERMTU
 
ETH_DATA_LEN


	)

79 
	#ETHERMIN
 (
ETHER_MIN_LEN
 - 
ETHER_HDR_LEN
 - 
ETHER_CRC_LEN
)

	)

81 
	g__END_DECLS


	@/usr/include/net/if.h

19 #iâdeà
_NET_IF_H


20 
	#_NET_IF_H
 1

	)

22 
	~<ã©u»s.h
>

24 #ifdeà
__USE_MISC


25 
	~<sys/ty³s.h
>

26 
	~<sys/sock‘.h
>

31 
	#IF_NAMESIZE
 16

	)

33 
	sif_Çmešdex


35 
	mif_šdex
;

36 *
	mif_Çme
;

40 #ifdeà
__USE_MISC


44 
	mIFF_UP
 = 0x1,

45 
	#IFF_UP
 
IFF_UP


	)

46 
	mIFF_BROADCAST
 = 0x2,

47 
	#IFF_BROADCAST
 
IFF_BROADCAST


	)

48 
	mIFF_DEBUG
 = 0x4,

49 
	#IFF_DEBUG
 
IFF_DEBUG


	)

50 
	mIFF_LOOPBACK
 = 0x8,

51 
	#IFF_LOOPBACK
 
IFF_LOOPBACK


	)

52 
	mIFF_POINTOPOINT
 = 0x10,

53 
	#IFF_POINTOPOINT
 
IFF_POINTOPOINT


	)

54 
	mIFF_NOTRAILERS
 = 0x20,

55 
	#IFF_NOTRAILERS
 
IFF_NOTRAILERS


	)

56 
	mIFF_RUNNING
 = 0x40,

57 
	#IFF_RUNNING
 
IFF_RUNNING


	)

58 
	mIFF_NOARP
 = 0x80,

59 
	#IFF_NOARP
 
IFF_NOARP


	)

60 
	mIFF_PROMISC
 = 0x100,

61 
	#IFF_PROMISC
 
IFF_PROMISC


	)

64 
	mIFF_ALLMULTI
 = 0x200,

65 
	#IFF_ALLMULTI
 
IFF_ALLMULTI


	)

67 
	mIFF_MASTER
 = 0x400,

68 
	#IFF_MASTER
 
IFF_MASTER


	)

69 
	mIFF_SLAVE
 = 0x800,

70 
	#IFF_SLAVE
 
IFF_SLAVE


	)

72 
	mIFF_MULTICAST
 = 0x1000,

73 
	#IFF_MULTICAST
 
IFF_MULTICAST


	)

75 
	mIFF_PORTSEL
 = 0x2000,

76 
	#IFF_PORTSEL
 
IFF_PORTSEL


	)

77 
	mIFF_AUTOMEDIA
 = 0x4000,

78 
	#IFF_AUTOMEDIA
 
IFF_AUTOMEDIA


	)

79 
	mIFF_DYNAMIC
 = 0x8000

80 
	#IFF_DYNAMIC
 
IFF_DYNAMIC


	)

88 
	siçddr


90 
sockaddr
 
	miç_addr
;

93 
sockaddr
 
	mifu_brßdaddr
;

94 
sockaddr
 
	mifu_d¡addr
;

95 } 
	miç_ifu
;

96 
içû
 *
	miç_iå
;

97 
içddr
 *
	miç_Ãxt
;

100 
	#iç_brßdaddr
 
iç_ifu
.
ifu_brßdaddr


	)

101 
	#iç_d¡addr
 
iç_ifu
.
ifu_d¡addr


	)

111 
	sifm­


113 
	mmem_¡¬t
;

114 
	mmem_’d
;

115 
	mba£_addr
;

116 
	mœq
;

117 
	mdma
;

118 
	mpÜt
;

126 
	siäeq


128 
	#IFHWADDRLEN
 6

	)

129 
	#IFNAMSIZ
 
IF_NAMESIZE


	)

132 
	miän_Çme
[
IFNAMSIZ
];

133 } 
	miä_iän
;

137 
sockaddr
 
	miäu_addr
;

138 
sockaddr
 
	miäu_d¡addr
;

139 
sockaddr
 
	miäu_brßdaddr
;

140 
sockaddr
 
	miäu_Ãtmask
;

141 
sockaddr
 
	miäu_hwaddr
;

142 
	miäu_æags
;

143 
	miäu_iv®ue
;

144 
	miäu_mtu
;

145 
ifm­
 
	miäu_m­
;

146 
	miäu_¦ave
[
IFNAMSIZ
];

147 
	miäu_ÃwÇme
[
IFNAMSIZ
];

148 
__ÿddr_t
 
	miäu_d©a
;

149 } 
	miä_iäu
;

151 
	#iä_Çme
 
iä_iän
.
iän_Çme


	)

152 
	#iä_hwaddr
 
iä_iäu
.
iäu_hwaddr


	)

153 
	#iä_addr
 
iä_iäu
.
iäu_addr


	)

154 
	#iä_d¡addr
 
iä_iäu
.
iäu_d¡addr


	)

155 
	#iä_brßdaddr
 
iä_iäu
.
iäu_brßdaddr


	)

156 
	#iä_Ãtmask
 
iä_iäu
.
iäu_Ãtmask


	)

157 
	#iä_æags
 
iä_iäu
.
iäu_æags


	)

158 
	#iä_m‘ric
 
iä_iäu
.
iäu_iv®ue


	)

159 
	#iä_mtu
 
iä_iäu
.
iäu_mtu


	)

160 
	#iä_m­
 
iä_iäu
.
iäu_m­


	)

161 
	#iä_¦ave
 
iä_iäu
.
iäu_¦ave


	)

162 
	#iä_d©a
 
iä_iäu
.
iäu_d©a


	)

163 
	#iä_ifšdex
 
iä_iäu
.
iäu_iv®ue


	)

164 
	#iä_bªdwidth
 
iä_iäu
.
iäu_iv®ue


	)

165 
	#iä_qËn
 
iä_iäu
.
iäu_iv®ue


	)

166 
	#iä_ÃwÇme
 
iä_iäu
.
iäu_ÃwÇme


	)

167 
	#_IOT_iäeq
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),16,0,0)

	)

168 
	#_IOT_iäeq_shÜt
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

169 
	#_IOT_iäeq_št
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

176 
	sifcÚf


178 
	mifc_Ën
;

181 
__ÿddr_t
 
	mifcu_buf
;

182 
iäeq
 *
	mifcu_»q
;

183 } 
	mifc_ifcu
;

185 
	#ifc_buf
 
ifc_ifcu
.
ifcu_buf


	)

186 
	#ifc_»q
 
ifc_ifcu
.
ifcu_»q


	)

187 
	#_IOT_ifcÚf
 
	`_IOT
(
	`_IOTS
(
ifcÚf
),1,0,0,0,0è

	)

190 
__BEGIN_DECLS


193 
	$if_Çm‘ošdex
 (cÚ¡ *
__iâame
è
__THROW
;

194 *
	$if_šdextÚame
 (
__ifšdex
, *
__iâame
è
__THROW
;

197 
if_Çmešdex
 *
	$if_Çmešdex
 (è
__THROW
;

200 
	$if_ä“Çmešdex
 (
if_Çmešdex
 *
__±r
è
__THROW
;

202 
__END_DECLS


	@/usr/include/netdb.h

22 #iâdef 
_NETDB_H


23 
	#_NETDB_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	~<Ãtš‘/š.h
>

28 
	~<¡dšt.h
>

29 #ifdeà
__USE_MISC


32 
	~<½c/Ãtdb.h
>

35 #ifdeà
__USE_GNU


36 
	#__Ãed_sigev’t_t


	)

37 
	~<b™s/sigšfo.h
>

38 
	#__Ãed_time¥ec


	)

39 
	~<time.h
>

42 
	~<b™s/Ãtdb.h
>

45 
	#_PATH_HEQUIV
 "/‘c/ho¡s.equiv"

	)

46 
	#_PATH_HOSTS
 "/‘c/ho¡s"

	)

47 
	#_PATH_NETWORKS
 "/‘c/ÃtwÜks"

	)

48 
	#_PATH_NSSWITCH_CONF
 "/‘c/nssw™ch.cÚf"

	)

49 
	#_PATH_PROTOCOLS
 "/‘c/´ÙocŞs"

	)

50 
	#_PATH_SERVICES
 "/‘c/£rviûs"

	)

53 
	g__BEGIN_DECLS


55 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


58 
	#h_”ºo
 (*
	`__h_”ºo_loÿtiÚ
 ())

	)

61 *
	$__h_”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

65 
	#HOST_NOT_FOUND
 1

	)

66 
	#TRY_AGAIN
 2

	)

68 
	#NO_RECOVERY
 3

	)

70 
	#NO_DATA
 4

	)

73 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


74 
	#NETDB_INTERNAL
 -1

	)

75 
	#NETDB_SUCCESS
 0

	)

76 
	#NO_ADDRESS
 
NO_DATA


	)

79 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_XOPEN_EXTENDED


81 
	#IPPORT_RESERVED
 1024

	)

84 #ifdeà
__USE_GNU


86 
	#SCOPE_DELIMITER
 '%'

	)

89 #ifdeà
__USE_MISC


92 
	$h”rÜ
 (cÚ¡ *
__¡r
è
__THROW
;

95 cÚ¡ *
	$h¡»¼Ü
 (
__”r_num
è
__THROW
;

100 
	sho¡’t


102 *
h_Çme
;

103 **
h_®Ÿ£s
;

104 
h_add¹y³
;

105 
h_Ëngth
;

106 **
h_addr_li¡
;

107 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


108 
	#h_addr
 
h_addr_li¡
[0]

	)

117 
	`£tho¡’t
 (
__¡ay_İ’
);

123 
	`’dho¡’t
 ();

130 
ho¡’t
 *
	`g‘ho¡’t
 ();

137 
ho¡’t
 *
	`g‘ho¡byaddr
 (cÚ¡ *
__addr
, 
__sockËn_t
 
__Ën
,

138 
__ty³
);

144 
ho¡’t
 *
	`g‘ho¡byÇme
 (cÚ¡ *
__Çme
);

146 #ifdeà
__USE_MISC


155 
ho¡’t
 *
	`g‘ho¡byÇme2
 (cÚ¡ *
__Çme
, 
__af
);

167 
	`g‘ho¡’t_r
 (
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

168 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

169 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

170 *
__»¡riù
 
__h_”ºİ
);

172 
	`g‘ho¡byaddr_r
 (cÚ¡ *
__»¡riù
 
__addr
, 
__sockËn_t
 
__Ën
,

173 
__ty³
,

174 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

176 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

177 *
__»¡riù
 
__h_”ºİ
);

179 
	`g‘ho¡byÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

180 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

181 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

182 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

183 *
__»¡riù
 
__h_”ºİ
);

185 
	`g‘ho¡byÇme2_r
 (cÚ¡ *
__»¡riù
 
__Çme
, 
__af
,

186 
ho¡’t
 *
__»¡riù
 
__»suÉ_buf
,

187 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

188 
ho¡’t
 **
__»¡riù
 
__»suÉ
,

189 *
__»¡riù
 
__h_”ºİ
);

198 
	`£Š‘’t
 (
__¡ay_İ’
);

204 
	`’dÃ‹Á
 ();

211 
Ã‹Á
 *
	`g‘Ã‹Á
 ();

218 
Ã‹Á
 *
	`g‘Ãtbyaddr
 (
ušt32_t
 
__Ãt
, 
__ty³
);

224 
Ã‹Á
 *
	`g‘ÃtbyÇme
 (cÚ¡ *
__Çme
);

226 #ifdef 
__USE_MISC


237 
	`g‘Ã‹Á_r
 (
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

238 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

239 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

240 *
__»¡riù
 
__h_”ºİ
);

242 
	`g‘Ãtbyaddr_r
 (
ušt32_t
 
__Ãt
, 
__ty³
,

243 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

244 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

245 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

246 *
__»¡riù
 
__h_”ºİ
);

248 
	`g‘ÃtbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

249 
Ã‹Á
 *
__»¡riù
 
__»suÉ_buf
,

250 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

251 
Ã‹Á
 **
__»¡riù
 
__»suÉ
,

252 *
__»¡riù
 
__h_”ºİ
);

257 
	s£rv’t


259 *
s_Çme
;

260 **
s_®Ÿ£s
;

261 
s_pÜt
;

262 *
s_´Ùo
;

270 
	`£t£rv’t
 (
__¡ay_İ’
);

276 
	`’d£rv’t
 ();

283 
£rv’t
 *
	`g‘£rv’t
 ();

290 
£rv’t
 *
	`g‘£rvbyÇme
 (cÚ¡ *
__Çme
, cÚ¡ *
__´Ùo
);

297 
£rv’t
 *
	`g‘£rvbypÜt
 (
__pÜt
, cÚ¡ *
__´Ùo
);

300 #ifdef 
__USE_MISC


308 
	`g‘£rv’t_r
 (
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

309 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

310 
£rv’t
 **
__»¡riù
 
__»suÉ
);

312 
	`g‘£rvbyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

313 cÚ¡ *
__»¡riù
 
__´Ùo
,

314 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

315 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

316 
£rv’t
 **
__»¡riù
 
__»suÉ
);

318 
	`g‘£rvbypÜt_r
 (
__pÜt
, cÚ¡ *
__»¡riù
 
__´Ùo
,

319 
£rv’t
 *
__»¡riù
 
__»suÉ_buf
,

320 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

321 
£rv’t
 **
__»¡riù
 
__»suÉ
);

326 
	s´ÙÛÁ


328 *
p_Çme
;

329 **
p_®Ÿ£s
;

330 
p_´Ùo
;

338 
	`£rÙÛÁ
 (
__¡ay_İ’
);

344 
	`’d´ÙÛÁ
 ();

351 
´ÙÛÁ
 *
	`g‘´ÙÛÁ
 ();

357 
´ÙÛÁ
 *
	`g‘´ÙobyÇme
 (cÚ¡ *
__Çme
);

363 
´ÙÛÁ
 *
	`g‘´Ùobynumb”
 (
__´Ùo
);

366 #ifdef 
__USE_MISC


374 
	`g‘´ÙÛÁ_r
 (
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

375 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

376 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

378 
	`g‘´ÙobyÇme_r
 (cÚ¡ *
__»¡riù
 
__Çme
,

379 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

380 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

381 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

383 
	`g‘´Ùobynumb”_r
 (
__´Ùo
,

384 
´ÙÛÁ
 *
__»¡riù
 
__»suÉ_buf
,

385 *
__»¡riù
 
__buf
, 
size_t
 
__buæ’
,

386 
´ÙÛÁ
 **
__»¡riù
 
__»suÉ
);

395 
	`£Š‘g»Á
 (cÚ¡ *
__Ãtgroup
);

403 
	`’dÃtg»Á
 ();

412 
	`g‘Ãtg»Á
 (**
__»¡riù
 
__ho¡p
,

413 **
__»¡riù
 
__u£½
,

414 **
__»¡riù
 
__domašp
);

423 
	`šÃtgr
 (cÚ¡ *
__Ãtgroup
, cÚ¡ *
__ho¡
,

424 cÚ¡ *
__u£r
, cÚ¡ *
__domaš
);

432 
	`g‘Ãtg»Á_r
 (**
__»¡riù
 
__ho¡p
,

433 **
__»¡riù
 
__u£½
,

434 **
__»¡riù
 
__domašp
,

435 *
__»¡riù
 
__bufãr
, 
size_t
 
__buæ’
);

439 #ifdeà
__USE_BSD


451 
	`rcmd
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

452 cÚ¡ *
__»¡riù
 
__locu£r
,

453 cÚ¡ *
__»¡riù
 
__»mu£r
,

454 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

463 
	`rcmd_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

464 cÚ¡ *
__»¡riù
 
__locu£r
,

465 cÚ¡ *
__»¡riù
 
__»mu£r
,

466 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

467 
§_çmy_t
 
__af
);

479 
	`»xec
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

480 cÚ¡ *
__»¡riù
 
__Çme
,

481 cÚ¡ *
__»¡riù
 
__·ss
,

482 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
);

491 
	`»xec_af
 (**
__»¡riù
 
__aho¡
, 
__½Üt
,

492 cÚ¡ *
__»¡riù
 
__Çme
,

493 cÚ¡ *
__»¡riù
 
__·ss
,

494 cÚ¡ *
__»¡riù
 
__cmd
, *__»¡riù 
__fd2p
,

495 
§_çmy_t
 
__af
);

505 
	`ru£rok
 (cÚ¡ *
__rho¡
, 
__su£r
,

506 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

515 
	`ru£rok_af
 (cÚ¡ *
__rho¡
, 
__su£r
,

516 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

517 
§_çmy_t
 
__af
);

528 
	`œu£rok
 (
ušt32_t
 
__¿ddr
, 
__su£r
,

529 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
);

539 
	`œu£rok_af
 (cÚ¡ *
__¿ddr
, 
__su£r
,

540 cÚ¡ *
__»mu£r
, cÚ¡ *
__locu£r
,

541 
§_çmy_t
 
__af
);

551 
	`¼esvpÜt
 (*
__®pÜt
);

560 
	`¼esvpÜt_af
 (*
__®pÜt
, 
§_çmy_t
 
__af
);

565 #ifdef 
__USE_POSIX


567 
	saddršfo


569 
ai_æags
;

570 
ai_çmy
;

571 
ai_sockty³
;

572 
ai_´ÙocŞ
;

573 
sockËn_t
 
ai_add¾’
;

574 
sockaddr
 *
ai_addr
;

575 *
ai_ÿnÚÇme
;

576 
addršfo
 *
ai_Ãxt
;

579 #ifdeà
__USE_GNU


581 
	sgaicb


583 cÚ¡ *
¬_Çme
;

584 cÚ¡ *
¬_£rviû
;

585 cÚ¡ 
addršfo
 *
¬_»que¡
;

586 
addršfo
 *
¬_»suÉ
;

588 
__»tuº
;

589 
__glibc_»£rved
[5];

593 
	#GAI_WAIT
 0

	)

594 
	#GAI_NOWAIT
 1

	)

598 
	#AI_PASSIVE
 0x0001

	)

599 
	#AI_CANONNAME
 0x0002

	)

600 
	#AI_NUMERICHOST
 0x0004

	)

601 
	#AI_V4MAPPED
 0x0008

	)

602 
	#AI_ALL
 0x0010

	)

603 
	#AI_ADDRCONFIG
 0x0020

	)

605 #ifdeà
__USE_GNU


606 
	#AI_IDN
 0x0040

	)

609 
	#AI_CANONIDN
 0x0080

	)

610 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

612 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

615 
	#AI_NUMERICSERV
 0x0400

	)

618 
	#EAI_BADFLAGS
 -1

	)

619 
	#EAI_NONAME
 -2

	)

620 
	#EAI_AGAIN
 -3

	)

621 
	#EAI_FAIL
 -4

	)

622 
	#EAI_FAMILY
 -6

	)

623 
	#EAI_SOCKTYPE
 -7

	)

624 
	#EAI_SERVICE
 -8

	)

625 
	#EAI_MEMORY
 -10

	)

626 
	#EAI_SYSTEM
 -11

	)

627 
	#EAI_OVERFLOW
 -12

	)

628 #ifdeà
__USE_GNU


629 
	#EAI_NODATA
 -5

	)

630 
	#EAI_ADDRFAMILY
 -9

	)

631 
	#EAI_INPROGRESS
 -100

	)

632 
	#EAI_CANCELED
 -101

	)

633 
	#EAI_NOTCANCELED
 -102

	)

634 
	#EAI_ALLDONE
 -103

	)

635 
	#EAI_INTR
 -104

	)

636 
	#EAI_IDN_ENCODE
 -105

	)

639 #ifdeà
__USE_MISC


640 
	#NI_MAXHOST
 1025

	)

641 
	#NI_MAXSERV
 32

	)

644 
	#NI_NUMERICHOST
 1

	)

645 
	#NI_NUMERICSERV
 2

	)

646 
	#NI_NOFQDN
 4

	)

647 
	#NI_NAMEREQD
 8

	)

648 
	#NI_DGRAM
 16

	)

649 #ifdeà
__USE_GNU


650 
	#NI_IDN
 32

	)

651 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

653 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

662 
	`g‘addršfo
 (cÚ¡ *
__»¡riù
 
__Çme
,

663 cÚ¡ *
__»¡riù
 
__£rviû
,

664 cÚ¡ 
addršfo
 *
__»¡riù
 
__»q
,

665 
addršfo
 **
__»¡riù
 
__·i
);

668 
	$ä“addršfo
 (
addršfo
 *
__ai
è
__THROW
;

671 cÚ¡ *
	$gai_¡»¼Ü
 (
__ecode
è
__THROW
;

677 
	`g‘Çmešfo
 (cÚ¡ 
sockaddr
 *
__»¡riù
 
__§
,

678 
sockËn_t
 
__§Ën
, *
__»¡riù
 
__ho¡
,

679 
sockËn_t
 
__ho¡Ën
, *
__»¡riù
 
__£rv
,

680 
sockËn_t
 
__£rvËn
, 
__æags
);

683 #ifdeà
__USE_GNU


692 
	`g‘addršfo_a
 (
__mode
, 
gaicb
 *
__li¡
[
__»¡riù_¬r
],

693 
__’t
, 
sigev’t
 *
__»¡riù
 
__sig
);

703 
	`gai_su¥’d
 (cÚ¡ 
gaicb
 *cÚ¡ 
__li¡
[], 
__’t
,

704 cÚ¡ 
time¥ec
 *
__timeout
);

707 
	$gai_”rÜ
 (
gaicb
 *
__»q
è
__THROW
;

710 
	$gai_ÿnûl
 (
gaicb
 *
__gaicbp
è
__THROW
;

713 
__END_DECLS


	@/usr/include/netinet/ether.h

19 #iâdeà
_NETINET_ETHER_H


20 
	#_NETINET_ETHER_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<Ãtš‘/if_‘h”.h
>

27 
__BEGIN_DECLS


30 *
	$‘h”_Áß
 (cÚ¡ 
‘h”_addr
 *
__addr
è
__THROW
;

31 *
	$‘h”_Áß_r
 (cÚ¡ 
‘h”_addr
 *
__addr
, *
__buf
)

32 
__THROW
;

35 
‘h”_addr
 *
	$‘h”_©Ú
 (cÚ¡ *
__asc
è
__THROW
;

36 
‘h”_addr
 *
	$‘h”_©Ú_r
 (cÚ¡ *
__asc
,

37 
‘h”_addr
 *
__addr
è
__THROW
;

40 
	$‘h”_Áoho¡
 (*
__ho¡Çme
, cÚ¡ 
‘h”_addr
 *
__addr
)

41 
__THROW
;

44 
	$‘h”_ho¡tÚ
 (cÚ¡ *
__ho¡Çme
, 
‘h”_addr
 *
__addr
)

45 
__THROW
;

48 
	$‘h”_lše
 (cÚ¡ *
__lše
, 
‘h”_addr
 *
__addr
,

49 *
__ho¡Çme
è
__THROW
;

51 
__END_DECLS


	@/usr/include/netinet/in.h

18 #iâdef 
_NETINET_IN_H


19 
	#_NETINET_IN_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<¡dšt.h
>

23 
	~<sys/sock‘.h
>

24 
	~<b™s/ty³s.h
>

27 
__BEGIN_DECLS


30 
ušt32_t
 
	tš_addr_t
;

31 
	sš_addr


33 
š_addr_t
 
	ms_addr
;

37 
	~<b™s/š.h
>

42 
	mIPPROTO_IP
 = 0,

43 
	#IPPROTO_IP
 
IPPROTO_IP


	)

44 
	mIPPROTO_ICMP
 = 1,

45 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

46 
	mIPPROTO_IGMP
 = 2,

47 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

48 
	mIPPROTO_IPIP
 = 4,

49 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

50 
	mIPPROTO_TCP
 = 6,

51 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

52 
	mIPPROTO_EGP
 = 8,

53 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

54 
	mIPPROTO_PUP
 = 12,

55 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

56 
	mIPPROTO_UDP
 = 17,

57 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

58 
	mIPPROTO_IDP
 = 22,

59 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

60 
	mIPPROTO_TP
 = 29,

61 
	#IPPROTO_TP
 
IPPROTO_TP


	)

62 
	mIPPROTO_DCCP
 = 33,

63 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

64 
	mIPPROTO_IPV6
 = 41,

65 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

66 
	mIPPROTO_RSVP
 = 46,

67 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

68 
	mIPPROTO_GRE
 = 47,

69 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

70 
	mIPPROTO_ESP
 = 50,

71 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

72 
	mIPPROTO_AH
 = 51,

73 
	#IPPROTO_AH
 
IPPROTO_AH


	)

74 
	mIPPROTO_MTP
 = 92,

75 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

76 
	mIPPROTO_BEETPH
 = 94,

77 
	#IPPROTO_BEETPH
 
IPPROTO_BEETPH


	)

78 
	mIPPROTO_ENCAP
 = 98,

79 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

80 
	mIPPROTO_PIM
 = 103,

81 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

82 
	mIPPROTO_COMP
 = 108,

83 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

84 
	mIPPROTO_SCTP
 = 132,

85 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

86 
	mIPPROTO_UDPLITE
 = 136,

87 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

88 
	mIPPROTO_RAW
 = 255,

89 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

90 
	mIPPROTO_MAX


96 #iâdeà
__USE_KERNEL_IPV6_DEFS


99 
	mIPPROTO_HOPOPTS
 = 0,

100 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

101 
	mIPPROTO_ROUTING
 = 43,

102 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

103 
	mIPPROTO_FRAGMENT
 = 44,

104 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

105 
	mIPPROTO_ICMPV6
 = 58,

106 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

107 
	mIPPROTO_NONE
 = 59,

108 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

109 
	mIPPROTO_DSTOPTS
 = 60,

110 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

111 
	mIPPROTO_MH
 = 135

112 
	#IPPROTO_MH
 
IPPROTO_MH


	)

117 
ušt16_t
 
	tš_pÜt_t
;

122 
	mIPPORT_ECHO
 = 7,

123 
	mIPPORT_DISCARD
 = 9,

124 
	mIPPORT_SYSTAT
 = 11,

125 
	mIPPORT_DAYTIME
 = 13,

126 
	mIPPORT_NETSTAT
 = 15,

127 
	mIPPORT_FTP
 = 21,

128 
	mIPPORT_TELNET
 = 23,

129 
	mIPPORT_SMTP
 = 25,

130 
	mIPPORT_TIMESERVER
 = 37,

131 
	mIPPORT_NAMESERVER
 = 42,

132 
	mIPPORT_WHOIS
 = 43,

133 
	mIPPORT_MTP
 = 57,

135 
	mIPPORT_TFTP
 = 69,

136 
	mIPPORT_RJE
 = 77,

137 
	mIPPORT_FINGER
 = 79,

138 
	mIPPORT_TTYLINK
 = 87,

139 
	mIPPORT_SUPDUP
 = 95,

142 
	mIPPORT_EXECSERVER
 = 512,

143 
	mIPPORT_LOGINSERVER
 = 513,

144 
	mIPPORT_CMDSERVER
 = 514,

145 
	mIPPORT_EFSSERVER
 = 520,

148 
	mIPPORT_BIFFUDP
 = 512,

149 
	mIPPORT_WHOSERVER
 = 513,

150 
	mIPPORT_ROUTESERVER
 = 520,

153 
	mIPPORT_RESERVED
 = 1024,

156 
	mIPPORT_USERRESERVED
 = 5000

164 
	#IN_CLASSA
(
a
è((((
š_addr_t
)×)è& 0x80000000è=ğ0)

	)

165 
	#IN_CLASSA_NET
 0xff000000

	)

166 
	#IN_CLASSA_NSHIFT
 24

	)

167 
	#IN_CLASSA_HOST
 (0xfffffffà& ~
IN_CLASSA_NET
)

	)

168 
	#IN_CLASSA_MAX
 128

	)

170 
	#IN_CLASSB
(
a
è((((
š_addr_t
)×)è& 0xc0000000è=ğ0x80000000)

	)

171 
	#IN_CLASSB_NET
 0xffff0000

	)

172 
	#IN_CLASSB_NSHIFT
 16

	)

173 
	#IN_CLASSB_HOST
 (0xfffffffà& ~
IN_CLASSB_NET
)

	)

174 
	#IN_CLASSB_MAX
 65536

	)

176 
	#IN_CLASSC
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xc0000000)

	)

177 
	#IN_CLASSC_NET
 0xffffff00

	)

178 
	#IN_CLASSC_NSHIFT
 8

	)

179 
	#IN_CLASSC_HOST
 (0xfffffffà& ~
IN_CLASSC_NET
)

	)

181 
	#IN_CLASSD
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xe0000000)

	)

182 
	#IN_MULTICAST
(
a
è
	`IN_CLASSD
×)

	)

184 
	#IN_EXPERIMENTAL
(
a
è((((
š_addr_t
)×)è& 0xe0000000è=ğ0xe0000000)

	)

185 
	#IN_BADCLASS
(
a
è((((
š_addr_t
)×)è& 0xf0000000è=ğ0xf0000000)

	)

188 
	#INADDR_ANY
 ((
š_addr_t
è0x00000000)

	)

190 
	#INADDR_BROADCAST
 ((
š_addr_t
è0xffffffff)

	)

192 
	#INADDR_NONE
 ((
š_addr_t
è0xffffffff)

	)

195 
	#IN_LOOPBACKNET
 127

	)

197 #iâdeà
INADDR_LOOPBACK


198 
	#INADDR_LOOPBACK
 ((
š_addr_t
è0x7f000001è

	)

202 
	#INADDR_UNSPEC_GROUP
 ((
š_addr_t
è0xe0000000è

	)

203 
	#INADDR_ALLHOSTS_GROUP
 ((
š_addr_t
è0xe0000001è

	)

204 
	#INADDR_ALLRTRS_GROUP
 ((
š_addr_t
è0xe0000002è

	)

205 
	#INADDR_MAX_LOCAL_GROUP
 ((
š_addr_t
è0xe00000ffè

	)

207 #iâdeà
__USE_KERNEL_IPV6_DEFS


209 
	sš6_addr


213 
ušt8_t
 
	m__u6_addr8
[16];

214 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


215 
ušt16_t
 
	m__u6_addr16
[8];

216 
ušt32_t
 
	m__u6_addr32
[4];

218 } 
	m__š6_u
;

219 
	#s6_addr
 
__š6_u
.
__u6_addr8


	)

220 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


221 
	#s6_addr16
 
__š6_u
.
__u6_addr16


	)

222 
	#s6_addr32
 
__š6_u
.
__u6_addr32


	)

227 cÚ¡ 
š6_addr
 
š6addr_ªy
;

228 cÚ¡ 
š6_addr
 
š6addr_loİback
;

229 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

230 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

232 
	#INET_ADDRSTRLEN
 16

	)

233 
	#INET6_ADDRSTRLEN
 46

	)

237 
	ssockaddr_š


239 
__SOCKADDR_COMMON
 (
sš_
);

240 
š_pÜt_t
 
	msš_pÜt
;

241 
š_addr
 
	msš_addr
;

244 
	msš_z”o
[ (
sockaddr
) -

245 
__SOCKADDR_COMMON_SIZE
 -

246  (
š_pÜt_t
) -

247  (
š_addr
)];

250 #iâdeà
__USE_KERNEL_IPV6_DEFS


252 
	ssockaddr_š6


254 
__SOCKADDR_COMMON
 (
sš6_
);

255 
š_pÜt_t
 
	msš6_pÜt
;

256 
ušt32_t
 
	msš6_æowšfo
;

257 
š6_addr
 
	msš6_addr
;

258 
ušt32_t
 
	msš6_scİe_id
;

262 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


264 
	s_m»q


267 
š_addr
 
	mimr_muÉŸddr
;

270 
š_addr
 
	mimr_š‹rçû
;

273 
	s_m»q_sourû


276 
š_addr
 
	mimr_muÉŸddr
;

279 
š_addr
 
	mimr_š‹rçû
;

282 
š_addr
 
	mimr_sourûaddr
;

286 #iâdeà
__USE_KERNEL_IPV6_DEFS


288 
	sv6_m»q


291 
š6_addr
 
	mv6mr_muÉŸddr
;

294 
	mv6mr_š‹rçû
;

298 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


300 
	sgroup_»q


303 
ušt32_t
 
	mgr_š‹rçû
;

306 
sockaddr_¡Üage
 
	mgr_group
;

309 
	sgroup_sourû_»q


312 
ušt32_t
 
	mg¤_š‹rçû
;

315 
sockaddr_¡Üage
 
	mg¤_group
;

318 
sockaddr_¡Üage
 
	mg¤_sourû
;

323 
	s_msf‹r


326 
š_addr
 
	mimsf_muÉŸddr
;

329 
š_addr
 
	mimsf_š‹rçû
;

332 
ušt32_t
 
	mimsf_fmode
;

335 
ušt32_t
 
	mimsf_num¤c
;

337 
š_addr
 
	mimsf_¦i¡
[1];

340 
	#IP_MSFILTER_SIZE
(
num¤c
è( (
_msf‹r
) \

341 -  (
š_addr
) \

342 + (
num¤c
è*  (
š_addr
))

	)

344 
	sgroup_f‹r


347 
ušt32_t
 
	mgf_š‹rçû
;

350 
sockaddr_¡Üage
 
	mgf_group
;

353 
ušt32_t
 
	mgf_fmode
;

356 
ušt32_t
 
	mgf_num¤c
;

358 
sockaddr_¡Üage
 
	mgf_¦i¡
[1];

361 
	#GROUP_FILTER_SIZE
(
num¤c
è( (
group_f‹r
) \

362 -  (
sockaddr_¡Üage
) \

363 + ((
num¤c
) \

364 *  (
sockaddr_¡Üage
)))

	)

374 
ušt32_t
 
	$Áohl
 (
ušt32_t
 
__ÃÚg
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

375 
ušt16_t
 
	$Áohs
 (
ušt16_t
 
__ÃtshÜt
)

376 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

377 
ušt32_t
 
	$htÚl
 (
ušt32_t
 
__ho¡lÚg
)

378 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

379 
ušt16_t
 
	$htÚs
 (
ušt16_t
 
__ho¡shÜt
)

380 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

382 
	~<’dŸn.h
>

385 
	~<b™s/by‹sw­.h
>

387 #ifdeà
__OPTIMIZE__


391 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


394 
	#Áohl
(
x
è(x)

	)

395 
	#Áohs
(
x
è(x)

	)

396 
	#htÚl
(
x
è(x)

	)

397 
	#htÚs
(
x
è(x)

	)

399 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


400 
	#Áohl
(
x
è
	`__bsw­_32
 (x)

	)

401 
	#Áohs
(
x
è
	`__bsw­_16
 (x)

	)

402 
	#htÚl
(
x
è
	`__bsw­_32
 (x)

	)

403 
	#htÚs
(
x
è
	`__bsw­_16
 (x)

	)

408 #ifdeà
__GNUC__


409 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

410 (
__ex‹nsiÚ__
 \

411 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

412 
__a
->
s6_addr32
[0] == 0 \

413 && 
__a
->
s6_addr32
[1] == 0 \

414 && 
__a
->
s6_addr32
[2] == 0 \

415 && 
__a
->
s6_addr32
[3] =ğ0; 
	}
}))

	)

417 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

418 (
__ex‹nsiÚ__
 \

419 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

420 
__a
->
s6_addr32
[0] == 0 \

421 && 
__a
->
s6_addr32
[1] == 0 \

422 && 
__a
->
s6_addr32
[2] == 0 \

423 && 
__a
->
s6_addr32
[3] =ğ
	`htÚl
 (1); }))

	)

425 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

426 (
__ex‹nsiÚ__
 \

427 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

428 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xã800000); }))

	)

430 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

431 (
__ex‹nsiÚ__
 \

432 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

433 (
__a
->
s6_addr32
[0] & 
	`htÚl
 (0xffc00000)è=ğhtÚÈ(0xãc00000); }))

	)

435 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

436 (
__ex‹nsiÚ__
 \

437 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

438 
__a
->
s6_addr32
[0] == 0 \

439 && 
__a
->
s6_addr32
[1] == 0 \

440 && 
__a
->
s6_addr32
[2] =ğ
	`htÚl
 (0xffff); }))

	)

442 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

443 (
__ex‹nsiÚ__
 \

444 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

445 
__a
->
s6_addr32
[0] == 0 \

446 && 
__a
->
s6_addr32
[1] == 0 \

447 && 
__a
->
s6_addr32
[2] == 0 \

448 && 
	`Áohl
 (
__a
->
s6_addr32
[3]è> 1; }))

	)

450 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

451 (
__ex‹nsiÚ__
 \

452 ({ cÚ¡ 
š6_addr
 *
__a
 = (cÚ¡ š6_add¸*è(
a
); \

453 cÚ¡ 
š6_addr
 *
__b
 = (cÚ¡ š6_add¸*è(
b
); \

454 
__a
->
s6_addr32
[0] =ğ
__b
->s6_addr32[0] \

455 && 
__a
->
s6_addr32
[1] =ğ
__b
->s6_addr32[1] \

456 && 
__a
->
s6_addr32
[2] =ğ
__b
->s6_addr32[2] \

457 && 
__a
->
s6_addr32
[3] =ğ
__b
->s6_addr32[3]; }))

	)

459 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

460 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

461 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

462 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

463 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ0)

	)

465 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

466 (((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0 \

467 && ((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0 \

468 && ((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0 \

469 && ((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ
	`htÚl
 (1))

	)

471 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

472 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

473 =ğ
	`htÚl
 (0xã800000))

	)

475 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

476 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] & 
	`htÚl
 (0xffc00000)) \

477 =ğ
	`htÚl
 (0xãc00000))

	)

479 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

480 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

481 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

482 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ
	`htÚl
 (0xffff)))

	)

484 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

485 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] == 0) \

486 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] == 0) \

487 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] == 0) \

488 && (
	`Áohl
 (((cÚ¡ 
ušt32_t
 *è(
a
))[3]è> 1))

	)

490 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

491 ((((cÚ¡ 
ušt32_t
 *è(
a
))[0] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[0]) \

492 && (((cÚ¡ 
ušt32_t
 *è(
a
))[1] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[1]) \

493 && (((cÚ¡ 
ušt32_t
 *è(
a
))[2] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[2]) \

494 && (((cÚ¡ 
ušt32_t
 *è(
a
))[3] =ğ((cÚ¡ ušt32_ˆ*è(
b
))[3]))

	)

497 
	#IN6_IS_ADDR_MULTICAST
(
a
è(((cÚ¡ 
ušt8_t
 *è×))[0] =ğ0xff)

	)

499 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_GNU


501 
	$bšd»svpÜt
 (
__sockfd
, 
sockaddr_š
 *
__sock_š
è
__THROW
;

504 
	$bšd»svpÜt6
 (
__sockfd
, 
sockaddr_š6
 *
__sock_š
)

505 
__THROW
;

509 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

510 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

511 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x1))

	)

513 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

514 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

515 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x2))

	)

517 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

518 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

519 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x5))

	)

521 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

522 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

523 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0x8))

	)

525 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

526 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

527 && ((((cÚ¡ 
ušt8_t
 *è(
a
))[1] & 0xfè=ğ0xe))

	)

530 #ifdeà
__USE_GNU


531 
cmsghdr
;

534 
	sš6_pktšfo


536 
š6_addr
 
i6_addr
;

537 
i6_ifšdex
;

541 
	s6_mtušfo


543 
sockaddr_š6
 
6m_addr
;

544 
ušt32_t
 
6m_mtu
;

549 
	$š‘6_İtiÚ_¥aû
 (
__nby‹s
)

550 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

551 
	$š‘6_İtiÚ_š™
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

552 
__ty³
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

553 
	$š‘6_İtiÚ_­³nd
 (
cmsghdr
 *
__cmsg
,

554 cÚ¡ 
ušt8_t
 *
__ty³p
, 
__muÉx
,

555 
__¶usy
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

556 
ušt8_t
 *
	$š‘6_İtiÚ_®loc
 (
cmsghdr
 *
__cmsg
, 
__d©®’
,

557 
__muÉx
, 
__¶usy
)

558 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

559 
	$š‘6_İtiÚ_Ãxt
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

560 
ušt8_t
 **
__Œp
)

561 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

562 
	$š‘6_İtiÚ_fšd
 (cÚ¡ 
cmsghdr
 *
__cmsg
,

563 
ušt8_t
 **
__Œp
, 
__ty³
)

564 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

568 
	$š‘6_İt_š™
 (*
__extbuf
, 
sockËn_t
 
__ex’
è
__THROW
;

569 
	$š‘6_İt_­³nd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

570 
ušt8_t
 
__ty³
, 
sockËn_t
 
__Ën
, ušt8_ˆ
__®ign
,

571 **
__d©abuå
è
__THROW
;

572 
	$š‘6_İt_fšish
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
)

573 
__THROW
;

574 
	$š‘6_İt_£t_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

575 
sockËn_t
 
__v®Ën
è
__THROW
;

576 
	$š‘6_İt_Ãxt
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

577 
ušt8_t
 *
__ty³p
, 
sockËn_t
 *
__ËÅ
,

578 **
__d©abuå
è
__THROW
;

579 
	$š‘6_İt_fšd
 (*
__extbuf
, 
sockËn_t
 
__ex’
, 
__off£t
,

580 
ušt8_t
 
__ty³
, 
sockËn_t
 *
__ËÅ
,

581 **
__d©abuå
è
__THROW
;

582 
	$š‘6_İt_g‘_v®
 (*
__d©abuf
, 
__off£t
, *
__v®
,

583 
sockËn_t
 
__v®Ën
è
__THROW
;

587 
sockËn_t
 
	$š‘6_¹h_¥aû
 (
__ty³
, 
__£gm’ts
è
__THROW
;

588 *
	$š‘6_¹h_š™
 (*
__bp
, 
sockËn_t
 
__bp_Ën
, 
__ty³
,

589 
__£gm’ts
è
__THROW
;

590 
	$š‘6_¹h_add
 (*
__bp
, cÚ¡ 
š6_addr
 *
__addr
è
__THROW
;

591 
	$š‘6_¹h_»v”£
 (cÚ¡ *
__š
, *
__out
è
__THROW
;

592 
	$š‘6_¹h_£gm’ts
 (cÚ¡ *
__bp
è
__THROW
;

593 
š6_addr
 *
	$š‘6_¹h_g‘addr
 (cÚ¡ *
__bp
, 
__šdex
)

594 
__THROW
;

600 
	$g‘v4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

601 
š_addr
 
__group
, 
ušt32_t
 *
__fmode
,

602 
ušt32_t
 *
__num¤c
, 
š_addr
 *
__¦i¡
)

603 
__THROW
;

606 
	$£tv4sourûf‹r
 (
__s
, 
š_addr
 
__š‹rçû_addr
,

607 
š_addr
 
__group
, 
ušt32_t
 
__fmode
,

608 
ušt32_t
 
__num¤c
,

609 cÚ¡ 
š_addr
 *
__¦i¡
)

610 
__THROW
;

614 
	$g‘sourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

615 cÚ¡ 
sockaddr
 *
__group
,

616 
sockËn_t
 
__grou¶’
, 
ušt32_t
 *
__fmode
,

617 
ušt32_t
 *
__num¤c
,

618 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

621 
	$£tsourûf‹r
 (
__s
, 
ušt32_t
 
__š‹rçû_addr
,

622 cÚ¡ 
sockaddr
 *
__group
,

623 
sockËn_t
 
__grou¶’
, 
ušt32_t
 
__fmode
,

624 
ušt32_t
 
__num¤c
,

625 cÚ¡ 
sockaddr_¡Üage
 *
__¦i¡
è
__THROW
;

628 
__END_DECLS


	@/usr/include/netinet/ip.h

18 #iâdeà
__NETINET_IP_H


19 
	#__NETINET_IP_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sys/ty³s.h
>

24 
	~<Ãtš‘/š.h
>

26 
__BEGIN_DECLS


28 
	stime¡amp


30 
u_št8_t
 
	mËn
;

31 
u_št8_t
 
	m±r
;

32 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


33 
	mæags
:4;

34 
	mov”æow
:4;

35 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


36 
	mov”æow
:4;

37 
	mæags
:4;

41 
u_št32_t
 
	md©a
[9];

44 
	shdr


46 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


47 
	mihl
:4;

48 
	mv”siÚ
:4;

49 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


50 
	mv”siÚ
:4;

51 
	mihl
:4;

55 
u_št8_t
 
	mtos
;

56 
u_št16_t
 
	mtÙ_Ën
;

57 
u_št16_t
 
	mid
;

58 
u_št16_t
 
	mäag_off
;

59 
u_št8_t
 
	m‰l
;

60 
u_št8_t
 
	m´ÙocŞ
;

61 
u_št16_t
 
	mcheck
;

62 
u_št32_t
 
	m§ddr
;

63 
u_št32_t
 
	mdaddr
;

67 #ifdeà
__USE_BSD


107 
	s


109 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


110 
	m_hl
:4;

111 
	m_v
:4;

113 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


114 
	m_v
:4;

115 
	m_hl
:4;

117 
u_št8_t
 
	m_tos
;

118 
u_shÜt
 
	m_Ën
;

119 
u_shÜt
 
	m_id
;

120 
u_shÜt
 
	m_off
;

121 
	#IP_RF
 0x8000

	)

122 
	#IP_DF
 0x4000

	)

123 
	#IP_MF
 0x2000

	)

124 
	#IP_OFFMASK
 0x1ffà

	)

125 
u_št8_t
 
	m_‰l
;

126 
u_št8_t
 
	m_p
;

127 
u_shÜt
 
	m_sum
;

128 
š_addr
 
	m_¤c
, 
	m_d¡
;

134 
	s_time¡amp


136 
u_št8_t
 
	mt_code
;

137 
u_št8_t
 
	mt_Ën
;

138 
u_št8_t
 
	mt_±r
;

139 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


140 
	mt_æg
:4;

141 
	mt_oæw
:4;

143 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


144 
	mt_oæw
:4;

145 
	mt_æg
:4;

147 
u_št32_t
 
	md©a
[9];

151 
	#IPVERSION
 4

	)

152 
	#IP_MAXPACKET
 65535

	)

160 
	#IPTOS_ECN_MASK
 0x03

	)

161 
	#IPTOS_ECN
(
x
è((xè& 
IPTOS_ECN_MASK
)

	)

162 
	#IPTOS_ECN_NOT_ECT
 0x00

	)

163 
	#IPTOS_ECN_ECT1
 0x01

	)

164 
	#IPTOS_ECN_ECT0
 0x02

	)

165 
	#IPTOS_ECN_CE
 0x03

	)

173 
	#IPTOS_DSCP_MASK
 0xfc

	)

174 
	#IPTOS_DSCP
(
x
è((xè& 
IPTOS_DSCP_MASK
)

	)

175 
	#IPTOS_DSCP_AF11
 0x28

	)

176 
	#IPTOS_DSCP_AF12
 0x30

	)

177 
	#IPTOS_DSCP_AF13
 0x38

	)

178 
	#IPTOS_DSCP_AF21
 0x48

	)

179 
	#IPTOS_DSCP_AF22
 0x50

	)

180 
	#IPTOS_DSCP_AF23
 0x58

	)

181 
	#IPTOS_DSCP_AF31
 0x68

	)

182 
	#IPTOS_DSCP_AF32
 0x70

	)

183 
	#IPTOS_DSCP_AF33
 0x78

	)

184 
	#IPTOS_DSCP_AF41
 0x88

	)

185 
	#IPTOS_DSCP_AF42
 0x90

	)

186 
	#IPTOS_DSCP_AF43
 0x98

	)

187 
	#IPTOS_DSCP_EF
 0xb8

	)

194 
	#IPTOS_CLASS_MASK
 0xe0

	)

195 
	#IPTOS_CLASS
(
şass
è((şassè& 
IPTOS_CLASS_MASK
)

	)

196 
	#IPTOS_CLASS_CS0
 0x00

	)

197 
	#IPTOS_CLASS_CS1
 0x20

	)

198 
	#IPTOS_CLASS_CS2
 0x40

	)

199 
	#IPTOS_CLASS_CS3
 0x60

	)

200 
	#IPTOS_CLASS_CS4
 0x80

	)

201 
	#IPTOS_CLASS_CS5
 0xa0

	)

202 
	#IPTOS_CLASS_CS6
 0xc0

	)

203 
	#IPTOS_CLASS_CS7
 0xe0

	)

205 
	#IPTOS_CLASS_DEFAULT
 
IPTOS_CLASS_CS0


	)

211 
	#IPTOS_TOS_MASK
 0x1E

	)

212 
	#IPTOS_TOS
(
tos
è(Ñosè& 
IPTOS_TOS_MASK
)

	)

213 
	#IPTOS_LOWDELAY
 0x10

	)

214 
	#IPTOS_THROUGHPUT
 0x08

	)

215 
	#IPTOS_RELIABILITY
 0x04

	)

216 
	#IPTOS_LOWCOST
 0x02

	)

217 
	#IPTOS_MINCOST
 
IPTOS_LOWCOST


	)

222 
	#IPTOS_PREC_MASK
 
IPTOS_CLASS_MASK


	)

223 
	#IPTOS_PREC
(
tos
è
	`IPTOS_CLASS
Ños)

	)

224 
	#IPTOS_PREC_NETCONTROL
 
IPTOS_CLASS_CS7


	)

225 
	#IPTOS_PREC_INTERNETCONTROL
 
IPTOS_CLASS_CS6


	)

226 
	#IPTOS_PREC_CRITIC_ECP
 
IPTOS_CLASS_CS5


	)

227 
	#IPTOS_PREC_FLASHOVERRIDE
 
IPTOS_CLASS_CS4


	)

228 
	#IPTOS_PREC_FLASH
 
IPTOS_CLASS_CS3


	)

229 
	#IPTOS_PREC_IMMEDIATE
 
IPTOS_CLASS_CS2


	)

230 
	#IPTOS_PREC_PRIORITY
 
IPTOS_CLASS_CS1


	)

231 
	#IPTOS_PREC_ROUTINE
 
IPTOS_CLASS_CS0


	)

236 
	#IPOPT_COPY
 0x80

	)

237 
	#IPOPT_CLASS_MASK
 0x60

	)

238 
	#IPOPT_NUMBER_MASK
 0x1f

	)

240 
	#IPOPT_COPIED
(
o
è((oè& 
IPOPT_COPY
)

	)

241 
	#IPOPT_CLASS
(
o
è((oè& 
IPOPT_CLASS_MASK
)

	)

242 
	#IPOPT_NUMBER
(
o
è((oè& 
IPOPT_NUMBER_MASK
)

	)

244 
	#IPOPT_CONTROL
 0x00

	)

245 
	#IPOPT_RESERVED1
 0x20

	)

246 
	#IPOPT_DEBMEAS
 0x40

	)

247 
	#IPOPT_MEASUREMENT
 
IPOPT_DEBMEAS


	)

248 
	#IPOPT_RESERVED2
 0x60

	)

250 
	#IPOPT_EOL
 0

	)

251 
	#IPOPT_END
 
IPOPT_EOL


	)

252 
	#IPOPT_NOP
 1

	)

253 
	#IPOPT_NOOP
 
IPOPT_NOP


	)

255 
	#IPOPT_RR
 7

	)

256 
	#IPOPT_TS
 68

	)

257 
	#IPOPT_TIMESTAMP
 
IPOPT_TS


	)

258 
	#IPOPT_SECURITY
 130

	)

259 
	#IPOPT_SEC
 
IPOPT_SECURITY


	)

260 
	#IPOPT_LSRR
 131

	)

261 
	#IPOPT_SATID
 136

	)

262 
	#IPOPT_SID
 
IPOPT_SATID


	)

263 
	#IPOPT_SSRR
 137

	)

264 
	#IPOPT_RA
 148

	)

269 
	#IPOPT_OPTVAL
 0

	)

270 
	#IPOPT_OLEN
 1

	)

271 
	#IPOPT_OFFSET
 2

	)

272 
	#IPOPT_MINOFF
 4

	)

274 
	#MAX_IPOPTLEN
 40

	)

277 
	#IPOPT_TS_TSONLY
 0

	)

278 
	#IPOPT_TS_TSANDADDR
 1

	)

279 
	#IPOPT_TS_PRESPEC
 3

	)

282 
	#IPOPT_SECUR_UNCLASS
 0x0000

	)

283 
	#IPOPT_SECUR_CONFID
 0xf135

	)

284 
	#IPOPT_SECUR_EFTO
 0x789a

	)

285 
	#IPOPT_SECUR_MMMM
 0xbc4d

	)

286 
	#IPOPT_SECUR_RESTR
 0xaf13

	)

287 
	#IPOPT_SECUR_SECRET
 0xd788

	)

288 
	#IPOPT_SECUR_TOPSECRET
 0x6bc5

	)

293 
	#MAXTTL
 255

	)

294 
	#IPDEFTTL
 64

	)

295 
	#IPFRAGTTL
 60

	)

296 
	#IPTTLDEC
 1

	)

298 
	#IP_MSS
 576

	)

300 
	g__END_DECLS


	@/usr/include/pcap.h

45 
	~<pÿp/pÿp.h
>

	@/usr/include/pthread.h

18 #iâdeà
_PTHREAD_H


19 
	#_PTHREAD_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<’dŸn.h
>

23 
	~<sched.h
>

24 
	~<time.h
>

26 
	~<b™s/±h»adty³s.h
>

27 
	~<b™s/£tjmp.h
>

28 
	~<b™s/wÜdsize.h
>

34 
	mPTHREAD_CREATE_JOINABLE
,

35 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

36 
	mPTHREAD_CREATE_DETACHED


37 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

44 
	mPTHREAD_MUTEX_TIMED_NP
,

45 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

46 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

47 
	mPTHREAD_MUTEX_ADAPTIVE_NP


48 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


50 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

51 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

52 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

53 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


55 #ifdeà
__USE_GNU


57 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


62 #ifdeà
__USE_XOPEN2K


66 
	mPTHREAD_MUTEX_STALLED
,

67 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

68 
	mPTHREAD_MUTEX_ROBUST
,

69 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


74 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


78 
	mPTHREAD_PRIO_NONE
,

79 
	mPTHREAD_PRIO_INHERIT
,

80 
	mPTHREAD_PRIO_PROTECT


86 #ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 1

87 
	#__PTHREAD_SPINS
 0, 0

	)

88 #–ià
__PTHREAD_MUTEX_HAVE_ELISION
 == 2

89 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

91 
	#__PTHREAD_SPINS
 0

	)

94 #ifdeà
__PTHREAD_MUTEX_HAVE_PREV


95 
	#PTHREAD_MUTEX_INITIALIZER
 \

96 { { 0, 0, 0, 0, 0, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

97 #ifdeà
__USE_GNU


98 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

100 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

101 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

102 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

103 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

104 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

105 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 
__PTHREAD_SPINS
, { 0, 0 } } }

	)

109 
	#PTHREAD_MUTEX_INITIALIZER
 \

110 { { 0, 0, 0, 0, 0, { 
__PTHREAD_SPINS
 } } }

	)

111 #ifdeà
__USE_GNU


112 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

113 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

114 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

115 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

116 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

117 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 
__PTHREAD_SPINS
 } } }

	)

124 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


127 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

128 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

129 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

130 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


136 #iâdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


137 #ià
__WORDSIZE
 == 64

138 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

143 
	#PTHREAD_RWLOCK_INITIALIZER
 \

144 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

145 #ifdeà
__USE_GNU


146 #ifdeà
__PTHREAD_RWLOCK_INT_FLAGS_SHARED


147 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

149 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

151 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


152 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

153 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

154 0, 0, 0, 0 } }

	)

156 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

157 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

158 0 } }

	)

168 
	mPTHREAD_INHERIT_SCHED
,

169 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

170 
	mPTHREAD_EXPLICIT_SCHED


171 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

178 
	mPTHREAD_SCOPE_SYSTEM
,

179 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

180 
	mPTHREAD_SCOPE_PROCESS


181 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

188 
	mPTHREAD_PROCESS_PRIVATE
,

189 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

190 
	mPTHREAD_PROCESS_SHARED


191 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

197 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

201 
	s_±h»ad_ş—nup_bufãr


203 (*
	m__routše
) (*);

204 *
	m__¬g
;

205 
	m__ÿnûÉy³
;

206 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

212 
	mPTHREAD_CANCEL_ENABLE
,

213 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

214 
	mPTHREAD_CANCEL_DISABLE


215 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

219 
	mPTHREAD_CANCEL_DEFERRED
,

220 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

221 
	mPTHREAD_CANCEL_ASYNCHRONOUS


222 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

224 
	#PTHREAD_CANCELED
 ((*è-1)

	)

228 
	#PTHREAD_ONCE_INIT
 0

	)

231 #ifdeà
__USE_XOPEN2K


235 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

239 
__BEGIN_DECLS


244 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

245 cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

246 *(*
__¡¬t_routše
) (*),

247 *
__»¡riù
 
__¬g
è
__THROWNL
 
__nÚnuÎ
 ((1, 3));

253 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

261 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

263 #ifdeà
__USE_GNU


266 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

274 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

275 cÚ¡ 
time¥ec
 *
__ab¡ime
);

282 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

286 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

289 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
)

290 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

298 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

301 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

302 
__THROW
 
	`__nÚnuÎ
 ((1));

305 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

306 *
__d‘ach¡©e
)

307 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

310 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

311 
__d‘ach¡©e
)

312 
__THROW
 
	`__nÚnuÎ
 ((1));

316 
	$±h»ad_©Œ_g‘gu¬dsize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

317 
size_t
 *
__gu¬dsize
)

318 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

321 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

322 
size_t
 
__gu¬dsize
)

323 
__THROW
 
	`__nÚnuÎ
 ((1));

327 
	$±h»ad_©Œ_g‘sched·¿m
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

328 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

329 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

332 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

333 cÚ¡ 
sched_·¿m
 *
__»¡riù


334 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

337 
	$±h»ad_©Œ_g‘schedpŞicy
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


338 
__©Œ
, *
__»¡riù
 
__pŞicy
)

339 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

342 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

343 
__THROW
 
	`__nÚnuÎ
 ((1));

346 
	$±h»ad_©Œ_g‘šh”™sched
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


347 
__©Œ
, *
__»¡riù
 
__šh”™
)

348 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

351 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

352 
__šh”™
)

353 
__THROW
 
	`__nÚnuÎ
 ((1));

357 
	$±h»ad_©Œ_g‘scİe
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

358 *
__»¡riù
 
__scİe
)

359 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

362 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

363 
__THROW
 
	`__nÚnuÎ
 ((1));

366 
	$±h»ad_©Œ_g‘¡ackaddr
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


367 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

368 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

374 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

375 *
__¡ackaddr
)

376 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

379 
	$±h»ad_©Œ_g‘¡acksize
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù


380 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

381 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

386 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

387 
size_t
 
__¡acksize
)

388 
__THROW
 
	`__nÚnuÎ
 ((1));

390 #ifdeà
__USE_XOPEN2K


392 
	$±h»ad_©Œ_g‘¡ack
 (cÚ¡ 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

393 **
__»¡riù
 
__¡ackaddr
,

394 
size_t
 *
__»¡riù
 
__¡acksize
)

395 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

400 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

401 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

404 #ifdeà
__USE_GNU


407 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

408 
size_t
 
__ıu£tsize
,

409 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

410 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

414 
	$±h»ad_©Œ_g‘affš™y_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
,

415 
size_t
 
__ıu£tsize
,

416 
ıu_£t_t
 *
__ıu£t
)

417 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

420 
	$±h»ad_g‘©Œ_deçuÉ_Å
 (
±h»ad_©Œ_t
 *
__©Œ
)

421 
__THROW
 
	`__nÚnuÎ
 ((1));

425 
	$±h»ad_£‰r_deçuÉ_Å
 (cÚ¡ 
±h»ad_©Œ_t
 *
__©Œ
)

426 
__THROW
 
	`__nÚnuÎ
 ((1));

431 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

440 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

441 cÚ¡ 
sched_·¿m
 *
__·¿m
)

442 
__THROW
 
	`__nÚnuÎ
 ((3));

445 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

446 *
__»¡riù
 
__pŞicy
,

447 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

448 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

451 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

452 
__THROW
;

455 #ifdeà
__USE_GNU


457 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

458 
size_t
 
__buæ’
)

459 
__THROW
 
	`__nÚnuÎ
 ((2));

462 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, cÚ¡ *
__Çme
)

463 
__THROW
 
	`__nÚnuÎ
 ((2));

467 #ifdeà
__USE_UNIX98


469 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

472 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

475 #ifdeà
__USE_GNU


480 
	$±h»ad_y›ld
 (è
__THROW
;

485 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

486 cÚ¡ 
ıu_£t_t
 *
__ıu£t
)

487 
__THROW
 
	`__nÚnuÎ
 ((3));

490 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

491 
ıu_£t_t
 *
__ıu£t
)

492 
__THROW
 
	`__nÚnuÎ
 ((3));

505 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

506 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

517 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

521 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

524 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

529 
	`±h»ad_‹¡ÿnûl
 ();

538 
__jmp_buf
 
__ÿnûl_jmp_buf
;

539 
__mask_was_§ved
;

540 } 
__ÿnûl_jmp_buf
[1];

541 *
__·d
[4];

542 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

545 #iâdeà
__ş—nup_fù_©Œibu‹


546 
	#__ş—nup_fù_©Œibu‹


	)

551 
	s__±h»ad_ş—nup_äame


553 (*
__ÿnûl_routše
) (*);

554 *
__ÿnûl_¬g
;

555 
__do_™
;

556 
__ÿnûl_ty³
;

559 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


560 #ifdeà
__ılu¥lus


562 şas 
	c__±h»ad_ş—nup_şass


564 (*
__ÿnûl_routše
) (*);

565 *
__ÿnûl_¬g
;

566 
__do_™
;

567 
__ÿnûl_ty³
;

569 
public
:

570 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

571 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

572 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

573 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

574 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

575 &
__ÿnûl_ty³
); 
	}
}

576 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

586 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

588 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

592 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

593 
__şäame
.
	`__£tdo™
 (
execu‹
); \

594 } 0)

	)

596 #ifdeà
__USE_GNU


600 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

602 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

603 
__şäame
.
	`__deãr
 ()

	)

608 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

609 
__şäame
.
	`__»¡Üe
 (); \

610 
__şäame
.
	`__£tdo™
 (
execu‹
); \

611 } 0)

	)

618 
__ex‹º_šlše
 

619 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

621 ià(
__äame
->
__do_™
)

622 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

623 
	}
}

632 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

634 
__±h»ad_ş—nup_äame
 
__şäame
 \

635 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

636 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

637 .
__do_™
 = 1 };

	)

641 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

642 
__şäame
.
__do_™
 = (
execu‹
); \

643 } 0)

	)

645 #ifdeà
__USE_GNU


649 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

651 
__±h»ad_ş—nup_äame
 
__şäame
 \

652 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

653 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

654 .
__do_™
 = 1 }; \

655 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

656 &
__şäame
.
__ÿnûl_ty³
)

	)

661 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

662 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

663 
__şäame
.
__do_™
 = (
execu‹
); \

664 } 0)

	)

675 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

677 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

678 (*
__ÿnûl_routše
è(*èğ(
routše
); \

679 *
__ÿnûl_¬g
 = (
¬g
); \

680 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

681 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

682 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

684 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

685 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

689 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

690 dØ{

	)

691 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

692 
__ş—nup_fù_©Œibu‹
;

696 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

699 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

700 ià(
execu‹
) \

701 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

702 } 0)

	)

703 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

704 
__ş—nup_fù_©Œibu‹
;

706 #ifdeà
__USE_GNU


710 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

712 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

713 (*
__ÿnûl_routše
è(*èğ(
routše
); \

714 *
__ÿnûl_¬g
 = (
¬g
); \

715 
__nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

716 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

717 ià(
	`__glibc_uÆik–y
 (
__nÙ_fœ¡_ÿÎ
)) \

719 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

720 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

724 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

725 dØ{

	)

726 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

727 
__ş—nup_fù_©Œibu‹
;

732 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

735 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

736 ià(
execu‹
) \

737 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

738 
	}
} 0)

	)

739 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

740 
__ş—nup_fù_©Œibu‹
;

744 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

745 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

746 #iâdeà
SHARED


747 
	`__©Œibu‹__
 ((
__w—k__
))

753 
__jmp_buf_g
;

754 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROWNL
;

760 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

761 cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

762 
__THROW
 
	`__nÚnuÎ
 ((1));

765 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

766 
__THROW
 
	`__nÚnuÎ
 ((1));

769 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROWNL
 
	`__nÚnuÎ
 ((1));

773 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

774 
__THROWNL
 
	`__nÚnuÎ
 ((1));

776 #ifdeà
__USE_XOPEN2K


778 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

779 cÚ¡ 
time¥ec
 *
__»¡riù


780 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

784 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

785 
__THROWNL
 
	`__nÚnuÎ
 ((1));

789 
	$±h»ad_mu‹x_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x_t
 *

790 
__»¡riù
 
__mu‹x
,

791 *
__»¡riù
 
__´ioûšg
)

792 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

797 
__´ioûšg
,

798 *
__»¡riù
 
__Şd_ûšg
)

799 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

802 #ifdeà
__USE_XOPEN2K8


804 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

805 
__THROW
 
	`__nÚnuÎ
 ((1));

806 #ifdeà
__USE_GNU


807 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

808 
__THROW
 
	`__nÚnuÎ
 ((1));

817 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

818 
__THROW
 
	`__nÚnuÎ
 ((1));

821 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__psh¬ed
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__psh¬ed
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

835 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


837 
	$±h»ad_mu‹x©Œ_g‘ty³
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


838 
__©Œ
, *
__»¡riù
 
__kšd
)

839 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

844 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

845 
__THROW
 
	`__nÚnuÎ
 ((1));

849 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

850 
__»¡riù
 
__©Œ
,

851 *
__»¡riù
 
__´ÙocŞ
)

852 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__´ÙocŞ
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

861 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *

862 
__»¡riù
 
__©Œ
,

863 *
__»¡riù
 
__´ioûšg
)

864 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

867 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

868 
__´ioûšg
)

869 
__THROW
 
	`__nÚnuÎ
 ((1));

871 #ifdeà
__USE_XOPEN2K


873 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

874 *
__robu¡Ãss
)

875 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

876 #ifdeà
__USE_GNU


877 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (cÚ¡ 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

878 *
__robu¡Ãss
)

879 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

883 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

884 
__robu¡Ãss
)

885 
__THROW
 
	`__nÚnuÎ
 ((1));

886 #ifdeà
__USE_GNU


887 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

888 
__robu¡Ãss
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

894 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


899 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

900 cÚ¡ 
±h»ad_rwlock©Œ_t
 *
__»¡riù


901 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

904 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

905 
__THROW
 
	`__nÚnuÎ
 ((1));

908 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

909 
__THROWNL
 
	`__nÚnuÎ
 ((1));

912 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

913 
__THROWNL
 
	`__nÚnuÎ
 ((1));

915 #ifdeà
__USE_XOPEN2K


917 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

918 cÚ¡ 
time¥ec
 *
__»¡riù


919 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

923 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

924 
__THROWNL
 
	`__nÚnuÎ
 ((1));

927 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

928 
__THROWNL
 
	`__nÚnuÎ
 ((1));

930 #ifdeà
__USE_XOPEN2K


932 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

933 cÚ¡ 
time¥ec
 *
__»¡riù


934 
__ab¡ime
è
__THROWNL
 
	`__nÚnuÎ
 ((1, 2));

938 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

939 
__THROWNL
 
	`__nÚnuÎ
 ((1));

945 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

946 
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

954 
__»¡riù
 
__©Œ
,

955 *
__»¡riù
 
__psh¬ed
)

956 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

959 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

960 
__psh¬ed
)

961 
__THROW
 
	`__nÚnuÎ
 ((1));

964 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (cÚ¡ 
±h»ad_rwlock©Œ_t
 *

965 
__»¡riù
 
__©Œ
,

966 *
__»¡riù
 
__´ef
)

967 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

970 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

971 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

979 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

980 cÚ¡ 
±h»ad_cÚd©Œ_t
 *
__»¡riù
 
__cÚd_©Œ
)

981 
__THROW
 
	`__nÚnuÎ
 ((1));

984 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

989 
__THROWNL
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

993 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1000 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1001 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

1002 
	`__nÚnuÎ
 ((1, 2));

1011 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

1012 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

1013 cÚ¡ 
time¥ec
 *
__»¡riù
 
__ab¡ime
)

1014 
	`__nÚnuÎ
 ((1, 2, 3));

1019 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1020 
__THROW
 
	`__nÚnuÎ
 ((1));

1023 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

1024 
__THROW
 
	`__nÚnuÎ
 ((1));

1027 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1028 
__»¡riù
 
__©Œ
,

1029 *
__»¡riù
 
__psh¬ed
)

1030 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1033 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1034 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1036 #ifdeà
__USE_XOPEN2K


1038 
	$±h»ad_cÚd©Œ_g‘şock
 (cÚ¡ 
±h»ad_cÚd©Œ_t
 *

1039 
__»¡riù
 
__©Œ
,

1040 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1041 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1044 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1045 
__şockid_t
 
__şock_id
)

1046 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 #ifdeà
__USE_XOPEN2K


1055 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1056 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1064 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1068 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1071 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1072 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1079 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1080 cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1081 
__©Œ
, 
__couÁ
)

1082 
__THROW
 
	`__nÚnuÎ
 ((1));

1085 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1086 
__THROW
 
	`__nÚnuÎ
 ((1));

1089 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1090 
__THROWNL
 
	`__nÚnuÎ
 ((1));

1094 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1095 
__THROW
 
	`__nÚnuÎ
 ((1));

1098 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1099 
__THROW
 
	`__nÚnuÎ
 ((1));

1102 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (cÚ¡ 
±h»ad_b¬r›¿‰r_t
 *

1103 
__»¡riù
 
__©Œ
,

1104 *
__»¡riù
 
__psh¬ed
)

1105 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1108 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1109 
__psh¬ed
)

1110 
__THROW
 
	`__nÚnuÎ
 ((1));

1122 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1123 (*
__de¡r_funùiÚ
) (*))

1124 
__THROW
 
	`__nÚnuÎ
 ((1));

1127 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1130 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1133 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1134 cÚ¡ *
__poš‹r
è
__THROW
 ;

1137 #ifdeà
__USE_XOPEN2K


1139 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1140 
__şockid_t
 *
__şock_id
)

1141 
__THROW
 
	`__nÚnuÎ
 ((2));

1156 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1157 (*
__·»Á
) (),

1158 (*
__chd
è()è
__THROW
;

1161 #ifdeà
__USE_EXTERN_INLINES


1163 
__ex‹º_šlše
 

1164 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1166  
__th»ad1
 =ğ
__th»ad2
;

1167 
	}
}

1170 
	g__END_DECLS


	@/usr/include/signal.h

22 #iâdef 
_SIGNAL_H


24 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


25 
	#_SIGNAL_H


	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	~<b™s/sig£t.h
>

36 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


37 #iâdeà
__sig_©omic_t_defšed


38 
	#__sig_©omic_t_defšed


	)

39 
__BEGIN_NAMESPACE_STD


40 
__sig_©omic_t
 
	tsig_©omic_t
;

41 
	g__END_NAMESPACE_STD


43 #undeà
__Ãed_sig_©omic_t


46 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

47 #iâdeà
__sig£t_t_defšed


48 
	#__sig£t_t_defšed


	)

49 
__sig£t_t
 
	tsig£t_t
;

51 #undeà
__Ãed_sig£t_t


54 #ifdeà
_SIGNAL_H


56 
	~<b™s/ty³s.h
>

57 
	~<b™s/signum.h
>

59 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


60 #iâdeà
__pid_t_defšed


61 
__pid_t
 
	tpid_t
;

62 
	#__pid_t_defšed


	)

64 #ifdeà
__USE_XOPEN


66 #iâdeà
__uid_t_defšed


67 
__uid_t
 
	tuid_t
;

68 
	#__uid_t_defšed


	)

72 #ifdeà
__USE_POSIX199309


74 
	#__Ãed_time¥ec


	)

75 
	~<time.h
>

78 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_XOPEN_EXTENDED


80 
	~<b™s/sigšfo.h
>

85 (*
	t__sighªdËr_t
) ();

90 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

91 
__THROW
;

92 #ifdeà
__USE_GNU


93 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

94 
__THROW
;

100 
__BEGIN_NAMESPACE_STD


101 #ifdeà
__USE_BSD


102 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

103 
__THROW
;

106 #ifdeà
__REDIRECT_NTH


107 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

108 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

109 
__sysv_sigÇl
);

111 
	#sigÇl
 
__sysv_sigÇl


	)

114 
__END_NAMESPACE_STD


116 #ifdeà
__USE_XOPEN


119 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

120 
__THROW
;

126 #ifdeà
__USE_POSIX


127 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

130 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


134 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

137 
__BEGIN_NAMESPACE_STD


139 
	$¿i£
 (
__sig
è
__THROW
;

140 
__END_NAMESPACE_STD


142 #ifdeà
__USE_SVID


144 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

145 
__THROW
;

146 
	$gsigÇl
 (
__sig
è
__THROW
;

149 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


151 
	`psigÇl
 (
__sig
, cÚ¡ *
__s
);

154 #ifdeà
__USE_XOPEN2K


156 
	`psigšfo
 (cÚ¡ 
sigšfo_t
 *
__pšfo
, cÚ¡ *
__s
);

167 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

169 #ifdeà
__USE_XOPEN


170 #ifdeà
__GNUC__


171 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

174 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

179 #ifdeà
__USE_BSD


186 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

189 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

192 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

195 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 #ifdeà
__USE_MISC


200 
	#NSIG
 
_NSIG


	)

203 #ifdeà
__USE_GNU


204 
__sighªdËr_t
 
	tsighªdËr_t
;

208 #ifdeà
__USE_BSD


209 
__sighªdËr_t
 
	tsig_t
;

212 #ifdeà
__USE_POSIX


215 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

224 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

227 
	$sigismemb”
 (cÚ¡ 
sig£t_t
 *
__£t
, 
__signo
)

228 
__THROW
 
	`__nÚnuÎ
 ((1));

230 #ifdeà
__USE_GNU


232 
	$sigi£m±y£t
 (cÚ¡ 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

235 
	$sigªd£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

236 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

239 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, cÚ¡ sig£t_ˆ*
__Ëá
,

240 cÚ¡ 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

245 
	~<b™s/sigaùiÚ.h
>

248 
	$sig´ocmask
 (
__how
, cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

249 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

256 
	$sigsu¥’d
 (cÚ¡ 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

259 
	$sigaùiÚ
 (
__sig
, cÚ¡ 
sigaùiÚ
 *
__»¡riù
 
__aù
,

260 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

263 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

270 
	$sigwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

271 
	`__nÚnuÎ
 ((1, 2));

273 #ifdeà
__USE_POSIX199309


278 
	$sigwa™šfo
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

279 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

286 
	$sigtimedwa™
 (cÚ¡ 
sig£t_t
 *
__»¡riù
 
__£t
,

287 
sigšfo_t
 *
__»¡riù
 
__šfo
,

288 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
)

289 
	`__nÚnuÎ
 ((1));

293 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, cÚ¡ 
sigv®
 
__v®
)

294 
__THROW
;

299 #ifdeà
__USE_BSD


303 cÚ¡ *cÚ¡ 
_sys_sigli¡
[
_NSIG
];

304 cÚ¡ *cÚ¡ 
sys_sigli¡
[
_NSIG
];

307 
	ssigvec


309 
__sighªdËr_t
 
sv_hªdËr
;

310 
sv_mask
;

312 
sv_æags
;

313 
	#sv_Ú¡ack
 
sv_æags


	)

317 
	#SV_ONSTACK
 (1 << 0)

	)

318 
	#SV_INTERRUPT
 (1 << 1)

	)

319 
	#SV_RESETHAND
 (1 << 2)

	)

327 
	$sigvec
 (
__sig
, cÚ¡ 
sigvec
 *
__vec
,

328 
sigvec
 *
__ovec
è
__THROW
;

332 
	~<b™s/sigcÚ‹xt.h
>

335 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

340 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


341 
	#__Ãed_size_t


	)

342 
	~<¡ddef.h
>

347 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

349 
	~<b™s/sig¡ack.h
>

350 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


352 
	~<sys/ucÚ‹xt.h
>

358 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

359 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

363 
	$sig®t¡ack
 (cÚ¡ 
sig®t¡ack
 *
__»¡riù
 
__ss
,

364 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

368 #ifdeà
__USE_XOPEN_EXTENDED


372 
	$sighŞd
 (
__sig
è
__THROW
;

375 
	$sig»l£
 (
__sig
è
__THROW
;

378 
	$sigignÜe
 (
__sig
è
__THROW
;

381 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

384 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


387 
	~<b™s/±h»adty³s.h
>

388 
	~<b™s/sigth»ad.h
>

395 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

397 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

401 
__END_DECLS


	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 
	#SIZE_MAX
 (4294967295U)

	)

267 #iâdeà
WCHAR_MIN


269 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

270 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

274 
	#WINT_MIN
 (0u)

	)

275 
	#WINT_MAX
 (4294967295u)

	)

278 
	#INT8_C
(
c
è
	)
c

279 
	#INT16_C
(
c
è
	)
c

280 
	#INT32_C
(
c
è
	)
c

281 #ià
__WORDSIZE
 == 64

282 
	#INT64_C
(
c
èø## 
L


	)

284 
	#INT64_C
(
c
èø## 
LL


	)

288 
	#UINT8_C
(
c
è
	)
c

289 
	#UINT16_C
(
c
è
	)
c

290 
	#UINT32_C
(
c
èø## 
U


	)

291 #ià
__WORDSIZE
 == 64

292 
	#UINT64_C
(
c
èø## 
UL


	)

294 
	#UINT64_C
(
c
èø## 
ULL


	)

298 #ià
__WORDSIZE
 == 64

299 
	#INTMAX_C
(
c
èø## 
L


	)

300 
	#UINTMAX_C
(
c
èø## 
UL


	)

302 
	#INTMAX_C
(
c
èø## 
LL


	)

303 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

23 #iâdeà
_STDIO_H


25 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


26 
	#_STDIO_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	~<b™s/ty³s.h
>

36 
	#__Ãed_FILE


	)

37 
	#__Ãed___FILE


	)

41 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


44 
	g_IO_FILE
;

46 
__BEGIN_NAMESPACE_STD


48 
_IO_FILE
 
	tFILE
;

49 
	g__END_NAMESPACE_STD


50 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

51 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

52 || 
defšed
 
__USE_POSIX2


53 
	$__USING_NAMESPACE_STD
(
FILE
)

56 
	#__FILE_defšed
 1

	)

58 #undeà
__Ãed_FILE


61 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


64 
_IO_FILE
 
	t__FILE
;

66 
	#____FILE_defšed
 1

	)

68 #undeà
__Ãed___FILE


71 #ifdef 
_STDIO_H


72 
	#_STDIO_USES_IOSTREAM


	)

74 
	~<libio.h
>

76 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


77 #ifdeà
__GNUC__


78 #iâdeà
_VA_LIST_DEFINED


79 
_G_va_li¡
 
	tva_li¡
;

80 
	#_VA_LIST_DEFINED


	)

83 
	~<¡d¬g.h
>

87 #ifdeà
__USE_XOPEN2K8


88 #iâdeà
__off_t_defšed


89 #iâdeà
__USE_FILE_OFFSET64


90 
__off_t
 
	toff_t
;

92 
__off64_t
 
	toff_t
;

94 
	#__off_t_defšed


	)

96 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


97 
__off64_t
 
	toff64_t
;

98 
	#__off64_t_defšed


	)

101 #iâdeà
__ssize_t_defšed


102 
__ssize_t
 
	tssize_t
;

103 
	#__ssize_t_defšed


	)

108 
__BEGIN_NAMESPACE_STD


109 #iâdeà
__USE_FILE_OFFSET64


110 
_G_åos_t
 
	tåos_t
;

112 
_G_åos64_t
 
	tåos_t
;

114 
__END_NAMESPACE_STD


115 #ifdeà
__USE_LARGEFILE64


116 
_G_åos64_t
 
	tåos64_t
;

120 
	#_IOFBF
 0

	)

121 
	#_IOLBF
 1

	)

122 
	#_IONBF
 2

	)

126 #iâdeà
BUFSIZ


127 
	#BUFSIZ
 
_IO_BUFSIZ


	)

133 #iâdeà
EOF


134 
	#EOF
 (-1)

	)

140 
	#SEEK_SET
 0

	)

141 
	#SEEK_CUR
 1

	)

142 
	#SEEK_END
 2

	)

143 #ifdeà
__USE_GNU


144 
	#SEEK_DATA
 3

	)

145 
	#SEEK_HOLE
 4

	)

149 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


151 
	#P_tmpdœ
 "/tmp"

	)

164 
	~<b™s/¡dio_lim.h
>

168 
_IO_FILE
 *
¡dš
;

169 
_IO_FILE
 *
¡dout
;

170 
_IO_FILE
 *
¡d”r
;

172 
	#¡dš
 
¡dš


	)

173 
	#¡dout
 
¡dout


	)

174 
	#¡d”r
 
¡d”r


	)

176 
__BEGIN_NAMESPACE_STD


178 
	$»move
 (cÚ¡ *
__f’ame
è
__THROW
;

180 
	$»Çme
 (cÚ¡ *
__Şd
, cÚ¡ *
__Ãw
è
__THROW
;

181 
__END_NAMESPACE_STD


183 #ifdeà
__USE_ATFILE


185 
	$»Çm—t
 (
__Şdfd
, cÚ¡ *
__Şd
, 
__Ãwfd
,

186 cÚ¡ *
__Ãw
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


194 #iâdeà
__USE_FILE_OFFSET64


195 
FILE
 *
	$tmpfe
 (è
__wur
;

197 #ifdeà
__REDIRECT


198 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

200 
	#tmpfe
 
tmpfe64


	)

204 #ifdeà
__USE_LARGEFILE64


205 
FILE
 *
	$tmpfe64
 (è
__wur
;

209 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

210 
__END_NAMESPACE_STD


212 #ifdeà
__USE_MISC


215 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

219 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


227 *
	$‹m²am
 (cÚ¡ *
__dœ
, cÚ¡ *
__pfx
)

228 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

232 
__BEGIN_NAMESPACE_STD


237 
	`fşo£
 (
FILE
 *
__¡»am
);

242 
	`fæush
 (
FILE
 *
__¡»am
);

243 
__END_NAMESPACE_STD


245 #ifdeà
__USE_MISC


252 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

255 #ifdeà
__USE_GNU


262 
	`fşo£®l
 ();

266 
__BEGIN_NAMESPACE_STD


267 #iâdeà
__USE_FILE_OFFSET64


272 
FILE
 *
	$fİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

273 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

278 
FILE
 *
	$äeİ’
 (cÚ¡ *
__»¡riù
 
__f’ame
,

279 cÚ¡ *
__»¡riù
 
__modes
,

280 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

282 #ifdeà
__REDIRECT


283 
FILE
 *
	`__REDIRECT
 (
fİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

284 cÚ¡ *
__»¡riù
 
__modes
), 
fİ’64
)

285 
__wur
;

286 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (cÚ¡ *
__»¡riù
 
__f’ame
,

287 cÚ¡ *
__»¡riù
 
__modes
,

288 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

289 
__wur
;

291 
	#fİ’
 
fİ’64


	)

292 
	#äeİ’
 
äeİ’64


	)

295 
__END_NAMESPACE_STD


296 #ifdeà
__USE_LARGEFILE64


297 
FILE
 *
	$fİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

298 cÚ¡ *
__»¡riù
 
__modes
è
__wur
;

299 
FILE
 *
	$äeİ’64
 (cÚ¡ *
__»¡riù
 
__f’ame
,

300 cÚ¡ *
__»¡riù
 
__modes
,

301 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

304 #ifdef 
__USE_POSIX


306 
FILE
 *
	$fdİ’
 (
__fd
, cÚ¡ *
__modes
è
__THROW
 
__wur
;

309 #ifdef 
__USE_GNU


312 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

313 cÚ¡ *
__»¡riù
 
__modes
,

314 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

317 #ifdeà
__USE_XOPEN2K8


319 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, cÚ¡ *
__modes
)

320 
__THROW
 
__wur
;

325 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

329 
__BEGIN_NAMESPACE_STD


332 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

336 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

337 
__modes
, 
size_t
 
__n
è
__THROW
;

338 
__END_NAMESPACE_STD


340 #ifdef 
__USE_BSD


343 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

344 
size_t
 
__size
è
__THROW
;

347 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

351 
__BEGIN_NAMESPACE_STD


356 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

357 cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

362 
	`´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...);

364 
	$¥rštf
 (*
__»¡riù
 
__s
,

365 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROWNL
;

371 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

372 
_G_va_li¡
 
__¬g
);

377 
	`v´štf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

379 
	$v¥rštf
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

380 
_G_va_li¡
 
__¬g
è
__THROWNL
;

381 
__END_NAMESPACE_STD


383 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


384 
__BEGIN_NAMESPACE_C99


386 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

387 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

388 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

390 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

391 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

392 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

393 
__END_NAMESPACE_C99


396 #ifdeà
__USE_GNU


399 
	$va¥rštf
 (**
__»¡riù
 
__±r
, cÚ¡ *__»¡riù 
__f
,

400 
_G_va_li¡
 
__¬g
)

401 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

402 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

403 cÚ¡ *
__»¡riù
 
__fmt
, ...)

404 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

405 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

406 cÚ¡ *
__»¡riù
 
__fmt
, ...)

407 
__THROWNL
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

410 #ifdeà
__USE_XOPEN2K8


412 
	$vd´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
,

413 
_G_va_li¡
 
__¬g
)

414 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

415 
	$d´štf
 (
__fd
, cÚ¡ *
__»¡riù
 
__fmt
, ...)

416 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

420 
__BEGIN_NAMESPACE_STD


425 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

426 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

431 
	$sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

433 
	$ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

434 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

436 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

437 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

438 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

439 #ifdeà
__REDIRECT


443 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

444 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

445 
__isoc99_fsÿnf
è
__wur
;

446 
	`__REDIRECT
 (
sÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

447 
__isoc99_sÿnf
è
__wur
;

448 
	`__REDIRECT_NTH
 (
ssÿnf
, (cÚ¡ *
__»¡riù
 
__s
,

449 cÚ¡ *
__»¡riù
 
__fÜm©
, ...),

450 
__isoc99_ssÿnf
);

452 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

453 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

454 
	$__isoc99_sÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__wur
;

455 
	$__isoc99_ssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

456 cÚ¡ *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

457 
	#fsÿnf
 
__isoc99_fsÿnf


	)

458 
	#sÿnf
 
__isoc99_sÿnf


	)

459 
	#ssÿnf
 
__isoc99_ssÿnf


	)

463 
__END_NAMESPACE_STD


465 #ifdef 
__USE_ISOC99


466 
__BEGIN_NAMESPACE_C99


471 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__fÜm©
,

472 
_G_va_li¡
 
__¬g
)

473 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

479 
	$vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

483 
	$vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

484 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

485 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

487 #ià!
defšed
 
__USE_GNU
 \

488 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

489 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

490 #ifdeà
__REDIRECT


494 
	`__REDIRECT
 (
vfsÿnf
,

495 (
FILE
 *
__»¡riù
 
__s
,

496 cÚ¡ *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

497 
__isoc99_vfsÿnf
)

498 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

499 
	`__REDIRECT
 (
vsÿnf
, (cÚ¡ *
__»¡riù
 
__fÜm©
,

500 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

501 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

502 
	`__REDIRECT_NTH
 (
vssÿnf
,

503 (cÚ¡ *
__»¡riù
 
__s
,

504 cÚ¡ *
__»¡riù
 
__fÜm©
,

505 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

506 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

508 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

509 cÚ¡ *
__»¡riù
 
__fÜm©
,

510 
_G_va_li¡
 
__¬g
è
__wur
;

511 
	$__isoc99_vsÿnf
 (cÚ¡ *
__»¡riù
 
__fÜm©
,

512 
_G_va_li¡
 
__¬g
è
__wur
;

513 
	$__isoc99_vssÿnf
 (cÚ¡ *
__»¡riù
 
__s
,

514 cÚ¡ *
__»¡riù
 
__fÜm©
,

515 
_G_va_li¡
 
__¬g
è
__THROW
;

516 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

517 
	#vsÿnf
 
__isoc99_vsÿnf


	)

518 
	#vssÿnf
 
__isoc99_vssÿnf


	)

522 
__END_NAMESPACE_C99


526 
__BEGIN_NAMESPACE_STD


531 
	`fg‘c
 (
FILE
 *
__¡»am
);

532 
	`g‘c
 (
FILE
 *
__¡»am
);

538 
	`g‘ch¬
 ();

539 
__END_NAMESPACE_STD


543 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

545 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


550 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

551 
	`g‘ch¬_uÆocked
 ();

554 #ifdeà
__USE_MISC


561 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

565 
__BEGIN_NAMESPACE_STD


573 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

574 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

580 
	`putch¬
 (
__c
);

581 
__END_NAMESPACE_STD


585 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

587 #ifdeà
__USE_MISC


594 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

597 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


602 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

603 
	`putch¬_uÆocked
 (
__c
);

607 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

608 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

610 
	`g‘w
 (
FILE
 *
__¡»am
);

613 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

617 
__BEGIN_NAMESPACE_STD


622 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

623 
__wur
;

625 #ià!
defšed
 
__USE_ISOC11
 \

626 || (
defšed
 
__ılu¥lus
 && __cplusplus <= 201103L)

638 *
	$g‘s
 (*
__s
è
__wur
 
__©Œibu‹_d•»ÿ‹d__
;

640 
__END_NAMESPACE_STD


642 #ifdeà
__USE_GNU


649 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

650 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

654 #ifdef 
__USE_XOPEN2K8


665 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

666 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

667 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

668 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

669 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

670 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

678 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

679 
size_t
 *
__»¡riù
 
__n
,

680 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

684 
__BEGIN_NAMESPACE_STD


689 
	`åuts
 (cÚ¡ *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

695 
	`puts
 (cÚ¡ *
__s
);

702 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

709 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

710 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

715 
size_t
 
	`fwr™e
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

716 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
);

717 
__END_NAMESPACE_STD


719 #ifdeà
__USE_GNU


726 
	`åuts_uÆocked
 (cÚ¡ *
__»¡riù
 
__s
,

727 
FILE
 *
__»¡riù
 
__¡»am
);

730 #ifdeà
__USE_MISC


737 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

738 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
size_t
 
	`fwr™e_uÆocked
 (cÚ¡ *
__»¡riù
 
__±r
, size_ˆ
__size
,

740 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
);

744 
__BEGIN_NAMESPACE_STD


749 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

754 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

759 
	`»wšd
 (
FILE
 *
__¡»am
);

760 
__END_NAMESPACE_STD


767 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


768 #iâdeà
__USE_FILE_OFFSET64


773 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

778 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

780 #ifdeà
__REDIRECT


781 
	`__REDIRECT
 (
f£eko
,

782 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

783 
f£eko64
);

784 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

786 
	#f£eko
 
f£eko64


	)

787 
	#á–lo
 
á–lo64


	)

792 
__BEGIN_NAMESPACE_STD


793 #iâdeà
__USE_FILE_OFFSET64


798 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

803 
	`f£os
 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
);

805 #ifdeà
__REDIRECT


806 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

807 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

808 
	`__REDIRECT
 (
f£os
,

809 (
FILE
 *
__¡»am
, cÚ¡ 
åos_t
 *
__pos
), 
f£os64
);

811 
	#fg‘pos
 
fg‘pos64


	)

812 
	#f£os
 
f£os64


	)

815 
__END_NAMESPACE_STD


817 #ifdeà
__USE_LARGEFILE64


818 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

819 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

820 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

821 
	`f£os64
 (
FILE
 *
__¡»am
, cÚ¡ 
åos64_t
 *
__pos
);

824 
__BEGIN_NAMESPACE_STD


826 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

828 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

830 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

831 
__END_NAMESPACE_STD


833 #ifdeà
__USE_MISC


835 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

836 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

837 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

841 
__BEGIN_NAMESPACE_STD


846 
	`³¼Ü
 (cÚ¡ *
__s
);

847 
__END_NAMESPACE_STD


853 
	~<b™s/sys_”¾i¡.h
>

856 #ifdef 
__USE_POSIX


858 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

861 #ifdeà
__USE_MISC


863 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

867 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

868 
defšed
 
__USE_MISC
)

873 
FILE
 *
	$pİ’
 (cÚ¡ *
__commªd
, cÚ¡ *
__modes
è
__wur
;

879 
	`pşo£
 (
FILE
 *
__¡»am
);

883 #ifdef 
__USE_POSIX


885 *
	$ù”mid
 (*
__s
è
__THROW
;

889 #ifdeà
__USE_XOPEN


891 *
	`cu£rid
 (*
__s
);

895 #ifdef 
__USE_GNU


896 
ob¡ack
;

899 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

900 cÚ¡ *
__»¡riù
 
__fÜm©
, ...)

901 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

902 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

903 cÚ¡ *
__»¡riù
 
__fÜm©
,

904 
_G_va_li¡
 
__¬gs
)

905 
__THROWNL
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

909 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


913 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

917 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

920 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

923 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


927 
	#__Ãed_g‘İt


	)

928 
	~<g‘İt.h
>

933 #ifdeà
__USE_EXTERN_INLINES


934 
	~<b™s/¡dio.h
>

936 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


937 
	~<b™s/¡dio2.h
>

939 #ifdeà
__LDBL_COMPAT


940 
	~<b™s/¡dio-ldbl.h
>

943 
__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_BSD


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_BSD


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ià
defšed
 
__USE_ISOC99
 || defšed 
__USE_MISC


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_BSD


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
) (const *, const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
) (const *, const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

759 #ifdeà
__USE_EXTERN_INLINES


760 
	~<b™s/¡dlib-b£¬ch.h
>

765 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

766 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

767 #ifdeà
__USE_GNU


768 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

769 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

770 
	`__nÚnuÎ
 ((1, 4));

775 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

777 
__END_NAMESPACE_STD


779 #ifdeà
__USE_ISOC99


780 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

785 
__BEGIN_NAMESPACE_STD


789 
div_t
 
	$div
 (
__num”
, 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

792 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

793 
__END_NAMESPACE_STD


795 #ifdeà
__USE_ISOC99


796 
__BEGIN_NAMESPACE_C99


797 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

798 
__d’om
)

799 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

800 
__END_NAMESPACE_C99


804 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

805 || 
defšed
 
__USE_SVID


812 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

813 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

818 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

819 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

824 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

825 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

828 #ifdeà
__USE_MISC


830 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

831 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

832 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

833 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

834 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

835 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

836 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

837 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

842 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

843 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

844 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

846 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

847 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

853 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

854 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

855 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

856 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

860 
__BEGIN_NAMESPACE_STD


863 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

866 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

867 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

870 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

874 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

875 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

877 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

878 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

879 
__THROW
;

880 
__END_NAMESPACE_STD


883 #ifdeà
__USE_SVID


888 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

892 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


899 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

900 *cÚ¡ *
__»¡riù
 
__tok’s
,

901 **
__»¡riù
 
__v®u•
)

902 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

906 #ifdeà
__USE_XOPEN


908 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

914 #ifdeà
__USE_XOPEN2KXSI


916 
	$posix_İ’±
 (
__oæag
è
__wur
;

919 #ifdeà
__USE_XOPEN


924 
	$g¿Á±
 (
__fd
è
__THROW
;

928 
	$uÆock±
 (
__fd
è
__THROW
;

933 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

936 #ifdeà
__USE_GNU


940 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

941 
__THROW
 
	`__nÚnuÎ
 ((2));

944 
	`g‘±
 ();

947 #ifdeà
__USE_BSD


951 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

952 
__THROW
 
	`__nÚnuÎ
 ((1));

955 
	~<b™s/¡dlib-æßt.h
>

958 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


959 
	~<b™s/¡dlib.h
>

961 #ifdeà
__LDBL_COMPAT


962 
	~<b™s/¡dlib-ldbl.h
>

966 #undeà
__Ãed_m®loc_ªd_ÿÎoc


968 
__END_DECLS


	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


30 
	#__Ãed_size_t


	)

31 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

39 #ià
defšed
 
__ılu¥lus
 && (__ılu¥lu >ğ199711L || 
__GNUC_PREREQ
 (4, 4))

40 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

44 
__BEGIN_NAMESPACE_STD


46 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

47 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

50 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

51 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 
__END_NAMESPACE_STD


57 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


58 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

59 
__c
, 
size_t
 
__n
)

60 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

64 
__BEGIN_NAMESPACE_STD


66 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

69 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

70 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

73 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


76 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

77 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

79 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ifdeà
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


91  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

94 
	}
}

96 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

99 
__END_NAMESPACE_STD


101 #ifdeà
__USE_GNU


104 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


105 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

106 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

107 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

108 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

110 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

111 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

115 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


116 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

117 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

118 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

119 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

122 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

127 
__BEGIN_NAMESPACE_STD


129 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

133 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

134 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

137 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

138 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

140 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

141 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

144 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

147 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

151 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

154 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

155 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

156 
__THROW
 
	`__nÚnuÎ
 ((2));

157 
__END_NAMESPACE_STD


159 #ifdeà
__USE_XOPEN2K8


163 
	~<xloÿË.h
>

166 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

167 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

169 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

170 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

173 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

174 || 
defšed
 
__USE_XOPEN2K8


176 *
	$¡rdup
 (cÚ¡ *
__s
)

177 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

183 #ià
defšed
 
__USE_XOPEN2K8


184 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

185 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

188 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


190 
	#¡rdu·
(
s
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

196 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

197 
	}
}))

	)

200 
	#¡ºdu·
(
s
, 
n
) \

201 (
__ex‹nsiÚ__
 \

203 cÚ¡ *
__Şd
 = (
s
); \

204 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

205 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

206 
__Ãw
[
__Ën
] = '\0'; \

207 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

208 }))

	)

211 
	g__BEGIN_NAMESPACE_STD


213 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


216 *
¡rchr
 (*
__s
, 
__c
)

217 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

218 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

219 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

221 #ifdeà
__OPTIMIZE__


222 
__ex‹º_®ways_šlše
 *

223 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


225  
__butš_¡rchr
 (
__s
, 
__c
);

228 
__ex‹º_®ways_šlše
 const *

229 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


231  
__butš_¡rchr
 (
__s
, 
__c
);

236 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

237 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

240 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


243 *
	`¡¼chr
 (*
__s
, 
__c
)

244 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

245 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

246 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

248 #ifdeà
__OPTIMIZE__


249 
__ex‹º_®ways_šlše
 *

250 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


252  
	`__butš_¡¼chr
 (
__s
, 
__c
);

255 
__ex‹º_®ways_šlše
 const *

256 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


258  
	`__butš_¡¼chr
 (
__s
, 
__c
);

261 
	}
}

263 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

264 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

266 
__END_NAMESPACE_STD


268 #ifdeà
__USE_GNU


271 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


272 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

273 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

274 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

275 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

277 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

278 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

282 
__BEGIN_NAMESPACE_STD


285 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

286 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

290 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

292 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


295 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

296 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

297 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

298 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

300 #ifdeà
__OPTIMIZE__


301 
__ex‹º_®ways_šlše
 *

302 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


304  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

307 
__ex‹º_®ways_šlše
 const *

308 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


310  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

313 
	}
}

315 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

316 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

319 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


322 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

323 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

324 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 const *

335 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 cÚ¡ *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

370 cÚ¡ *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 const *

482 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 const *

510 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

530 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

534 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

535 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

538 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

539 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

542 #ifdef 
__USE_GNU


545 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

546 
__loÿË_t
 
__loc
)

547 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

549 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

550 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

551 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

554 #ifdef 
__USE_BSD


557 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

558 cÚ¡ *
__»¡riù
 
__d–im
)

559 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

562 #ifdef 
__USE_XOPEN2K8


564 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

567 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

568 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

569 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

574 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

575 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

577 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

578 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

582 #ifdef 
__USE_GNU


584 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

585 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

588 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 #iâdeà
ba£Çme


598 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


599 "C++" *
	$ba£Çme
 (*
__f’ame
)

600 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

601 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

604 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

610 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

611 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

612 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


632 
	~<b™s/¡ršg.h
>

635 
	~<b™s/¡ršg2.h
>

638 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


640 
	~<b™s/¡ršg3.h
>

644 
__END_DECLS


	@/usr/include/unistd.h

22 #iâdef 
_UNISTD_H


23 
	#_UNISTD_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


32 #ifdeà
__USE_XOPEN2K8


34 
	#_POSIX_VERSION
 200809L

	)

35 #–ià
defšed
 
__USE_XOPEN2K


37 
	#_POSIX_VERSION
 200112L

	)

38 #–ià
defšed
 
__USE_POSIX199506


40 
	#_POSIX_VERSION
 199506L

	)

41 #–ià
defšed
 
__USE_POSIX199309


43 
	#_POSIX_VERSION
 199309L

	)

46 
	#_POSIX_VERSION
 199009L

	)

52 #ifdeà
__USE_XOPEN2K8


53 
	#__POSIX2_THIS_VERSION
 200809L

	)

55 #–ià
defšed
 
__USE_XOPEN2K


57 
	#__POSIX2_THIS_VERSION
 200112L

	)

58 #–ià
defšed
 
__USE_POSIX199506


60 
	#__POSIX2_THIS_VERSION
 199506L

	)

63 
	#__POSIX2_THIS_VERSION
 199209L

	)

67 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

71 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

75 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

79 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

83 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

86 #ifdeà
__USE_XOPEN2K8


87 
	#_XOPEN_VERSION
 700

	)

88 #–ià
defšed
 
__USE_XOPEN2K


89 
	#_XOPEN_VERSION
 600

	)

90 #–ià
defšed
 
__USE_UNIX98


91 
	#_XOPEN_VERSION
 500

	)

93 
	#_XOPEN_VERSION
 4

	)

97 
	#_XOPEN_XCU_VERSION
 4

	)

100 
	#_XOPEN_XPG2
 1

	)

101 
	#_XOPEN_XPG3
 1

	)

102 
	#_XOPEN_XPG4
 1

	)

105 
	#_XOPEN_UNIX
 1

	)

108 
	#_XOPEN_CRYPT
 1

	)

112 
	#_XOPEN_ENH_I18N
 1

	)

115 
	#_XOPEN_LEGACY
 1

	)

202 
	~<b™s/posix_İt.h
>

205 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


206 
	~<b™s/’vœÚm’ts.h
>

210 
	#STDIN_FILENO
 0

	)

211 
	#STDOUT_FILENO
 1

	)

212 
	#STDERR_FILENO
 2

	)

217 
	~<b™s/ty³s.h
>

219 #iâdef 
__ssize_t_defšed


220 
__ssize_t
 
	tssize_t
;

221 
	#__ssize_t_defšed


	)

224 
	#__Ãed_size_t


	)

225 
	#__Ãed_NULL


	)

226 
	~<¡ddef.h
>

228 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


231 #iâdeà
__gid_t_defšed


232 
__gid_t
 
	tgid_t
;

233 
	#__gid_t_defšed


	)

236 #iâdeà
__uid_t_defšed


237 
__uid_t
 
	tuid_t
;

238 
	#__uid_t_defšed


	)

241 #iâdeà
__off_t_defšed


242 #iâdeà
__USE_FILE_OFFSET64


243 
__off_t
 
	toff_t
;

245 
__off64_t
 
	toff_t
;

247 
	#__off_t_defšed


	)

249 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


250 
__off64_t
 
	toff64_t
;

251 
	#__off64_t_defšed


	)

254 #iâdeà
__u£cÚds_t_defšed


255 
__u£cÚds_t
 
	tu£cÚds_t
;

256 
	#__u£cÚds_t_defšed


	)

259 #iâdeà
__pid_t_defšed


260 
__pid_t
 
	tpid_t
;

261 
	#__pid_t_defšed


	)

265 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


266 #iâdeà
__šŒ_t_defšed


267 
__šŒ_t
 
	tšŒ_t
;

268 
	#__šŒ_t_defšed


	)

272 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


273 #iâdeà
__sockËn_t_defšed


274 
__sockËn_t
 
	tsockËn_t
;

275 
	#__sockËn_t_defšed


	)

281 
	#R_OK
 4

	)

282 
	#W_OK
 2

	)

283 
	#X_OK
 1

	)

284 
	#F_OK
 0

	)

287 
	$acûss
 (cÚ¡ *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_GNU


292 
	$euidacûss
 (cÚ¡ *
__Çme
, 
__ty³
)

293 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$—cûss
 (cÚ¡ *
__Çme
, 
__ty³
)

297 
__THROW
 
	`__nÚnuÎ
 ((1));

300 #ifdeà
__USE_ATFILE


304 
	$çcûs§t
 (
__fd
, cÚ¡ *
__fe
, 
__ty³
, 
__æag
)

305 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

310 #iâdef 
_STDIO_H


311 
	#SEEK_SET
 0

	)

312 
	#SEEK_CUR
 1

	)

313 
	#SEEK_END
 2

	)

314 #ifdeà
__USE_GNU


315 
	#SEEK_DATA
 3

	)

316 
	#SEEK_HOLE
 4

	)

320 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


322 
	#L_SET
 
SEEK_SET


	)

323 
	#L_INCR
 
SEEK_CUR


	)

324 
	#L_XTND
 
SEEK_END


	)

333 #iâdeà
__USE_FILE_OFFSET64


334 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

336 #ifdeà
__REDIRECT_NTH


337 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

338 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

339 
l£ek64
);

341 
	#l£ek
 
l£ek64


	)

344 #ifdeà
__USE_LARGEFILE64


345 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

346 
__THROW
;

353 
	`şo£
 (
__fd
);

360 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

366 
ssize_t
 
	$wr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
è
__wur
;

368 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


369 #iâdeà
__USE_FILE_OFFSET64


376 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

377 
__off_t
 
__off£t
è
__wur
;

384 
ssize_t
 
	$pwr™e
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

385 
__off_t
 
__off£t
è
__wur
;

387 #ifdeà
__REDIRECT


388 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

389 
__off64_t
 
__off£t
),

390 
´—d64
è
__wur
;

391 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, cÚ¡ *
__buf
,

392 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

393 
pwr™e64
è
__wur
;

395 
	#´—d
 
´—d64


	)

396 
	#pwr™e
 
pwr™e64


	)

400 #ifdeà
__USE_LARGEFILE64


404 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

405 
__off64_t
 
__off£t
è
__wur
;

408 
ssize_t
 
	$pwr™e64
 (
__fd
, cÚ¡ *
__buf
, 
size_t
 
__n
,

409 
__off64_t
 
__off£t
è
__wur
;

417 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

419 #ifdeà
__USE_GNU


422 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

432 
	$®¬m
 (
__£cÚds
è
__THROW
;

444 
	`¦“p
 (
__£cÚds
);

446 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

447 || 
defšed
 
__USE_BSD


452 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

453 
__THROW
;

460 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

469 
	`·u£
 ();

473 
	$chown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

474 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

476 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


478 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

483 
	$lchown
 (cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

484 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

488 #ifdeà
__USE_ATFILE


491 
	$fchowÇt
 (
__fd
, cÚ¡ *
__fe
, 
__uid_t
 
__owÃr
,

492 
__gid_t
 
__group
, 
__æag
)

493 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

497 
	$chdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

499 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


501 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

511 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

513 #ifdef 
__USE_GNU


517 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

520 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

521 || 
defšed
 
__USE_BSD


525 *
	$g‘wd
 (*
__buf
)

526 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

531 
	$dup
 (
__fd
è
__THROW
 
__wur
;

534 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

536 #ifdeà
__USE_GNU


539 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

543 **
__’vœÚ
;

544 #ifdeà
__USE_GNU


545 **
’vœÚ
;

551 
	$execve
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[],

552 *cÚ¡ 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

554 #ifdeà
__USE_XOPEN2K8


557 
	$ãxecve
 (
__fd
, *cÚ¡ 
__¬gv
[], *cÚ¡ 
__’vp
[])

558 
__THROW
 
	`__nÚnuÎ
 ((2));

563 
	$execv
 (cÚ¡ *
__·th
, *cÚ¡ 
__¬gv
[])

564 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

568 
	$exeşe
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

573 
	$exeş
 (cÚ¡ *
__·th
, cÚ¡ *
__¬g
, ...)

574 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

578 
	$execvp
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[])

579 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 
	$exeşp
 (cÚ¡ *
__fe
, cÚ¡ *
__¬g
, ...)

585 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

587 #ifdeà
__USE_GNU


590 
	$execv³
 (cÚ¡ *
__fe
, *cÚ¡ 
__¬gv
[],

591 *cÚ¡ 
__’vp
[])

592 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

596 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


598 
	$niû
 (
__šc
è
__THROW
 
__wur
;

603 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

609 
	~<b™s/cÚâame.h
>

612 
	$·thcÚf
 (cÚ¡ *
__·th
, 
__Çme
)

613 
__THROW
 
	`__nÚnuÎ
 ((1));

616 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

619 
	$syscÚf
 (
__Çme
è
__THROW
;

621 #ifdef 
__USE_POSIX2


623 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

628 
__pid_t
 
	$g‘pid
 (è
__THROW
;

631 
__pid_t
 
	$g‘µid
 (è
__THROW
;

634 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

637 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

638 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


639 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

646 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

648 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


660 
	$£g½
 (è
__THROW
;

667 
__pid_t
 
	$£tsid
 (è
__THROW
;

669 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


671 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

675 
__uid_t
 
	$g‘uid
 (è
__THROW
;

678 
__uid_t
 
	$g‘euid
 (è
__THROW
;

681 
__gid_t
 
	$g‘gid
 (è
__THROW
;

684 
__gid_t
 
	$g‘egid
 (è
__THROW
;

689 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

691 #ifdef 
__USE_GNU


693 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

700 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

702 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


705 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
 
__wur
;

708 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


710 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
 
__wur
;

717 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
 
__wur
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
 
__wur
;

730 #ifdeà
__USE_GNU


733 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

734 
__THROW
;

738 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

739 
__THROW
;

743 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

744 
__THROW
 
__wur
;

748 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

749 
__THROW
 
__wur
;

756 
__pid_t
 
	$fÜk
 (è
__THROWNL
;

758 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

759 || 
defšed
 
__USE_BSD


764 
__pid_t
 
	$vfÜk
 (è
__THROW
;

770 *
	$‰yÇme
 (
__fd
è
__THROW
;

774 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

775 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

779 
	$i§‰y
 (
__fd
è
__THROW
;

781 #ià
defšed
 
__USE_BSD
 \

782 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

785 
	$‰y¦Ù
 (è
__THROW
;

790 
	$lšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

791 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

793 #ifdeà
__USE_ATFILE


796 
	$lšk©
 (
__äomfd
, cÚ¡ *
__äom
, 
__tofd
,

797 cÚ¡ *
__to
, 
__æags
)

798 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

801 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


803 
	$symlšk
 (cÚ¡ *
__äom
, cÚ¡ *
__to
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 
ssize_t
 
	$»adlšk
 (cÚ¡ *
__»¡riù
 
__·th
,

810 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

811 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

814 #ifdeà
__USE_ATFILE


816 
	$symlšk©
 (cÚ¡ *
__äom
, 
__tofd
,

817 cÚ¡ *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

820 
ssize_t
 
	$»adlšk©
 (
__fd
, cÚ¡ *
__»¡riù
 
__·th
,

821 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

822 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

826 
	$uÆšk
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

828 #ifdeà
__USE_ATFILE


830 
	$uÆšk©
 (
__fd
, cÚ¡ *
__Çme
, 
__æag
)

831 
__THROW
 
	`__nÚnuÎ
 ((2));

835 
	$rmdœ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

839 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

842 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

849 *
	`g‘logš
 ();

850 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


857 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

860 #ifdef 
__USE_BSD


862 
	$£ogš
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

866 #ifdef 
__USE_POSIX2


870 
	#__Ãed_g‘İt


	)

871 
	~<g‘İt.h
>

875 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


879 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

883 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

886 
	$£tho¡Çme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

887 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

897 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

898 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

899 
	$£tdomašÇme
 (cÚ¡ *
__Çme
, 
size_t
 
__Ën
)

900 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

906 
	$vhªgup
 (è
__THROW
;

909 
	$»voke
 (cÚ¡ *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

917 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

918 
size_t
 
__off£t
, 
__sÿË
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

925 
	$acù
 (cÚ¡ *
__Çme
è
__THROW
;

929 *
	$g‘u£rsh–l
 (è
__THROW
;

930 
	$’du£rsh–l
 (è
__THROW
;

931 
	$£tu£rsh–l
 (è
__THROW
;

937 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

941 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

944 
	$chroÙ
 (cÚ¡ *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

948 *
	$g‘·ss
 (cÚ¡ *
__´om±
è
	`__nÚnuÎ
 ((1));

956 
	`fsync
 (
__fd
);

959 #ifdeà
__USE_GNU


962 
	$syncfs
 (
__fd
è
__THROW
;

966 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


969 
	`g‘ho¡id
 ();

972 
	$sync
 (è
__THROW
;

975 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


978 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

983 
	$g‘dbËsize
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


992 #iâdeà
__USE_FILE_OFFSET64


993 
	$Œunÿ‹
 (cÚ¡ *
__fe
, 
__off_t
 
__Ëngth
)

994 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

996 #ifdeà
__REDIRECT_NTH


997 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

998 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
),

999 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1001 
	#Œunÿ‹
 
Œunÿ‹64


	)

1004 #ifdeà
__USE_LARGEFILE64


1005 
	$Œunÿ‹64
 (cÚ¡ *
__fe
, 
__off64_t
 
__Ëngth
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1011 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_POSIX199309
 \

1012 || 
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1015 #iâdeà
__USE_FILE_OFFSET64


1016 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1018 #ifdeà
__REDIRECT_NTH


1019 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1020 
árunÿ‹64
è
__wur
;

1022 
	#árunÿ‹
 
árunÿ‹64


	)

1025 #ifdeà
__USE_LARGEFILE64


1026 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1032 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1033 || 
defšed
 
__USE_MISC


1037 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1043 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1047 #ifdeà
__USE_MISC


1058 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1063 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1075 
	#F_ULOCK
 0

	)

1076 
	#F_LOCK
 1

	)

1077 
	#F_TLOCK
 2

	)

1078 
	#F_TEST
 3

	)

1080 #iâdeà
__USE_FILE_OFFSET64


1081 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1083 #ifdeà
__REDIRECT


1084 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1085 
lockf64
è
__wur
;

1087 
	#lockf
 
lockf64


	)

1090 #ifdeà
__USE_LARGEFILE64


1091 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1096 #ifdeà
__USE_GNU


1101 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1102 (
__ex‹nsiÚ__
 \

1103 ({ 
__»suÉ
; \

1104 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1105 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1106 
__»suÉ
; 
	}
}))

	)

1109 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1112 
fd©async
 (
__fdes
);

1118 #ifdef 
__USE_XOPEN


1120 *
	$üy±
 (cÚ¡ *
__key
, cÚ¡ *
__§É
)

1121 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1125 
	$’üy±
 (*
__glibc_block
, 
__edæag
)

1126 
__THROW
 
	`__nÚnuÎ
 ((1));

1133 
	$swab
 (cÚ¡ *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1134 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1140 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K


1142 *
	$ù”mid
 (*
__s
è
__THROW
;

1147 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


1148 
	~<b™s/uni¡d.h
>

1151 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_BSD


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_BSD
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

101 #undeà
__USE_ISOC11


102 #undeà
__USE_ISOC99


103 #undeà
__USE_ISOC95


104 #undeà
__USE_ISOCXX11


105 #undeà
__USE_POSIX


106 #undeà
__USE_POSIX2


107 #undeà
__USE_POSIX199309


108 #undeà
__USE_POSIX199506


109 #undeà
__USE_XOPEN


110 #undeà
__USE_XOPEN_EXTENDED


111 #undeà
__USE_UNIX98


112 #undeà
__USE_XOPEN2K


113 #undeà
__USE_XOPEN2KXSI


114 #undeà
__USE_XOPEN2K8


115 #undeà
__USE_XOPEN2K8XSI


116 #undeà
__USE_LARGEFILE


117 #undeà
__USE_LARGEFILE64


118 #undeà
__USE_FILE_OFFSET64


119 #undeà
__USE_BSD


120 #undeà
__USE_SVID


121 #undeà
__USE_MISC


122 #undeà
__USE_ATFILE


123 #undeà
__USE_GNU


124 #undeà
__USE_REENTRANT


125 #undeà
__USE_FORTIFY_LEVEL


126 #undeà
__KERNEL_STRICT_NAMES


130 #iâdeà
_LOOSE_KERNEL_NAMES


131 
	#__KERNEL_STRICT_NAMES


	)

141 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


142 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

143 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

145 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

150 #ifdeà
_GNU_SOURCE


151 #undeà
_ISOC95_SOURCE


152 
	#_ISOC95_SOURCE
 1

	)

153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_ISOC11_SOURCE


156 
	#_ISOC11_SOURCE
 1

	)

157 #undeà
_POSIX_SOURCE


158 
	#_POSIX_SOURCE
 1

	)

159 #undeà
_POSIX_C_SOURCE


160 
	#_POSIX_C_SOURCE
 200809L

	)

161 #undeà
_XOPEN_SOURCE


162 
	#_XOPEN_SOURCE
 700

	)

163 #undeà
_XOPEN_SOURCE_EXTENDED


164 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

165 #undeà
_LARGEFILE64_SOURCE


166 
	#_LARGEFILE64_SOURCE
 1

	)

167 #undeà
_DEFAULT_SOURCE


168 
	#_DEFAULT_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(
defšed
 
_DEFAULT_SOURCE
 \

180 || (!
defšed
 
	g__STRICT_ANSI__
 \

181 && !
defšed
 
	g_ISOC99_SOURCE
 \

182 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

183 && !
defšed
 
	g_XOPEN_SOURCE
 \

184 && !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
))

185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

187 #undeà
_BSD_SOURCE


188 
	#_BSD_SOURCE
 1

	)

189 #undeà
_SVID_SOURCE


190 
	#_SVID_SOURCE
 1

	)

194 #ià(
defšed
 
_ISOC11_SOURCE
 \

195 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

196 
	#__USE_ISOC11
 1

	)

200 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

201 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

202 
	#__USE_ISOC99
 1

	)

206 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

207 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

208 
	#__USE_ISOC95
 1

	)

215 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

216 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

217 
	#__USE_ISOCXX11
 1

	)

223 #ifdeà
_DEFAULT_SOURCE


224 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


225 
	#__USE_POSIX_IMPLICITLY
 1

	)

227 #undeà
_POSIX_SOURCE


228 
	#_POSIX_SOURCE
 1

	)

229 #undeà
_POSIX_C_SOURCE


230 
	#_POSIX_C_SOURCE
 200809L

	)

232 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

233 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

234 
	#_POSIX_SOURCE
 1

	)

235 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

236 
	#_POSIX_C_SOURCE
 2

	)

237 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

238 
	#_POSIX_C_SOURCE
 199506L

	)

239 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

240 
	#_POSIX_C_SOURCE
 200112L

	)

242 
	#_POSIX_C_SOURCE
 200809L

	)

244 
	#__USE_POSIX_IMPLICITLY
 1

	)

247 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


248 
	#__USE_POSIX
 1

	)

251 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


252 
	#__USE_POSIX2
 1

	)

255 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

256 
	#__USE_POSIX199309
 1

	)

259 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

260 
	#__USE_POSIX199506
 1

	)

263 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

264 
	#__USE_XOPEN2K
 1

	)

265 #undeà
__USE_ISOC95


266 
	#__USE_ISOC95
 1

	)

267 #undeà
__USE_ISOC99


268 
	#__USE_ISOC99
 1

	)

271 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

272 
	#__USE_XOPEN2K8
 1

	)

273 #undeà
_ATFILE_SOURCE


274 
	#_ATFILE_SOURCE
 1

	)

277 #ifdef 
_XOPEN_SOURCE


278 
	#__USE_XOPEN
 1

	)

279 #ià(
_XOPEN_SOURCE
 - 0) >= 500

280 
	#__USE_XOPEN_EXTENDED
 1

	)

281 
	#__USE_UNIX98
 1

	)

282 #undeà
_LARGEFILE_SOURCE


283 
	#_LARGEFILE_SOURCE
 1

	)

284 #ià(
_XOPEN_SOURCE
 - 0) >= 600

285 #ià(
_XOPEN_SOURCE
 - 0) >= 700

286 
	#__USE_XOPEN2K8
 1

	)

287 
	#__USE_XOPEN2K8XSI
 1

	)

289 
	#__USE_XOPEN2K
 1

	)

290 
	#__USE_XOPEN2KXSI
 1

	)

291 #undeà
__USE_ISOC95


292 
	#__USE_ISOC95
 1

	)

293 #undeà
__USE_ISOC99


294 
	#__USE_ISOC99
 1

	)

297 #ifdeà
_XOPEN_SOURCE_EXTENDED


298 
	#__USE_XOPEN_EXTENDED
 1

	)

303 #ifdeà
_LARGEFILE_SOURCE


304 
	#__USE_LARGEFILE
 1

	)

307 #ifdeà
_LARGEFILE64_SOURCE


308 
	#__USE_LARGEFILE64
 1

	)

311 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

312 
	#__USE_FILE_OFFSET64
 1

	)

315 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


316 
	#__USE_MISC
 1

	)

319 #ifdef 
_BSD_SOURCE


320 
	#__USE_BSD
 1

	)

323 #ifdef 
_SVID_SOURCE


324 
	#__USE_SVID
 1

	)

327 #ifdef 
_ATFILE_SOURCE


328 
	#__USE_ATFILE
 1

	)

331 #ifdef 
_GNU_SOURCE


332 
	#__USE_GNU
 1

	)

335 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


336 
	#__USE_REENTRANT
 1

	)

339 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

340 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

341 #ià
_FORTIFY_SOURCE
 > 1

342 
	#__USE_FORTIFY_LEVEL
 2

	)

344 
	#__USE_FORTIFY_LEVEL
 1

	)

347 
	#__USE_FORTIFY_LEVEL
 0

	)

352 
	~<¡dc-´edef.h
>

360 #undeà
__GNU_LIBRARY__


361 
	#__GNU_LIBRARY__
 6

	)

365 
	#__GLIBC__
 2

	)

366 
	#__GLIBC_MINOR__
 19

	)

368 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

369 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

372 #iâdeà
__ASSEMBLER__


373 #iâdeà
_SYS_CDEFS_H


374 
	~<sys/cdefs.h
>

379 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


380 
	#__USE_LARGEFILE
 1

	)

381 
	#__USE_LARGEFILE64
 1

	)

387 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

388 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

389 && 
defšed
 
	g__ex‹º_šlše


390 
	#__USE_EXTERN_INLINES
 1

	)

398 
	~<gnu/¡ubs.h
>

	@/usr/include/libio.h

28 #iâdeà
_IO_STDIO_H


29 
	#_IO_STDIO_H


	)

31 
	~<_G_cÚfig.h
>

33 
	#_IO_åos_t
 
_G_åos_t


	)

34 
	#_IO_åos64_t
 
_G_åos64_t


	)

35 
	#_IO_size_t
 
size_t


	)

36 
	#_IO_ssize_t
 
__ssize_t


	)

37 
	#_IO_off_t
 
__off_t


	)

38 
	#_IO_off64_t
 
__off64_t


	)

39 
	#_IO_pid_t
 
__pid_t


	)

40 
	#_IO_uid_t
 
__uid_t


	)

41 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

42 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

43 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

44 
	#_IO_va_li¡
 
_G_va_li¡


	)

45 
	#_IO_wšt_t
 
wšt_t


	)

48 
	#__Ãed___va_li¡


	)

49 
	~<¡d¬g.h
>

50 #ifdeà
__GNUC_VA_LIST


51 #undeà
_IO_va_li¡


52 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

55 #iâdeà
__P


56 
	~<sys/cdefs.h
>

59 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

61 #iâdeà
EOF


62 
	#EOF
 (-1)

	)

64 #iâdeà
NULL


65 #ià
defšed
 
__GNUG__
 && \

66 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

67 
	#NULL
 (
__nuÎ
)

	)

69 #ià!
defšed
(
__ılu¥lus
)

70 
	#NULL
 ((*)0)

	)

72 
	#NULL
 (0)

	)

77 
	#_IOS_INPUT
 1

	)

78 
	#_IOS_OUTPUT
 2

	)

79 
	#_IOS_ATEND
 4

	)

80 
	#_IOS_APPEND
 8

	)

81 
	#_IOS_TRUNC
 16

	)

82 
	#_IOS_NOCREATE
 32

	)

83 
	#_IOS_NOREPLACE
 64

	)

84 
	#_IOS_BIN
 128

	)

92 
	#_IO_MAGIC
 0xFBAD0000

	)

93 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

94 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

95 
	#_IO_USER_BUF
 1

	)

96 
	#_IO_UNBUFFERED
 2

	)

97 
	#_IO_NO_READS
 4

	)

98 
	#_IO_NO_WRITES
 8

	)

99 
	#_IO_EOF_SEEN
 0x10

	)

100 
	#_IO_ERR_SEEN
 0x20

	)

101 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

102 
	#_IO_LINKED
 0x80

	)

103 
	#_IO_IN_BACKUP
 0x100

	)

104 
	#_IO_LINE_BUF
 0x200

	)

105 
	#_IO_TIED_PUT_GET
 0x400

	)

106 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

107 
	#_IO_IS_APPENDING
 0x1000

	)

108 
	#_IO_IS_FILEBUF
 0x2000

	)

109 
	#_IO_BAD_SEEN
 0x4000

	)

110 
	#_IO_USER_LOCK
 0x8000

	)

112 
	#_IO_FLAGS2_MMAP
 1

	)

113 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

114 #ifdeà
_LIBC


115 
	#_IO_FLAGS2_FORTIFY
 4

	)

117 
	#_IO_FLAGS2_USER_WBUF
 8

	)

118 #ifdeà
_LIBC


119 
	#_IO_FLAGS2_SCANF_STD
 16

	)

120 
	#_IO_FLAGS2_NOCLOSE
 32

	)

121 
	#_IO_FLAGS2_CLOEXEC
 64

	)

125 
	#_IO_SKIPWS
 01

	)

126 
	#_IO_LEFT
 02

	)

127 
	#_IO_RIGHT
 04

	)

128 
	#_IO_INTERNAL
 010

	)

129 
	#_IO_DEC
 020

	)

130 
	#_IO_OCT
 040

	)

131 
	#_IO_HEX
 0100

	)

132 
	#_IO_SHOWBASE
 0200

	)

133 
	#_IO_SHOWPOINT
 0400

	)

134 
	#_IO_UPPERCASE
 01000

	)

135 
	#_IO_SHOWPOS
 02000

	)

136 
	#_IO_SCIENTIFIC
 04000

	)

137 
	#_IO_FIXED
 010000

	)

138 
	#_IO_UNITBUF
 020000

	)

139 
	#_IO_STDIO
 040000

	)

140 
	#_IO_DONT_CLOSE
 0100000

	)

141 
	#_IO_BOOLALPHA
 0200000

	)

144 
_IO_jump_t
; 
	g_IO_FILE
;

147 #ifdeà
_IO_MTSAFE_IO


148 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

149 
	~<b™s/¡dio-lock.h
>

154 
	t_IO_lock_t
;

160 
	s_IO_m¬k”
 {

161 
_IO_m¬k”
 *
	m_Ãxt
;

162 
_IO_FILE
 *
	m_sbuf
;

166 
	m_pos
;

168 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

169 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

170 
	mpublic
:

171 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

172 ~
¡»amm¬k”
();

173 
§všg
(è{  
	m_¥os
 == -2; }

174 
d–
(
¡»amm¬k”
&);

175 
d–
();

180 
	e__codecvt_»suÉ


182 
	m__codecvt_ok
,

183 
	m__codecvt_·¹Ÿl
,

184 
	m__codecvt_”rÜ
,

185 
	m__codecvt_nocÚv


188 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


191 
	s_IO_codecvt


193 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

194 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

195 
	m__mb¡©e_t
 *,

196 cÚ¡ 
	mwch¬_t
 *,

197 cÚ¡ 
	mwch¬_t
 *,

198 cÚ¡ 
	mwch¬_t
 **, *,

200 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

201 
	m__mb¡©e_t
 *, *,

203 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

204 
	m__mb¡©e_t
 *,

206 cÚ¡ **, 
	mwch¬_t
 *,

207 
	mwch¬_t
 *, wchar_t **);

208 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

209 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

210 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

211 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

212 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

214 
_IO_icÚv_t
 
	m__cd_š
;

215 
_IO_icÚv_t
 
	m__cd_out
;

219 
	s_IO_wide_d©a


221 
wch¬_t
 *
	m_IO_»ad_±r
;

222 
wch¬_t
 *
	m_IO_»ad_’d
;

223 
wch¬_t
 *
	m_IO_»ad_ba£
;

224 
wch¬_t
 *
	m_IO_wr™e_ba£
;

225 
wch¬_t
 *
	m_IO_wr™e_±r
;

226 
wch¬_t
 *
	m_IO_wr™e_’d
;

227 
wch¬_t
 *
	m_IO_buf_ba£
;

228 
wch¬_t
 *
	m_IO_buf_’d
;

230 
wch¬_t
 *
	m_IO_§ve_ba£
;

231 
wch¬_t
 *
	m_IO_backup_ba£
;

233 
wch¬_t
 *
	m_IO_§ve_’d
;

235 
__mb¡©e_t
 
	m_IO_¡©e
;

236 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

237 
_IO_codecvt
 
	m_codecvt
;

239 
wch¬_t
 
	m_shÜtbuf
[1];

241 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

245 
	s_IO_FILE
 {

246 
	m_æags
;

247 
	#_IO_fe_æags
 
_æags


	)

251 * 
	m_IO_»ad_±r
;

252 * 
	m_IO_»ad_’d
;

253 * 
	m_IO_»ad_ba£
;

254 * 
	m_IO_wr™e_ba£
;

255 * 
	m_IO_wr™e_±r
;

256 * 
	m_IO_wr™e_’d
;

257 * 
	m_IO_buf_ba£
;

258 * 
	m_IO_buf_’d
;

260 *
	m_IO_§ve_ba£
;

261 *
	m_IO_backup_ba£
;

262 *
	m_IO_§ve_’d
;

264 
_IO_m¬k”
 *
	m_m¬k”s
;

266 
_IO_FILE
 *
	m_chaš
;

268 
	m_f’o
;

270 
	m_blksize
;

272 
	m_æags2
;

274 
_IO_off_t
 
	m_Şd_off£t
;

276 
	#__HAVE_COLUMN


	)

278 
	m_cur_cŞumn
;

279 sigÃd 
	m_vbË_off£t
;

280 
	m_shÜtbuf
[1];

284 
_IO_lock_t
 *
	m_lock
;

285 #ifdeà
_IO_USE_OLD_IO_FILE


288 
	s_IO_FILE_com¶‘e


290 
_IO_FILE
 
	m_fe
;

292 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

293 
_IO_off64_t
 
	m_off£t
;

294 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


296 
_IO_codecvt
 *
	m_codecvt
;

297 
_IO_wide_d©a
 *
	m_wide_d©a
;

298 
_IO_FILE
 *
	m_ä“»s_li¡
;

299 *
	m_ä“»s_buf
;

300 
size_t
 
	m_ä“»s_size
;

302 *
	m__·d1
;

303 *
	m__·d2
;

304 *
	m__·d3
;

305 *
	m__·d4
;

306 
size_t
 
	m__·d5
;

308 
	m_mode
;

310 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

314 #iâdeà
__ılu¥lus


315 
_IO_FILE
 
	t_IO_FILE
;

318 
	g_IO_FILE_¶us
;

320 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

321 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

322 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

323 #iâdeà
_LIBC


324 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

325 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

326 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

328 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

329 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

330 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

338 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

346 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, cÚ¡ *
	t__buf
,

347 
	tsize_t
 
	t__n
);

355 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

358 
	t__io_şo£_â
 (*
	t__cook›
);

361 #ifdeà
_GNU_SOURCE


363 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

364 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

365 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

366 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

371 
__io_»ad_â
 *
	m»ad
;

372 
__io_wr™e_â
 *
	mwr™e
;

373 
__io_£ek_â
 *
	m£ek
;

374 
__io_şo£_â
 *
	mşo£
;

375 } 
	t_IO_cook›_io_funùiÚs_t
;

376 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

378 
	g_IO_cook›_fe
;

381 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

382 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

386 #ifdeà
__ılu¥lus


390 
__und”æow
 (
_IO_FILE
 *);

391 
__uæow
 (
_IO_FILE
 *);

392 
__ov”æow
 (
_IO_FILE
 *, );

393 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


394 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

395 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

396 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

399 #ià 
__GNUC__
 >= 3

400 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

402 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

405 
	#_IO_g‘c_uÆocked
(
_å
) \

406 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

407 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

408 
	#_IO_³ekc_uÆocked
(
_å
) \

409 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

410 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

411 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

412 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

413 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

414 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

415 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

417 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


418 
	#_IO_g‘wc_uÆocked
(
_å
) \

419 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

420 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

421 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

422 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

423 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

424 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

425 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

426 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

427 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

428 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

431 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

432 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

434 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

435 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

436 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

437 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

439 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

442 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

443 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

445 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

446 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

447 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

449 #ifdeà
_IO_MTSAFE_IO


450 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

451 
	#_IO_æockfe
(
_å
) \

452 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

453 
	#_IO_fuÆockfe
(
_å
) \

454 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

456 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

457 
	#_IO_æockfe
(
_å
è

	)

458 
	#_IO_fuÆockfe
(
_å
è

	)

459 
	#_IO_árylockfe
(
_å
è

	)

460 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

461 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

464 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

465 
_IO_va_li¡
, *
__»¡riù
);

466 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

467 
_IO_va_li¡
);

468 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

469 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

471 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

472 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

474 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

476 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


477 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

478 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

479 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

480 #ià
__GNUC__
 >= 2

483 #ià
defšed
 
_LIBC
 && defšed 
SHARED


484 
	~<shlib-com·t.h
>

485 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

486 
	#_IO_fwide_maybe_šcom·tibË
 \

487 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

488 cÚ¡ 
_IO_¡dš_u£d
;

489 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

492 #iâdeà
_IO_fwide_maybe_šcom·tibË


493 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

497 
	#_IO_fwide
(
__å
, 
__mode
) \

498 ({ 
__»suÉ
 = (
__mode
); \

499 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

501 ià((
__å
)->
_mode
 == 0) \

503 (
__å
)->
_mode
 = -1; \

504 
__»suÉ
 = (
__å
)->
_mode
; \

506 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

507 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

509 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

510 
__»suÉ
; })

	)

513 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

514 
_IO_va_li¡
, *
__»¡riù
);

515 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

516 
_IO_va_li¡
);

517 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

518 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

521 #ifdeà
__LDBL_COMPAT


522 
	~<b™s/libio-ldbl.h
>

525 #ifdeà
__ılu¥lus


	@/usr/include/linux/if_ether.h

21 #iâdeà
_LINUX_IF_ETHER_H


22 
	#_LINUX_IF_ETHER_H


	)

24 
	~<lšux/ty³s.h
>

31 
	#ETH_ALEN
 6

	)

32 
	#ETH_HLEN
 14

	)

33 
	#ETH_ZLEN
 60

	)

34 
	#ETH_DATA_LEN
 1500

	)

35 
	#ETH_FRAME_LEN
 1514

	)

36 
	#ETH_FCS_LEN
 4

	)

42 
	#ETH_P_LOOP
 0x0060

	)

43 
	#ETH_P_PUP
 0x0200

	)

44 
	#ETH_P_PUPAT
 0x0201

	)

45 
	#ETH_P_IP
 0x0800

	)

46 
	#ETH_P_X25
 0x0805

	)

47 
	#ETH_P_ARP
 0x0806

	)

48 
	#ETH_P_BPQ
 0x08FF

	)

49 
	#ETH_P_IEEEPUP
 0x0a00

	)

50 
	#ETH_P_IEEEPUPAT
 0x0a01

	)

51 
	#ETH_P_BATMAN
 0x4305

	)

52 
	#ETH_P_DEC
 0x6000

	)

53 
	#ETH_P_DNA_DL
 0x6001

	)

54 
	#ETH_P_DNA_RC
 0x6002

	)

55 
	#ETH_P_DNA_RT
 0x6003

	)

56 
	#ETH_P_LAT
 0x6004

	)

57 
	#ETH_P_DIAG
 0x6005

	)

58 
	#ETH_P_CUST
 0x6006

	)

59 
	#ETH_P_SCA
 0x6007

	)

60 
	#ETH_P_TEB
 0x6558

	)

61 
	#ETH_P_RARP
 0x8035

	)

62 
	#ETH_P_ATALK
 0x809B

	)

63 
	#ETH_P_AARP
 0x80F3

	)

64 
	#ETH_P_8021Q
 0x8100

	)

65 
	#ETH_P_IPX
 0x8137

	)

66 
	#ETH_P_IPV6
 0x86DD

	)

67 
	#ETH_P_PAUSE
 0x8808

	)

68 
	#ETH_P_SLOW
 0x8809

	)

69 
	#ETH_P_WCCP
 0x883E

	)

71 
	#ETH_P_PPP_DISC
 0x8863

	)

72 
	#ETH_P_PPP_SES
 0x8864

	)

73 
	#ETH_P_MPLS_UC
 0x8847

	)

74 
	#ETH_P_MPLS_MC
 0x8848

	)

75 
	#ETH_P_ATMMPOA
 0x884ø

	)

76 
	#ETH_P_LINK_CTL
 0x886ø

	)

77 
	#ETH_P_ATMFATE
 0x8884

	)

80 
	#ETH_P_PAE
 0x888E

	)

81 
	#ETH_P_AOE
 0x88A2

	)

82 
	#ETH_P_8021AD
 0x88A8

	)

83 
	#ETH_P_802_EX1
 0x88B5

	)

84 
	#ETH_P_TIPC
 0x88CA

	)

85 
	#ETH_P_8021AH
 0x88E7

	)

86 
	#ETH_P_MVRP
 0x88F5

	)

87 
	#ETH_P_1588
 0x88F7

	)

88 
	#ETH_P_PRP
 0x88FB

	)

89 
	#ETH_P_FCOE
 0x8906

	)

90 
	#ETH_P_TDLS
 0x890D

	)

91 
	#ETH_P_FIP
 0x8914

	)

92 
	#ETH_P_QINQ1
 0x9100

	)

93 
	#ETH_P_QINQ2
 0x9200

	)

94 
	#ETH_P_QINQ3
 0x9300

	)

95 
	#ETH_P_EDSA
 0xDADA

	)

96 
	#ETH_P_AF_IUCV
 0xFBFB

	)

98 
	#ETH_P_802_3_MIN
 0x0600

	)

105 
	#ETH_P_802_3
 0x0001

	)

106 
	#ETH_P_AX25
 0x0002

	)

107 
	#ETH_P_ALL
 0x0003

	)

108 
	#ETH_P_802_2
 0x0004

	)

109 
	#ETH_P_SNAP
 0x0005

	)

110 
	#ETH_P_DDCMP
 0x0006

	)

111 
	#ETH_P_WAN_PPP
 0x0007

	)

112 
	#ETH_P_PPP_MP
 0x0008

	)

113 
	#ETH_P_LOCALTALK
 0x0009

	)

114 
	#ETH_P_CAN
 0x000C

	)

115 
	#ETH_P_CANFD
 0x000D

	)

116 
	#ETH_P_PPPTALK
 0x0010

	)

117 
	#ETH_P_TR_802_2
 0x0011

	)

118 
	#ETH_P_MOBITEX
 0x0015

	)

119 
	#ETH_P_CONTROL
 0x0016

	)

120 
	#ETH_P_IRDA
 0x0017

	)

121 
	#ETH_P_ECONET
 0x0018

	)

122 
	#ETH_P_HDLC
 0x0019

	)

123 
	#ETH_P_ARCNET
 0x001A

	)

124 
	#ETH_P_DSA
 0x001B

	)

125 
	#ETH_P_TRAILER
 0x001C

	)

126 
	#ETH_P_PHONET
 0x00F5

	)

127 
	#ETH_P_IEEE802154
 0x00F6

	)

128 
	#ETH_P_CAIF
 0x00F7

	)

134 
	s‘hhdr
 {

135 
	mh_de¡
[
ETH_ALEN
];

136 
	mh_sourû
[
ETH_ALEN
];

137 
__be16
 
	mh_´Ùo
;

138 } 
__©Œibu‹__
((
·cked
));

	@/usr/include/linux/types.h

1 #iâdeà
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty³s.h
>

6 #iâdeà
__ASSEMBLY__


8 
	~<lšux/posix_ty³s.h
>

16 #ifdeà
__CHECKER__


17 
	#__b™wi£__
 
	`__©Œibu‹__
((
b™wi£
))

	)

19 
	#__b™wi£__


	)

21 #ifdeà
__CHECK_ENDIAN__


22 
	#__b™wi£
 
__b™wi£__


	)

24 
	#__b™wi£


	)

27 
__u16
 
	t__b™wi£
 
	t__Ë16
;

28 
__u16
 
	t__b™wi£
 
	t__be16
;

29 
__u32
 
	t__b™wi£
 
	t__Ë32
;

30 
__u32
 
	t__b™wi£
 
	t__be32
;

31 
__u64
 
	t__b™wi£
 
	t__Ë64
;

32 
__u64
 
	t__b™wi£
 
	t__be64
;

34 
__u16
 
	t__b™wi£
 
	t__sum16
;

35 
__u32
 
	t__b™wi£
 
	t__wsum
;

46 
	#__®igÃd_u64
 
__u64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

47 
	#__®igÃd_be64
 
__be64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

48 
	#__®igÃd_Ë64
 
__Ë64
 
	`__©Œibu‹__
((
	`®igÃd
(8)))

	)

	@/usr/include/netinet/if_ether.h

18 #iâdeà
__NETINET_IF_ETHER_H


20 
	#__NETINET_IF_ETHER_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	~<sys/ty³s.h
>

25 
	~<lšux/if_‘h”.h
>

27 #ifdeà
__USE_BSD


60 
	~<Ãt/‘h”Ãt.h
>

61 
	~<Ãt/if_¬p.h
>

63 
__BEGIN_DECLS


71 
	s‘h”_¬p
 {

72 
¬phdr
 
	m—_hdr
;

73 
u_št8_t
 
	m¬p_sha
[
ETH_ALEN
];

74 
u_št8_t
 
	m¬p_¥a
[4];

75 
u_št8_t
 
	m¬p_tha
[
ETH_ALEN
];

76 
u_št8_t
 
	m¬p_a
[4];

78 
	#¬p_hrd
 
—_hdr
.
¬_hrd


	)

79 
	#¬p_´o
 
—_hdr
.
¬_´o


	)

80 
	#¬p_hÊ
 
—_hdr
.
¬_hÊ


	)

81 
	#¬p_¶n
 
—_hdr
.
¬_¶n


	)

82 
	#¬p_İ
 
—_hdr
.
¬_İ


	)

89 
	#ETHER_MAP_IP_MULTICAST
(
addr
, 
’addr
) \

93 (
’addr
)[0] = 0x01; \

94 (
’addr
)[1] = 0x00; \

95 (
’addr
)[2] = 0x5e; \

96 (
’addr
)[3] = ((
u_št8_t
 *)
addr
)[1] & 0x7f; \

97 (
’addr
)[4] = ((
u_št8_t
 *)
addr
)[2]; \

98 (
’addr
)[5] = ((
u_št8_t
 *)
addr
)[3]; \

99 }

	)

101 
	g__END_DECLS


	@/usr/include/pcap/pcap.h

37 #iâdeà
lib_pÿp_pÿp_h


38 
	#lib_pÿp_pÿp_h


	)

40 #ià
defšed
(
WIN32
)

41 
	~<pÿp-¡dšc.h
>

42 #–ià
defšed
(
MSDOS
)

43 
	~<sys/ty³s.h
>

44 
	~<sys/sock‘.h
>

46 
	~<sys/ty³s.h
>

47 
	~<sys/time.h
>

50 #iâdeà
PCAP_DONT_INCLUDE_PCAP_BPF_H


51 
	~<pÿp/bpf.h
>

54 
	~<¡dio.h
>

56 #ifdeà
__ılu¥lus


67 
	#PCAP_VERSION_MAJOR
 2

	)

68 
	#PCAP_VERSION_MINOR
 4

	)

70 
	#PCAP_ERRBUF_SIZE
 256

	)

76 #ià
BPF_RELEASE
 - 0 < 199406

77 
	tbpf_št32
;

78 
u_št
 
	tbpf_u_št32
;

81 
pÿp
 
	tpÿp_t
;

82 
pÿp_dum³r
 
	tpÿp_dum³r_t
;

83 
pÿp_if
 
	tpÿp_if_t
;

84 
pÿp_addr
 
	tpÿp_addr_t
;

124 
	spÿp_fe_h—d”
 {

125 
bpf_u_št32
 
magic
;

126 
u_shÜt
 
v”siÚ_majÜ
;

127 
u_shÜt
 
v”siÚ_mšÜ
;

128 
bpf_št32
 
thiszÚe
;

129 
bpf_u_št32
 
sigfigs
;

130 
bpf_u_št32
 
¢­Ën
;

131 
bpf_u_št32
 
lškty³
;

140 
	#LT_FCS_LENGTH_PRESENT
(
x
è((xè& 0x04000000)

	)

141 
	#LT_FCS_LENGTH
(
x
è(((xè& 0xF0000000è>> 28)

	)

142 
	#LT_FCS_DATALINK_EXT
(
x
è((((xè& 0xFè<< 28è| 0x04000000)

	)

145 
PCAP_D_INOUT
 = 0,

146 
PCAP_D_IN
,

147 
PCAP_D_OUT


148 } 
	tpÿp_dœeùiÚ_t
;

162 
	spÿp_pkthdr
 {

163 
timev®
 
ts
;

164 
bpf_u_št32
 
ÿ¶’
;

165 
bpf_u_št32
 
Ën
;

171 
	spÿp_¡©
 {

172 
u_št
 
ps_»cv
;

173 
u_št
 
ps_drİ
;

174 
u_št
 
ps_ifdrİ
;

175 #ifdeà
WIN32


176 
u_št
 
bs_ÿ±
;

180 #ifdeà
MSDOS


184 
	spÿp_¡©_ex
 {

185 
u_lÚg
 
rx_·ck‘s
;

186 
u_lÚg
 
tx_·ck‘s
;

187 
u_lÚg
 
rx_by‹s
;

188 
u_lÚg
 
tx_by‹s
;

189 
u_lÚg
 
rx_”rÜs
;

190 
u_lÚg
 
tx_”rÜs
;

191 
u_lÚg
 
rx_drİ³d
;

192 
u_lÚg
 
tx_drİ³d
;

193 
u_lÚg
 
muÉiÿ¡
;

194 
u_lÚg
 
cŞlisiÚs
;

197 
u_lÚg
 
rx_Ëngth_”rÜs
;

198 
u_lÚg
 
rx_ov”_”rÜs
;

199 
u_lÚg
 
rx_üc_”rÜs
;

200 
u_lÚg
 
rx_äame_”rÜs
;

201 
u_lÚg
 
rx_fifo_”rÜs
;

202 
u_lÚg
 
rx_mis£d_”rÜs
;

205 
u_lÚg
 
tx_abÜ‹d_”rÜs
;

206 
u_lÚg
 
tx_ÿ¼›r_”rÜs
;

207 
u_lÚg
 
tx_fifo_”rÜs
;

208 
u_lÚg
 
tx_h—¹b—t_”rÜs
;

209 
u_lÚg
 
tx_wšdow_”rÜs
;

216 
	spÿp_if
 {

217 
pÿp_if
 *
Ãxt
;

218 *
Çme
;

219 *
desütiÚ
;

220 
pÿp_addr
 *
add»s£s
;

221 
bpf_u_št32
 
æags
;

224 
	#PCAP_IF_LOOPBACK
 0x00000001

	)

229 
	spÿp_addr
 {

230 
pÿp_addr
 *
Ãxt
;

231 
sockaddr
 *
addr
;

232 
sockaddr
 *
Ãtmask
;

233 
sockaddr
 *
brßdaddr
;

234 
sockaddr
 *
d¡addr
;

237 (*
pÿp_hªdËr
)(
	tu_ch¬
 *, cÚ¡ 
	tpÿp_pkthdr
 *,

238 cÚ¡ 
	tu_ch¬
 *);

246 
	#PCAP_ERROR
 -1

	)

247 
	#PCAP_ERROR_BREAK
 -2

	)

248 
	#PCAP_ERROR_NOT_ACTIVATED
 -3

	)

249 
	#PCAP_ERROR_ACTIVATED
 -4

	)

250 
	#PCAP_ERROR_NO_SUCH_DEVICE
 -5

	)

251 
	#PCAP_ERROR_RFMON_NOTSUP
 -6

	)

252 
	#PCAP_ERROR_NOT_RFMON
 -7

	)

253 
	#PCAP_ERROR_PERM_DENIED
 -8

	)

254 
	#PCAP_ERROR_IFACE_NOT_UP
 -9

	)

255 
	#PCAP_ERROR_CANTSET_TSTAMP_TYPE
 -10

	)

256 
	#PCAP_ERROR_PROMISC_PERM_DENIED
 -11

	)

257 
	#PCAP_ERROR_TSTAMP_PRECISION_NOTSUP
 -12

	)

264 
	#PCAP_WARNING
 1

	)

265 
	#PCAP_WARNING_PROMISC_NOTSUP
 2

	)

266 
	#PCAP_WARNING_TSTAMP_TYPE_NOTSUP
 3

	)

272 
	#PCAP_NETMASK_UNKNOWN
 0xffffffff

	)

274 *
pÿp_lookupdev
(*);

275 
pÿp_looku²‘
(cÚ¡ *, 
bpf_u_št32
 *, bpf_u_int32 *, *);

277 
pÿp_t
 *
pÿp_ü—‹
(const *, *);

278 
pÿp_£t_¢­Ën
(
pÿp_t
 *, );

279 
pÿp_£t_´omisc
(
pÿp_t
 *, );

280 
pÿp_ÿn_£t_rfmÚ
(
pÿp_t
 *);

281 
pÿp_£t_rfmÚ
(
pÿp_t
 *, );

282 
pÿp_£t_timeout
(
pÿp_t
 *, );

283 
pÿp_£t_t¡amp_ty³
(
pÿp_t
 *, );

284 
pÿp_£t_immedŸ‹_mode
(
pÿp_t
 *, );

285 
pÿp_£t_bufãr_size
(
pÿp_t
 *, );

286 
pÿp_£t_t¡amp_´ecisiÚ
(
pÿp_t
 *, );

287 
pÿp_g‘_t¡amp_´ecisiÚ
(
pÿp_t
 *);

288 
pÿp_aùiv©e
(
pÿp_t
 *);

290 
pÿp_li¡_t¡amp_ty³s
(
pÿp_t
 *, **);

291 
pÿp_ä“_t¡amp_ty³s
(*);

292 
pÿp_t¡amp_ty³_Çme_to_v®
(const *);

293 cÚ¡ *
pÿp_t¡amp_ty³_v®_to_Çme
();

294 cÚ¡ *
pÿp_t¡amp_ty³_v®_to_desütiÚ
();

334 
	#PCAP_TSTAMP_HOST
 0

	)

335 
	#PCAP_TSTAMP_HOST_LOWPREC
 1

	)

336 
	#PCAP_TSTAMP_HOST_HIPREC
 2

	)

337 
	#PCAP_TSTAMP_ADAPTER
 3

	)

338 
	#PCAP_TSTAMP_ADAPTER_UNSYNCED
 4

	)

346 
	#PCAP_TSTAMP_PRECISION_MICRO
 0

	)

347 
	#PCAP_TSTAMP_PRECISION_NANO
 1

	)

349 
pÿp_t
 *
pÿp_İ’_live
(const *, , , , *);

350 
pÿp_t
 *
pÿp_İ’_d—d
(, );

351 
pÿp_t
 *
pÿp_İ’_d—d_w™h_t¡amp_´ecisiÚ
(, , 
u_št
);

352 
pÿp_t
 *
pÿp_İ’_ofæše_w™h_t¡amp_´ecisiÚ
(cÚ¡ *, 
u_št
, *);

353 
pÿp_t
 *
pÿp_İ’_ofæše
(const *, *);

354 #ià
defšed
(
WIN32
)

355 
pÿp_t
 *
pÿp_hİ’_ofæše_w™h_t¡amp_´ecisiÚ
(
šŒ_t
, 
u_št
, *);

356 
pÿp_t
 *
pÿp_hİ’_ofæše
(
šŒ_t
, *);

357 #ià!
defšed
(
LIBPCAP_EXPORTS
)

358 
	#pÿp_fİ’_ofæše_w™h_t¡amp_´ecisiÚ
(
f
,
p
,
b
) \

359 
	`pÿp_hİ’_ofæše_w™h_t¡amp_´ecisiÚ
(
	`_g‘_osfhªdË
(
	`_f’o
(
f
)), 
p
, 
b
)

	)

360 
	#pÿp_fİ’_ofæše
(
f
,
b
) \

361 
	`pÿp_hİ’_ofæše
(
	`_g‘_osfhªdË
(
	`_f’o
(
f
)), 
b
)

	)

363 
pÿp_t
 *
pÿp_fİ’_ofæše_w™h_t¡amp_´ecisiÚ
(
FILE
 *, 
u_št
, *);

364 
pÿp_t
 *
pÿp_fİ’_ofæše
(
FILE
 *, *);

367 
pÿp_t
 *
pÿp_fİ’_ofæše_w™h_t¡amp_´ecisiÚ
(
FILE
 *, 
u_št
, *);

368 
pÿp_t
 *
pÿp_fİ’_ofæše
(
FILE
 *, *);

371 
pÿp_şo£
(
pÿp_t
 *);

372 
pÿp_loİ
(
pÿp_t
 *, , 
pÿp_hªdËr
, 
u_ch¬
 *);

373 
pÿp_di¥©ch
(
pÿp_t
 *, , 
pÿp_hªdËr
, 
u_ch¬
 *);

374 cÚ¡ 
u_ch¬
*

375 
pÿp_Ãxt
(
pÿp_t
 *, 
pÿp_pkthdr
 *);

376 
pÿp_Ãxt_ex
(
pÿp_t
 *, 
pÿp_pkthdr
 **, cÚ¡ 
u_ch¬
 **);

377 
pÿp_b»akloİ
(
pÿp_t
 *);

378 
pÿp_¡©s
(
pÿp_t
 *, 
pÿp_¡©
 *);

379 
pÿp_£tf‹r
(
pÿp_t
 *, 
bpf_´og¿m
 *);

380 
pÿp_£tdœeùiÚ
(
pÿp_t
 *, 
pÿp_dœeùiÚ_t
);

381 
pÿp_g‘nÚblock
(
pÿp_t
 *, *);

382 
pÿp_£ŠÚblock
(
pÿp_t
 *, , *);

383 
pÿp_šjeù
(
pÿp_t
 *, cÚ¡ *, 
size_t
);

384 
pÿp_£nd·ck‘
(
pÿp_t
 *, cÚ¡ 
u_ch¬
 *, );

385 cÚ¡ *
pÿp_¡©u¡o¡r
();

386 cÚ¡ *
pÿp_¡»¼Ü
();

387 *
pÿp_g‘”r
(
pÿp_t
 *);

388 
pÿp_³¼Ü
(
pÿp_t
 *, *);

389 
pÿp_compe
(
pÿp_t
 *, 
bpf_´og¿m
 *, const *, ,

390 
bpf_u_št32
);

391 
pÿp_compe_nİÿp
(, , 
bpf_´og¿m
 *,

392 cÚ¡ *, , 
bpf_u_št32
);

393 
pÿp_ä“code
(
bpf_´og¿m
 *);

394 
pÿp_ofæše_f‹r
(cÚ¡ 
bpf_´og¿m
 *,

395 cÚ¡ 
pÿp_pkthdr
 *, cÚ¡ 
u_ch¬
 *);

396 
pÿp_d©®šk
(
pÿp_t
 *);

397 
pÿp_d©®šk_ext
(
pÿp_t
 *);

398 
pÿp_li¡_d©®šks
(
pÿp_t
 *, **);

399 
pÿp_£t_d©®šk
(
pÿp_t
 *, );

400 
pÿp_ä“_d©®šks
(*);

401 
pÿp_d©®šk_Çme_to_v®
(const *);

402 cÚ¡ *
pÿp_d©®šk_v®_to_Çme
();

403 cÚ¡ *
pÿp_d©®šk_v®_to_desütiÚ
();

404 
pÿp_¢­shÙ
(
pÿp_t
 *);

405 
pÿp_is_sw­³d
(
pÿp_t
 *);

406 
pÿp_majÜ_v”siÚ
(
pÿp_t
 *);

407 
pÿp_mšÜ_v”siÚ
(
pÿp_t
 *);

410 
FILE
 *
pÿp_fe
(
pÿp_t
 *);

411 
pÿp_f’o
(
pÿp_t
 *);

413 
pÿp_dum³r_t
 *
pÿp_dump_İ’
(
pÿp_t
 *, const *);

414 
pÿp_dum³r_t
 *
pÿp_dump_fİ’
(
pÿp_t
 *, 
FILE
 *
å
);

415 
FILE
 *
pÿp_dump_fe
(
pÿp_dum³r_t
 *);

416 
pÿp_dump_á–l
(
pÿp_dum³r_t
 *);

417 
pÿp_dump_æush
(
pÿp_dum³r_t
 *);

418 
pÿp_dump_şo£
(
pÿp_dum³r_t
 *);

419 
pÿp_dump
(
u_ch¬
 *, cÚ¡ 
pÿp_pkthdr
 *, const u_char *);

421 
pÿp_fšd®ldevs
(
pÿp_if_t
 **, *);

422 
pÿp_ä“®ldevs
(
pÿp_if_t
 *);

424 cÚ¡ *
pÿp_lib_v”siÚ
();

433 #iâdeà
__N‘BSD__


434 
u_št
 
bpf_f‹r
(cÚ¡ 
bpf_š¢
 *, cÚ¡ 
u_ch¬
 *, u_int, u_int);

436 
bpf_v®id©e
(cÚ¡ 
bpf_š¢
 *
f
, 
Ën
);

437 *
bpf_image
(cÚ¡ 
bpf_š¢
 *, );

438 
bpf_dump
(cÚ¡ 
bpf_´og¿m
 *, );

440 #ià
defšed
(
WIN32
)

446 
pÿp_£tbuff
(
pÿp_t
 *
p
, 
dim
);

447 
pÿp_£tmode
(
pÿp_t
 *
p
, 
mode
);

448 
pÿp_£tmštocİy
(
pÿp_t
 *
p
, 
size
);

449 
Ad­‹r
 *
pÿp_g‘_ad­‹r
(
pÿp_t
 *
p
);

451 #ifdeà
WPCAP


453 
	~<Wš32-Ex‹nsiÚs.h
>

456 
	#MODE_CAPT
 0

	)

457 
	#MODE_STAT
 1

	)

458 
	#MODE_MON
 2

	)

460 #–ià
defšed
(
MSDOS
)

466 
pÿp_¡©s_ex
 (
pÿp_t
 *, 
pÿp_¡©_ex
 *);

467 
pÿp_£t_wa™
 (
pÿp_t
 *
p
, (*
y›ld
)(), 
wa™
);

468 
u_lÚg
 
pÿp_mac_·ck‘s
 ();

476 
pÿp_g‘_£ËùabË_fd
(
pÿp_t
 *);

480 #ifdeà
__ılu¥lus


	@/usr/include/rpc/netdb.h

36 #iâdeà
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<ã©u»s.h
>

41 
	#__Ãed_size_t


	)

42 
	~<¡ddef.h
>

44 
__BEGIN_DECLS


46 
	s½ûÁ


48 *
	mr_Çme
;

49 **
	mr_®Ÿ£s
;

50 
	mr_numb”
;

53 
	$£ŒpûÁ
 (
__¡ayİ’
è
__THROW
;

54 
	$’d½ûÁ
 (è
__THROW
;

55 
½ûÁ
 *
	$g‘½cbyÇme
 (cÚ¡ *
__Çme
è
__THROW
;

56 
½ûÁ
 *
	$g‘½cbynumb”
 (
__numb”
è
__THROW
;

57 
½ûÁ
 *
	$g‘½ûÁ
 (è
__THROW
;

59 #ifdeà
__USE_MISC


60 
	$g‘½cbyÇme_r
 (cÚ¡ *
__Çme
, 
½ûÁ
 *
__»suÉ_buf
,

61 *
__bufãr
, 
size_t
 
__buæ’
,

62 
½ûÁ
 **
__»suÉ
è
__THROW
;

64 
	$g‘½cbynumb”_r
 (
__numb”
, 
½ûÁ
 *
__»suÉ_buf
,

65 *
__bufãr
, 
size_t
 
__buæ’
,

66 
½ûÁ
 **
__»suÉ
è
__THROW
;

68 
	$g‘½ûÁ_r
 (
½ûÁ
 *
__»suÉ_buf
, *
__bufãr
,

69 
size_t
 
__buæ’
, 
½ûÁ
 **
__»suÉ
è
__THROW
;

72 
__END_DECLS


	@/usr/include/sched.h

19 #iâdef 
_SCHED_H


20 
	#_SCHED_H
 1

	)

22 
	~<ã©u»s.h
>

25 
	~<b™s/ty³s.h
>

27 
	#__Ãed_size_t


	)

28 
	~<¡ddef.h
>

30 
	#__Ãed_time_t


	)

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

34 #iâdeà
__pid_t_defšed


35 
__pid_t
 
	tpid_t
;

36 
	#__pid_t_defšed


	)

41 
	~<b™s/sched.h
>

43 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

46 
__BEGIN_DECLS


49 
	$sched_£¬am
 (
__pid_t
 
__pid
, cÚ¡ 
sched_·¿m
 *
__·¿m
)

50 
__THROW
;

53 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

56 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

57 cÚ¡ 
sched_·¿m
 *
__·¿m
è
__THROW
;

60 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

63 
	$sched_y›ld
 (è
__THROW
;

66 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

69 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

72 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

75 #ifdeà
__USE_GNU


77 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

78 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

80 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

81 
ıu£
)

	)

82 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

83 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

86 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

87 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

88 
ıu£
)

	)

89 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

90 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

92 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

93 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

94 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

97 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

103 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

105 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

107 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

110 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

111 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

112 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

116 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

117 cÚ¡ 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

120 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

121 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

124 
__END_DECLS


	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_SVID


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

23 
__off_t
 
	m__pos
;

24 
__mb¡©e_t
 
	m__¡©e
;

25 } 
	t_G_åos_t
;

28 
__off64_t
 
	m__pos
;

29 
__mb¡©e_t
 
	m__¡©e
;

30 } 
	t_G_åos64_t
;

31 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


32 
	~<gcÚv.h
>

35 
__gcÚv_šfo
 
	m__cd
;

38 
__gcÚv_šfo
 
	m__cd
;

39 
__gcÚv_¡•_d©a
 
	m__d©a
;

40 } 
	m__combšed
;

41 } 
	t_G_icÚv_t
;

46 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

48 
	#_G_HAVE_MMAP
 1

	)

49 
	#_G_HAVE_MREMAP
 1

	)

51 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

54 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

56 
	#_G_BUFSIZ
 8192

	)

	@/usr/include/linux/posix_types.h

1 #iâdeà
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<lšux/¡ddef.h
>

21 #undeà
__FD_SETSIZE


22 
	#__FD_SETSIZE
 1024

	)

25 
	mfds_b™s
[
__FD_SETSIZE
 / (8 * ())];

26 } 
	t__k”Ãl_fd_£t
;

29 (*
	t__k”Ãl_sighªdËr_t
)();

32 
	t__k”Ãl_key_t
;

33 
	t__k”Ãl_mqd_t
;

35 
	~<asm/posix_ty³s.h
>

	@/usr/include/net/if_arp.h

22 #iâdeà
_NET_IF_ARP_H


24 
	#_NET_IF_ARP_H
 1

	)

25 
	~<sys/cdefs.h
>

27 
	~<sys/ty³s.h
>

28 
	~<sys/sock‘.h
>

30 
	g__BEGIN_DECLS


33 
	#MAX_ADDR_LEN
 7

	)

39 
	#ARPOP_REQUEST
 1

	)

40 
	#ARPOP_REPLY
 2

	)

41 
	#ARPOP_RREQUEST
 3

	)

42 
	#ARPOP_RREPLY
 4

	)

43 
	#ARPOP_InREQUEST
 8

	)

44 
	#ARPOP_InREPLY
 9

	)

45 
	#ARPOP_NAK
 10

	)

54 
	s¬phdr


56 
	m¬_hrd
;

57 
	m¬_´o
;

58 
	m¬_hÊ
;

59 
	m¬_¶n
;

60 
	m¬_İ
;

64 
	m__¬_sha
[
ETH_ALEN
];

65 
	m__¬_s
[4];

66 
	m__¬_tha
[
ETH_ALEN
];

67 
	m__¬_t
[4];

73 
	#ARPHRD_NETROM
 0

	)

74 
	#ARPHRD_ETHER
 1

	)

75 
	#ARPHRD_EETHER
 2

	)

76 
	#ARPHRD_AX25
 3

	)

77 
	#ARPHRD_PRONET
 4

	)

78 
	#ARPHRD_CHAOS
 5

	)

79 
	#ARPHRD_IEEE802
 6

	)

80 
	#ARPHRD_ARCNET
 7

	)

81 
	#ARPHRD_APPLETLK
 8

	)

82 
	#ARPHRD_DLCI
 15

	)

83 
	#ARPHRD_ATM
 19

	)

84 
	#ARPHRD_METRICOM
 23

	)

85 
	#ARPHRD_IEEE1394
 24

	)

86 
	#ARPHRD_EUI64
 27

	)

87 
	#ARPHRD_INFINIBAND
 32

	)

90 
	#ARPHRD_SLIP
 256

	)

91 
	#ARPHRD_CSLIP
 257

	)

92 
	#ARPHRD_SLIP6
 258

	)

93 
	#ARPHRD_CSLIP6
 259

	)

94 
	#ARPHRD_RSRVD
 260

	)

95 
	#ARPHRD_ADAPT
 264

	)

96 
	#ARPHRD_ROSE
 270

	)

97 
	#ARPHRD_X25
 271

	)

98 
	#ARPHRD_HWX25
 272

	)

99 
	#ARPHRD_PPP
 512

	)

100 
	#ARPHRD_CISCO
 513

	)

101 
	#ARPHRD_HDLC
 
ARPHRD_CISCO


	)

102 
	#ARPHRD_LAPB
 516

	)

103 
	#ARPHRD_DDCMP
 517

	)

104 
	#ARPHRD_RAWHDLC
 518

	)

106 
	#ARPHRD_TUNNEL
 768

	)

107 
	#ARPHRD_TUNNEL6
 769

	)

108 
	#ARPHRD_FRAD
 770

	)

109 
	#ARPHRD_SKIP
 771

	)

110 
	#ARPHRD_LOOPBACK
 772

	)

111 
	#ARPHRD_LOCALTLK
 773

	)

112 
	#ARPHRD_FDDI
 774

	)

113 
	#ARPHRD_BIF
 775

	)

114 
	#ARPHRD_SIT
 776

	)

115 
	#ARPHRD_IPDDP
 777

	)

116 
	#ARPHRD_IPGRE
 778

	)

117 
	#ARPHRD_PIMREG
 779

	)

118 
	#ARPHRD_HIPPI
 780

	)

119 
	#ARPHRD_ASH
 781

	)

120 
	#ARPHRD_ECONET
 782

	)

121 
	#ARPHRD_IRDA
 783

	)

122 
	#ARPHRD_FCPP
 784

	)

123 
	#ARPHRD_FCAL
 785

	)

124 
	#ARPHRD_FCPL
 786

	)

125 
	#ARPHRD_FCFABRIC
 787

	)

126 
	#ARPHRD_IEEE802_TR
 800

	)

127 
	#ARPHRD_IEEE80211
 801

	)

128 
	#ARPHRD_IEEE80211_PRISM
 802

	)

129 
	#ARPHRD_IEEE80211_RADIOTAP
 803

	)

130 
	#ARPHRD_IEEE802154
 804

	)

131 
	#ARPHRD_IEEE802154_PHY
 805

	)

133 
	#ARPHRD_VOID
 0xFFFF

	)

134 
	#ARPHRD_NONE
 0xFFFE

	)

138 
	s¬´eq


140 
sockaddr
 
	m¬p_·
;

141 
sockaddr
 
	m¬p_ha
;

142 
	m¬p_æags
;

143 
sockaddr
 
	m¬p_Ãtmask
;

144 
	m¬p_dev
[16];

147 
	s¬´eq_Şd


149 
sockaddr
 
	m¬p_·
;

150 
sockaddr
 
	m¬p_ha
;

151 
	m¬p_æags
;

152 
sockaddr
 
	m¬p_Ãtmask
;

156 
	#ATF_COM
 0x02

	)

157 
	#ATF_PERM
 0x04

	)

158 
	#ATF_PUBL
 0x08

	)

159 
	#ATF_USETRAILERS
 0x10

	)

160 
	#ATF_NETMASK
 0x20

	)

162 
	#ATF_DONTPUB
 0x40

	)

163 
	#ATF_MAGIC
 0x80

	)

167 
	#ARPD_UPDATE
 0x01

	)

168 
	#ARPD_LOOKUP
 0x02

	)

169 
	#ARPD_FLUSH
 0x03

	)

171 
	s¬pd_»que¡


173 
	m»q
;

174 
u_št32_t
 
	m
;

175 
	mdev
;

176 
	m¡amp
;

177 
	mupd©ed
;

178 
	mha
[
MAX_ADDR_LEN
];

181 
	g__END_DECLS


	@/usr/include/pcap/bpf.h

73 #ià!
defšed
(
_NET_BPF_H_
è&& !defšed(
_BPF_H_
è&& !defšed(
_H_BPF
è&& !defšed(
lib_pÿp_bpf_h
)

74 
	#lib_pÿp_bpf_h


	)

76 #ifdeà
__ılu¥lus


81 
	#BPF_RELEASE
 199606

	)

83 #ifdeà
MSDOS


84 
	tbpf_št32
;

85 
	tbpf_u_št32
;

87 
	tbpf_št32
;

88 
u_št
 
	tbpf_u_št32
;

97 #iâdeà
__N‘BSD__


98 
	#BPF_ALIGNMENT
 (
bpf_št32
)

	)

100 
	#BPF_ALIGNMENT
 ()

	)

102 
	#BPF_WORDALIGN
(
x
è(((x)+(
BPF_ALIGNMENT
-1))&~(BPF_ALIGNMENT-1))

	)

107 
	sbpf_´og¿m
 {

108 
u_št
 
bf_Ën
;

109 
bpf_š¢
 *
bf_š¢s
;

134 
	#DLT_NULL
 0

	)

135 
	#DLT_EN10MB
 1

	)

136 
	#DLT_EN3MB
 2

	)

137 
	#DLT_AX25
 3

	)

138 
	#DLT_PRONET
 4

	)

139 
	#DLT_CHAOS
 5

	)

140 
	#DLT_IEEE802
 6

	)

141 
	#DLT_ARCNET
 7

	)

142 
	#DLT_SLIP
 8

	)

143 
	#DLT_PPP
 9

	)

144 
	#DLT_FDDI
 10

	)

155 
	#DLT_ATM_RFC1483
 11

	)

157 #ifdeà
__O³nBSD__


158 
	#DLT_RAW
 14

	)

160 
	#DLT_RAW
 12

	)

169 #ià
defšed
(
__N‘BSD__
è|| defšed(
__F»eBSD__
)

170 #iâdeà
DLT_SLIP_BSDOS


171 
	#DLT_SLIP_BSDOS
 13

	)

172 
	#DLT_PPP_BSDOS
 14

	)

175 
	#DLT_SLIP_BSDOS
 15

	)

176 
	#DLT_PPP_BSDOS
 16

	)

207 #ià
defšed
(
__O³nBSD__
è|| defšed(
__N‘BSD__
è|| defšed(
__D¿gÚFly__
è|| defšed(
__APPLE__
)

208 
	#DLT_PFSYNC
 18

	)

211 
	#DLT_ATM_CLIP
 19

	)

217 
	#DLT_REDBACK_SMARTEDGE
 32

	)

224 
	#DLT_PPP_SERIAL
 50

	)

225 
	#DLT_PPP_ETHER
 51

	)

234 
	#DLT_SYMANTEC_FIREWALL
 99

	)

253 
	#DLT_MATCHING_MIN
 104

	)

269 
	#DLT_C_HDLC
 104

	)

270 
	#DLT_CHDLC
 
DLT_C_HDLC


	)

272 
	#DLT_IEEE802_11
 105

	)

287 
	#DLT_FRELAY
 107

	)

296 #ifdeà
__O³nBSD__


297 
	#DLT_LOOP
 12

	)

299 
	#DLT_LOOP
 108

	)

307 #ifdeà
__O³nBSD__


308 
	#DLT_ENC
 13

	)

310 
	#DLT_ENC
 109

	)

323 
	#DLT_LINUX_SLL
 113

	)

328 
	#DLT_LTALK
 114

	)

333 
	#DLT_ECONET
 115

	)

338 
	#DLT_IPFILTER
 116

	)

343 
	#DLT_PFLOG
 117

	)

348 
	#DLT_CISCO_IOS
 118

	)

355 
	#DLT_PRISM_HEADER
 119

	)

361 
	#DLT_AIRONET_HEADER
 120

	)

401 #ifdeà
__F»eBSD__


402 
	#DLT_PFSYNC
 121

	)

404 
	#DLT_HHDLC
 121

	)

415 
	#DLT_IP_OVER_FC
 122

	)

431 
	#DLT_SUNATM
 123

	)

437 
	#DLT_RIO
 124

	)

438 
	#DLT_PCI_EXP
 125

	)

439 
	#DLT_AURORA
 126

	)

446 
	#DLT_IEEE802_11_RADIO
 127

	)

456 
	#DLT_TZSP
 128

	)

469 
	#DLT_ARCNET_LINUX
 129

	)

477 
	#DLT_JUNIPER_MLPPP
 130

	)

478 
	#DLT_JUNIPER_MLFR
 131

	)

479 
	#DLT_JUNIPER_ES
 132

	)

480 
	#DLT_JUNIPER_GGSN
 133

	)

481 
	#DLT_JUNIPER_MFR
 134

	)

482 
	#DLT_JUNIPER_ATM2
 135

	)

483 
	#DLT_JUNIPER_SERVICES
 136

	)

484 
	#DLT_JUNIPER_ATM1
 137

	)

501 
	#DLT_APPLE_IP_OVER_IEEE1394
 138

	)

507 
	#DLT_MTP2_WITH_PHDR
 139

	)

508 
	#DLT_MTP2
 140

	)

509 
	#DLT_MTP3
 141

	)

510 
	#DLT_SCCP
 142

	)

515 
	#DLT_DOCSIS
 143

	)

532 
	#DLT_LINUX_IRDA
 144

	)

537 
	#DLT_IBM_SP
 145

	)

538 
	#DLT_IBM_SN
 146

	)

565 
	#DLT_USER0
 147

	)

566 
	#DLT_USER1
 148

	)

567 
	#DLT_USER2
 149

	)

568 
	#DLT_USER3
 150

	)

569 
	#DLT_USER4
 151

	)

570 
	#DLT_USER5
 152

	)

571 
	#DLT_USER6
 153

	)

572 
	#DLT_USER7
 154

	)

573 
	#DLT_USER8
 155

	)

574 
	#DLT_USER9
 156

	)

575 
	#DLT_USER10
 157

	)

576 
	#DLT_USER11
 158

	)

577 
	#DLT_USER12
 159

	)

578 
	#DLT_USER13
 160

	)

579 
	#DLT_USER14
 161

	)

580 
	#DLT_USER15
 162

	)

592 
	#DLT_IEEE802_11_RADIO_AVS
 163

	)

600 
	#DLT_JUNIPER_MONITOR
 164

	)

605 
	#DLT_BACNET_MS_TP
 165

	)

621 
	#DLT_PPP_PPPD
 166

	)

627 
	#DLT_PPP_WITH_DIRECTION
 
DLT_PPP_PPPD


	)

628 
	#DLT_LINUX_PPP_WITHDIRECTION
 
DLT_PPP_PPPD


	)

636 
	#DLT_JUNIPER_PPPOE
 167

	)

637 
	#DLT_JUNIPER_PPPOE_ATM
 168

	)

639 
	#DLT_GPRS_LLC
 169

	)

640 
	#DLT_GPF_T
 170

	)

641 
	#DLT_GPF_F
 171

	)

647 
	#DLT_GCOM_T1E1
 172

	)

648 
	#DLT_GCOM_SERIAL
 173

	)

655 
	#DLT_JUNIPER_PIC_PEER
 174

	)

663 
	#DLT_ERF_ETH
 175

	)

664 
	#DLT_ERF_POS
 176

	)

672 
	#DLT_LINUX_LAPD
 177

	)

681 
	#DLT_JUNIPER_ETHER
 178

	)

682 
	#DLT_JUNIPER_PPP
 179

	)

683 
	#DLT_JUNIPER_FRELAY
 180

	)

684 
	#DLT_JUNIPER_CHDLC
 181

	)

689 
	#DLT_MFR
 182

	)

697 
	#DLT_JUNIPER_VP
 183

	)

706 
	#DLT_A429
 184

	)

713 
	#DLT_A653_ICM
 185

	)

719 
	#DLT_USB
 186

	)

725 
	#DLT_BLUETOOTH_HCI_H4
 187

	)

731 
	#DLT_IEEE802_16_MAC_CPS
 188

	)

737 
	#DLT_USB_LINUX
 189

	)

746 
	#DLT_CAN20B
 190

	)

752 
	#DLT_IEEE802_15_4_LINUX
 191

	)

758 
	#DLT_PPI
 192

	)

764 
	#DLT_IEEE802_16_MAC_CPS_RADIO
 193

	)

772 
	#DLT_JUNIPER_ISM
 194

	)

780 
	#DLT_IEEE802_15_4
 195

	)

786 
	#DLT_SITA
 196

	)

793 
	#DLT_ERF
 197

	)

800 
	#DLT_RAIF1
 198

	)

807 
	#DLT_IPMB
 199

	)

814 
	#DLT_JUNIPER_ST
 200

	)

820 
	#DLT_BLUETOOTH_HCI_H4_WITH_PHDR
 201

	)

829 
	#DLT_AX25_KISS
 202

	)

836 
	#DLT_LAPD
 203

	)

844 
	#DLT_PPP_WITH_DIR
 204

	)

845 
	#DLT_C_HDLC_WITH_DIR
 205

	)

846 
	#DLT_FRELAY_WITH_DIR
 206

	)

847 
	#DLT_LAPB_WITH_DIR
 207

	)

858 
	#DLT_IPMB_LINUX
 209

	)

864 
	#DLT_FLEXRAY
 210

	)

871 
	#DLT_MOST
 211

	)

878 
	#DLT_LIN
 212

	)

884 
	#DLT_X2E_SERIAL
 213

	)

890 
	#DLT_X2E_XORAYA
 214

	)

901 
	#DLT_IEEE802_15_4_NONASK_PHY
 215

	)

909 
	#DLT_LINUX_EVDEV
 216

	)

916 
	#DLT_GSMTAP_UM
 217

	)

917 
	#DLT_GSMTAP_ABIS
 218

	)

924 
	#DLT_MPLS
 219

	)

930 
	#DLT_USB_LINUX_MMAPPED
 220

	)

936 
	#DLT_DECT
 221

	)

947 
	#DLT_AOS
 222

	)

956 
	#DLT_WIHART
 223

	)

962 
	#DLT_FC_2
 224

	)

976 
	#DLT_FC_2_WITH_FRAME_DELIMS
 225

	)

1024 
	#DLT_IPNET
 226

	)

1033 
	#DLT_CAN_SOCKETCAN
 227

	)

1039 
	#DLT_IPV4
 228

	)

1040 
	#DLT_IPV6
 229

	)

1047 
	#DLT_IEEE802_15_4_NOFCS
 230

	)

1065 
	#DLT_DBUS
 231

	)

1071 
	#DLT_JUNIPER_VS
 232

	)

1072 
	#DLT_JUNIPER_SRX_E2E
 233

	)

1073 
	#DLT_JUNIPER_FIBRECHANNEL
 234

	)

1085 
	#DLT_DVB_CI
 235

	)

1092 
	#DLT_MUX27010
 236

	)

1098 
	#DLT_STANAG_5066_D_PDU
 237

	)

1104 
	#DLT_JUNIPER_ATM_CEMIC
 238

	)

1112 
	#DLT_NFLOG
 239

	)

1122 
	#DLT_NETANALYZER
 240

	)

1133 
	#DLT_NETANALYZER_TRANSPARENT
 241

	)

1140 
	#DLT_IPOIB
 242

	)

1147 
	#DLT_MPEG_2_TS
 243

	)

1155 
	#DLT_NG40
 244

	)

1165 
	#DLT_NFC_LLCP
 245

	)

1174 #ià!
defšed
(
__F»eBSD__
è&& !defšed(
__O³nBSD__
è&& !defšed(
__N‘BSD__
è&& !defšed(
__D¿gÚFly__
è&& !defšed(
__APPLE__
)

1175 
	#DLT_PFSYNC
 246

	)

1183 
	#DLT_INFINIBAND
 247

	)

1190 
	#DLT_SCTP
 248

	)

1197 
	#DLT_USBPCAP
 249

	)

1205 
	#DLT_RTAC_SERIAL
 250

	)

1212 
	#DLT_BLUETOOTH_LE_LL
 251

	)

1225 
	#DLT_WIRESHARK_UPPER_PDU
 252

	)

1227 
	#DLT_MATCHING_MAX
 252

	)

1234 
	#DLT_CLASS
(
x
è((xè& 0x03ff0000)

	)

1243 
	#DLT_CLASS_NETBSD_RAWAF
 0x02240000

	)

1244 
	#DLT_NETBSD_RAWAF
(
af
è(
DLT_CLASS_NETBSD_RAWAF
 | (af))

	)

1245 
	#DLT_NETBSD_RAWAF_AF
(
x
è((xè& 0x0000ffff)

	)

1246 
	#DLT_IS_NETBSD_RAWAF
(
x
è(
	`DLT_CLASS
(xè=ğ
DLT_CLASS_NETBSD_RAWAF
)

	)

1253 
	#BPF_CLASS
(
code
è((codeè& 0x07)

	)

1254 
	#BPF_LD
 0x00

	)

1255 
	#BPF_LDX
 0x01

	)

1256 
	#BPF_ST
 0x02

	)

1257 
	#BPF_STX
 0x03

	)

1258 
	#BPF_ALU
 0x04

	)

1259 
	#BPF_JMP
 0x05

	)

1260 
	#BPF_RET
 0x06

	)

1261 
	#BPF_MISC
 0x07

	)

1264 
	#BPF_SIZE
(
code
è((codeè& 0x18)

	)

1265 
	#BPF_W
 0x00

	)

1266 
	#BPF_H
 0x08

	)

1267 
	#BPF_B
 0x10

	)

1268 
	#BPF_MODE
(
code
è((codeè& 0xe0)

	)

1269 
	#BPF_IMM
 0x00

	)

1270 
	#BPF_ABS
 0x20

	)

1271 
	#BPF_IND
 0x40

	)

1272 
	#BPF_MEM
 0x60

	)

1273 
	#BPF_LEN
 0x80

	)

1274 
	#BPF_MSH
 0xa0

	)

1277 
	#BPF_OP
(
code
è((codeè& 0xf0)

	)

1278 
	#BPF_ADD
 0x00

	)

1279 
	#BPF_SUB
 0x10

	)

1280 
	#BPF_MUL
 0x20

	)

1281 
	#BPF_DIV
 0x30

	)

1282 
	#BPF_OR
 0x40

	)

1283 
	#BPF_AND
 0x50

	)

1284 
	#BPF_LSH
 0x60

	)

1285 
	#BPF_RSH
 0x70

	)

1286 
	#BPF_NEG
 0x80

	)

1287 
	#BPF_JA
 0x00

	)

1288 
	#BPF_JEQ
 0x10

	)

1289 
	#BPF_JGT
 0x20

	)

1290 
	#BPF_JGE
 0x30

	)

1291 
	#BPF_JSET
 0x40

	)

1292 
	#BPF_SRC
(
code
è((codeè& 0x08)

	)

1293 
	#BPF_K
 0x00

	)

1294 
	#BPF_X
 0x08

	)

1297 
	#BPF_RVAL
(
code
è((codeè& 0x18)

	)

1298 
	#BPF_A
 0x10

	)

1301 
	#BPF_MISCOP
(
code
è((codeè& 0xf8)

	)

1302 
	#BPF_TAX
 0x00

	)

1303 
	#BPF_TXA
 0x80

	)

1308 
	sbpf_š¢
 {

1309 
u_shÜt
 
code
;

1310 
u_ch¬
 
jt
;

1311 
u_ch¬
 
jf
;

1312 
bpf_u_št32
 
k
;

1318 
	#BPF_STMT
(
code
, 
k
è{ (
u_shÜt
)(code), 0, 0, k }

	)

1319 
	#BPF_JUMP
(
code
, 
k
, 
jt
, 
jf
è{ (
u_shÜt
)(code), jt, jf, k }

	)

1321 #ià
__STDC__
 || 
defšed
(
__ılu¥lus
)

1322 
bpf_v®id©e
(cÚ¡ 
bpf_š¢
 *, );

1323 
u_št
 
bpf_f‹r
(cÚ¡ 
bpf_š¢
 *, cÚ¡ 
u_ch¬
 *, u_int, u_int);

1325 
bpf_v®id©e
();

1326 
u_št
 
bpf_f‹r
();

1332 
	#BPF_MEMWORDS
 16

	)

1334 #ifdeà
__ılu¥lus


	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

54 
	#__STDC_ISO_10646__
 201103L

	)

57 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/gconv.h

22 #iâdeà
_GCONV_H


23 
	#_GCONV_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	#__Ãed_mb¡©e_t


	)

27 
	#__Ãed_wšt_t


	)

28 
	~<wch¬.h
>

29 
	#__Ãed_size_t


	)

30 
	#__Ãed_wch¬_t


	)

31 
	~<¡ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

59 
	m__GCONV_SWAP
 = 0x0004

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
) (*, const *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
) (const *, const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 cÚ¡ *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/linux/stddef.h

	@/usr/include/wchar.h

23 #iâdeà
_WCHAR_H


25 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


26 
	#_WCHAR_H
 1

	)

27 
	~<ã©u»s.h
>

30 #ifdeà
_WCHAR_H


32 
	#__Ãed___FILE


	)

33 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_FILE


	)

36 
	~<¡dio.h
>

38 
	#__Ãed___va_li¡


	)

39 
	~<¡d¬g.h
>

41 
	~<b™s/wch¬.h
>

44 
	#__Ãed_size_t


	)

45 
	#__Ãed_wch¬_t


	)

46 
	#__Ãed_NULL


	)

48 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


49 #undeà
__Ãed_wšt_t


50 
	#__Ãed_wšt_t


	)

51 
	~<¡ddef.h
>

55 #iâdeà
_WINT_T


60 
	#_WINT_T


	)

61 
	twšt_t
;

65 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

66 && 
defšed
 
__WINT_TYPE__


67 
__BEGIN_NAMESPACE_STD


68 
__WINT_TYPE__
 
	twšt_t
;

69 
	g__END_NAMESPACE_STD


74 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

75 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

79 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
____mb¡©e_t_defšed


80 
	#____mb¡©e_t_defšed
 1

	)

84 
	m__couÁ
;

87 #ifdeà
__WINT_TYPE__


88 
__WINT_TYPE__
 
	m__wch
;

90 
wšt_t
 
	m__wch
;

92 
	m__wchb
[4];

93 } 
	m__v®ue
;

94 } 
	t__mb¡©e_t
;

96 #undeà
__Ãed_mb¡©e_t


101 #ifdeà
_WCHAR_H


103 #iâdeà
__mb¡©e_t_defšed


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 
	#__mb¡©e_t_defšed
 1

	)

111 #ifdeà
__USE_GNU


112 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

115 #iâdeà
WCHAR_MIN


117 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

118 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

121 #iâdeà
WEOF


122 
	#WEOF
 (0xffffffffu)

	)

127 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


128 
	~<wùy³.h
>

132 
__BEGIN_DECLS


134 
__BEGIN_NAMESPACE_STD


137 
tm
;

138 
__END_NAMESPACE_STD


142 
	$__USING_NAMESPACE_STD
(
tm
)

145 
__BEGIN_NAMESPACE_STD


147 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

150 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

151 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

152 
__THROW
;

155 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

158 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

159 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

160 
__THROW
;

163 
	$wcscmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
)

164 
__THROW
 
__©Œibu‹_pu»__
;

166 
	$wc¢cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

167 
__THROW
 
__©Œibu‹_pu»__
;

168 
__END_NAMESPACE_STD


170 #ifdeà
__USE_XOPEN2K8


172 
	$wcsÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

175 
	$wc¢ÿ£cmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

176 
size_t
 
__n
è
__THROW
;

180 
	~<xloÿË.h
>

182 
	$wcsÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

183 
__loÿË_t
 
__loc
è
__THROW
;

185 
	$wc¢ÿ£cmp_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

186 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

189 
__BEGIN_NAMESPACE_STD


192 
	$wcscŞl
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

196 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

197 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

198 
__END_NAMESPACE_STD


200 #ifdeà
__USE_XOPEN2K8


206 
	$wcscŞl_l
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

207 
__loÿË_t
 
__loc
è
__THROW
;

212 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
,

213 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

216 
wch¬_t
 *
	$wcsdup
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

219 
__BEGIN_NAMESPACE_STD


221 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


222 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

223 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 "C++" cÚ¡ 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

227 
wch¬_t
 *
	$wcschr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

228 
__THROW
 
__©Œibu‹_pu»__
;

231 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


232 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

233 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 "C++" cÚ¡ 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

237 
wch¬_t
 *
	$wc¤chr
 (cÚ¡ 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

238 
__THROW
 
__©Œibu‹_pu»__
;

240 
__END_NAMESPACE_STD


242 #ifdeà
__USE_GNU


245 
wch¬_t
 *
	$wcschºul
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

246 
__THROW
 
__©Œibu‹_pu»__
;

249 
__BEGIN_NAMESPACE_STD


252 
size_t
 
	$wcsc¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__»jeù
)

253 
__THROW
 
__©Œibu‹_pu»__
;

256 
size_t
 
	$wcs¥n
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

257 
__THROW
 
__©Œibu‹_pu»__
;

259 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


260 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

262 "C++" cÚ¡ 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
,

263 cÚ¡ 
wch¬_t
 *
__acû±
)

264 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

266 
wch¬_t
 *
	$wc¥brk
 (cÚ¡ 
wch¬_t
 *
__wcs
, cÚ¡ wch¬_ˆ*
__acû±
)

267 
__THROW
 
__©Œibu‹_pu»__
;

270 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


271 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

273 "C++" cÚ¡ 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

274 cÚ¡ 
wch¬_t
 *
__ÃedË
)

275 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

277 
wch¬_t
 *
	$wcs¡r
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

278 
__THROW
 
__©Œibu‹_pu»__
;

282 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

283 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__d–im
,

284 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

287 
size_t
 
	$wc¦’
 (cÚ¡ 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

288 
__END_NAMESPACE_STD


290 #ifdeà
__USE_XOPEN


292 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


293 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

295 "C++" cÚ¡ 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
,

296 cÚ¡ 
wch¬_t
 *
__ÃedË
)

297 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

299 
wch¬_t
 *
	$wcswcs
 (cÚ¡ 
wch¬_t
 *
__hay¡ack
, cÚ¡ wch¬_ˆ*
__ÃedË
)

300 
__THROW
 
__©Œibu‹_pu»__
;

304 #ifdeà
__USE_XOPEN2K8


306 
size_t
 
	$wc¢Ën
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

307 
__THROW
 
__©Œibu‹_pu»__
;

311 
__BEGIN_NAMESPACE_STD


313 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


314 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

316 "C++" cÚ¡ 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

317 
size_t
 
__n
)

318 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

320 
wch¬_t
 *
	$wmemchr
 (cÚ¡ 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

321 
__THROW
 
__©Œibu‹_pu»__
;

325 
	$wmemcmp
 (cÚ¡ 
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

326 
__THROW
 
__©Œibu‹_pu»__
;

329 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

330 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

334 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

335 
__THROW
;

338 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdeà
__USE_GNU


344 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

345 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

346 
__THROW
;

350 
__BEGIN_NAMESPACE_STD


353 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

357 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

361 
	$mbsš™
 (cÚ¡ 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

365 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

366 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

367 
mb¡©e_t
 *
__»¡riù
 
__p
è
__THROW
;

370 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

371 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$__mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
size_t
 
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

377 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

378 
__END_NAMESPACE_STD


380 #ifdeà
__USE_EXTERN_INLINES


386 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

387 
__ex‹º_šlše
 
wšt_t


388 
	`__NTH
 (
	$btowc
 (
__c
))

389 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

390 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

392 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

393 
__ex‹º_šlše
 

394 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

395 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

396 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

398 
__ex‹º_šlše
 
size_t


399 
__NTH
 (
	$mb¾’
 (cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
,

400 
mb¡©e_t
 *
__»¡riù
 
__ps
))

401 {  (
__ps
 !ğ
NULL


402 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

405 
__BEGIN_NAMESPACE_STD


408 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

409 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

410 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

415 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

416 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

417 
__END_NAMESPACE_STD


420 #ifdef 
__USE_XOPEN2K8


423 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

424 cÚ¡ **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

425 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

429 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

430 cÚ¡ 
wch¬_t
 **
__»¡riù
 
__¤c
,

431 
size_t
 
__nwc
, size_ˆ
__Ën
,

432 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

437 #ifdeà
__USE_XOPEN


439 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

443 
	$wcswidth
 (cÚ¡ 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

447 
__BEGIN_NAMESPACE_STD


450 
	$wc¡od
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

451 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

452 
__END_NAMESPACE_STD


454 #ifdeà
__USE_ISOC99


455 
__BEGIN_NAMESPACE_C99


457 
	$wc¡of
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
	$wc¡Şd
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

460 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

461 
__END_NAMESPACE_C99


465 
__BEGIN_NAMESPACE_STD


468 
	$wc¡Ş
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

469 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

473 
	$wc¡oul
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

474 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

475 
__THROW
;

476 
__END_NAMESPACE_STD


478 #ifdeà
__USE_ISOC99


479 
__BEGIN_NAMESPACE_C99


482 
__ex‹nsiÚ__


483 
	$wc¡Şl
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

484 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

485 
__THROW
;

489 
__ex‹nsiÚ__


490 
	$wc¡ouÎ
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

491 
wch¬_t
 **
__»¡riù
 
__’d±r
,

492 
__ba£
è
__THROW
;

493 
__END_NAMESPACE_C99


496 #ifdeà
__USE_GNU


499 
__ex‹nsiÚ__


500 
	$wc¡oq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

501 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

502 
__THROW
;

506 
__ex‹nsiÚ__


507 
	$wc¡ouq
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

508 
wch¬_t
 **
__»¡riù
 
__’d±r
,

509 
__ba£
è
__THROW
;

512 #ifdeà
__USE_GNU


526 
	~<xloÿË.h
>

530 
	$wc¡Ş_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

531 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

532 
__loÿË_t
 
__loc
è
__THROW
;

534 
	$wc¡oul_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

535 
wch¬_t
 **
__»¡riù
 
__’d±r
,

536 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

538 
__ex‹nsiÚ__


539 
	$wc¡Şl_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

540 
wch¬_t
 **
__»¡riù
 
__’d±r
,

541 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

543 
__ex‹nsiÚ__


544 
	$wc¡ouÎ_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

545 
wch¬_t
 **
__»¡riù
 
__’d±r
,

546 
__ba£
, 
__loÿË_t
 
__loc
)

547 
__THROW
;

549 
	$wc¡od_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

550 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

551 
__THROW
;

553 
	$wc¡of_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

554 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

555 
__THROW
;

557 
	$wc¡Şd_l
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

558 
wch¬_t
 **
__»¡riù
 
__’d±r
,

559 
__loÿË_t
 
__loc
è
__THROW
;

563 #ifdeà
__USE_XOPEN2K8


566 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

567 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

571 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

572 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

573 
__THROW
;

580 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

583 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


584 
__BEGIN_NAMESPACE_STD


587 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

594 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

595 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

601 
	`w´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

605 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

606 
__THROW
 ;

612 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

613 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

614 
__gnuc_va_li¡
 
__¬g
)

620 
	`vw´štf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

621 
__gnuc_va_li¡
 
__¬g
)

625 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

626 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

627 
__gnuc_va_li¡
 
__¬g
)

628 
__THROW
 ;

635 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

636 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

642 
	`wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
	$swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

646 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

647 
__THROW
 ;

649 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

650 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

651 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

652 #ifdeà
__REDIRECT


656 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

657 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

658 
__isoc99_fwsÿnf
)

660 
	`__REDIRECT
 (
wsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

661 
__isoc99_wsÿnf
)

663 
	`__REDIRECT_NTH
 (
swsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

664 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

665 ...), 
__isoc99_swsÿnf
)

668 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

669 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	`__isoc99_wsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

671 
	$__isoc99_swsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

672 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

673 
__THROW
;

674 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

675 
	#wsÿnf
 
__isoc99_wsÿnf


	)

676 
	#swsÿnf
 
__isoc99_swsÿnf


	)

680 
__END_NAMESPACE_STD


683 #ifdeà
__USE_ISOC99


684 
__BEGIN_NAMESPACE_C99


689 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

690 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

691 
__gnuc_va_li¡
 
__¬g
)

697 
	`vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

698 
__gnuc_va_li¡
 
__¬g
)

701 
	$vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

702 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

703 
__gnuc_va_li¡
 
__¬g
)

704 
__THROW
 ;

706 #ià!
defšed
 
__USE_GNU
 \

707 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

708 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

709 #ifdeà
__REDIRECT


710 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

711 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

712 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

714 
	`__REDIRECT
 (
vwsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

715 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

717 
	`__REDIRECT_NTH
 (
vswsÿnf
, (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

718 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

719 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

722 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

723 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	`__isoc99_vwsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

726 
__gnuc_va_li¡
 
__¬g
);

727 
	$__isoc99_vswsÿnf
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__s
,

728 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

729 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

730 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

731 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

732 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

736 
__END_NAMESPACE_C99


740 
__BEGIN_NAMESPACE_STD


745 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

746 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

752 
wšt_t
 
	`g‘wch¬
 ();

759 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

760 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

766 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

774 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

775 
__FILE
 *
__»¡riù
 
__¡»am
);

781 
	`åutws
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

782 
__FILE
 *
__»¡riù
 
__¡»am
);

789 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

790 
__END_NAMESPACE_STD


793 #ifdeà
__USE_GNU


801 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

802 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

810 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

818 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

828 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

837 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

838 
__FILE
 *
__»¡riù
 
__¡»am
);

846 
	`åutws_uÆocked
 (cÚ¡ 
wch¬_t
 *
__»¡riù
 
__ws
,

847 
__FILE
 *
__»¡riù
 
__¡»am
);

851 
__BEGIN_NAMESPACE_C99


855 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

856 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

857 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

858 
__END_NAMESPACE_C99


860 #ifdeà
__USE_GNU


861 
	~<xloÿË.h
>

865 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

866 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

867 cÚ¡ 
tm
 *
__»¡riù
 
__
,

868 
__loÿË_t
 
__loc
è
__THROW
;

877 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


878 
	#__Ãed_iswxxx


	)

879 
	~<wùy³.h
>

883 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


884 
	~<b™s/wch¬2.h
>

887 #ifdeà
__LDBL_COMPAT


888 
	~<b™s/wch¬-ldbl.h
>

891 
__END_DECLS


899 #undeà
__Ãed_mb¡©e_t


900 #undeà
__Ãed_wšt_t


	@/usr/include/wctype.h

23 #iâdeà
_WCTYPE_H


25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 #iâdeà
__Ãed_iswxxx


29 
	#_WCTYPE_H
 1

	)

32 
	#__Ãed_wšt_t


	)

33 
	~<wch¬.h
>

37 #iâdeà
WEOF


38 
	#WEOF
 (0xffffffffu)

	)

41 #undeà
__Ãed_iswxxx


46 #iâdeà
__iswxxx_defšed


47 
	#__iswxxx_defšed
 1

	)

49 
__BEGIN_NAMESPACE_C99


52 
	twùy³_t
;

53 
	g__END_NAMESPACE_C99


55 #iâdeà
_ISwb™


60 
	~<’dŸn.h
>

61 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


62 
	#_ISwb™
(
b™
è(1 << (b™))

	)

64 
	#_ISwb™
(
b™
) \

65 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

66 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

67 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

68 : (è((1UL << (
b™
)è>> 24))))

	)

73 
	m__ISwuµ”
 = 0,

74 
	m__ISwlow”
 = 1,

75 
	m__ISw®pha
 = 2,

76 
	m__ISwdig™
 = 3,

77 
	m__ISwxdig™
 = 4,

78 
	m__ISw¥aû
 = 5,

79 
	m__ISw´št
 = 6,

80 
	m__ISwg¿ph
 = 7,

81 
	m__ISwbÏnk
 = 8,

82 
	m__ISwúŒl
 = 9,

83 
	m__ISwpunù
 = 10,

84 
	m__ISw®num
 = 11,

86 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

87 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

88 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

89 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

90 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

91 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

92 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

93 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

94 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

95 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

96 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

97 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

102 
__BEGIN_DECLS


104 
__BEGIN_NAMESPACE_C99


111 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

117 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

120 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

124 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

128 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

133 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

136 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

141 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

146 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

151 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

156 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

161 #ifdeà
__USE_ISOC99


162 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

171 
wùy³_t
 
	$wùy³
 (cÚ¡ *
__´İ”ty
è
__THROW
;

175 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

176 
__END_NAMESPACE_C99


183 
__BEGIN_NAMESPACE_C99


186 cÚ¡ 
	t__št32_t
 *
	twù¿ns_t
;

187 
__END_NAMESPACE_C99


188 #ifdeà
__USE_GNU


189 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

192 
__BEGIN_NAMESPACE_C99


194 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

197 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

198 
__END_NAMESPACE_C99


200 
__END_DECLS


207 #ifdeà
_WCTYPE_H


213 
__BEGIN_DECLS


215 
__BEGIN_NAMESPACE_C99


218 
wù¿ns_t
 
	$wù¿ns
 (cÚ¡ *
__´İ”ty
è
__THROW
;

221 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

222 
__END_NAMESPACE_C99


224 #ifdeà
__USE_XOPEN2K8


226 
	~<xloÿË.h
>

230 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

236 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

239 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

243 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

247 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

252 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

255 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

260 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

265 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

270 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

275 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

280 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

284 
wùy³_t
 
	$wùy³_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

285 
__THROW
;

289 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

290 
__THROW
;

298 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

301 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

305 
wù¿ns_t
 
	$wù¿ns_l
 (cÚ¡ *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

306 
__THROW
;

309 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

310 
__loÿË_t
 
__loÿË
è
__THROW
;

314 
__END_DECLS


	@
1
.
1
/usr/include
172
6815
build/src_hardware_indep/actions.c
build/src_hardware_indep/actions.h
build/src_hardware_indep/controlplane.c
build/src_hardware_indep/data_plane_data.h
build/src_hardware_indep/dataplane.c
build/src_hardware_indep/generated_metadata.h
build/src_hardware_indep/parser.c
build/src_hardware_indep/parser.h
build/src_hardware_indep/tables.c
examples/p4_src/includes/p4_l2_features.h
src/hardware_dep/dpdk/ctrl_plane/controller.c
src/hardware_dep/dpdk/ctrl_plane/controller.h
src/hardware_dep/dpdk/ctrl_plane/ctrl_plane_backend.c
src/hardware_dep/dpdk/ctrl_plane/ctrl_plane_backend.h
src/hardware_dep/dpdk/ctrl_plane/dpdk_controller.c
src/hardware_dep/dpdk/ctrl_plane/fifo.c
src/hardware_dep/dpdk/ctrl_plane/fifo.h
src/hardware_dep/dpdk/ctrl_plane/handlers.c
src/hardware_dep/dpdk/ctrl_plane/handlers.h
src/hardware_dep/dpdk/ctrl_plane/messages.c
src/hardware_dep/dpdk/ctrl_plane/messages.h
src/hardware_dep/dpdk/ctrl_plane/sock_helpers.c
src/hardware_dep/dpdk/ctrl_plane/sock_helpers.h
src/hardware_dep/dpdk/ctrl_plane/tests/test_backend.c
src/hardware_dep/dpdk/ctrl_plane/tests/test_messages.c
src/hardware_dep/dpdk/ctrl_plane/threadpool.c
src/hardware_dep/dpdk/ctrl_plane/threadpool.h
src/hardware_dep/dpdk/data_plane/dpdk_lib.c
src/hardware_dep/dpdk/data_plane/dpdk_primitives.c
src/hardware_dep/dpdk/data_plane/dpdk_tables.c
src/hardware_dep/dpdk/includes/aliases.h
src/hardware_dep/dpdk/includes/dpdk_lib.h
src/hardware_dep/dpdk/includes/dpdk_tables.h
src/hardware_dep/dpdk/main.c
src/hardware_dep/dpdk/main_dpdk_main_loop.c
src/hardware_dep/dpdk/main_dpdk_main_loop_simulator.c
src/hardware_dep/odp/ctrl_plane/controller.c
src/hardware_dep/odp/ctrl_plane/controller.h
src/hardware_dep/odp/ctrl_plane/ctrl_plane_backend.c
src/hardware_dep/odp/ctrl_plane/ctrl_plane_backend.h
src/hardware_dep/odp/ctrl_plane/dpdk_controller.c
src/hardware_dep/odp/ctrl_plane/fifo.c
src/hardware_dep/odp/ctrl_plane/fifo.h
src/hardware_dep/odp/ctrl_plane/handlers.c
src/hardware_dep/odp/ctrl_plane/handlers.h
src/hardware_dep/odp/ctrl_plane/messages.c
src/hardware_dep/odp/ctrl_plane/messages.h
src/hardware_dep/odp/ctrl_plane/odp_controller.c
src/hardware_dep/odp/ctrl_plane/sock_helpers.c
src/hardware_dep/odp/ctrl_plane/sock_helpers.h
src/hardware_dep/odp/ctrl_plane/tests/test_backend.c
src/hardware_dep/odp/ctrl_plane/tests/test_messages.c
src/hardware_dep/odp/ctrl_plane/threadpool.c
src/hardware_dep/odp/ctrl_plane/threadpool.h
src/hardware_dep/odp/data_plane/odp_lib.c
src/hardware_dep/odp/data_plane/odp_primitives.c
src/hardware_dep/odp/data_plane/odp_tables.c
src/hardware_dep/odp/includes/aliases.h
src/hardware_dep/odp/includes/odp_lib.h
src/hardware_dep/odp/includes/odp_tables.h
src/hardware_dep/odp/main.c
src/hardware_dep/odp/main_dpdk_main_loop_simulator.c
src/hardware_dep/odp/main_odp.c
src/hardware_dep/odp/main_odp_main_loop_simulator.c
src/hardware_dep/pcap/ctrl_plane/control_plane.c
src/hardware_dep/pcap/ctrl_plane/control_plane_actions.c
src/hardware_dep/pcap/ctrl_plane/control_plane_actions.h
src/hardware_dep/pcap/ctrl_plane/control_plane_generate_digest.c
src/hardware_dep/pcap/data_plane/constants.c
src/hardware_dep/pcap/data_plane/data_plane.c
src/hardware_dep/pcap/data_plane/mac_learning_example_main.c
src/hardware_dep/pcap/data_plane/table_utils.c
src/hardware_dep/pcap/data_plane/utils.c
src/hardware_dep/pcap/includes/p4_hw_lib.h
src/hardware_dep/pcap/includes/p4_hw_tables.h
src/hardware_dep/pcap/includes/standard_metadata.h
src/hardware_dep/shared/ctrl_plane/controller.c
src/hardware_dep/shared/ctrl_plane/controller.h
src/hardware_dep/shared/ctrl_plane/ctrl_plane_backend.c
src/hardware_dep/shared/ctrl_plane/ctrl_plane_backend.h
src/hardware_dep/shared/ctrl_plane/dpdk_controller.c
src/hardware_dep/shared/ctrl_plane/dpdk_l3-full_controller.c
src/hardware_dep/shared/ctrl_plane/dpdk_l3_controller.c
src/hardware_dep/shared/ctrl_plane/fifo.c
src/hardware_dep/shared/ctrl_plane/fifo.h
src/hardware_dep/shared/ctrl_plane/handlers.c
src/hardware_dep/shared/ctrl_plane/handlers.h
src/hardware_dep/shared/ctrl_plane/messages.c
src/hardware_dep/shared/ctrl_plane/messages.h
src/hardware_dep/shared/ctrl_plane/sock_helpers.c
src/hardware_dep/shared/ctrl_plane/sock_helpers.h
src/hardware_dep/shared/ctrl_plane/tests/test_backend.c
src/hardware_dep/shared/ctrl_plane/tests/test_messages.c
src/hardware_dep/shared/ctrl_plane/threadpool.c
src/hardware_dep/shared/ctrl_plane/threadpool.h
src/hardware_dep/shared/data_plane/ternary_naive.c
src/hardware_dep/shared/includes/backend.h
src/hardware_dep/shared/includes/dataplane.h
src/hardware_dep/shared/includes/ternary_naive.h
src/hardware_dep/spider/data_plane/shared_primitives.c
src/hardware_dep/spider/data_plane/spider_primitives.c
src/hardware_dep/spider/data_plane/spider_tables.c
src/hardware_dep/spider/data_plane/ternary_naive.c
src/hardware_dep/spider/handle_packet.c
src/hardware_dep/spider/includes/aliases.h
src/hardware_dep/spider/includes/backend.h
src/hardware_dep/spider/includes/dataplane.h
src/hardware_dep/spider/includes/spider_tables.h
src/hardware_dep/spider/includes/standard_metadata.h
src/hardware_dep/spider/includes/ternary_naive.h
tests/dpdk_actions+tables/action_info.h
tests/dpdk_actions+tables/ctrl_plane.c
tests/dpdk_actions+tables/data_plane.c
tests/dpdk_actions+tables/data_plane_data.h
tests/dpdk_actions+tables/header_info.h
tests/dpdk_actions+tables/parser.c
tests/dpdk_actions+tables/parser.h
tests/dpdk_actions+tables/switch.c
tests/dpdk_actions+tables/table_info.h
tests/dpdk_actions/actions.c
tests/dpdk_actions/data_plane.c
tests/dpdk_actions/data_plane_data.h
tests/dpdk_actions/header_info.h
tests/dpdk_actions/parser.h
tests/dpdk_tables/data_plane.c
tests/dpdk_tables/data_plane_data.h
tests/dpdk_tables/header_info.h
tests/dpdk_tables/parser.h
tests/dpdk_tables/tables.c
tools/sendRawIP.c
/usr/include/aliases.h
/usr/include/arpa/inet.h
/usr/include/assert.h
/usr/include/getopt.h
/usr/include/inttypes.h
/usr/include/linux/if_packet.h
/usr/include/net/ethernet.h
/usr/include/net/if.h
/usr/include/netdb.h
/usr/include/netinet/ether.h
/usr/include/netinet/in.h
/usr/include/netinet/ip.h
/usr/include/pcap.h
/usr/include/pthread.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/libio.h
/usr/include/linux/if_ether.h
/usr/include/linux/types.h
/usr/include/netinet/if_ether.h
/usr/include/pcap/pcap.h
/usr/include/rpc/netdb.h
/usr/include/sched.h
/usr/include/time.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/linux/posix_types.h
/usr/include/net/if_arp.h
/usr/include/pcap/bpf.h
/usr/include/stdc-predef.h
/usr/include/gconv.h
/usr/include/linux/stddef.h
/usr/include/wchar.h
/usr/include/wctype.h
